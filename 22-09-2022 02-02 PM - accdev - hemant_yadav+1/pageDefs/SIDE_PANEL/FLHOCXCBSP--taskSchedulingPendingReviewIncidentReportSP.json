{"pageContext":{},"actionOnLoad":["@actions.enableRecordGrid","@actions.fetchDiscontinueTaskData","@actions.fireProcessEventForTaskReviewFetchData","@actions.processResponseData","@actions.calculatedActualTaskDuration"],"children":[],"jslib":{"isFinalEvidenceHidden":"function (pageContext) { if( typeof pageContext.showFinalEvidenceGrid != 'undefined' &&  pageContext.showFinalEvidenceGrid == true ) { return false; } else { return true; } }","isViewProgressReportHidden":"function (pageContext) { var flag = true; if ( Array.isArray(pageContext.workOrderTaskResult)  &&pageContext.workOrderTaskResult.length > 0  && JSON.stringify(pageContext.workOrderTaskResult).indexOf('submitType') > 0) { for (var i = 0; i < pageContext.workOrderTaskResult.length; i++) { if ((typeof pageContext.workOrderTaskResult[i].initialEvidenceDataGrid !== 'undefined' && pageContext.workOrderTaskResult[i].initialEvidenceDataGrid.length > 0) || (typeof pageContext.workOrderTaskResult[i].submitProgressEvidenceDataGrid !== 'undefined' && pageContext.workOrderTaskResult[i].submitProgressEvidenceDataGrid.length > 0) || (typeof pageContext.workOrderTaskResult[i].servicesDataGrid !== 'undefined' && pageContext.workOrderTaskResult[i].servicesDataGrid.length > 0)) { flag = false; } else { flag = true; } } }return flag; }","isAssignedUserHidden":"function(pageContext) { return (typeof pageContext.responseData !=='undefined' && pageContext.responseData.length > 0 && typeof pageContext.responseData[0].data[0].crewData !== 'undefined' && pageContext.responseData[0].data[0].crewData.length>0); }","isServicesHidden":"function (pageContext) { if( typeof pageContext.selectedFilterForView !== 'undefined' && pageContext.selectedFilterForView === 'byServices'){return false;}else{return true;} }","isTaskResultHidden":"function (pageContext) { return !(pageContext.statusId==='workOrderTaskCompleted'|| pageContext.statusId==='workOrderTaskCancelled'); }","isAssignedCrewHidden":"function (pageContext) { return (typeof pageContext.responseData === 'undefined' || pageContext.responseData === '' || typeof pageContext.responseData[0].data[0].crewData === 'undefined' || pageContext.responseData[0].data[0].crewData === ''); }","isCancelTaskHidden":"function(pageContext){return(pageContext.status === 'workOrderTaskCancelled' || pageContext.status === 'workOrderTaskCompleted');}","isAppointmentWindowHidden":"function(pageContext){return !(pageContext.workOrderTaskAppointmentBasedFlag)}","isDeleteTaskHidden":"function(pageContext){return(pageContext.status === 'workOrderTaskPendingReview' || pageContext.status === 'workOrderTaskSiteChangeRequest');}","isSumbitDisabled":"function(pageContext){if (pageContext.incidentReviewResult === '' || typeof pageContext.incidentReviewResult === 'undefined') {return true;} else if (pageContext.incidentReviewResult === 'approve') {return false;}else if (pageContext.incidentReviewResult === 'reject') {return ((pageContext.rejectionReason === '' ||typeof pageContext.rejectionReason === 'undefined') || (pageContext.taskReviewLogAction === '' || typeof pageContext.taskReviewLogAction === 'undefined'))}}","isPriceListItemHidden":"function(pageContext){return ((pageContext.status === 'workOrderTaskScheduled' && pageContext.workOrderTaskReOpenCount === 0)|| pageContext.status === 'workOrderTaskOpen'  || pageContext.status === 'workOrderTaskDispatched' || pageContext.status === 'workOrderTaskInTransit')}","isServicesDeliveredHidden":"function (pageContext) { if( typeof pageContext.showServicesDeliveredGrid != 'undefined' &&  pageContext.showServicesDeliveredGrid == true ) { return false; } else { return true; } }","isPreviousAssigneeHidden":"function (pageContext) { return !(typeof pageContext.previousAssignees !== 'undefined' && pageContext.previousAssignees.length > 0); }","isInitialEvidenceHidden":"function (pageContext) { if( typeof pageContext.showInitialEvidenceGrid != 'undefined' &&  pageContext.showInitialEvidenceGrid == true ) { return false; } else { return true; } }","isCalendarView":"function(pageContext){ if (pageContext.subAction === 'calendarViewTask' || pageContext.taskTypeWebTask === true) {return true;}}","hasCustomerSignature":"function(pageContext){if(typeof pageContext.customerSignature=='undefined' || pageContext.customerSignature==''){return true;}}","isServiceTabHidden":"function(pageContext) { return !(pageContext.workOrderTaskService === true) ; }","isSubmittedProgressHidden":"function (pageContext) { if( typeof pageContext.selectedFilterForView !== 'undefined' &&  pageContext.selectedFilterForView === 'byDate'){return false;}else{return true;} }","isSelectedServicesHidden":"function (pageContext) { if( typeof pageContext.showSelectedServicesGrid != 'undefined' &&  pageContext.showSelectedServicesGrid == true ) { return false; } else { return true; } }","viewTaskResult":"function(pageContext){ return (pageContext.workOrderTaskAction === 'view')}","isActionCompleted":"function(pageContext){ return (pageContext.workOrderTaskAction === 'completed' || pageContext.workOrderTaskAction === 'view')}"},"header":{"leftData":{"children":[]},"children":[{"statusColor":"@pageContext.statusNameColor","id":"status","type":"status","value":"@pageContext.statusName"},{"buttonType":"secondary","actionOnClick":["@actions.cancelTaskModal"],"id":"cancelTask","type":"button","title":"@lang.['ct4','Cancel Task']"},{"buttonType":"primary","actionOnClick":["@actions.setSubAction","@actions.fireProcessEventForTaskReviewLogWF","@actions.fireProcessEventForWorkOrderTask","@actions.closePanel","@actions.refreshDataGrid"],"disabled":"@jslib.isSumbitDisabled","id":"submit","type":"button","title":"@lang.['s20','Submit']"},{"icon":"@iconlib.NavigationCloseGrey","actionOnClick":["@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"id":"close","type":"buttonIcon"}],"title":"@lang.['ir','Incident Review']"},"body":{"children":[{"children":[{"children":[{"children":[{"isRequired":true,"actionOnChange":[],"options":[{"name":"@lang.['sbtst','Send back to same techician']","id":"workOrderTaskDispatched"},{"name":"@lang.['rfsar','Reopen for scheduling and reassignment']","id":"workOrderTaskReopened"}],"disabled":"@jslib.isActionCompleted","id":"incidentReviewLogAction","optTitleKey":"name","optValueKey":"id","title":"@lang.['incidentReviewResult','Incident Review Result']","type":"select","value":"@pageContext.incidentReviewResult","placeHolder":"@lang.['co','Choose option']"},{"disabled":"@jslib.isActionCompleted","inputType":"text","id":"taskReviewLogReviewNotes","label":"@lang.['rn','Review Notes (Optional)']","type":"textarea","value":"@pageContext.taskReviewLogReviewNotes","placeHolder":"@lang.['en2','Enter notes']"}],"id":"","label":"","type":"section"},{"children":[{"readOnly":true,"id":"incidentType","label":"@lang.['it','Incident Type']","type":"input","value":"@pageContext.incidentType"},{"readOnly":true,"id":"reason","label":"@lang.['r5','Reason']","type":"input","value":"@pageContext.travelIncidentReason"},{"readOnly":true,"id":"description","label":"@lang.['d','Description']","type":"input","value":"@pageContext.reportIssueDescription"},{"readOnly":true,"id":"action","label":"@lang.['action','Action']","type":"input","value":"@pageContext.reportIssueType"}],"label":"@lang.['gi','General Information']","id":"generalInformation","type":"section"},{"children":[{"aspectRation":"","id":"photoEvidenceOne","label":"@lang.['pe','Photo Evidence']","type":"image","value":"@pageContext.reportIssuePhotoFirstMedia"},{"hidden":"@pageContext.evidenceOne","disabled":true,"inputType":"text","id":"notesOne","label":"@lang.['n3','Notes']","type":"textarea","value":"@pageContext.reportIssuePhotoFirstComment"},{"hidden":"@jslib.isPhoto2Hidden","aspectRation":"","id":"photoEvidenceTwo","label":"@lang.['pe','Photo Evidence']","type":"image","value":"@pageContext.reportIssuePhotoSecondMedia"},{"hidden":"@jslib.isPhoto2Hidden","disabled":true,"inputType":"text","id":"notesTwo","label":"@lang.['n3','Notes']","type":"textarea","value":"@pageContext.reportIssuePhotoSecondComment"}],"id":"photoEvidence","label":"@lang.['pe','Photo Evidence']","type":"section"},{"children":[{"readOnly":true,"id":"reportedBy","label":"@lang.['rb2','Reported By']","type":"input","value":"@pageContext.userName"},{"readOnly":true,"id":"contact","label":"@lang.['c18','Contact']","type":"input","value":"@pageContext.userPhoneNumber"},{"readOnly":true,"id":"submissionTime","title":"@lang.['st9','Submission Time']","type":"datetime","value":"@pageContext.reportIssueCapturedTime"}],"label":"@lang.['sd7','Submission Details']","id":"submissionDetails","type":"section"}],"label":"@lang.['ir2','Incident Report']","type":"tab"},{"hidden":false,"children":[{"hidden":"@jslib.isTaskResultHidden","children":[{"readOnly":true,"id":"taskReviewResult","label":"@lang.['trr','Task Review Result']","type":"input","value":"@pageContext.taskReviewResult","placeHolder":""},{"readOnly":true,"id":"taskReviewLogReviewNotes","label":"@lang.['reviewNotes','Review Notes']","type":"textarea","value":"@pageContext.taskReviewLogReviewNotes","placeHolder":""}],"id":"taskResult","label":"@lang.['tr1','Task Review']","type":"section"},{"children":[{"readOnly":true,"id":"taskType","label":"@lang.['taskType','Task Type']","placeholder":"@lang.['taskType','Task Type']","type":"input","value":"@pageContext.taskTypeName"},{"readOnly":true,"id":"customerCompanyName","label":"@lang.['cn2','Customer Name']","type":"input","value":"@pageContext.customerCompanyName"},{"readOnly":true,"id":"siteName","label":"@lang.['cs','Customer Site']","type":"input","value":"@pageContext.siteName"},{"readOnly":true,"id":"workOrderDeadline","label":"@lang.['wod1','Work Order Deadline']","type":"input","value":"@pageContext.workOrderDeadline"}],"id":"","label":"","type":"section"},{"hidden":"@jslib.isViewProgressReportHidden","children":[{"children":[{"actionOnChange":["@actions.setTimeZoneAndLocale","@actions.decisionActionForFilter","@actions.viewChange"],"options":[{"label":"@lang.['d3','Date']","value":"byDate"},{"label":"@lang.['navS3','Services']","value":"byServices"}],"id":"dropdown","label":"@lang.['vprb','View Progress Reports By']","optTitleKey":"label","optValueKey":"value","title":"@lang.['vprb','View Progress Reports By']","type":"dropdown","value":"@pageContext.dropdown","placeHolder":"@lang.['so','Select option']","hoverText":{"title":"@lang.['tdtfiwywtrsftmtbdh','This determines the format in which you want the results submitted from the mobile to be displayed here.']"}}],"label":"","id":"filterDropdown","type":"section","transparent":true}],"id":"viewProgressReportsBy","label":"","type":"section","transparent":false},{"hidden":"@jslib.isSubmittedProgressHidden","children":[{"id":"submittedProgressData","type":"dataGrid","jsonDef":{"pageContextConfig":{"enable":true,"isPaginationReqd":false,"tableData":{"source":"@pageContext.taskProgressDataByDate[0].taskProgressDataByDate"}},"isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsVisiblePurple","name":"@lang.['vtr','View Task Results']","icon":"@iconlib.ActionsVisibleGrey","tooltip":"@lang.['v1','View']","actionOnClick":["@actions.openProgressEvidenceNSP"],"type":"buttonIcon"}]},"gridRefreshId":"submittedProgressDataGrid","emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['nprhbsy','NO PROGRESS REPORTS HAVE BEEN SUBMITTED YET']","type":"noData"},"tableHeader":[{"name":"@lang.['so1','Submitted On']","options":{"flex":1.4,"showLabel":true},"key":"date","primaryKey":true},{"name":"@lang.['sd12','Services Delivered']","options":{"flex":1.4,"showLabel":true},"key":"servicesDeliveredCount"},{"name":"@lang.['initialEvidence','Initial Evidence']","options":{"flex":1.4,"showLabel":true},"key":"initialEvidenceCount"},{"name":"@lang.['pr','Progress Reports']","options":{"flex":1.4,"showLabel":true},"key":"submitProgressArrayCount"},{"hidden":true,"name":"@lang.['fe','Final Evidence']","options":{},"key":"finalEvidenceCount","primaryKey":true}],"actionOnLoad":[],"dataSourceId":"query/read","jslib":{"isViewResultsByDateDisabled":"function (pageContext) { if( typeof pageContext.selectedRowIds != 'undefined' &&  pageContext.selectedRowIds.length > 0 ) { return false; } else { return true; } }"},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['sp4','Submitted Progress']","children":[{"buttonType":"primary","actionOnClick":["@actions.decisionIfDateSelected"],"disabled":"@jslib.isViewResultsByDateDisabled","id":"viewResults","type":"button","title":"@lang.['vr','View Results']"}]},"isSelectable":true,"actions":[{"falseStep":[],"trueStep":["@actions.setSelectedDates","@actions.processTaskProgressDataByDate","@actions.setFlagsToShowInitialEvidenceAndServicesDelivered","@actions.refreshDataGrids"],"name":"decisionIfDateSelected","type":"decision","actionDef":"function (pageContext) { if( typeof pageContext.selectedRowIds != 'undefined' &&  pageContext.selectedRowIds.length > 0 ) { return true; } else { return false; } }"},{"name":"setSelectedDates","type":"script","actionDef":"function (pageContext) { if ( typeof pageContext.selectedRowIds != 'undefined' &&  pageContext.selectedRowIds.length > 0 ) { pageContext.selectedDates = []; pageContext.selectedRowIds.forEach(function(element) { pageContext.selectedDates.push(element.date); });} }"},{"name":"openProgressEvidenceNSP","type":"openPanel","pageId":"6KCJEOE5UP"},{"name":"refreshDataGrids","gridId":["servicesDeliveredDataGrid","initialEvidenceDataGrid","finalEvidenceDataGrid"],"type":"RefreshGridOnSidePanel"},{"name":"setFlagsToShowInitialEvidenceAndServicesDelivered","type":"script","actionDef":"function (pageContext) { if (typeof pageContext.selectedRowIds !== 'undefined' && pageContext.selectedRowIds.length > 0) { if (typeof pageContext.initialEvidenceGridData !== 'undefined' && pageContext.initialEvidenceGridData.length > 0) { pageContext.showInitialEvidenceGrid = true; } else { pageContext.showInitialEvidenceGrid = false; } if (typeof pageContext.finalEvidenceMainDatagrid !== 'undefined' && pageContext.finalEvidenceMainDatagrid.length > 0) { pageContext.showFinalEvidenceGrid = true; } else { pageContext.showFinalEvidenceGrid = false; } if (typeof pageContext.servicesData !== 'undefined' && pageContext.servicesData !== '' && pageContext.servicesData.length > 0) { pageContext.showServicesDeliveredGrid = true; } else { pageContext.showServicesDeliveredGrid = false; } } }"},{"name":"processTaskProgressDataByDate","type":"script","actionDef":"function (pageContext) { if (typeof pageContext.taskProgressDataByDate != 'undefined' && pageContext.taskProgressDataByDate != '' && pageContext.taskProgressDataByDate.length > 0) { pageContext.initialComments = pageContext.taskProgressDataByDate[0].taskProgressDataByDate[0].initialComments; pageContext.finalComments = pageContext.taskProgressDataByDate[0].taskProgressDataByDate[0].finalComments; pageContext.filteredTaskProgressDataByDate = pageContext.taskProgressDataByDate[0].taskProgressDataByDate.filter(function (element) { if (pageContext.selectedDates.indexOf(element.date) > -1) { return true; } else { return false; } }); pageContext.initialEvidenceGridData = []; pageContext.servicesData = []; pageContext.finalEvidenceMainDatagrid = []; pageContext.filteredTaskProgressDataByDate.forEach(function (element) { if (typeof element.initialEvidence !== 'undefined' && element.initialEvidence.length > 0) { element.initialEvidence.forEach(function (ele) { pageContext.initialEvidenceGridData.push(ele); }); } if (typeof element.servicesData !== 'undefined' && element.servicesData.length > 0) { element.servicesData.forEach(function (e) { pageContext.servicesData.push(e); }); } if (typeof element.finalEvidenceArray !== 'undefined' && element.finalEvidenceArray.length > 0) { element.finalEvidenceArray.forEach(function (ele) { pageContext.finalEvidenceMainDatagrid.push(ele); }); } }); pageContext.finalServicesData = []; pageContext.servicesData.forEach(function (ele) { ele.selectedServiceData.forEach(function (e) { var obj = {}; if (new Date(ele.completedOn).getTime() === new Date(e.addedOn).getTime()) { obj = { ...ele, 'serviceMode': e.serviceMode, 'action': e.serviceModeName, 'actionData': e, 'serviceModeName': e.serviceModeName }; delete obj.selectedServiceData; pageContext.finalServicesData.push(obj); } }); }); } }"}],"searchKeys":["date"],"multiSelect":true}}],"label":"","id":"submittedProgress","type":"section","transparent":true},{"hidden":"@jslib.isServicesHidden","children":[{"id":"servicesGrid","type":"dataGrid","jsonDef":{"pageContextConfig":{"enable":true,"isPaginationReqd":false,"tableData":{"source":"@pageContext.taskProgressDataByServices[0].servicesArrayForTaskProgress"}},"isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{},"gridRefreshId":"servicesDataGrid","emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['si1','Service Id']","options":{"hidden":true,"flex":1.4,"showLabel":false},"key":"id","primaryKey":true},{"name":"@lang.['sn2','Service Name']","options":{"flex":1.4,"showLabel":true},"key":"serviceName","primaryKey":true},{"name":"@lang.['s','Status']","options":{"flex":1.4,"showLabel":true},"key":"serviceStatus"},{"name":"@lang.['r','Records']","options":{"flex":1.4,"showLabel":true},"key":"numberOfServicesUsed"},{"name":"@lang.['sd11','service Data']","options":{"hidden":true,"flex":1.4,"showLabel":false},"key":"servicesData","primaryKey":true}],"singleSelect":true,"actionOnLoad":[],"dataSourceId":"query/read","jslib":{"isViewResultsByServicesDisabled":"function (pageContext) { if( typeof pageContext.selectedRowIds != 'undefined' &&  pageContext.selectedRowIds.length > 0 ) { return false; } else { return true; } }"},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['navS3','Services']","children":[{"buttonType":"primary","actionOnClick":["@actions.setSelectedServicesData","@actions.setFlagsToShowSelectedServices","@actions.refreshSelectedServicesDataGrid"],"disabled":"@jslib.isViewResultsByServicesDisabled","id":"viewResults","type":"button","title":"@lang.['vr','View Results']"}]},"isSelectable":true,"actions":[{"name":"refreshSelectedServicesDataGrid","gridId":["selectedServicesDataGrid"],"type":"RefreshGridOnSidePanel"},{"name":"setSelectedServicesData","type":"script","actionDef":"function (pageContext) { if (typeof pageContext.selectedRowIds !== 'undefined' && pageContext.selectedRowIds.length > 0) { pageContext.selectedServiceName = pageContext.selectedRowIds[0].serviceName; pageContext.selectedServiceData = []; var obj = {}; if (typeof pageContext.selectedRowIds[0].servicesData !== 'undefined') { pageContext.selectedRowIds[0].servicesData.forEach(function (element, index) { obj = { ...element, 'action': element.serviceGridWrapper[index].serviceModeName, 'actionData': element.serviceGridWrapper[index], 'serviceMode': element.serviceGridWrapper[index].serviceMode, 'addedBy': element.serviceGridWrapper[index].addedBy }; delete obj.serviceGridWrapper; pageContext.selectedServiceData.push(obj); }); } } }"},{"name":"setFlagsToShowSelectedServices","type":"script","actionDef":"function(pageContext){pageContext.showSelectedServicesGrid = true;}"}],"searchKeys":["serviceName"]}}],"label":"","id":"services","type":"section","transparent":true},{"hidden":"@jslib.isSelectedServicesHidden","children":[{"id":"selectedServicesData","type":"dataGrid","jsonDef":{"pageContextConfig":{"enable":true,"isPaginationReqd":false,"tableData":{"source":"@pageContext.selectedServiceData"}},"isScrollAble":false,"searchAllowed":false,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsVisiblePurple","name":"@lang.['vtr','View Task Results']","icon":"@iconlib.ActionsVisibleGrey","tooltip":"@lang.['v1','View']","actionOnClick":["@actions.openServicesDeliveredNSP"],"type":"buttonIcon"}]},"gridRefreshId":"selectedServicesDataGrid","emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['s33','serviceId']","options":{"hidden":true,"showLabel":false},"key":"serviceItemId","primaryKey":true},{"name":"@lang.['co3','Completed On']","options":{"flex":1.4,"type":"datetime","showLabel":true},"key":"completedOn","primaryKey":true},{"name":"@lang.['action','Action']","options":{"flex":1,"showLabel":true},"key":"action"},{"name":"@lang.['ua1','Updated Asset']","options":{"flex":1.8,"showLabel":true},"key":"assetName"},{"name":"@lang.['cb1','Captured By']","options":{"flex":1.2,"showLabel":true},"key":"addedBy"}],"dataSourceId":"query/read","jslib":{},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@pageContext.selectedServiceName"},"isSelectable":false,"actions":[{"name":"openServicesDeliveredNSP","type":"openPanel","pageId":"KBFLEOEEL2"}],"searchKeys":[]}}],"label":"","id":"selectedServices","type":"section","transparent":true},{"hidden":"@jslib.isInitialEvidenceHidden","children":[{"children":[{"id":"initialEvidenceData","type":"dataGrid","jsonDef":{"pageContextConfig":{"enable":true,"isPaginationReqd":false,"tableData":{"source":"@pageContext.initialEvidenceGridData"}},"isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsVisiblePurple","name":"@lang.['vtr','View Task Results']","icon":"@iconlib.ActionsVisibleGrey","tooltip":"@lang.['v1','View']","actionOnClick":["@actions.isInitialEvidence","@actions.openInitialEvidenceNSP"],"type":"buttonIcon"}]},"gridRefreshId":"initialEvidenceDataGrid","emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['co2','Captured On']","options":{"type":"datetime","showLabel":true},"key":"initialEvidenceCapturedTime"},{"name":"@lang.['cb1','Captured By']","options":{"showLabel":true},"key":"capturedBy"},{"name":"@lang.['pp2','Photo Preview']","options":{"hidden":false,"showLabel":true},"type":"thumbnail","key":"initialEvidence","fileType":"JPG"},{"name":"@lang.['n3','Notes']","options":{"showLabel":true},"key":"initialEvidenceNotes"}],"dataSourceId":"query/read","jslib":{},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['initialEvidence','Initial Evidence']"},"updateAllowed":true,"isSelectable":false,"actions":[{"name":"openInitialEvidenceNSP","type":"openPanel","pageId":"0BFEEOE9ON"},{"name":"isInitialEvidence","type":"script","actionDef":"function(pageContext){ pageContext.isInitialEvidence=true; pageContext.isFinalEvidence=false;}"}],"searchKeys":["capturedBy"],"multiSelect":false}}],"label":"","id":"initialEvidenceGrid","type":"section","transparent":true},{"children":[{"readOnly":true,"id":"notes","label":"@lang.['n3','Notes']","placeholder":"@lang.['blank4','-']","type":"input","value":"@pageContext.initialComments"}],"label":"","id":"notes","type":"section"}],"label":"@lang.['initialEvidence','Initial Evidence']","id":"initialEvidence","type":"collapseSection","transparent":true},{"hidden":"@jslib.isServicesDeliveredHidden","children":[{"id":"servicesDeliveredData","type":"dataGrid","jsonDef":{"pageContextConfig":{"enable":true,"isPaginationReqd":false,"tableData":{"source":"@pageContext.finalServicesData"}},"isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsVisiblePurple","name":"@lang.['vtr','View Task Results']","icon":"@iconlib.ActionsVisibleGrey","tooltip":"@lang.['v1','View']","actionOnClick":["@actions.openServicesDeliveredNSP"],"type":"buttonIcon"}]},"gridRefreshId":"servicesDeliveredDataGrid","emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['co3','Completed On']","options":{"flex":1.4,"type":"datetime","showLabel":true},"key":"completedOn"},{"name":"@lang.['s21','Service']","options":{"flex":1.4,"showLabel":true},"key":"serviceType"},{"name":"@lang.['action','Action']","options":{"showLabel":true},"key":"serviceModeName"},{"name":"@lang.['ua1','Updated Asset']","options":{"flex":1.8,"showLabel":true},"key":"assetName"},{"name":"@lang.['cb1','Captured By']","options":{"flex":1.2,"showLabel":true},"key":"capturedBy"}],"dataSourceId":"query/read","jslib":{},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['sd12','Services Delivered']"},"isSelectable":false,"actions":[{"name":"openServicesDeliveredNSP","type":"openPanel","pageId":"KBFLEOEEL2"}],"searchKeys":["startDate","endDate","durationInHours"]}}],"label":"@lang.['navS3','Services']","id":"servicesDelivered","type":"collapseSection","transparent":true},{"hidden":"@jslib.isFinalEvidenceHidden","children":[{"children":[{"id":"finalEvidenceMainDatagrid","type":"dataGrid","jsonDef":{"pageContextConfig":{"enable":true,"isPaginationReqd":false,"tableData":{"source":"@pageContext.finalEvidenceMainDatagrid"}},"isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsVisiblePurple","name":"@lang.['vtr','View Task Results']","icon":"@iconlib.ActionsVisibleGrey","tooltip":"@lang.['v1','View']","actionOnClick":["@actions.isFinalEvidence","@actions.openFinalEvidenceNSP"],"type":"buttonIcon"}]},"gridRefreshId":"finalEvidenceDataGrid","emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['co2','Captured On']","options":{"type":"datetime","showLabel":true},"key":"finalEvidenceCapturedTime"},{"name":"@lang.['cb1','Captured By']","options":{"showLabel":true},"key":"submittedBy"},{"name":"@lang.['pp2','Photo Preview']","options":{"hidden":false,"showLabel":true},"type":"thumbnail","key":"finalEvidence","fileType":"JPG"},{"name":"@lang.['n3','Notes']","options":{"showLabel":true},"key":"finalEvidenceNotes"}],"dataSourceId":"query/read","jslib":{},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['fer','Final Evidence Recorded']"},"updateAllowed":true,"isSelectable":false,"actions":[{"name":"openFinalEvidenceNSP","type":"openPanel","pageId":"0BFEEOE9ON"},{"name":"isFinalEvidence","type":"script","actionDef":"function(pageContext){ pageContext.isFinalEvidence=true; pageContext.isInitialEvidence=false;}"}],"searchKeys":["submittedBy"],"multiSelect":false}}],"label":"","id":"finalEvidenceGrid","type":"section","transparent":true},{"children":[{"readOnly":true,"id":"notes","label":"@lang.['n3','Notes']","placeholder":"@lang.['blank4','-']","type":"input","value":"@pageContext.finalComments"}],"label":"","id":"notes","type":"section"}],"label":"@lang.['fe1','Final Evidences']","id":"finalEvidence","type":"collapseSection","transparent":true},{"hidden":"@jslib.hasCustomerSignature","children":[{"aspectRation":"","disabled":true,"id":"","type":"image","value":"@pageContext.customerSignature"}],"id":"CustomerSignature","label":"@lang.['customerSignature','Customer Signature']","type":"section"},{"hidden":"@jslib.hasCustomerSignature","children":[{"readOnly":true,"id":"approvedBy","label":"@lang.['approvedBy','Approved By']","placeholder":"@lang.['approvedBy','Approved By']","type":"input","value":"@pageContext.approvedBy"}],"id":"","label":"","type":"section"}],"label":"@lang.['tr3','Task Results']","type":"tab"},{"children":[{"children":[{"minDate":"1970-01-01 00:00","disabled":true,"id":"workOrderDeadline","title":"@lang.['d4','Deadline']","type":"datetime","value":"@pageContext.workOrderDeadline"},{"minDate":"1970-01-01 00:00","disabled":true,"id":"workOrderTaskScheduledDate","title":"@lang.['ssdt1','Scheduled Start Date & Time']","type":"datetime","value":"@pageContext.workOrderTaskScheduledDate"},{"readOnly":true,"id":"workOrderTaskEstimatedDurationMinutes","label":"@lang.['etd1','Estimated Task Duration (Minutes)']","placeholder":"@lang.['eetd1','Enter Estimated Task Duration (Minutes)']","type":"input","value":"@pageContext.workOrderTaskEstimatedDurationMinutes"}],"id":"schedule","label":"@lang.['s19','Schedule']","type":"section"},{"children":[{"disabled":true,"id":"workOrderTaskId","label":"@lang.['taskId','Task ID']","type":"input","value":"@pageContext.workOrderTaskId"},{"disabled":true,"id":"taskTypeName","label":"@lang.['taskType','Task Type']","type":"input","value":"@pageContext.taskTypeName"},{"disabled":true,"id":"workOrderTaskWorkOrderId","label":"@lang.['WorkOrderId','Work Order ID']","type":"input","value":"@pageContext.workOrderTaskWorkOrderId"},{"disabled":true,"id":"workOrderTypeName","label":"@lang.['wot1','Work Order Type']","type":"input","value":"@pageContext.workOrderTypeName"},{"disabled":true,"id":"ZPriorityName","label":"@lang.['priority','Priority']","type":"input","value":"@pageContext.ZPriorityName"},{"disabled":true,"id":"siteName","label":"@lang.['cs','Customer Site']","type":"input","value":"@pageContext.siteName"},{"disabled":true,"inputType":"text","id":"workOrderTaskNotes","label":"@lang.['n2','Notes (Optional)']","type":"textarea","value":"@pageContext.workOrderTaskNotes","placeHolder":"@lang.['en','Enter Notes (Optional)']"}],"id":"taskDetails","label":"@lang.['taskDetails','Task Details']","type":"section"},{"children":[{"children":[{"children":[{"isRequired":true,"minDate":"1970-01-01 00:00","readOnly":true,"id":"scheduledStartDate","label":"@lang.['ssd1','Scheduled Start Date']","title":"@lang.['ssd1','Scheduled Start Date']","type":"absoluteDate","value":"@pageContext.scheduledStartDateAbsolute","placeHolder":"@lang.['sd8','Select date']"}],"flex":"3","type":"column"},{"children":[{"isRequired":true,"minDate":"1970-01-01 00:00","readOnly":true,"id":"scheduledEndDate","label":"@lang.['sed1','Scheduled End Date']","title":"@lang.['sed1','Scheduled End Date']","type":"absoluteDate","value":"@pageContext.scheduledEndDateAbsolute","placeHolder":"@lang.['sd8','Select date']"}],"flex":"3","type":"column"}],"id":"scheduledStartEndDateRow","type":"row"},{"children":[{"children":[{"isRequired":true,"readOnly":true,"id":"scheduledStartTime","label":"@lang.['sst','Scheduled Start Time']","title":"@lang.['sst','Scheduled Start Time']","type":"absoluteTime","value":"@pageContext.scheduledStartTimeAbsolute","placeHolder":"@lang.['st1','Select time']"}],"flex":"3","type":"column"},{"children":[{"isRequired":true,"readOnly":true,"id":"scheduledEndTime","label":"@lang.['set1','Scheduled End Time']","title":"@lang.['set1','Scheduled End Time']","type":"absoluteTime","value":"@pageContext.scheduledEndTimeAbsolute","placeHolder":"@lang.['st1','Select time']"}],"flex":"3","type":"column"}],"id":"scheduledStartEndTimeRow","type":"row"},{"hidden":"@jslib.isAppointmentWindowHidden","children":[{"children":[{"readOnly":true,"id":"appointmentWindowStart","label":"@lang.['aws','Appointment Window Start']","title":"@lang.['aws','Appointment Window Start']","type":"datetime","value":"@pageContext.workOrderTaskAppointmentWindowStartDate"}],"flex":"3","type":"column"},{"children":[{"readOnly":true,"id":"appointmentWindowEnd","label":"@lang.['awe','Appointment Window End']","title":"@lang.['awe','Appointment Window End']","type":"datetime","value":"@pageContext.workOrderTaskAppointmentWindowEndDate"}],"flex":"3","type":"column"}],"id":"appointmentWindowRow","type":"row"},{"readOnly":true,"id":"workOrderTaskEstimatedDurationMinutes","label":"@lang.['etd1','Estimated Task Duration (Minutes)']","placeholder":"@lang.['eetd1','Enter Estimated Task Duration (Minutes)']","type":"input","value":"@pageContext.workOrderTaskEstimatedDurationMinutes"}],"id":"originalSchedule","label":"@lang.['os','Original Schedule']","type":"section"},{"children":[{"children":[{"children":[{"isRequired":true,"minDate":"1970-01-01 00:00","readOnly":true,"id":"actualStartDate","label":"@lang.['asd','Actual Start Date']","title":"@lang.['asd','Actual Start Date']","type":"absoluteDate","value":"@pageContext.actualStartDateAbsolute","placeHolder":"@lang.['sd8','Select date']"}],"flex":"3","type":"column"},{"children":[{"isRequired":true,"minDate":"1970-01-01 00:00","readOnly":true,"id":"actualEndDate","label":"@lang.['aed','Actual End Date']","title":"@lang.['aed','Actual End Date']","type":"absoluteDate","value":"@pageContext.actualEndDateAbsolute","placeHolder":"@lang.['sd8','Select date']"}],"flex":"3","type":"column"}],"id":"actualStartEndDateRow","type":"row"},{"children":[{"children":[{"isRequired":true,"readOnly":true,"id":"actualStartTime","label":"@lang.['ast1','Actual Start Time']","title":"@lang.['ast1','Actual Start Time']","type":"absoluteTime","value":"@pageContext.actualStartTimeAbsolute","placeHolder":"@lang.['st1','Select time']"}],"flex":"3","type":"column"},{"children":[{"isRequired":true,"readOnly":true,"id":"actualEndTime","label":"@lang.['aet','Actual End Time']","title":"@lang.['aet','Actual End Time']","type":"absoluteTime","value":"@pageContext.actualEndTimeAbsolute","placeHolder":"@lang.['st1','Select time']"}],"flex":"3","type":"column"}],"id":"actualStartEndTimeRow","type":"row"},{"readOnly":true,"id":"actualTaskDuration","label":"@lang.['atd','Actual Task Duration (Minutes)']","placeholder":"@lang.['eatd','Enter Actual Task Duration (Minutes)']","type":"input","value":"@pageContext.actualTaskDuration"}],"id":"actualSchedule","label":"@lang.['as','Actual Schedule']","type":"section"}],"label":"@lang.['taskDetails','Task Details']","type":"tab"},{"children":[{"children":[{"disabled":true,"id":"customerCompanyName","label":"@lang.['customer','Customer']","type":"input","value":"@pageContext.customerCompanyName"},{"disabled":true,"id":"customerContactPerson","label":"@lang.['cpn','Contact Person Name']","type":"input","value":"@pageContext.customerContactPerson"},{"disabled":true,"id":"customerContactPhone","label":"@lang.['cp','Contact Phone']","type":"phoneNumber","value":"@pageContext.customerContactPhone"},{"disabled":true,"id":"customerContactEmail","label":"@lang.['ce','Contact Email']","placeholder":"@lang.['eea','Enter Email Address']","type":"input","value":"@pageContext.customerContactEmail"},{"disabled":true,"id":"customerContactTitle","label":"@lang.['ct3','Contact Title']","type":"input","value":"@pageContext.customerContactTitle"}],"id":"customer","label":"@lang.['customer','Customer']","type":"section"},{"children":[{"disabled":true,"id":"siteName","label":"@lang.['cs','Customer Site']","type":"input","value":"@pageContext.siteName"},{"disabled":true,"id":"siteAddress","label":"@lang.['address','Address']","placeholder":"@lang.['afscs','Autofilled from selected customer site']","type":"address","value":"@pageContext.siteAddress"},{"disabled":true,"id":"siteRegion","label":"@lang.['r1','Region']","type":"input","value":"@pageContext.regionName"},{"mapElementStyle":{"width":"100%","height":"14rem"},"defaultZoom":17,"preserveViewport":true,"location":[{"coordinates":"@pageContext.coordinates","icon":"https://cdn.zeplin.io/5be3ee39a464fd7e89ffaaa0/assets/57BF1B12-69E2-4E77-881C-A53900EB4260.svg","type":"Point"}],"id":"mapForShowStatic","type":"map","renderType":"location","mapElementHeight":"100%","mapJson":{}}],"id":"location","label":"@lang.['l3','Location']","type":"section"}],"label":"@lang.['sd3','Site Details']","id":"siteDetails","type":"tab"},{"hidden":false,"children":[{"hidden":"@jslib.isAssignedCrewHidden","children":[{"readOnly":true,"id":"assignedCrew","label":"@lang.['lac','Last Assigned Crew']","type":"input","value":"@pageContext.crewName"}],"id":"crewName","label":"","type":"section"},{"hidden":"@jslib.isAssignedUserHidden","children":[{"readOnly":true,"id":"assignee","label":"@lang.['a4','Assignee']","type":"input","value":"@pageContext.userName"},{"readOnly":true,"id":"phoneNumber","label":"@lang.['phoneNumber','Phone Number']","type":"input","value":"@pageContext.userPhoneNumber"},{"readOnly":true,"id":"email","label":"@lang.['e4','Email']","type":"input","value":"@pageContext.userEmail"}],"id":"singleAttendance","label":"@lang.['ca','Current Assignee']","type":"section"},{"hidden":"@jslib.isAssignedCrewHidden","children":[{"label":"","id":"crewMembers","type":"dataGrid","jsonDef":{"isScrollAble":true,"searchAllowed":true,"tableWidth":"80rem","searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsVisiblePurple","hidden":{"checkInType":[false]},"name":"@lang.['va1','View Attendance']","tooltip":"@lang.['va1','View Attendance']","icon":"@iconlib.ActionsVisibleGrey","actionOnClick":["@actions.openViewCrewDataSidePanel"],"type":"buttonIcon"}]},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSync":true,"tableHeader":[{"name":"@lang.['n','Name']","options":{"flex":1,"showLabel":true},"key":"userName"},{"name":"@lang.['c27','Crew']","options":{"flex":1,"showLabel":true},"key":"crewName"},{"name":"@lang.['e4','Email']","options":{"flex":1.5,"showLabel":true},"key":"userEmail"},{"name":"@lang.['phoneNumber','Phone Number']","options":{"flex":1,"showLabel":true},"key":"userPhoneNumber"},{"name":"@lang.['checkIn','Check In']","options":{"flex":1,"type":"dateTime","showLabel":true},"key":"checkIn"},{"name":"@lang.['checkOut','Check Out']","options":{"flex":1,"type":"dateTime","showLabel":true},"key":"checkOut"},{"name":"@lang.['r8','Role']","options":{"flex":1,"showLabel":true},"key":"crewRole"},{"name":"@lang.['mci','Manual Check In']","options":{"flex":1,"showLabel":true},"key":"manualCheckIn"},{"name":"@lang.['cit','Check In Type']","options":{"hidden":true,"flex":1,"showLabel":false},"key":"checkInType"}],"dataToBeSent":{"apiResponseParams":["count"],"processId":"workOrderTaskCrewDataWF","apiResponseFormat":true,"contextVar":{"responseGrid":"crewAttendance","workOrderTaskId":"@pageContext.workOrderTaskId"},"apiResponseObject":"crewAttendance"},"dataSourceId":"process/start","sourceType":"api","header":{"filterAllowed":true,"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['cm','Crew Members']"},"isSelectable":false,"updateAllowed":true,"actions":[{"name":"openViewCrewDataSidePanel","type":"openPanel","pageId":"97DNWZDQMO"}],"searchKeys":["userName"]}}],"id":"crewMembers","label":"@lang.['a10','Assignees']","type":"section","transparent":true},{"hidden":"@jslib.isAssignedUserHidden","children":[{"label":"","id":"singleTechAttendanceHistoryDataGrid","type":"dataGrid","jsonDef":{"isScrollAble":true,"searchAllowed":true,"tableWidth":"80rem","searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsVisiblePurple","hidden":{"checkInType":[false]},"name":"@lang.['vd','View Details']","tooltip":"@lang.['vd','View Details']","icon":"@iconlib.ActionsVisibleGrey","actionOnClick":["@actions.openCheckInDetailsNNSP"],"type":"buttonIcon"}]},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSync":true,"tableHeader":[{"name":"@lang.['checkIn','Check In']","options":{"flex":1,"type":"dateTime","showLabel":true},"key":"checkInTime"},{"name":"@lang.['checkOut','Check Out']","options":{"flex":1,"type":"dateTime","showLabel":true},"key":"checkOutTime"},{"name":"@lang.['au1','Address Updated']","options":{"flex":1,"showLabel":true},"key":"addressUpdated"},{"name":"@lang.['ul','Updated Location']","options":{"flex":1,"showLabel":true},"key":"location"},{"name":"@lang.['n','Name']","options":{"flex":1,"showLabel":true},"key":"userName"},{"name":"@lang.['e4','Email']","options":{"flex":1.5,"showLabel":true},"key":"userEmail"},{"name":"@lang.['phoneNumber','Phone Number']","options":{"flex":1,"showLabel":true},"key":"userPhoneNumber"},{"name":"@lang.['cit','Check In Type']","options":{"hidden":true,"flex":1,"showLabel":false},"key":"checkInType"}],"dataToBeSent":{"apiResponseParams":["count"],"processId":"workOrderTaskCrewDataWF","apiResponseFormat":true,"contextVar":{"responseGrid":"currentAssigneeAddendance","workOrderTaskId":"@pageContext.workOrderTaskId"},"apiResponseObject":"currentAssigneeAddendance"},"dataSourceId":"process/start","sourceType":"api","header":{"filterAllowed":true,"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['ah2','Attendance History']"},"isSelectable":false,"updateAllowed":true,"actions":[{"name":"openCheckInDetailsNNSP","type":"openPanel","pageId":"B0F4A2FXUE"}],"searchKeys":["userName"]}}],"id":"currentAssigneeAttendance","label":"@lang.['aoca','Attendance Of Current Assignees']","type":"section","transparent":true},{"hidden":"@jslib.isPreviousAssigneeHidden","children":[{"label":"","id":"previousAssigneeGridData","type":"dataGrid","jsonDef":{"isScrollAble":true,"searchAllowed":true,"tableWidth":"80rem","searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsVisiblePurple","hidden":{"checkInType":[false]},"name":"@lang.['va1','View Attendance']","tooltip":"@lang.['va1','View Attendance']","icon":"@iconlib.ActionsVisibleGrey","actionOnClick":["@actions.openCheckInDetailsNNSP"],"type":"buttonIcon"}]},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSync":true,"tableHeader":[{"name":"@lang.['n','Name']","options":{"flex":1,"showLabel":true},"key":"userName"},{"name":"@lang.['e4','Email']","options":{"flex":1.5,"showLabel":true},"key":"userEmail"},{"name":"@lang.['phoneNumber','Phone Number']","options":{"flex":1,"showLabel":true},"key":"userPhoneNumber"},{"name":"@lang.['checkIn','Check In']","options":{"flex":1,"type":"dateTime","showLabel":true},"key":"checkInTime"},{"name":"@lang.['checkOut','Check Out']","options":{"flex":1,"type":"dateTime","showLabel":true},"key":"checkOutTime"},{"name":"@lang.['au1','Address Updated']","options":{"flex":1,"showLabel":true},"key":"addressUpdated"},{"name":"@lang.['cit','Check In Type']","options":{"hidden":true,"flex":1,"showLabel":false},"key":"checkInType"}],"dataToBeSent":{"apiResponseParams":["count"],"processId":"workOrderTaskCrewDataWF","apiResponseFormat":true,"contextVar":{"responseGrid":"previousAssignees","workOrderTaskId":"@pageContext.workOrderTaskId"},"apiResponseObject":"previousAssignees"},"dataSourceId":"process/start","sourceType":"api","header":{"filterAllowed":true,"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['pa2','Previous Assignees']"},"isSelectable":false,"updateAllowed":true,"actions":[{"name":"openCheckInDetailsNNSP","type":"openPanel","pageId":"97DNWZDQMO"}],"searchKeys":["userName"]}}],"id":"previousAssignee","label":"@lang.['pa2','Previous Assignees']","type":"section","transparent":true}],"label":"@lang.['a11','Attendance']","type":"tab"},{"hidden":"@jslib.isPriceListItemHidden","children":[{"children":[{"label":"","id":"priceListItemsGridData","type":"dataGrid","jsonDef":{"isScrollAble":true,"searchAllowed":true,"tableWidth":"80rem","searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsVisiblePurple","name":"@lang.['v1','View']","tooltip":"@lang.['v1','View']","icon":"@iconlib.ActionsVisibleGrey","actionOnClick":["@actions.openPriceListItemDetailsNSP"],"type":"buttonIcon"}]},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSync":true,"tableHeader":[{"name":"@lang.['m','Manufacturer']","options":{"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"manufacturerName"},{"name":"@lang.['mn','Model Name']","options":{"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"modelName"},{"name":"@lang.['mn1','Model Number']","options":{"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"modelNumber"},{"name":"@lang.['t5','Type']","options":{"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"catalogType"},{"name":"@lang.['quantityUsed','Quantity Used']","options":{"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"actualQty"},{"name":"@lang.['eq1','Estimated Quantity']","options":{"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"estimatedQty"}],"dataToBeSent":{"apiResponseParams":["count"],"processId":"X6AMXTO0IH","apiResponseFormat":true,"contextVar":{"statusFilter":"@pageContext.statusId","workOrderTaskId":"@pageContext.workOrderTaskId","workOrderId":"@pageContext.workOrderId"},"apiResponseObject":"workOrderTaskIventoryData"},"dataSourceId":"process/start","sourceType":"api","header":{"filterAllowed":true,"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['pam','Parts and Materials']"},"isSelectable":false,"updateAllowed":true,"actions":[{"name":"openPriceListItemDetailsNSP","type":"openPanel","pageId":"J0JIXTOPCX"}],"searchKeys":["modelName"]}}],"id":"priceListItemsSection","label":"","type":"section","transparent":true}],"label":"@lang.['pr1','Part Requirements']","type":"tab"},{"children":[{"children":[{"id":"incidentReports","type":"dataGrid","jsonDef":{"isScrollAble":true,"searchAllowed":false,"tableWidth":"70rem","rowActions":{"children":[{"activeIcon":"@iconlib.ActionsVisiblePurple","name":"@lang.['t1','taskView']","icon":"@iconlib.ActionsVisibleGrey","tooltip":"@lang.['v1','View']","actionOnClick":["@actions.openIncidentDetailsSidePanel"],"type":"buttonIcon"}]},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSync":true,"tableHeader":[{"name":"@lang.['it','Incident Type']","options":{"flex":1.5,"sortable":false,"showLabel":true},"key":"incidentType","primaryKey":true},{"name":"@lang.['r5','Reason']","options":{"flex":1.5,"sortable":false,"showLabel":true},"key":"travelIncidentReason"},{"name":"@lang.['st9','Submission Time']","options":{"flex":1.5,"sortable":false,"type":"dateTime","showLabel":true},"key":"reportIssueCapturedTime"},{"name":"@lang.['action','Action']","options":{"flex":1.5,"sortable":false,"showLabel":true},"key":"reportIssueType"},{"name":"@lang.['dm','Delay (In Minutes)']","options":{"flex":1.5,"sortable":false,"showLabel":true},"key":"taskDelay"}],"dataToBeSent":{"apiResponseParams":["count"],"processId":"workorderTaskIncidentReportWF","apiResponseFormat":true,"contextVar":{"workOrderTaskId":"@pageContext.workOrderTaskId"},"apiResponseObject":"incidentReportsData"},"dataSourceId":"process/start","sourceType":"api","header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['il','Incident Logs']"},"isSelectable":false,"updateAllowed":true,"actions":[{"name":"openIncidentDetailsSidePanel","type":"openPanel","pageId":"UGWILUCH1E"}],"searchKeys":[]}}],"id":"incidentReports","type":"section","transparent":true}],"label":"@lang.['il','Incident Logs']","type":"tab"},{"children":[{"children":[{"id":"workOrderTaskLogs","type":"dataGrid","jsonDef":{"isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"tableWidth":"50rem","rowActions":{},"gridRefreshId":"logsGridId","emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['timeStamp','Time Stamp']","options":{"flex":1.5,"sortOrder":"DESC","sortable":true,"type":"datetime","showLabel":true},"key":"workOrderTaskLogLogDate"},{"name":"@lang.['e10','Event']","options":{"flex":1.5,"sortOrder":"DESC","sortable":true,"showLabel":true},"key":"listOptionAnswerAnswerOptionText"},{"name":"@lang.['mb1','Modified By']","options":{"flex":1.5,"sortOrder":"DESC","sortable":true,"showLabel":true},"key":"userName"},{"name":"@lang.['details','Details']","options":{"flex":2,"showLabel":true},"key":"workOrderTaskLogDetails"},{"name":"@lang.['i','id']","options":{"hidden":true,"showLabel":false},"key":"workOrderTaskLogId","primaryKey":true}],"dataToBeSent":{"filter":"{$workOrderTaskLog.workOrderTaskId} = {@selectedWorkOrderTaskId} AND {$listOptionAnswer.listOptionId}='workOrderTaskLogEvents'","models":["workOrderTaskLog","User","listOptionAnswer"],"columns":{"workOrderTaskLogLogDate":"workOrderTaskLog.logDate","workOrderTaskLogId":"workOrderTaskLog.id","workOrderTaskLogDetails":"workOrderTaskLog.details","listOptionAnswerAnswerOptionText":"listOptionAnswer.answerOptionText","userName":"User.name"},"inputs":{"selectedWorkOrderTaskId":"@pageContext.workOrderTaskId"},"orderBy":"workOrderTaskLogLogDate DESC","outerJoinOnModel":"workOrderTaskLog","links":{"listOptionAnswer":"workOrderTaskLog","workOrderTaskLog":"User"},"translate":true},"dataSourceId":"query/read","jslib":{},"rowTextLength":40,"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['tl','Task Logs']","children":[]},"isSelectable":false,"dataSource":[],"actions":[],"searchKeys":["listOptionAnswerAnswerOptionText","userName"],"multiSelect":false}}],"label":"","id":"workOrderTaskLogSection","type":"section","transparent":true}],"label":"@lang.['navl','Logs']","type":"tab"}],"label":"","type":"tab"}]},"actions":[{"name":"clearPageContext","type":"clearPageContext"},{"name":"closePanel","type":"closePanel"},{"name":"openPreviousPanel","type":"backPanel","pageId":"SKFTPK7JHU"},{"subTitle":"@lang.['aysywtctt','Are you sure you want to cancel this task?']","name":"cancelTaskModal","options":[{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.closeModal","@actions.openCancelTaskNestedSidePanel"],"type":"button","title":"@lang.['yp','Yes, Proceed']"}],"type":"openModal","title":"@lang.['ct4','Cancel Task']"},{"name":"openCancelTaskNestedSidePanel","type":"openPanel","pageId":"1RFSG2AF8J"},{"subTitle":"@lang.['aysywtdtttcbu','Are you sure you want to delete this task? This cannot be undone.']","name":"deleteTaskModal","options":[{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.setSubActionDeleteWorkOrderTask","@actions.fireProcessEventForWorkOrderTaskDelete","@actions.closeModal","@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"type":"button","title":"@lang.['d1','Delete']"}],"type":"openModal","title":"@lang.['dt1','Delete Task']"},{"name":"setSubActionDeleteWorkOrderTask","type":"script","actionDef":"function(pageContext){pageContext.subAction='deleteWorkOrderTask';}"},{"endPoint":"process/start","name":"fetchDiscontinueTaskData","outputVarMap":{"data":"@pageContext.discontinuedTaskData"},"type":"api","actionDef":{"data":[{"processId":"workOrderTaskIncidentReportWF","contextVar":{"workOrderTaskId":"@pageContext.workOrderTaskId"}}]}},{"endPoint":"event/start","name":"fireProcessEventForTaskReviewFetchData","outputVarMap":{"data":"@pageContext.responseData"},"type":"api","actionDef":{"data":[{"eventId":"LHCUF48WQB","contextVar":{"workOrderTaskId":"@pageContext.workOrderTaskId"}}]}},{"endPoint":"event/start","name":"fireProcessEventForWorkOrderTaskDelete","type":"api","actionDef":{"data":[{"eventId":"BM58GU7UNT","contextVar":{"workOrderTask":{"recver":"@pageContext.workOrderTaskRecver","id":"@pageContext.workOrderTaskId"},"subAction":"deleteWorkOrderTask"}}]}},{"endPoint":"process/start","name":"fireProcessEventForTaskReviewLogWF","type":"api","actionDef":{"data":[{"processId":"V4NYJ58HL1","contextVar":{"listOptionAnswerId":"9K5U9O8SX9","statusId":"@pageContext.statusId","subAction":"reject","workOrderTaskId":"@pageContext.workOrderTaskId","taskReviewLogAction":"@pageContext.taskReviewLogAction","taskReviewLogReviewNotes":"@pageContext.taskReviewLogReviewNotes"}}]}},{"endPoint":"batch/apis","name":"fireProcessEventForWorkOrderTask","type":"api","actionDef":{"data":[{"workOrderTaskWF":{"data":[{"processId":"QIFGIU7FDJ","contextVar":{"workOrderTask":{"processInstanceId":"@pageContext.workOrderTaskProcessInstanceId","assignedToUserId":"@pageContext.workOrderTaskAssignedToUserId","statusId":"@pageContext.statusId","statusTargetModel":"workOrderTask","taskTypeWebTask":"@pageContext.taskTypeWebTask","cancellationNotes":"@pageContext.workOrderTaskCancellationNotes","recver":"@pageContext.responseData[0].data[0].workOrderTaskData.workOrderTaskRecver","eventType":"@pageContext.eventType","id":"@pageContext.workOrderTaskId","reopenCount":"@pageContext.workOrderTaskReOpenCount"},"subAction":"upsertWorkOrderTask"}}],"actionUrl":"process/start"}}]}},{"endPoint":"event/start","name":"instantiateMobileWorkflow","outputVarMap":{"data":"@pageContext.responseData"},"type":"api","actionDef":{"data":[{"eventId":"DFRTNF8ISK","inputVar":{"assignedToUserId":"@pageContext.workOrderTaskAssignedToUserId","plannedStartTime":"@pageContext.workOrderTaskScheduledDate","estimatedDurationInHours":"@pageContext.estimatedDurationInHours","workOrderTaskId":"@pageContext.workOrderTaskId","subAction":"@pageContext.instanceSubAction","mobileProcessId":"@pageContext.taskTypeMobileProcessId","workOrderTaskReOpenCount":"@pageContext.workOrderTaskReOpenCount"},"contextVar":{"assignedToUserId":"@pageContext.workOrderTaskAssignedToUserId","plannedStartTime":"@pageContext.workOrderTaskScheduledDate","estimatedDurationInHours":"@pageContext.estimatedDurationInHours","workOrderTaskId":"@pageContext.workOrderTaskId","subAction":"@pageContext.instanceSubAction","mobileProcessId":"@pageContext.taskTypeMobileProcessId","workOrderTaskReOpenCount":"@pageContext.workOrderTaskReOpenCount"}}]}},{"name":"closeModal","type":"closeModal"},{"async":true,"name":"calculatedActualTaskDuration","type":"script","actionDef":"function (pageContext) { if (typeof pageContext.workOrderTaskActualStartTime !== 'undefined' && pageContext.workOrderTaskActualStartTime === '' && typeof pageContext.workOrderTaskCompletedDate !== 'undefined' && pageContext.workOrderTaskCompletedDate !== '') { let startDate = new Date(pageContext.workOrderTaskActualStartTime); let completedDate = new Date(pageContext.workOrderTaskCompletedDate); if (completedDate > startDate) { let diffTime = Math.abs(completedDate - startDate); pageContext.actualTaskDuration = Math.ceil(diffTime / (1000 * 60)); } else { pageContext.actualTaskDuration = '-'; } } }"},{"name":"refreshDataGrid","type":"refreshDataGrid"},{"name":"processResponseData","type":"script","actionDef":"function(pageContext) { if (typeof pageContext.responseData !== 'undefined' && pageContext.responseData.length > 0) { if (pageContext.responseData[0].data[0].workOrderTaskData.length > 0) { for (var i = 0; i < pageContext.responseData[0].data[0].workOrderTaskData.length; i++) { if (typeof pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData !== 'undefined') { pageContext.workOrderTaskData = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData; } } } else { pageContext.workOrderTaskData = pageContext.responseData[0].data[0].workOrderTaskData; } pageContext.workOrderTaskServicesArray = pageContext.workOrderTaskData.workOrderTaskServicesArray; pageContext.workOrderTaskId = pageContext.workOrderTaskData.workOrderTaskId; pageContext.workOrderTaskRecver = pageContext.workOrderTaskData.workOrderTaskRecver; pageContext.taskTypeName = pageContext.workOrderTaskData.taskTypeName; pageContext.workOrderTaskWorkOrderId = pageContext.workOrderTaskData.workOrderTaskWorkOrderId; pageContext.workOrderId = pageContext.workOrderTaskData.workOrderTaskWorkOrderId; pageContext.workOrderTypeName = pageContext.workOrderTaskData.taskTypeName; pageContext.ZPriorityName = pageContext.workOrderTaskData.ZPriorityName; pageContext.siteName = pageContext.workOrderTaskData.siteName; pageContext.workOrderTaskService = pageContext.workOrderTaskData.workOrderTaskService; pageContext.workOrderTaskNotes = pageContext.workOrderTaskData.workOrderTaskNotes; pageContext.workOrderTaskDueDate = pageContext.workOrderTaskData.workOrderTaskDueDate; pageContext.workOrderTaskEstimatedDuration = pageContext.workOrderTaskData.workOrderTaskEstimatedDuration; pageContext.workOrderTaskEstimatedDurationMinutes = pageContext.workOrderTaskData.workOrderTaskEstimatedDurationMinutes; pageContext.workOrderTaskActualStartTime = pageContext.workOrderTaskData.workOrderTaskActualStartTime; pageContext.workOrderTaskCompletedDate = pageContext.workOrderTaskData.workOrderTaskCompletedDate; pageContext.actualTaskDuration = pageContext.workOrderTaskData.actualTaskDuration; pageContext.customerContactPerson = pageContext.workOrderTaskData.customerContactPerson; pageContext.customerContactTitle = pageContext.workOrderTaskData.customerContactTitle; pageContext.customerContactPhone = pageContext.workOrderTaskData.customerContactPhone; pageContext.crewName = pageContext.workOrderTaskData.crewName; pageContext.userName = pageContext.workOrderTaskData.userName; pageContext.userPhoneNumber = pageContext.workOrderTaskData.userPhoneNumber; pageContext.userEmail = pageContext.workOrderTaskData.userEmail; if (pageContext.workOrderTaskData.workOrderTaskResult[0].approvedBy) { pageContext.approvedBy = pageContext.workOrderTaskData.workOrderTaskResult[0].approvedBy; } else { pageContext.approvedBy = ''; } pageContext.workOrderTaskAssignedToUserId = pageContext.workOrderTaskData.workOrderTaskAssignedToUserId; pageContext.customerContactEmail = pageContext.workOrderTaskData.customerContactEmail; pageContext.siteAddress = pageContext.workOrderTaskData.siteAddress; pageContext.siteLongitude = pageContext.workOrderTaskData.siteLongitude; pageContext.siteLatitude = pageContext.workOrderTaskData.siteLatitude; pageContext.listOption = pageContext.responseData[0].data[0].listOptionData; pageContext.customerCompanyName = pageContext.workOrderTaskData.customerCompanyName; pageContext.workOrderTaskScheduledDate = pageContext.workOrderTaskData.workOrderTaskScheduledDate; pageContext.statusNameColor = pageContext.workOrderTaskData.statusNameColor; pageContext.statusName = pageContext.workOrderTaskData.statusName; pageContext.taskTypeCrewTask = pageContext.workOrderTaskData.taskTypeCrewTask; pageContext.statusId = pageContext.workOrderTaskData.workOrderTaskStatusId; pageContext.taskTypeMobileProcessId = pageContext.workOrderTaskData.taskTypeMobileProcessId; pageContext.workOrderTaskAssignedToUserId = pageContext.workOrderTaskData.workOrderTaskAssignedToUserId; pageContext.workOrderTaskReOpenCount = pageContext.workOrderTaskData.workOrderTaskReOpenCount; pageContext.taskTypeWebTask = pageContext.workOrderTaskData.taskTypeWebTask; pageContext.workOrderTaskProcessInstanceId = pageContext.workOrderTaskData.workOrderTaskProcessInstanceId; pageContext.customerSignature = pageContext.workOrderTaskData.workOrderCustomerSignature; pageContext.activityDetails = pageContext.workOrderTaskData.activityDetails; pageContext.workOrderTaskServicesArray = pageContext.workOrderTaskData.workOrderTaskServicesArray; pageContext.workOrderTaskRecver = pageContext.workOrderTaskData.workOrderTaskRecver; pageContext.initialAssignee = pageContext.workOrderTaskAssignedToUserId; pageContext.workOrderTaskAssignedToCrewId = pageContext.workOrderTaskData.workOrderTaskAssignedToCrewId; pageContext.regionName = pageContext.workOrderTaskData.regionName; pageContext.workOrderTaskAppointmentBasedFlag = pageContext.workOrderTaskData.workOrderTaskAppointmentBasedFlag; pageContext.workOrderTaskAppointmentWindowId = pageContext.workOrderTaskData.workOrderTaskAppointmentWindowId; pageContext.workOrderTaskAppointmentWindowStartDate = pageContext.workOrderTaskData.workOrderTaskAppointmentWindowStartDate; pageContext.workOrderTaskAppointmentWindowEndDate = pageContext.workOrderTaskData.workOrderTaskAppointmentWindowEndDate; pageContext.timezoneOffset = new Date().getTimezoneOffset(); pageContext.siteTimezoneOffset = pageContext.workOrderTaskData.siteTimezoneOffset; var addMinutes = function(date) { return (new Date(date.getTime() - (pageContext.timezoneOffset * 60000) - (pageContext.timezoneOffset * 60000))).toISOString().replace('T', ' ').replace('Z', ''); }; if (typeof pageContext.workOrderTaskScheduledDate !== 'undefined' && pageContext.workOrderTaskScheduledDate !== '') { var startDateInAbsolute = addMinutes(new Date(pageContext.workOrderTaskScheduledDate)); pageContext.scheduledStartDateAbsolute = startDateInAbsolute.split(' ')[0]; pageContext.scheduledStartTimeAbsolute = startDateInAbsolute.split(' ')[1]; } if (typeof pageContext.workOrderTaskDueDate !== 'undefined' && pageContext.workOrderTaskDueDate !== '') { var endDateInAbsolute = addMinutes(new Date(pageContext.workOrderTaskDueDate)); pageContext.scheduledEndDateAbsolute = endDateInAbsolute.split(' ')[0]; pageContext.scheduledEndTimeAbsolute = endDateInAbsolute.split(' ')[1]; } if (typeof pageContext.workOrderTaskActualStartTime !== 'undefined' && pageContext.workOrderTaskActualStartTime !== '') { var actualStartInAbsolute = addMinutes(new Date(pageContext.workOrderTaskActualStartTime)); pageContext.actualStartDateAbsolute = actualStartInAbsolute.split(' ')[0]; pageContext.actualStartTimeAbsolute = actualStartInAbsolute.split(' ')[1]; } if (typeof pageContext.workOrderTaskCompletedDate !== 'undefined' && pageContext.workOrderTaskCompletedDate !== '') { var actualEndInAbsolute = addMinutes(new Date(pageContext.workOrderTaskCompletedDate)); pageContext.actualEndDateAbsolute = actualEndInAbsolute.split(' ')[0]; pageContext.actualEndTimeAbsolute = actualEndInAbsolute.split(' ')[1]; } if (typeof pageContext.workOrderDeadline !== 'undefined' && pageContext.workOrderDeadline !== '') { var deadlineInAbsolute = addMinutes(new Date(pageContext.workOrderDeadline)); pageContext.workOrderDeadlineDateAbsolute = deadlineInAbsolute.split(' ')[0]; pageContext.workOrderDeadlineTimeAbsolute = deadlineInAbsolute.split(' ')[1]; } if (pageContext.statusId === 'workOrderTaskDiscontinued') { for (const key in pageContext.discontinuedTaskData[0].outputVar.discontinuedTaskData) { pageContext[key] = pageContext.discontinuedTaskData[0].outputVar.discontinuedTaskData[key]; } } if (pageContext.status === 'workOrderTaskCancelled') { pageContext.workOrderTaskCancelledDate = pageContext.workOrderTaskData.workOrderTaskCancelledDate; if (typeof pageContext.responseData[0].data[0].workOrderTaskCancelled !== 'undefined' && pageContext.responseData[0].data[0].workOrderTaskCancelled !== '') { pageContext.workOrderTaskCancelledBy = pageContext.responseData[0].data[0].workOrderTaskCancelled[0].cancelledByUserName; }; pageContext.workOrderTaskCancellationReason = pageContext.workOrderTaskData.workOrderTaskCancellationReasonData; pageContext.workOrderTaskCancellationNotes = pageContext.workOrderTaskData.workOrderTaskCancellationNotes; if (typeof pageContext.workOrderTaskCancellationNotes !== 'undefined' && pageContext.workOrderTaskCancellationNotes !== '') { pageContext.initialWorkOrderTaskCancellationNotes = pageContext.workOrderTaskCancellationNotes; } } if (typeof pageContext.responseData[0].data[0].taskReviewLogData != 'undefined' && pageContext.responseData[0].data[0].taskReviewLogData != '' && pageContext.responseData[0].data[0].taskReviewLogData.length > 0) { if (typeof pageContext.statusId !== 'undefined' && pageContext.statusId == 'workOrderTaskCompleted') { pageContext.taskReviewLogReviewNotes = pageContext.responseData[0].data[0].taskReviewLogData[0].taskReviewLogReviewNotes; pageContext.taskReviewResult = 'approve' } } if (typeof pageContext.siteLatitude !== 'undefined' && typeof pageContext.siteLongitude !== 'undefined') { pageContext.coordinates = [pageContext.siteLatitude, pageContext.siteLongitude]; } else { pageContext.coordinates = [0, 0]; } for (var i = 0; i < pageContext.responseData[0].data[0].workOrderTaskData.length; i++) { if (typeof pageContext.responseData[0].data[0].workOrderTaskData[i].previousAssignees !== 'undefined' && pageContext.responseData[0].data[0].workOrderTaskData[i].previousAssignees.length > 0) { pageContext.previousAssignees = pageContext.responseData[0].data[0].workOrderTaskData[i].previousAssignees; } } } }"},{"name":"setTimeZoneAndLocale","type":"script","actionDef":"function (pageContext) { pageContext.timeZone = Intl.DateTimeFormat().resolvedOptions().timeZone; pageContext.userLocale = sessionStorage.getItem('locale'); }"},{"falseStep":["@actions.fetchTaskProgressDataByServices"],"trueStep":["@actions.fetchTaskProgressDataByDate"],"name":"decisionActionForFilter","type":"decision","actionDef":"function(pageContext){if( typeof pageContext.dropdown !== 'undefined' && pageContext.dropdown !='' && pageContext.dropdown === 'byDate'){return true;} else {return false;}}"},{"name":"viewChange","type":"script","actionDef":"function (pageContext) { if (typeof pageContext.dropdown !== 'undefined' && pageContext.dropdown !== '') { if (pageContext.dropdown === 'byDate') { pageContext.selectedFilterForView = 'byDate'; pageContext.showSelectedServicesGrid = false;} if (pageContext.dropdown === 'byServices') { pageContext.selectedFilterForView = 'byServices'; pageContext.showInitialEvidenceGrid = false; pageContext.showServicesDeliveredGrid = false; pageContext.showFinalEvidenceGrid=false; } } }"},{"name":"setSubAction","type":"script","actionDef":"function(pageContext) { pageContext.subAction = 'upsertWorkOrderTask'; pageContext.statusId = pageContext.incidentReviewResult; var reOpenCount = parseInt(pageContext.workOrderTaskReOpenCount); pageContext.workOrderTaskReOpenCount = ++reOpenCount; if (pageContext.incidentReviewResult == 'workOrderTaskDispatched') { pageContext.eventType = 'workOrderTaskDispatched'; pageContext.taskReviewLogAction = 'workOrderTaskDispatched'; } else if (pageContext.incidentReviewResult == 'workOrderTaskReopened') { pageContext.eventType = 'workOrderTaskReopened'; pageContext.taskReviewLogAction = 'workOrderTaskReopened'; }}"},{"endPoint":"process/start","name":"fetchTaskProgressDataByDate","outputVarMap":{"data":"@pageContext.taskProgressDataByDate"},"type":"api","actionDef":{"data":[{"inputVar":{},"processId":"taskSchedulingDispatchedViewTaskProgressByDateWF","apiResponseFormat":true,"contextVar":{"userLocale":"@pageContext.userLocale","workOrderTaskId":"@pageContext.workOrderTaskId","timeZone":"@pageContext.timeZone"}}]}},{"endPoint":"process/start","name":"fetchTaskProgressDataByServices","outputVarMap":{"data":"@pageContext.taskProgressDataByServices"},"type":"api","actionDef":{"data":[{"inputVar":{},"processId":"taskSchedulingDispatchedViewTaskProgressByServicesWF","apiResponseFormat":true,"contextVar":{"userLocale":"@pageContext.userLocale","workOrderTaskId":"@pageContext.workOrderTaskId","timeZone":"@pageContext.timeZone"}}]}},{"name":"setSubActionUpsertWorkOrderTask","type":"script","actionDef":"function(pageContext){pageContext.subAction='upsertWorkOrderTask';}"},{"name":"enableRecordGrid","type":"script","actionDef":"function(pageContext){pageContext.enable=true;}"}]}