{"pageContext":{},"actionOnLoad":["@actions.fetchDatagridValues","@actions.fetchListOption","@actions.setInitialData","@actions.enableRecordGrid","@actions.refreshDataGrid"],"localPageContext":true,"jslib":{},"header":{"children":[{"icon":"@iconlib.NavigationCloseGrey","actionOnClick":["@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"id":"close","type":"buttonIcon"}],"title":"@lang.['bdt','Bulk Dispatch Tasks']"},"body":{"children":[{"children":[{"id":"searchSuccessFullyDispatch","label":"@lang.['s16','Search']","type":"datagrid","jsonDef":{"pageContextConfig":{"infiniteScroll":false,"enable":true,"tableData":{"source":"@pageContext.successTaskList"}},"isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"tableWidth":"70rem","header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['sd13','Successfully Dispatched']"},"isSelectable":false,"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['utdaotst','UNABLE TO DISPATCH ANY OF THE SELECTED TASKS']","type":"noData"},"tableHeader":[{"name":"@lang.['taskId','Task ID']","options":{"flex":1.5,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"workOrderTaskId","primaryKey":true},{"name":"@lang.['ss9','Scheduled Start']","options":{"flex":2,"sortOrder":"ASC","sortable":true,"type":"dateTime","showLabel":true},"key":"workOrderTaskScheduledDate"},{"name":"@lang.['se1','Scheduled End']","options":{"flex":2,"sortOrder":"ASC","sortable":true,"type":"dateTime","showLabel":true},"key":"workOrderTaskDueDate"},{"name":"@lang.['a4','Assignee']","options":{"flex":1.5,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"assignee"},{"name":"@lang.['taskType','Task Type']","options":{"flex":1.5,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"taskTypeName"},{"name":"@lang.['c16','Customer']","options":{"flex":1.5,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"customerCompanyName"},{"name":"@lang.['cs','Customer Site']","options":{"flex":1.5,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"customerSiteName"}],"searchKeys":["workOrderTaskId","assignee","taskTypeName","customerCompanyName","customerSiteName"]}}],"label":"","id":"successfullyDispatch","type":"section","transparent":true},{"children":[{"id":"searchDispatchFailed","label":"@lang.['s16','Search']","type":"datagrid","jsonDef":{"pageContextConfig":{"infiniteScroll":false,"enable":true,"tableData":{"source":"@pageContext.failureTaskList"}},"isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsVisiblePurple","name":"@lang.['v1','View ']","icon":"@iconlib.ActionsVisibleGrey","tooltip":"@lang.['v1','View']","actionOnClick":["@actions.setAction","@actions.openNestedSidePanel"],"type":"buttonIcon"}]},"tableWidth":"70rem","header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['df','Dispatch Failed']"},"isSelectable":false,"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['atwsd','ALL TASKS WERE SUCCESSFULLY DISPATCHED']","type":"noData"},"actions":[{"name":"openNestedSidePanel","type":"openPanel","pageId":"NTX9P88A3P"},{"name":"setAction","type":"script","actionDef":"function(pageContext){pageContext.action='view'; pageContext.initialLoad=true; pageContext.logsAction ='dispatchFailed';}"}],"tableHeader":[{"name":"@lang.['taskId','Task ID']","options":{"flex":1.5,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"workOrderTaskId","primaryKey":true},{"name":"@lang.['r11','Reasons']","options":{"flex":2,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"reason"},{"name":"@lang.['ss9','Scheduled Start']","options":{"flex":2,"sortOrder":"ASC","sortable":true,"type":"dateTime","showLabel":true},"key":"workOrderTaskScheduledDate"},{"name":"@lang.['se1','Scheduled End']","options":{"flex":2,"sortOrder":"ASC","sortable":true,"type":"dateTime","showLabel":true},"key":"workOrderTaskDueDate"},{"name":"@lang.['a4','Assignee']","options":{"flex":1.5,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"assignee"},{"name":"@lang.['taskType','Task Type']","options":{"flex":1.5,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"taskTypeName"},{"name":"@lang.['c16','Customer']","options":{"flex":1.5,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"customerCompanyName"},{"name":"@lang.['cs','Customer Site']","options":{"flex":1.5,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"customerSiteName"}],"searchKeys":["workOrderTaskId","assignee","taskTypeName","customerCompanyName","customerSiteName"]}}],"label":"","id":"dispatchFailed","type":"section","transparent":true}]},"actions":[{"name":"closePanel","type":"closePanel"},{"name":"setInitialData","type":"script","actionDef":"function (pageContext) { if (typeof pageContext.successFailedData != 'undefined' && pageContext.successFailedData.length > 0) { pageContext.successTaskList = pageContext.successFailedData[0].successTaskList; pageContext.failureTaskList = pageContext.successFailedData[0].failureTaskList; if ( typeof pageContext.failureTaskList !== 'undefined' && pageContext.failureTaskList !=='' && pageContext.failureTaskList.length > 0) { pageContext.failureTaskList.forEach(function (ele) { var reason = ''; if (ele.crewIssue === true) { reason = pageContext.localizedData[0].listOptionAnswerAnswerOptionText; } if (ele.dependencyIssue === true) { reason = reason.concat(', ',pageContext.localizedData[1].listOptionAnswerAnswerOptionText); } ele['reason'] = reason; });} } }"},{"name":"clearPageContext","type":"clearPageContext"},{"name":"fetchDatagridValues","outputVarMap":{"data":"@pageContext.successFailedData"},"type":"query","actionDef":{"filter":"{$dispatchLogId} = {@dispatchLogId} ","models":["dispatchLog"],"inputs":{"dispatchLogId":"@pageContext.dispatchLogId"},"columns":{"successTaskList":"dispatchLog.successTaskList","dispatchLogId":"dispatchLog.id","failureTaskList":"dispatchLog.failureTaskList"}}},{"name":"fetchListOption","outputVarMap":{"data":"@pageContext.localizedData"},"type":"query","actionDef":{"filter":"{$listOptionAnswer.listOptionId}='bulkDispatchFailedReason'","models":["listOptionAnswer"],"inputs":{"dispatchLogId":"@pageContext.dispatchLogId"},"columns":{"listOptionAnswerId":"listOptionAnswer.id","listOptionAnswerAnswerOptionText":"listOptionAnswer.answerOptionText"},"translate":true}},{"name":"refreshDataGrid","type":"refreshDataGrid"},{"name":"enableRecordGrid","type":"script","actionDef":"function(pageContext){pageContext.enable=true;}"}]}