{"pageContext":{},"actionOnLoad":["@actions.initialData","@actions.getMinDate"],"localPageContext":true,"jslib":{"isDeleteHidden":"function(pageContext) {return (pageContext.publicHolidayAction === 'add')}","dynamicHeaderText":"function(pageContext){ if(pageContext.publicHolidayAction === 'add'){return '@lang.[\"anh\",\"Add New Holiday\"]'}else if(pageContext.publicHolidayAction === 'edit'){return '@lang.[\"eh\",\"Edit Holiday\"]'}}","isSaveDisabled":"function(pageContext){if (pageContext.publicHolidayAction === 'add' && pageContext.holidayName != '' && pageContext.holidayName != '-' && pageContext.holidayDate != '') { return false; } else if (pageContext.publicHolidayAction === 'edit' && pageContext.holidayName != '' && pageContext.holidayName != '-' && pageContext.holidayDate != '' && (pageContext.holidayName != pageContext.initialName || pageContext.holidayDate != pageContext.initialDate)) { return false; } else { return true; }}"},"header":{"children":[{"activeIcon":"@iconlib.ActionsBinPurple","hidden":true,"icon":"@iconlib.ActionsBinGrey","tooltip":"@lang.['d1','Delete']","actionOnClick":["@actions.openModal"],"id":"delete","type":"buttonIcon"},{"buttonType":"primary","actionOnClick":["@actions.setSubActionUpsert","@actions.fireProcessEvent","@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"disabled":"@jslib.isSaveDisabled","id":"submit","type":"button","title":"@lang.['s12','Save']"},{"icon":"@iconlib.NavigationCloseGrey","actionOnClick":["@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"id":"close","type":"buttonIcon"}],"title":"@jslib.dynamicHeaderText"},"body":{"children":[{"children":[{"isRequired":true,"inputType":"text","id":"holidayName","label":"@lang.['hn','Holiday Name']","placeholder":"@lang.['en1','Enter name']","type":"input","value":"@pageContext.holidayName"},{"isRequired":true,"minDate":"@pageContext.minDate","id":"date","title":"@lang.['d3','Date']","type":"date","value":"@pageContext.holidayDate","placeHolder":"@lang.['ed4','Enter date']"}],"label":"@lang.['h1','Holiday']","id":"publicHolidayInfo","type":"section"}]},"actions":[{"name":"closePanel","type":"closePanel"},{"name":"initialData","type":"script","actionDef":"function(pageContext){ if(pageContext.publicHolidayAction === 'add'){ pageContext.holidayName = ''; pageContext.holidayDate = '';} else if (pageContext.publicHolidayAction === 'edit'){pageContext.initialName = pageContext.holidayName; pageContext.initialDate = pageContext.holidayDate;}}"},{"name":"setSubActionUpsert","type":"script","actionDef":"function(pageContext){pageContext.subAction='upsertHoliday';}"},{"name":"setSubActionDelete","type":"script","actionDef":"function(pageContext){pageContext.subAction='deleteHoliday';}"},{"subTitle":"@lang.['aysywtdtphtcbu','Are you sure you want to delete the public holiday? This cannot be undone.']","name":"openModal","options":[{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.setSubActionDelete","@actions.fireProcessEvent","@actions.closeModal","@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"type":"button","title":"@lang.['d1','Delete']"}],"type":"openModal","title":"@lang.['dh','Delete Holiday']"},{"name":"getMinDate","type":"script","actionDef":"function(pageContext){var minDate = new Date(); minDate.setDate(1); minDate.setMonth(0); pageContext.minDate = minDate.toISOString().replace(/T/, ' ').replace(/\\..+/, '')}"},{"endPoint":"event/start","name":"fireProcessEvent","type":"api","actionDef":{"data":[{"eventId":"settingsGeneralPublicHolidayProcessEvent","contextVar":{"subAction":"@pageContext.subAction","holiday":{"date":"@pageContext.holidayDate","recver":"@pageContext.holidayRecver","name":"@pageContext.holidayName","id":"@pageContext.holidayId"}}}]}},{"name":"closeModal","type":"closeModal"},{"name":"clearPageContext","type":"clearPageContext"},{"name":"refreshDataGrid","type":"refreshDataGrid"}]}