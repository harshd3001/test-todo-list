{"pageContext":{},"actionOnLoad":["@actions.fetchSelectedServices","@actions.setInitialData"],"localPageContext":true,"jslib":{"isAddServicesDisabled":"function (pageContext) { if (typeof pageContext.initialSelectedRowIdsArray !== 'undefined' && pageContext.initialSelectedRowIdsArray !== '' && pageContext.initialSelectedRowIdsArray.length > 0 && typeof pageContext.selectedRowIds !== 'undefined' && pageContext.selectedRowIds !== '' && pageContext.selectedRowIds.length > 0 && pageContext.selectedRowIds.length !== pageContext.initialSelectedRowIdsArray.length) { return false; } else { if (typeof pageContext.selectedRowIds !== 'undefined' && pageContext.selectedRowIds !== '' && pageContext.selectedRowIds.length > 0 && typeof pageContext.initialSelectedRowIdsArray !== 'undefined' && pageContext.initialSelectedRowIdsArray !== '' && pageContext.initialSelectedRowIdsArray.length > 0) { for (var i in pageContext.selectedRowIds) { if (pageContext.initialSelectedRowIdsArray.indexOf(pageContext.selectedRowIds[i].catalogId) == -1) { return false; } } return true; } } if(typeof pageContext.selectedRowIds !== 'undefined' && pageContext.selectedRowIds !== '' && pageContext.selectedRowIds.length ===0){ return true; } }"},"header":{"leftData":{"children":[{"name":"back","icon":"@iconlib.NavigationArrowBackGrey","actionOnClick":["@actions.openPreviousPanel"],"type":"buttonIcon"}]},"children":[{"buttonType":"primary","actionOnClick":["@actions.setSelectedServices","@actions.fireProcessEvent","@actions.openPreviousPanel","@actions.refreshGridOnSidePanel"],"disabled":"@jslib.isAddServicesDisabled","id":"submit","type":"button","title":"@lang.['s12','Save']"}],"title":"@lang.['es8','Edit Services']"},"body":{"children":[{"name":"@lang.['s18','servicesGrid']","label":"","id":"servicesGrid","type":"dataGrid","jsonDef":{"isScrollAble":true,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSync":true,"tableHeader":[{"name":"@lang.['c3','catalogId']","options":{"hidden":true,"showLabel":false},"key":"catalogId","primaryKey":true},{"name":"@lang.['n','Name']","options":{"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"catalogName"},{"name":"@lang.['d','Description']","options":{"sortable":false,"showLabel":true},"key":"catalogDescription"}],"dataToBeSent":{"filter":"{$catalog.catalogTypeId}='service'","models":["catalog"],"columns":{"catalogName":"catalog.name","catalogRecver":"catalog.recver","catalogId":"catalog.id","catalogDescription":"catalog.description"},"orderBy":"catalogName ASC","outerJoinOnModel":"catalog","distinct":true,"outputVarMap":{"data":"@pageContext.servicelist"}},"rowsToSelect":{"filter":"{$catalogId} in {@selectedServices}","models":["catalog"],"inputs":{"selectedServices":"@pageContext.selectedServices"},"columns":{"catalogName":"catalog.name","catalogRecver":"catalog.recver","catalogId":"catalog.id"}},"dataSourceId":"query/read","header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['navS3','Services']"},"isSelectable":true,"actions":[],"searchKeys":["catalogName"]}}],"label":"Services","id":"datagridServices","type":"section","transparent":true},"updateAllowed":true,"isSelectable":true,"actions":[{"parentPanelRefreshRequired":false,"name":"openPreviousPanel","type":"backPanel","requiredPageContextKeys":"[\"selectedServices\",\"selectedServicesList\"]"},{"endPoint":"event/start","name":"fireProcessEvent","outputVarMap":{"data":"@pageContext.taskTypeServiceList"},"type":"api","actionDef":{"data":[{"eventId":"settingsWorkOrderTaskTypeProcessEvent","contextVar":{"taskType":[{"recver":"@pageContext.taskTypeRecver","id":"@pageContext.taskTypeId","services":"@pageContext.selectedRowIds"}],"subAction":"@pageContext.subAction"}}]}},{"name":"fetchSelectedServices","outputVarMap":{"data":"@pageContext.selectedServiceList"},"type":"query","actionDef":{"filter":"{$catalogId} in {@selectedServices}","models":["catalog"],"inputs":{"selectedServices":"@pageContext.selectedServices"},"columns":{"catalogName":"catalog.name","catalogRecver":"catalog.recver","catalogId":"catalog.id"}}},{"name":"setInitialData","type":"script","actionDef":"function(pageContext){pageContext.initialSelectedRowIdsArray=[];if(typeof pageContext.selectedServiceList !== 'undefined' && pageContext.selectedServiceList !== '' && pageContext.selectedServiceList.length>0){for(var i=0;i<pageContext.selectedServiceList.length;i++){pageContext.initialSelectedRowIdsArray.push(pageContext.selectedServiceList[i].catalogId);}}}"},{"name":"setSelectedServices","type":"script","actionDef":"function (pageContext) { pageContext.subAction='upsertTaskType';pageContext.selectedServices = []; pageContext.selectedServicesList=[]; if (typeof pageContext.selectedRowIds !== 'undefined' && pageContext.selectedRowIds !== '' && pageContext.selectedRowIds.length > 0) { for (var i = 0; i < pageContext.selectedRowIds.length; i++) { pageContext.selectedServices.push(pageContext.selectedRowIds[i].catalogId); }pageContext.selectedServicesList=pageContext.selectedRowIds;  } }"},{"name":"refreshGridOnSidePanel","gridId":["taskTypeServicesDataGrid"],"type":"RefreshGridOnSidePanel"}]}