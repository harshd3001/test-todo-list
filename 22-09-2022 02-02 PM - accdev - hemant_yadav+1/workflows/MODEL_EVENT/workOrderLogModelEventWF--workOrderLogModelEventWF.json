{"processInputData":{"connectors":[{"exitPortType":"NextStep","nodeId":"checkTypeOfModelEvent"}],"contextChangePermitted":true,"name":"processInputData","description":"processInputData","processRule":"{for (const key in contextVar.data) { contextVar[key] = contextVar.data[key]; } if (contextVar.eventType === 'AFTER_INSERT') { contextVar.workOrderLog = [{ 'logDate': contextVar.modifiedDate, 'loggedByUserId': contextVar.modifiedByUser, 'event': 'workOrderCreated', 'workOrderId': contextVar.id }]; }}","nodeType":"PROCESS","jsEngine":"es6"},"processUpdateLogsData":{"connectors":[{"exitPortType":"NextStep","nodeId":"callWorkOrderLogWF"}],"contextChangePermitted":true,"name":"processUpdateLogsData","description":"processUpdateLogsData","processRule":"{contextVar.workOrderLog = []; var details = ''; if(contextVar.statusId === 'workOrderScheduled' || contextVar.statusId === 'workOrderInProgress' || contextVar.statusId === 'workOrderCompleted' || contextVar.statusId === 'workOrderOpen'){ details = contextVar.listOptionData[0].listOptionAnswerText; } else { details = contextVar.cancellationReason; } contextVar.workOrderLog = [{ 'logDate': contextVar.modifiedDate, 'loggedByUserId': contextVar.modifiedByUser, 'details': details, 'event': contextVar.statusId, 'workOrderId': contextVar.id }];}","nodeType":"PROCESS","jsEngine":"es6"},"workflowContext":{},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"processInputData"}],"name":"start","description":"start","nodeType":"START"},"checkTypeOfModelEvent":{"connectors":[{"exitPortType":"TrueStep","nodeId":"callWorkOrderLogWF"},{"exitPortType":"FalseStep","nodeId":"fetchBeforeUpdateData"}],"name":"checkTypeOfModelEvent","description":"checkTypeOfModelEvent","processRule":"contextVar.eventType === 'AFTER_INSERT' ","nodeType":"DECISION"},"callWorkOrderLogWF":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"processId":"WorkOrderLogWF","multirecord":true,"name":"callWorkOrderLogWF","description":"callWorkOrderLogWF","inputVarMap":{"workOrderLog":"workOrderLog"},"outputVarMap":{"data":"data"},"nodeType":"WORKFLOW"},"end":{"name":"end","description":"end","inputVarMap":{},"outputVarMap":{},"nodeType":"END"},"fetchlistOptionData":{"filter":"{$listOption.id} = 'workOrderLogDetails' ","models":["listOption","listOptionAnswer"],"connectors":[{"exitPortType":"NextStep","nodeId":"processUpdateLogsData"}],"columns":{"listOptionAnswer":"listOptionAnswer.id","listOptionAnswerText":"listOptionAnswer.answerOptionText"},"name":"fetchlistOptionData","description":"fetchlistOptionData","inputVarMap":{},"outputVarMap":{"data":"listOptionData"},"nodeType":"QUERY","translate":true},"checkLastLoggedStatus":{"connectors":[{"exitPortType":"TrueStep","nodeId":"fetchlistOptionData"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"checkLastLoggedStatus","description":"checkLastLoggedStatus","processRule":"{contextVar.statusId !== contextVar.lastLoggedStatus[0].workOrderStatusId}","nodeType":"DECISION"},"workflowNodes":["start","processInputData","checkTypeOfModelEvent","fetchBeforeUpdateData","checkLastLoggedStatus","fetchlistOptionData","processUpdateLogsData","callWorkOrderLogWF","end"],"fetchBeforeUpdateData":{"filter":"{$workOrder.id} = {@workOrderId}","models":["workOrder"],"connectors":[{"exitPortType":"NextStep","nodeId":"checkLastLoggedStatus"}],"columns":{"workOrderStatusId":"workOrder.statusId"},"name":"fetchBeforeUpdateData","description":"fetchBeforeUpdateData","inputVarMap":{"id":"workOrderId"},"outputVarMap":{"data":"lastLoggedStatus"},"nodeType":"QUERY"}}