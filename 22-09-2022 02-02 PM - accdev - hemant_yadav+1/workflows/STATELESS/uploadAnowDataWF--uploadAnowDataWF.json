{"callFetchAnowDataForUploadWF":{"connectors":[{"exitPortType":"NextStep","nodeId":"insertDataIntoAcAnowImport"}],"processId":"fetchAnowDataForUpload","name":"callFetchAnowDataForUploadWF","description":"Get data of all unprocessed records","inputVarMap":{},"id":"callFetchAnowDataForUploadWF","outputVarMap":{"uploadData":"uploadData"},"nodeType":"WORKFLOW"},"upsertDataForProcessed":{"modelName":"acAnowImportTemp","connectors":[{"exitPortType":"NextStep","nodeId":"processCustomer"}],"multirecord":true,"name":"upsertDataForProcessed","description":"Mark the records as processed","inputVarMap":{"updateProcessData":"data"},"id":"upsertDataForProcessed","outputVarMap":{"data":"processResult"},"nodeType":"MODEL","operation":4},"insertDataIntoAcAnowImport":{"modelName":"acAnowImport","connectors":[{"exitPortType":"NextStep","nodeId":"getProcessedData"}],"multirecord":true,"name":"insertDataIntoAcAnowImport","description":"Bulk insert into acAnowImport","inputVarMap":{"uploadData":"data"},"id":"insertDataIntoAcAnowImport","outputVarMap":{"data":"multiRecResult"},"nodeType":"MODEL","operation":1},"workflowContext":{"targetType":"user","userId":"{@userId}"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"callFetchAnowDataForUploadWF"}],"nodeSource":"./static/media/start.018acd1a.svg","name":"start","description":"Start","id":"start","position":{"x":1,"y":-14},"nodeType":"START"},"processCustomer":{"connectors":[{"exitPortType":"NextStep","nodeId":"modelCustomer"}],"contextChangePermitted":true,"name":"processCustomer","description":"Use this for processing data in workflow","processRule":"{ contextVar.customer = []; contextVar.statusTargetModel = 'customer'; contextVar.statusId = 'customerActive'; for (var k = 0; k < contextVar.uploadData.length; k++) { contextVar.customer.push({ 'id': contextVar.uploadData[k].orderedByName, 'contactPhone': contextVar.uploadData[k].contactPhone, 'acAddressTwo': contextVar.uploadData[k].addressTwo, 'state': contextVar.uploadData[k].orderedByState, 'billingAddress': contextVar.uploadData[k].orderedByAddress, 'statusId': contextVar.statusId, 'isDeactivated': false, 'contactPerson': contextVar.uploadData[k].contactFirstName + ' ' + contextVar.uploadData[k].contactLastName, 'companyName': contextVar.uploadData[k].orderedByName, 'postalCode': contextVar.uploadData[k].orderedByZipCode, 'city': contextVar.uploadData[k].orderedByCity, 'contactEmail': contextVar.uploadData[k].contactEmail, 'statusTargetModel': contextVar.statusTargetModel, 'acClientId': contextVar.uploadData[k].orderedByCustomId, 'country': contextVar.uploadData[k].orderedByCountry }) } }","id":"processCustomer","position":{"x":183.875,"y":-51.0625},"nodeType":"PROCESS"},"end":{"nodeSource":"./static/media/end.5c5273bd.svg","name":"end","description":"End","inputVarMap":{},"outputVarMap":{},"id":"end","position":{"x":388,"y":-27},"nodeType":"END"},"modelCustomer":{"modelName":"customer","connectors":[{"exitPortType":"NextStep","nodeId":"notifyTaskCompleted"}],"multirecord":true,"name":"modelCustomer","description":"Bulk insert into acAnowImport","inputVarMap":{"customer":"data"},"id":"modelCustomer","outputVarMap":{"data":"customerId"},"position":{"x":265.25,"y":-142.78125},"nodeType":"MODEL","operation":4},"workflowNodes":["start","end","callFetchAnowDataForUploadWF","insertDataIntoAcAnowImport","upsertDataForProcessed","getProcessedData","processCustomer","modelCustomer","notifyTaskCompleted"],"notifyTaskCompleted":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"name":"notifyTaskCompleted","description":"Notify via web","inputVarMap":{"{@userId}":"userId","targetType":"targetType"},"targetType":"user","notificationType":"web","outputVarMap":{},"nodeType":"NOTIFY","templateId":"taskCompletion"},"getProcessedData":{"connectors":[{"exitPortType":"NextStep","nodeId":"upsertDataForProcessed"}],"contextChangePermitted":true,"name":"getProcessedData","description":"Use this for processing data in workflow","processRule":"{contextVar.updateProcessData = []; for(var k=0; k<contextVar.uploadData.length; k++){contextVar.updateProcessData.push({'id':contextVar.uploadData[k].tempId,'processed':true})}}","id":"getProcessedData","position":{"x":183.875,"y":-51.0625},"nodeType":"PROCESS"}}