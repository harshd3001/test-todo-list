{"isCalledFromPage":{"connectors":[{"exitPortType":"TrueStep","nodeId":"end"},{"exitPortType":"FalseStep","nodeId":"findNumberOfBatches"}],"name":"isCalledFromPage","description":"isCalledFromPage","processRule":"contextVar.calledFromPage === true","nodeType":"DECISION"},"appendStockUnit":{"connectors":[{"exitPortType":"NextStep","nodeId":"areMoreStockUnitPresent"}],"contextChangePermitted":true,"name":"appendStockUnit","description":"appendRequests","processRule":"if (Array.isArray(contextVar.appendStockUnitData)) { contextVar.stockUnitData = contextVar.stockUnitData.concat(contextVar.appendStockUnitData) } contextVar.stockUnitBatchNumber++;","nodeType":"PROCESS"},"workflowContext":{"customBatchSize":1000,"calledFromPage":true,"customBatchNumber":1},"findNumberOfBatches":{"connectors":[{"exitPortType":"NextStep","nodeId":"areMoreStockUnitPresent"}],"contextChangePermitted":true,"name":"findNumberOfBatches","description":"findNumberOfBatches","processRule":"{contextVar.noOfBatches = Math.ceil(contextVar.totalStockUnitCount / contextVar.customBatchSize);contextVar.stockUnitBatchNumber++;}","id":"findNumberOfBatches","nodeType":"PROCESS"},"areMoreStockUnitPresent":{"connectors":[{"exitPortType":"TrueStep","nodeId":"fetchMoreStockUnitData"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"areMoreStockUnitPresent","description":"areMoreStockUnitPresent","processRule":"contextVar.noOfBatches >= 2 && contextVar.noOfBatches >= contextVar.stockUnitBatchNumber","nodeType":"DECISION"},"fetchMoreStockUnitData":{"models":["stockUnit"],"connectors":[{"exitPortType":"NextStep","nodeId":"appendStockUnit"}],"columns":{"name":"stockUnit.name","description":"stockUnit.description","id":"stockUnit.id"},"description":"Fetch stockUnit Details","orderBy":"orderBy","distinct":true,"inputVarMap":{"stockUnitModelFilter":"filter","orderBy":"orderBy","stockUnitIdList":"stockUnitIdList","batchSize":"batchSize","batchNumber":"batchNumber"},"nodeType":"QUERY","filter":"filter","name":"fetchMoreStockUnitData","outputVarMap":{"data":"appendStockUnitData"},"batchSize":"batchSize","getCount":true,"batchNumber":"batchNumber"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"processInitialParameters"}],"name":"start","description":"Start","nodeType":"START"},"end":{"name":"end","description":"end","inputVarMap":{"stockUnitData":"stockUnitData","totalStockUnitCount":"count"},"outputVarMap":{"stockUnitData":"stockUnitData","count":"count"},"nodeType":"END"},"fetchStockUnitData":{"models":["stockUnit"],"connectors":[{"exitPortType":"NextStep","nodeId":"isCalledFromPage"}],"columns":{"name":"stockUnit.name","description":"stockUnit.description","id":"stockUnit.id"},"description":"Fetch stockUnit Details","orderBy":"orderBy","distinct":true,"inputVarMap":{"stockUnitModelFilter":"filter","orderBy":"orderBy","stockUnitIdList":"stockUnitIdList","batchSize":"batchSize","batchNumber":"batchNumber"},"nodeType":"QUERY","filter":"filter","name":"fetchStockUnitData","outputVarMap":{"data":"stockUnitData","count":"totalStockUnitCount","batchNumber":"stockUnitBatchNumber"},"batchSize":"batchSize","getCount":true,"batchNumber":"batchNumber"},"workflowNodes":["start","processInitialParameters","fetchStockUnitData","isCalledFromPage","findNumberOfBatches","areMoreStockUnitPresent","fetchMoreStockUnitData","appendStockUnit","end"],"processInitialParameters":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchStockUnitData"}],"contextChangePermitted":true,"name":"processInitialParameters","description":"processInitialParameters","processRule":"{ if (typeof contextVar.stockUnitFilter !== 'undefined' && contextVar.stockUnitFilter !== '') { contextVar.stockUnitModelFilter = contextVar.stockUnitFilter; } else if (typeof contextVar.stockUnitIdList !== 'undefined' && contextVar.stockUnitIdList.length > 0) { contextVar.stockUnitModelFilter = '{$stockUnit.id} IN {@stockUnitIdList}'; contextVar.calledFromPage = false; } if (typeof contextVar.batchSize === 'undefined' || contextVar.batchSize === '') { contextVar.batchSize = contextVar.customBatchSize; contextVar.batchNumber = contextVar.customBatchNumber; contextVar.calledFromPage = false; } }","nodeType":"PROCESS","jsEngine":"es6"}}