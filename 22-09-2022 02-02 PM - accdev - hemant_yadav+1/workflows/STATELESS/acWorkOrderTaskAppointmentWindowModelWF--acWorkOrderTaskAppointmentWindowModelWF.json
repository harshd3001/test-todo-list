{"initializeData":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchTasks"}],"contextChangePermitted":true,"name":"initializeData","description":"initializeData","processRule":"{contextVar.workOrderId = contextVar.workOrderTaskData[0].workOrderId }","id":"initializeData","nodeType":"PROCESS"},"processTaskData":{"connectors":[{"exitPortType":"NextStep","nodeId":"upsertWorkOrderTaskAppointmentWindow1"}],"contextChangePermitted":true,"name":"processTaskData","description":"processTaskData","processRule":"{ if (contextVar.taskDetail !== '' && typeof contextVar.taskDetail !== 'undefined' && contextVar.taskDetail.length > 0) { contextVar.taskId = contextVar.taskDetail[0].id; } contextVar.workOrderTaskAppointmentWindow[0].workOrderTaskId = contextVar.taskId; }","id":"processTaskData","nodeType":"PROCESS"},"fetchExistingAppointmentWindows":{"filter":"{$workOrderTaskAppointmentWindow.workOrderTaskId} = {@workOrderTaskId}","models":["workOrderTaskAppointmentWindow"],"connectors":[{"exitPortType":"NextStep","nodeId":"checkIfDataToBeDeletedPresent"}],"columns":{"recver":"workOrderTaskAppointmentWindow.recver","id":"workOrderTaskAppointmentWindow.id"},"name":"fetchExistingAppointmentWindows","description":"fetchExistingAppointmentWindows","inputVarMap":{"workOrderTaskId":"workOrderTaskId"},"outputVarMap":{"data":"toDeleteAWData"},"nodeType":"QUERY"},"fetchWorkOrderTaskData":{"filter":"{$id}= {@taskId}","models":["workOrderTask"],"connectors":[{"exitPortType":"NextStep","nodeId":"initializeData"}],"columns":{"id":"workOrderTask.id","workOrderId":"workOrderTask.workOrderId"},"name":"fetchWorkOrderTaskData","description":"fetchWorkOrderTaskData","inputVarMap":{"workOrderTaskId":"taskId"},"outputVarMap":{"data":"workOrderTaskData"},"nodeType":"QUERY"},"addWorkOrderTaskIdInAWData":{"connectors":[{"exitPortType":"NextStep","nodeId":"upsertWorkOrderTaskAppointmentWindow"}],"contextChangePermitted":true,"name":"addWorkOrderTaskIdInAWData","description":"addWorkOrderTaskIdInAWData","processRule":"contextVar.workOrderTaskAppointmentWindow.forEach(function(ele){ ele.workOrderTaskId=contextVar.workOrderTaskId; ele.startEndJson=[{ start:ele.startDate, end:ele.endDate }] });","nodeType":"PROCESS"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchExistingAppointmentWindows"}],"name":"start","description":"Start","nodeType":"START"},"checkIfDataToBeUpsertedPresent":{"connectors":[{"exitPortType":"TrueStep","nodeId":"addWorkOrderTaskIdInAWData"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"checkIfDataToBeUpsertedPresent","description":"checkIfDataToBeUpsertedPresent","processRule":"Array.isArray(contextVar.workOrderTaskAppointmentWindow) && contextVar.workOrderTaskAppointmentWindow.length>0","nodeType":"DECISION"},"fetchTasks":{"filter":"{$workOrderTask.workOrderId} = {@workOrderId} && {$id} != {@taskId} ","models":["workOrderTask","workOrder"],"connectors":[{"condition":"","connectorDisplayType":"CurvedLine","connectorLabel":"","exitPortType":"NextStep","nodeId":"processTaskData"}],"columns":{"acPrimaryAppraiserId":"workOrder.acPrimaryAppraiserId","id":"workOrderTask.id"},"name":"fetchTasks","distinct":true,"description":"fetchTasks","inputVarMap":{"workOrderTaskId":"taskId","workOrderId":"workOrderId"},"outputVarMap":{"data":"taskDetail","count":"count1"},"id":"fetchTasks","nodeType":"QUERY","getCount":true},"workflowNodes":["start","fetchExistingAppointmentWindows","checkIfDataToBeDeletedPresent","deleteWorkOrderTaskAppointmentWindow","checkIfDataToBeUpsertedPresent","addWorkOrderTaskIdInAWData","upsertWorkOrderTaskAppointmentWindow","fetchWorkOrderTaskData","initializeData","fetchTasks","processTaskData","upsertWorkOrderTaskAppointmentWindow1","end"],"upsertWorkOrderTaskAppointmentWindow":{"modelName":"workOrderTaskAppointmentWindow","connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"multirecord":true,"name":"upsertWorkOrderTaskAppointmentWindow","description":"upsertModel","inputVarMap":{"workOrderTaskAppointmentWindow":"data"},"outputVarMap":{"data":"workOrderTaskAppointmentWindowUpsertedData"},"nodeType":"MODEL","operation":4},"upsertWorkOrderTaskAppointmentWindow1":{"modelName":"workOrderTaskAppointmentWindow","connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"multirecord":true,"name":"upsertWorkOrderTaskAppointmentWindow1","description":"upsertModel","inputVarMap":{"workOrderTaskAppointmentWindow":"data"},"outputVarMap":{"data":"workOrderTaskAppointmentWindowUpsertedData"},"nodeType":"MODEL","operation":4},"end":{"name":"End","description":"end","inputVarMap":{},"outputVarMap":{},"nodeType":"END"},"deleteWorkOrderTaskAppointmentWindow":{"modelName":"workOrderTaskAppointmentWindow","connectors":[{"exitPortType":"NextStep","nodeId":"checkIfDataToBeUpsertedPresent"}],"multirecord":true,"name":"deleteWorkOrderTaskAppointmentWindow","description":"upsertModel","inputVarMap":{"toDeleteAWData":"data"},"outputVarMap":{"data":"workOrderTaskAppointmentWindowDeletedData"},"nodeType":"MODEL","operation":3},"checkIfDataToBeDeletedPresent":{"connectors":[{"exitPortType":"TrueStep","nodeId":"deleteWorkOrderTaskAppointmentWindow"},{"exitPortType":"FalseStep","nodeId":"checkIfDataToBeUpsertedPresent"}],"name":"checkIfDataToBeDeletedPresent","description":"checkIfDataToBeDeletedPresent","processRule":"Array.isArray(contextVar.toDeleteAWData) && contextVar.toDeleteAWData.length>0","nodeType":"DECISION"}}