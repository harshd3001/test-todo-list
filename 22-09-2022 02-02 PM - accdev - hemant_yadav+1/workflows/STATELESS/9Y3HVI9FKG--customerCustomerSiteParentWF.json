{"upsertSiteData":{"connectors":[{"exitPortType":"NextStep","nodeId":"isSiteChangeApproved"}],"contextChangePermitted":true,"processId":"customerCustomerSiteWF","name":"upsertSiteData","description":"upsertSiteData","inputVarMap":{"site":"site","subAction":"subAction"},"id":"upsertSiteData","nodeType":"WORKFLOW"},"autoCancelWorkOrderTasks":{"connectors":[{"exitPortType":"NextStep","nodeId":"setSiteIdListAndAssetSubAction"}],"contextChangePermitted":true,"processId":"QIFGIU7FDJ","name":"autoCancelWorkOrderTasks","description":"autoCancelWorkOrderTasks","inputVarMap":{"cancellationSubAction":"subAction","cancellationReason":"workOrderTaskCancellationReason","siteId":"siteId"},"id":"autoCancelWorkOrderTasks","nodeType":"WORKFLOW"},"setSiteIdListAndAssetSubAction":{"connectors":[{"exitPortType":"NextStep","nodeId":"upsertAssets"}],"contextChangePermitted":true,"name":"setSiteIdListAndAssetSubAction","description":"setSiteIdListAndAssetSubAction","processRule":"{contextVar.siteIdList=[];for(var index in contextVar.site){contextVar.siteIdList.push(contextVar.site[index].id);}contextVar.assetSubAction='deactivateInstalledBase';}","nodeType":"PROCESS"},"fetchAddressFromLatLong":{"connectors":[{"exitPortType":"NextStep","nodeId":"upsertSiteData"}],"contextChangePermitted":true,"processId":"fetchAddressFromLatLong","name":"fetchAddressFromLatLong","description":"fetchAddressFromLatLong","inputVarMap":{},"id":"fetchAddressFromLatLong","nodeType":"WORKFLOW"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchAddressFromLatLong"}],"name":"start","description":"Start","nodeType":"START"},"upsertToSiteLog":{"modelName":"siteChangeLog","connectors":[{"exitPortType":"NextStep","nodeId":"multiDecision"}],"name":"upsertToSiteLog","description":"Update data to site log","inputVarMap":{"siteChangeLogId":"id","originalSiteDetails":"originalSiteDetails"},"id":"upsertToSiteLog","outputVarMap":{"data":"siteChangeLogData"},"multiRecord":false,"nodeType":"MODEL","operation":2},"isSiteChangeApproved":{"connectors":[{"exitPortType":"TrueStep","nodeId":"processOriginalSiteDetails"},{"exitPortType":"FalseStep","nodeId":"multiDecision"}],"name":"isSiteChangeApproved","description":"isSiteChangeApproved","processRule":"(typeof contextVar.computeMode !== 'undefined' &&  contextVar.computeMode !=='' && contextVar.computeMode=='true')","nodeType":"DECISION"},"processOriginalSiteDetails":{"connectors":[{"exitPortType":"NextStep","nodeId":"upsertToSiteLog"}],"contextChangePermitted":true,"name":"processOriginalSiteDetails","description":"Use this for processing data in workflow","processRule":"contextVar.originalSiteDetails=[];contextVar.originalSiteDetailValues={};contextVar.originalSiteDetailValues.siteId=contextVar.site[0].id;contextVar.originalSiteDetailValues.address=contextVar.site[0].siteAddress;contextVar.originalSiteDetailValues.latitude=contextVar.site[0].siteLatitude;contextVar.originalSiteDetailValues.longitude=contextVar.site[0].siteLongitude;contextVar.originalSiteDetails.push(contextVar.originalSiteDetailValues);","id":"processOriginalSiteDetails","nodeType":"PROCESS"},"workflowNodes":["start","fetchAddressFromLatLong","upsertSiteData","isSiteChangeApproved","processOriginalSiteDetails","upsertToSiteLog","multiDecision","isDeactivatingCustomerOrSite","autoCancelWorkOrderTasks","setSiteIdListAndAssetSubAction","upsertAssets","end"],"workflowContext":{"cancellationReason":"@lang.['customerSiteDeactivated','Customer Site Deactivated']"},"multiDecision":{"connectors":[{"condition":"contextVar.subAction==='deactivateCustomerSite'","exitPortType":"NextStep","nodeId":"isDeactivatingCustomerOrSite"},{"DefaultStep":true,"condition":"contextVar.subAction===''","exitPortType":"NextStep","nodeId":"end"}],"name":"multiDecision","description":"multiDecision","nodeType":"MULTIDECISION"},"upsertAssets":{"eventId":"QPYBKL7WY1","connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"contextChangePermitted":true,"name":"upsertAssets","description":"upsertAssets","inputVarMap":{"assetSubAction":"subAction","siteIdList":"siteIdList"},"id":"upsertAssets","nodeType":"PUBLISH"},"end":{"name":"end","description":"end","nodeType":"END"},"isDeactivatingCustomerOrSite":{"connectors":[{"exitPortType":"TrueStep","nodeId":"autoCancelWorkOrderTasks"},{"exitPortType":"FalseStep","nodeId":"setSiteIdListAndAssetSubAction"}],"name":"isDeactivatingCustomerOrSite","description":"isDeactivatingCustomerOrSite","processRule":"(typeof contextVar.customerSubAction==='undefined' || contextVar.customerSubAction==='')","nodeType":"DECISION"}}