{"workflowContext":{"dependencyCheck":false,"rank":{"workOrderTaskDraft":0,"workOrderTaskCompleted":60,"workOrderTaskDiscontinued":50,"workOrderTaskReopened":10,"workOrderTaskInTransit":35,"workOrderTaskDispatched":30,"workOrderTaskDelayed":35,"workOrderTaskPendingReview":50,"workOrderTaskIncident":35,"workOrderTaskOpen":10,"workOrderTaskCancelled":60,"workOrderTaskScheduled":20,"workOrderTaskInProgress":40}},"fetchDependencyData":{"connectors":[{"exitPortType":"NextStep","nodeId":"checkIfPrecedentTasksPresent"}],"contextChangePermitted":true,"processId":"workOrderTaskDependencyDataFetchWF","name":"fetchDependencyData","description":"fetchDependencyData","inputVarMap":{"workOrderTaskId":"workOrderTaskId","workOrderId":"workOrderId"},"id":"fetchDependencyData","outputVarMap":{},"nodeType":"WORKFLOW"},"dependencyCheck":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"contextChangePermitted":true,"name":"dependencyCheck","description":"dependencyCheck","processRule":"{var count = 0; if (typeof contextVar.precedentTasksCurrentStatusIds !== 'undefined' && contextVar.precedentTasksCurrentStatusIds !== '' && typeof contextVar.taskDependencyData !== 'undefined' && contextVar.taskDependencyData !== '') { contextVar.dependencyCheck = false; if (contextVar.rank[contextVar.dependentTaskStatusId] === contextVar.rank[contextVar.taskDependencyData[0].taskDependencyDependentStatusId]) { contextVar.precedentTasksCurrentStatusIds.some(function (element) { if (contextVar.taskDependencyData[0].taskDependencyEnforceBoolean && contextVar.taskDependencyData[0].taskDependencyPrecedentTask.length > 1) { if (contextVar.rank[element.workOrderTaskStatusId] < contextVar.rank[contextVar.taskDependencyData[0].taskDependencyPrecedentStatusId]) { count++; } } else { if (contextVar.rank[element.workOrderTaskStatusId] < contextVar.rank[contextVar.taskDependencyData[0].taskDependencyPrecedentStatusId]) { contextVar.dependencyCheck = true; } else { contextVar.dependencyCheck = false; return true; } } }); if (contextVar.taskDependencyData[0].taskDependencyEnforceBoolean && contextVar.taskDependencyData[0].taskDependencyPrecedentTask.length > 1) { if (count > 0) contextVar.dependencyCheck = true; } }}}","nodeType":"PROCESS"},"checkIfPrecedentTasksPresent":{"connectors":[{"exitPortType":"TrueStep","nodeId":"fetchStatusOfPrecedentTask"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"checkIfPrecedentTasksPresent","description":"checkIfPrecedentTasksPresent","processRule":"Array.isArray(contextVar.precedentTaskIds) && contextVar.precedentTaskIds.length > 0","id":"checkIfPrecedentTasksPresent","nodeType":"DECISION"},"fetchStatusOfPrecedentTask":{"filter":"{$workOrderTaskId} IN {@precedentTaskIds}","models":["workOrderTask"],"connectors":[{"exitPortType":"NextStep","nodeId":"dependencyCheck"}],"columns":{"workOrderTaskStatusId":"workOrderTask.statusId","workOrderTaskId":"workOrderTask.id"},"name":"fetchStatusOfPrecedentTask","description":"fetchStatusOfPrecedentTask","links":{},"inputVarMap":{"precedentTaskIds":"precedentTaskIds"},"outputVarMap":{"data":"precedentTasksCurrentStatusIds","count":"count"},"nodeType":"QUERY","getCount":true},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchDependencyData"}],"name":"Start","description":"Start","nodeType":"START"},"end":{"name":"end","description":"End","inputVarMap":{"taskDependencyData":"taskDependencyData","dependencyCheck":"dependencyCheck","count":"count"},"outputVarMap":{"taskDependencyData":"taskDependencyData","dependencyCheck":"dependencyCheck","count":"count"},"nodeType":"END"},"workflowNodes":["start","fetchDependencyData","checkIfPrecedentTasksPresent","fetchStatusOfPrecedentTask","dependencyCheck","end"]}