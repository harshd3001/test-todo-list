{"getMoreFilteredTechnicians":{"models":["User","calendar","workforce","contractorWorkforce","contractorRegion","contractor"],"connectors":[{"exitPortType":"NextStep","nodeId":"appendTechs"}],"columns":{"workforceType":"workforce.workforceType","workforceUserId":"workforce.userId","userName":"User.name","workforceCalendarId":"workforce.calendarId"},"orderBy":"userName ASC","distinct":true,"inputVarMap":{"customBatchSize":"batchSize","calendarId":"calendarId","contractorIds":"contractorIds","contractorFilter":"filter","techsBatchNumber":"batchNumber"},"nodeType":"QUERY","filter":"filter","name":"getMoreFilteredTechnicians","links":{"calendar":"workforce","contractorRegion":"contractorWorkforce","contractor":"contractorRegion","contractorWorkforce":"workforce","User":"workforce"},"id":"getMoreFilteredTechnicians","outputVarMap":{"data":"appendContractorFilteredTechs"},"getCount":true},"appendTechs":{"connectors":[{"exitPortType":"NextStep","nodeId":"areMoreTechsPresent"}],"contextChangePermitted":true,"name":"appendTechs","description":"appendTechs","processRule":"if (Array.isArray(contextVar.appendContractorFilteredTechs)) { contextVar.techniciansData = contextVar.techniciansData.concat(contextVar.appendContractorFilteredTechs) } contextVar.techsBatchNumber = contextVar.techsBatchNumber + 1;","nodeType":"PROCESS"},"workflowContext":{"customBatchSize":1000,"noOfBatches":0},"findNumberOfBatches":{"connectors":[{"exitPortType":"NextStep","nodeId":"areMoreTechsPresent"}],"contextChangePermitted":true,"name":"findNumberOfBatches","description":"findNumberOfBatches","processRule":"{contextVar.noOfBatches = Math.ceil(contextVar.totalTechsCount / contextVar.customBatchSize);contextVar.techsBatchNumber = contextVar.techsBatchNumber + 1;}","id":"findNumberOfBatches","nodeType":"PROCESS"},"areMoreTechsPresent":{"connectors":[{"exitPortType":"TrueStep","nodeId":"getMoreFilteredTechnicians"},{"exitPortType":"FalseStep","nodeId":"addFilteredTechsToArray"}],"name":"areMoreTechsPresent","description":"areMoreTechsPresent","processRule":"contextVar.noOfBatches >= 2 && contextVar.noOfBatches >= contextVar.techsBatchNumber","nodeType":"DECISION"},"addFilteredTechsToArray":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"contextChangePermitted":true,"name":"addFilteredTechsToArray","description":"addFilteredTechsToArray","processRule":"contextVar.contractorFilteredTechs = [];if(typeof contextVar.techniciansData!=='undefined' && contextVar.techniciansData.length>0){ contextVar.techniciansData.forEach(function(element){ contextVar.contractorFilteredTechs.push(element.workforceUserId); });}","nodeType":"PROCESS"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"isContractorFilterApplied"}],"name":"start","description":"Start","nodeType":"START"},"end":{"name":"end","description":"End","inputVarMap":{"contractorFilteredTechs":"contractorFilteredTechs"},"outputVarMap":{"contractorFilteredTechs":"contractorFilteredTechs"},"nodeType":"END"},"getFilteredTechnicians":{"models":["User","calendar","workforce","contractorWorkforce","contractorRegion","contractor"],"connectors":[{"exitPortType":"NextStep","nodeId":"findNumberOfBatches"}],"columns":{"workforceType":"workforce.workforceType","workforceUserId":"workforce.userId","userName":"User.name","workforceCalendarId":"workforce.calendarId"},"orderBy":"userName ASC","distinct":true,"inputVarMap":{"customBatchSize":"batchSize","calendarId":"calendarId","contractorIds":"contractorIds","contractorFilter":"filter"},"nodeType":"QUERY","filter":"filter","name":"getFilteredTechnicians","links":{"calendar":"workforce","contractorRegion":"contractorWorkforce","contractor":"contractorRegion","contractorWorkforce":"workforce","User":"workforce"},"id":"getFilteredTechnicians","outputVarMap":{"data":"techniciansData","count":"totalTechsCount","batchNumber":"techsBatchNumber"},"getCount":true},"workflowNodes":["start","isContractorFilterApplied","getFilteredTechnicians","findNumberOfBatches","areMoreTechsPresent","getMoreFilteredTechnicians","appendTechs","addFilteredTechsToArray","end"],"isContractorFilterApplied":{"connectors":[{"exitPortType":"TrueStep","nodeId":"getFilteredTechnicians"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"isContractorFilterApplied","description":"isContractorFilterApplied","processRule":"typeof contextVar.contractorIds !== 'undefined' && contextVar.contractorIds.length > 0","id":"isContractorFilterApplied","nodeType":"DECISION"}}