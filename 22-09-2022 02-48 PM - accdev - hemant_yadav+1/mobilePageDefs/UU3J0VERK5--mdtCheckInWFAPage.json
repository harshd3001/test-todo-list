{"instance_nav":false,"footer":{},"jslib":{"hideReviewNotes":"function(pageContext){if(pageContext.workOrderTaskReOpenCount>0){return false} return true}","hideCheckInDetails":"function(pageContext){if(typeof pageContext.checkinLatLng!='undefined' && pageContext.checkinLatLng!='' && pageContext.incorrectAddress!='true'){return true} return false}","hideCheckInButton":"function(pageContext){if(typeof pageContext.checkinLatLng!='undefined' && pageContext.checkinLatLng!=''){return true}return false}","enableUpdateCheckinBtn":"function(pageContext) { function checkNull(e){ if(typeof e !== 'undefined' && e !== ''){ return true; } return false; } if (pageContext.incorrectAddress == 'true' && checkNull(pageContext.newSiteAddress) && checkNull(pageContext.newLocationPhotoCapturedTime) && checkNull(pageContext.parentPageContext) && checkNull(pageContext.parentPageContext.reasonOfwrongSite)) { return true; } return false; }","updateStartTsk":"function(pageContext){if(typeof pageContext.incorrectAddress!='undefined' && pageContext.incorrectAddress!='' && pageContext.incorrectAddress=='true' && typeof pageContext.newSiteAddress!='undefined' && pageContext.newSiteAddress!='' && typeof pageContext.newLocationPhoto!='undefined' && pageContext.newLocationPhoto!='' && typeof pageContext.reasonOfwrongSite!='undefined' && pageContext.reasonOfwrongSite!=''){return true} return false}","hideSubmit":"function(pageContext){if(typeof pageContext.checkinLatLng!='undefined' && pageContext.checkinLatLng!='' && pageContext.incorrectAddress!='true'){return false} return true}","enableCheckinBtn":"function(pageContext){if(pageContext.incorrectAddress=='true'){return false;} return true;}","formattedTime":"function(pageContext){function formatDate(date) { if (date) { var d = date, month = '' + (d.getMonth() + 1), day = '' + d.getDate(), year = d.getFullYear(); var hours = d.getHours().toString(); var minutes = d.getMinutes().toString(); var seconds = d.getSeconds().toString(); var timeZone = new Date().toString().split(' ')[5]; if (minutes.length < 2) minutes = '0' + minutes; if (hours.length < 2) hours = '0' + hours; if (seconds.length < 2) seconds = '0' + seconds; time = hours + ':' + minutes + ':' + seconds; if (month.length < 2) month = '0' + month; if (day.length < 2) day = '0' + day; return ([year, month, day].join('-') + ' ' + time + ' (' + timeZone + ')'); } else { return '-'; } } return formatDate(new Date());}","viewDetails":"function(pageContext) { function checkNull(e){ if(typeof e !== 'undefined' && e !== ''){ return true; } return false; } var text = ''; text = text + 'newSiteAddress = ' + pageContext.newSiteAddress; text = text + ', newLocationPhotoCapturedTime = ' + pageContext.newLocationPhotoCapturedTime; text = text + ', reasonOfwrongSite = ' + pageContext.parentPageContext.reasonOfwrongSite; text = text + ', incorrectAddress = ' + pageContext.incorrectAddress; text = text + ', Typeof incorrectAddress = ' + (typeof pageContext.incorrectAddress); text = text + ', Evaluation = ' + (pageContext.incorrectAddress == 'true' && checkNull(pageContext.newSiteAddress) && checkNull(pageContext.newLocationPhotoCapturedTime) && checkNull(pageContext.parentPageContext) && checkNull(pageContext.parentPageContext.reasonOfwrongSite)); return text; }","newAddressDetails":"function(pageContext){if(pageContext.incorrectAddress=='true'){return false}return true}"},"header":{"leftButton":{"id":"aHeadLeft","title":"X","enabled":true},"rightButton":{"image":"@icon.kebabMenuWhite","id":"aHeadRight","enabled":"0"}},"id":"checkIn","title":"{%checkInStartTask}","cols":[{"name":"c1","body":[{"endColumn":11,"heading":"","startColumn":0,"index":1,"id":"content2","title":"","type":"contentBox","content":[{"endColumn":11,"address":"@pageContext.address","lng":"@pageContext.longitude","startColumn":0,"id":"gCustomerLocation","radius":0.5,"type":"map","value":"@pageContext.mapLatLong","lat":"@pageContext.latitude"},{"col":"c1","endColumn":11,"lng":"@pageContext.longitude","heading":"ButtonIconArrow Navigation Comp","type":"buttonIconarrow","title":"{%navigateWithMap}","leftImage":"https://cdn3.iconfinder.com/data/icons/map/500/around_me-128.png","rightImage":"https://cdn1.iconfinder.com/data/icons/maps-and-locations/16/direction-256.png","buttonType":"primary","startColumn":0,"action":"direction","id":"directionCompWithIcon","lat":"@pageContext.latitude","travelMode":"transit"},{"endColumn":11,"startColumn":0,"id":"address","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%address}","value":"@pageContext.address","enabled":1,"required":0},{"endColumn":11,"startColumn":0,"id":"customer","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%customer}","value":"@pageContext.customerName","enabled":1,"required":0},{"endColumn":11,"startColumn":0,"id":"contactNumber","type":"paragraphText","fontStyle":"standard","alignment":"left","title":"{%siteContactNumber}","value":"@pageContext.contactPhone","enabled":1,"required":0},{"endColumn":11,"hidden":false,"dataType":"time","type":"paragraphText","fontStyle":"standard","title":"{%scheduledStartTime}","enabled":1,"required":0,"startColumn":0,"inputType":"date","id":"startDateTime","alignment":"left","value":"@pageContext.scheduledDate"},{"endColumn":11,"hidden":true,"startColumn":0,"id":"workOrderTaskId","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%workOrderTaskId}","value":"@pageContext.workOrderTaskId","enabled":1,"required":0}]},{"endColumn":11,"hidden":"@js.hideCheckInDetails","heading":"{%updateAddress}","startColumn":0,"index":2,"id":"incorrectAddress","type":"checkbox","title":"{%updateAddressText}","value":"@pageContext.incorrectAddress","required":0},{"endColumn":11,"hidden":"@js.newAddressDetails","heading":"","startColumn":0,"index":3,"id":"newSiteAddress","title":"{%selectNewAddress}","type":"mapaddress","value":"@pageContext.newSiteAddress","placeHolder":"{%selectNewAddress}","required":1},{"galleryAllowed":"false","endColumn":11,"hidden":"@js.newAddressDetails","index":4,"allowAnnotation":true,"type":"photocheck","title":"{%newLocationPhoto}","watermarkContent":{"bottomLeft":[[{"delimeter":" : ","label":"{%taskId}","value":"@pageContext.taskId","maxlen":20}]],"bottomRight":[[{"delimeter":" : ","format":"%.4f , %.4f","label":"{%gpsCoOrdinates}","type":"geolocation","value":"@pageContext.parentPageContext.newLocationPhotoLocationCoordinates"}]],"topLeft":[[{"delimeter":" : ","label":"{%engineerName}","value":"@pageContext.userName","maxlen":30}]],"topRight":[[{"delimeter":" : ","label":"{%timeStamp}","value":"@js.formattedTime"}]]},"required":1,"startColumn":0,"id":"newLocationPhoto","capturedTime":"@pageContext.newLocationPhotoCapturedTime","locationCoordinates":"@pageContext.parentPageContext.newLocationPhotoLocationCoordinates","value":"@pageContext.parentPageContext.newLocationPhoto","height":150},{"endColumn":11,"hidden":"@js.newAddressDetails","startColumn":0,"options":"@pageContext.siteChangeReq","index":5,"optTitleKey":"listOptionAnswer","optValueKey":"listOptionAnswer","id":"reasonOfwrongSite","type":"dropdown","value":"@pageContext.parentPageContext.reasonOfwrongSite","required":1,"placeHolder":"{%selectAnswer}"},{"endColumn":11,"hidden":"@js.newAddressDetails","startColumn":0,"index":6,"id":"incorrectSiteComments","type":"textarea","value":"@pageContext.parentPageContext.incorrectSiteComments","enabled":true,"required":0,"placeHolder":"{%enterComments}"},{"endColumn":11,"hidden":"@js.newAddressDetails","index":7,"title":"{%updateCheckIn}","type":"button","enabled":"@js.enableUpdateCheckinBtn","required":false,"buttonType":"primary","startColumn":0,"asyncTask":true,"action":"submitInstance","actionOnClick":{"afterUpdate":[{"updateKeys":["travelStatus"],"jslib":"function(pageContext){if(pageContext.travelStatus ==='{%inTransit}' || pageContext.travelStatus=='{%notStarted}' || pageContext.travelStatus=='{%checkedOut}'){return '{%checkedIn}'}else{return pageContext.travelStatus}}"},{"updateKeys":["statusId"],"jslib":"function(pageContext){pageContext.statusId ='workOrderTaskInProgress';return pageContext.statusId}"},{"updateKeys":["incorrectAddress"],"jslib":"function(pageContext){pageContext.incorrectAddress ='true';return pageContext.incorrectAddress}"},{"updateKeys":["checkInCapturedTime"],"jslib":"function(pageContext){return pageContext.endTravelDate;}"}]},"id":"submitEndTravel","capturedTime":"@pageContext.parentPageContext.endTravelDate","locationCoordinates":"@pageContext.parentPageContext.endTravelLocationCoordinates"},{"endColumn":11,"hidden":"@js.hideSubmit","startColumn":0,"index":0,"id":"checkedInInfo","type":"contentBox","content":[{"endColumn":11,"startColumn":0,"id":"checkedInStatus","fontStyle":"small","type":"paragraphText","alignment":"left","title":"{%status}","value":"{%checkedInStatus}","enabled":0,"required":0},{"endColumn":11,"hidden":false,"dataType":"datetime","type":"paragraphText","fontStyle":"standard","title":"{%checkInDateTime}","enabled":1,"required":0,"startColumn":0,"inputType":"date","id":"checkInDate","alignment":"left","value":"@pageContext.parentPageContext.checkInTime"}]},{"endColumn":11,"address":"@pageContext.address","lng":"@pageContext.longitude","hidden":"@js.hideCheckInButton","index":28,"type":"geocheckin","title":"{%checkIn}","enabled":"@js.enableCheckinBtn","required":0,"startColumn":0,"id":"checkInBtn","capturedTime":"@pageContext.parentPageContext.checkInTime","radius":1,"value":"@pageContext.checkinLatLng","lat":"@pageContext.latitude"},{"endColumn":11,"address":"@pageContext.address","lng":"@pageContext.longitude","hidden":"@js.hideSubmit","index":29,"type":"button","title":"{%submitCheckInDetails}","enabled":1,"required":0,"startColumn":0,"asyncTask":true,"action":"submitInstance","actionOnClick":{"afterUpdate":[{"updateKeys":["travelStatus"],"jslib":"function(pageContext){if(pageContext.travelStatus ==='{%inTransit}' || pageContext.travelStatus=='{%checkedOut}' || pageContext.travelStatus=='{%notStarted}'){return '{%checkedIn}'}else{return pageContext.travelStatus}}"},{"updateKeys":["statusId"],"jslib":"function(pageContext){pageContext.statusId ='workOrderTaskInProgress';return pageContext.statusId}"},{"updateKeys":["incorrectAddress"],"jslib":"function(pageContext){pageContext.incorrectAddress ='false'; return pageContext.incorrectAddress}"},{"updateKeys":["checkInCapturedTime"],"jslib":"function(pageContext){return pageContext.checkInTime}"}]},"id":"submit","capturedTime":"@pageContext.submitCheckInTime","radius":1,"value":"@pageContext.checkinLatLng","lat":"@pageContext.latitude"}],"span":1}]}