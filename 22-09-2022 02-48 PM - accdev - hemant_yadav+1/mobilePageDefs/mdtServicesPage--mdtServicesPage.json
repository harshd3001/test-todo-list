{"instance_nav":false,"footer":{"leftButton":{"id":"aFootLeft","title":"","enabled":true},"rightButton":{"id":"aFootRight","title":"","enabled":"@js.isSubmitTypeSelected"}},"jslib":{"isSubmitTypeSelected":"function(pageContext){if(typeof pageContext.submitType != undefined && pageContext.submitType!='' && (pageContext.submitType=='endTask' || pageContext.submitType=='submitTaskProgress')){return true}else{return false}}","hasServices":"function(pageContext){if(typeof pageContext.serviceList!='undefined' && pageContext.serviceList!='' && pageContext.serviceList.length > 0 && typeof pageContext.enableServices!='undefined' && pageContext.enableServices!='' && pageContext.enableServices==true){return false;} return true;}","hideSuggestedMaterials":"function(pageContext) { if (typeof pageContext.fetchSuggestedMaterials != 'undefined' && pageContext.fetchSuggestedMaterials != '' && pageContext.fetchSuggestedMaterials.length > 0) { return false; } else { return true; } }","hideCrewAttendance":"function(pageContext){if(typeof pageContext.crewMobileAccess!='undefined' && pageContext.crewMobileAccess!='' && pageContext.crewMobileAccess=='noAccess'){return false} return true}","calculateTaskProgress":"function(pageContext){ var taskProgress = 'NA'; var hours; var minutes; var newformat; if (pageContext.dateArray && pageContext.dateArray.length > 0) { if (pageContext.dateArray.length > 1) { if (pageContext.breakDownData[new Date().toDateString().replace(/ /mg, '')]){ taskProgress = pageContext.breakDownData[new Date().toDateString().replace(/ /mg, '')].day } else{ let firstDay = new Date(new Date(pageContext.breakDownData[pageContext.dateArray[0]].elements[0].startDateActual).toDateString()); let lastDay = new Date(new Date(pageContext.breakDownData[pageContext.dateArray[pageContext.dateArray.length - 1]].elements[0].startDateActual).toDateString()); let today = new Date(new Date().toDateString()); if (today < firstDay){ taskProgress = ((today - firstDay) / 86400000); } if (today > lastDay ){ taskProgress = ((today - lastDay) / 86400000) + pageContext.breakDownData[pageContext.dateArray[pageContext.dateArray.length - 1]].day; } if (today > firstDay && today < lastDay){ pageContext.dateArray.some((element,index)=>{ let currentOne = new Date(new Date(pageContext.breakDownData[element].elements[0].startDateActual).toDateString()); if (today < currentOne){ taskProgress = pageContext.breakDownData[pageContext.dateArray[index - 1]].day; return true; } }); } } taskProgress = '{%day}' + ' ' + taskProgress + '/' + pageContext.dateArray.length; } else {    var maxLength=pageContext.breakDownData[pageContext.dateArray[0]].elements.length-1; taskProgress = new Date(pageContext.breakDownData[pageContext.dateArray[0]].elements[maxLength].endDateActual); hours = taskProgress.getHours(); minutes = taskProgress.getMinutes(); newformat = hours >= 12 ? 'PM' : 'AM'; hours = hours % 12; hours = hours ? hours : 12; minutes = minutes < 10 ? '0' + minutes : minutes; taskProgress = hours + ' : ' + minutes + ' ' + newformat; } } return taskProgress; }","setEndTaskTimeTitle":"function(pageContext){if(typeof pageContext.dateArray!='undefined' && pageContext.dateArray!='' && pageContext.dateArray.length > 1){return true;} return false;}","isPartialAccess":"function(pageContext){if(typeof pageContext.crewMobileAccess!='undefined' && pageContext.crewMobileAccess!='' && pageContext.crewMobileAccess=='partialAccess' && pageContext.isCrewTask==true){return false} return true}","showCrewAttendance":"function(pageContext){if(typeof pageContext.crewMobileAccess!='undefined' && pageContext.crewMobileAccess!='' && pageContext.crewMobileAccess=='noAccess'){return true} return false}","hideBeforeYouSubmitTaskProgress":"function(pageContext){if(typeof pageContext.submitType != undefined && pageContext.submitType!='' && pageContext.submitType!='endTask' && pageContext.submitType=='submitTaskProgress'){return false}else{return true}}","hideBeforeYouEndTask":"function(pageContext){if(typeof pageContext.submitType != undefined && pageContext.submitType!='' && pageContext.submitType=='endTask' && pageContext.submitType!='submitTaskProgress'){return false}else{return true}}","setTaskProgressTitle":"function(pageContext){if(typeof pageContext.dateArray!='undefined' && pageContext.dateArray!='' && pageContext.dateArray.length > 1){return false;} return true;}"},"header":{"leftButton":{"id":"aHeadLeft","title":"x","enabled":"1"},"rightButton":{"image":"@icon.kebabMenuWhite","action":"openDropdown","id":"aHeadRight","list":[{"image":"https://d122pusslfmuhu.cloudfront.net/field-service-elements/icons/users-multiple-black.png","cancelAllowed":"true","startPage":"120SLWE1SU","useBufferedSync":true,"hidden":"@js.hideCrewAttendance","startProcessId":"updateCheckin","name":"{%crewAttendance}","id":"crewAttendance","type":"genericPage","enabled":"@js.showCrewAttendance"},{"image":"https://d122pusslfmuhu.cloudfront.net/solutions/xxhdpi/icons-jumbotrons-task.png","cancelAllowed":"true","startPage":"mdtTaskDetails","name":"{%taskDetails}","id":"taskDetails","type":"genericPage","enabled":"1"},{"image":"https://s3-us-west-2.amazonaws.com/zinier-static/workflow-images/con-spanner-screwdrive.png","cancelAllowed":"true","startPage":"FD5REW9Z8L","useBufferedSync":true,"startProcessId":"updateCorrectiveRequestTaskWF","name":"{%correctiveTaskRequest}","id":"correctiveTaskRequest","type":"genericPage","enabled":"1"},{"image":"https://d122pusslfmuhu.cloudfront.net/field-service-elements/icons/wa-report-an-issue.png","cancelAllowed":"true","startPage":"mdtReportIssue","useBufferedSync":true,"startProcessId":"reportIssueSubmitWF","name":"{%reportAnIssue}","id":"reportIssue","type":"genericPage","enabled":"1"}],"title":"Instructions","enabled":"1"}},"id":"servicesPage","title":"{%services}","cols":[{"name":"c1","body":[{"endColumn":11,"startColumn":0,"index":1,"id":"taskProgressContentBox","type":"contentbox","content":[{"endColumn":11,"hidden":"@js.setTaskProgressTitle","fontStyle":"standard","type":"paragraphText","title":"{%taskProgress}","enabled":1,"required":0,"startColumn":0,"id":"taskProgress","capturedTime":"@pageContext.recordInitialEvidenceTime","locationCoordinates":"@pageContext.recordInitialEvidenceLocationCoordinates","alignment":"left","value":"@js.calculateTaskProgress"},{"endColumn":11,"hidden":"@js.setEndTaskTimeTitle","startColumn":0,"id":"taskEndTime","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%taskEndTime}","value":"@js.calculateTaskProgress","enabled":1,"required":0}]},{"allowDelete":1,"endColumn":11,"hidden":"@js.hasServices","heading":"{%deliverServices}","indexName":"","columns":[{"col":1,"name":"{%s21}","row":1,"key":"selectedService[0].serviceName"},{"col":2,"name":"{%action}","row":1,"key":"selectedServiceType[0].listOptionAnswer"}],"editable":1,"index":2,"type":"datagrid","title":"{%services}","required":0,"editRowPageId":"JJ3W81ELT3","helper":{"placeHolderIcon":true,"type":"tooltipicon","content":[{"description":"{%tlosdapotttciirrasaftcs}"}]},"startColumn":0,"addRowPageId":"5Q8V81ECTA","id":"servicesDataGrid","value":"@pageContext.servicesDataGrid"},{"endColumn":11,"isCollapsed":true,"hidden":false,"startColumn":0,"index":3,"id":"materialsBox","title":"{%materials}","type":"collapsiblecontentbox","enabled":"1","content":[{"allowDelete":0,"endColumn":11,"hidden":"@js.hideSuggestedMaterials","columns":[{"col":1,"name":"{%mn}","row":1,"key":"catalogName"},{"col":2,"name":"{%mn1}","row":1,"key":"catalogModelNumber"},{"col":3,"name":"{%quantityUsed}","row":1,"key":"actualQuantity"}],"editable":1,"index":0,"type":"datagrid","title":"{%suggestedMaterials}","enabled":1,"required":0,"editRowPageId":"mdtEditSuggestedMaterialsPage","startColumn":0,"addRowPageId":"mdtEditSuggestedMaterialsPage","disableAdd":true,"id":"suggestedMaterialsDataGrid","value":"@pageContext.fetchSuggestedMaterials"},{"allowDelete":1,"endColumn":11,"columns":[{"col":1,"name":"{%mn}","row":1,"key":"material[0].catalogName"},{"col":2,"name":"{%mn1}","row":1,"key":"material[0].catalogModelNumber"},{"col":3,"name":"{%quantityUsed}","row":1,"key":"quantity"}],"editable":1,"index":1,"type":"datagrid","title":"{%additionalMaterials}","required":0,"editRowPageId":"mdtEditMaterialsPage","startColumn":0,"addRowPageId":"mdtAddMaterialsPage","id":"additionalMaterialsDataGrid","value":"@pageContext.additionalMaterialsDataGrid"}]},{"endColumn":11,"hidden":false,"heading":"{%howWouldYouLikeToProceed}","index":4,"optTitleKey":"listOptionAnswer","title":"{%howWouldYouLikeToProceed}","type":"radio","enabled":true,"required":true,"startColumn":0,"options":"@pageContext.submitTypeListOptions","id":"submitType","optValueKey":"listOptionAnswerId","capturedTime":"@pageContext.recordSubmitServicesTime","locationCoordinates":"@pageContext.submitServicesLocationCoordinates","value":"@pageContext.submitType"},{"allowDelete":1,"endColumn":11,"hidden":"@js.hideBeforeYouEndTask","heading":"{%beforeYouEndTask}","indexName":"","columns":[{"col":1,"dataType":"datetime","name":"{%photoTakenOn}","row":1,"key":"finalEvidenceCapturedTime"},{"col":2,"name":"{%notes}","row":1,"key":"finalEvidenceNotes"}],"editable":1,"index":5,"type":"datagrid","title":"{%capturePhotosOptional}","required":0,"editRowPageId":"IYOND1ETJ7","startColumn":0,"addRowPageId":"UM7MD1E1KP","id":"finalEvidenceDataGrid","value":"@pageContext.finalEvidenceDataGrid"},{"allowDelete":1,"endColumn":11,"hidden":"@js.hideBeforeYouSubmitTaskProgress","heading":"{%beforeYouSubmitTaskProgress}","indexName":"","columns":[{"col":1,"dataType":"datetime","name":"{%photoTakenOn}","row":1,"key":"finalEvidenceCapturedTime"},{"col":2,"name":"{%notes}","row":1,"key":"finalEvidenceNotes"}],"editable":1,"index":6,"type":"datagrid","title":"{%capturePhotosOptional}","required":0,"editRowPageId":"IYOND1ETJ7","startColumn":0,"addRowPageId":"UM7MD1E1KP","id":"submitProgressEvidenceDataGrid","value":"@pageContext.submitProgressEvidenceDataGrid"},{"endColumn":11,"hidden":"@js.hideBeforeYouSubmitTaskProgress","startColumn":0,"index":7,"id":"submitProgressComments","locationCoordinates":"","type":"textarea","value":"@pageContext.submitProgressComments","enabled":true,"required":false,"placeHolder":"{%enterNotesOptional}"},{"endColumn":11,"hidden":"@js.hideBeforeYouEndTask","startColumn":0,"index":8,"id":"finalComments","locationCoordinates":"","type":"textarea","value":"@pageContext.finalComments","enabled":true,"required":false,"placeHolder":"{%enterNotesOptional}"},{"endColumn":11,"hidden":true,"startColumn":0,"index":9,"id":"statusId","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%statusId}","value":"@js.setStatusId","enabled":0,"required":0}]}]}