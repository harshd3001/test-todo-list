{"instance_nav":false,"footer":{"leftButton":{"id":"aFootLeft","title":"","enabled":false},"rightButton":{"id":"aFootRight","title":"","enabled":"@js.proceedToNextPage"}},"jslib":{"setLeadPhone":"function(pageContext){var leadPhoneNumber='';if(typeof pageContext.leadDetails!='undefined' && pageContext.leadDetails!='' && typeof pageContext.leadDetails[0].leadPhoneNumber!='undefined' && pageContext.leadDetails[0].leadPhoneNumber!=''){leadPhoneNumber=pageContext.leadDetails[0].leadPhoneNumber} return leadPhoneNumber}","hideReviewNotes":"function(pageContext){if(pageContext.workOrderTaskReOpenCount>0 && pageContext.taskLogEventType!='disContinuedToWorkOrderTaskDispatched' && pageContext.taskLogEventType!='incident'){return false;} return true}","proceedToNextPage":"function(pageContext){if(typeof pageContext.crewMemberTravelStatus!='undefined' && pageContext.crewMemberTravelStatus!='' && pageContext.crewMemberTravelStatus=='{%checkedIn}' && typeof pageContext.submitType!='undefined' && pageContext.submitType!='' && (pageContext.submitType=='checkOut' || pageContext.submitType=='endTaskCrewMember')){return true} return false}","hideStartTravel":"function(pageContext){if(typeof pageContext.crewMemberTravelStatus!='undefined' && pageContext.crewMemberTravelStatus!='' && (pageContext.crewMemberTravelStatus!='{%checkedIn}')){return true;} return false;}","calculateTaskProgress":"function(pageContext){ var taskProgress = 'NA'; var hours; var minutes; var newformat; if (pageContext.dateArray && pageContext.dateArray.length > 0) { if (pageContext.dateArray.length > 1) { if (pageContext.breakDownData[new Date().toDateString().replace(/ /mg, '')]){ taskProgress = pageContext.breakDownData[new Date().toDateString().replace(/ /mg, '')].day } else{ let firstDay = new Date(new Date(pageContext.breakDownData[pageContext.dateArray[0]].elements[0].startDateActual).toDateString()); let lastDay = new Date(new Date(pageContext.breakDownData[pageContext.dateArray[pageContext.dateArray.length - 1]].elements[0].startDateActual).toDateString()); let today = new Date(new Date().toDateString()); if (today < firstDay){ taskProgress = ((today - firstDay) / 86400000); } if (today > lastDay ){ taskProgress = ((today - lastDay) / 86400000) + pageContext.breakDownData[pageContext.dateArray[pageContext.dateArray.length - 1]].day; } if (today > firstDay && today < lastDay){ pageContext.dateArray.some((element,index)=>{ let currentOne = new Date(new Date(pageContext.breakDownData[element].elements[0].startDateActual).toDateString()); if (today < currentOne){ taskProgress = pageContext.breakDownData[pageContext.dateArray[index - 1]].day; return true; } }); } } taskProgress = '{%day}' + ' ' + taskProgress + '/' + pageContext.dateArray.length; } else {    var maxLength=pageContext.breakDownData[pageContext.dateArray[0]].elements.length-1; taskProgress = new Date(pageContext.breakDownData[pageContext.dateArray[0]].elements[maxLength].endDateActual); hours = taskProgress.getHours(); minutes = taskProgress.getMinutes(); newformat = hours >= 12 ? 'PM' : 'AM'; hours = hours % 12; hours = hours ? hours : 12; minutes = minutes < 10 ? '0' + minutes : minutes; taskProgress = hours + ' : ' + minutes + ' ' + newformat; } } return taskProgress; }","setEndTaskTimeTitle":"function(pageContext){if(typeof pageContext.dateArray!='undefined' && pageContext.dateArray!='' && pageContext.dateArray.length > 1){return true;} return false;}","setTaskId":"function(pageContext){ var taskProgress = 'NA'; var hours; var minutes; var newformat; if (pageContext.dateArray && pageContext.dateArray.length > 0) { if (pageContext.dateArray.length > 1) { if (pageContext.breakDownData[new Date().toDateString().replace(/ /mg, '')]){ taskProgress = pageContext.breakDownData[new Date().toDateString().replace(/ /mg, '')].day } else{ let firstDay = new Date(new Date(pageContext.breakDownData[pageContext.dateArray[0]].elements[0].startDateActual).toDateString()); let lastDay = new Date(new Date(pageContext.breakDownData[pageContext.dateArray[pageContext.dateArray.length - 1]].elements[0].startDateActual).toDateString()); let today = new Date(new Date().toDateString()); if (today < firstDay){ taskProgress = ((today - firstDay) / 86400000); } if (today > lastDay ){ taskProgress = ((today - lastDay) / 86400000) + pageContext.breakDownData[pageContext.dateArray[pageContext.dateArray.length - 1]].day; } if (today > firstDay && today < lastDay){ pageContext.dateArray.some((element,index)=>{ let currentOne = new Date(new Date(pageContext.breakDownData[element].elements[0].startDateActual).toDateString()); if (today < currentOne){ taskProgress = pageContext.breakDownData[pageContext.dateArray[index - 1]].day; return true; } }); } } taskProgress = pageContext.taskId + ' ({%day}' + taskProgress + '/' + pageContext.dateArray.length+')'; } else { taskProgress=pageContext.taskId ;   } } return taskProgress; }","isPartialAccess":"function(pageContext){if(typeof pageContext.crewMobileAccess!='undefined' && pageContext.crewMobileAccess!='' && pageContext.crewMobileAccess=='partialAccess' && pageContext.isCrewTask==true){return false} return true}","hideCheckInImage":"function(pageContext){if(typeof pageContext.crewMemberTravelStatus!='undefined' && pageContext.crewMemberTravelStatus!='' &&   pageContext.crewMemberTravelStatus=='{%checkedIn}' ){return true;} return false;}","setLeadName":"function(pageContext){var leadName='';if(typeof pageContext.leadDetails!='undefined' && pageContext.leadDetails!='' && typeof pageContext.leadDetails[0].leadName!='undefined' && pageContext.leadDetails[0].leadName!=''){leadName=pageContext.leadDetails[0].leadName} return leadName}","hideCheckIn":"function(pageContext){if(typeof pageContext.crewMemberTravelStatus!='undefined' && pageContext.crewMemberTravelStatus!='' && (pageContext.crewMemberTravelStatus=='{%checkedIn}' || pageContext.crewMemberTravelStatus=='{%checkedOut}')){return false;} return true;}","hideIncidentReviewNotes":"function(pageContext){if(pageContext.workOrderTaskReOpenCount>0 && pageContext.cancellationNotes!='' && (typeof pageContext.cancellationNotes!='undefined') &&(pageContext.taskLogEventType=='disContinuedToWorkOrderTaskDispatched' || pageContext.taskLogEventType=='incident' )){return false;} return true}","hasCheckedIn":"function(pageContext){if(typeof pageContext.crewMemberTravelStatus!='undefined' && pageContext.crewMemberTravelStatus!='' &&   pageContext.crewMemberTravelStatus=='{%checkedIn}' ){return false} return true}","setTaskProgressTitle":"function(pageContext){if(typeof pageContext.dateArray!='undefined' && pageContext.dateArray!='' && pageContext.dateArray.length > 1){return false;} return true;}"},"header":{"leftButton":{"id":"aHeadLeft","title":"X","enabled":true},"rightButton":{"image":"@icon.kebabMenuWhite","action":"openDropdown","id":"aHeadRight","list":[{"image":"https://d122pusslfmuhu.cloudfront.net/field-service-elements/icons/wa-check-in-and-start-active.png","cancelAllowed":"true","startPage":"mdtCrewMemberCheckInWFAPage","useBufferedSync":true,"startProcessId":"updateCheckin","name":"{%checkInStartTask}","id":"checkInStartTask","type":"genericPage","enabled":"@js.hideStartTravel"}],"title":"Instructions","enabled":"1"}},"id":"taskDetailsLandingPage","title":"{%taskDetails}","cols":[{"body":[{"endColumn":11,"hidden":"@js.hasCheckedIn","startColumn":0,"index":0,"id":"taskProgressContentBox","type":"contentbox","content":[{"endColumn":11,"hidden":"@js.setTaskProgressTitle","index":0,"fontStyle":"standard","type":"paragraphText","title":"{%taskProgress}","enabled":1,"required":0,"startColumn":0,"id":"taskProgress","capturedTime":"@pageContext.recordInitialEvidenceTime","locationCoordinates":"@pageContext.recordInitialEvidenceLocationCoordinates","alignment":"left","value":"@js.calculateTaskProgress"},{"endColumn":11,"hidden":"@js.setEndTaskTimeTitle","startColumn":0,"index":1,"id":"taskEndTime","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%taskEndTime}","value":"@js.calculateTaskProgress","enabled":1,"required":0}]},{"image":"https://d122pusslfmuhu.cloudfront.net/field-service-elements/icons/check-in-jumbo.png","endColumn":11,"subTitle":"","hidden":"@js.hideCheckInImage","startColumn":0,"index":1,"id":"headerImageStartTravel","type":"jumbo","alignment":"center","title":"{%checkInStartTask}"},{"endColumn":11,"heading":"","startColumn":0,"index":2,"id":"travelStatusContainer","title":"","type":"contentBox","content":[{"endColumn":11,"startColumn":0,"index":5,"id":"crewMemberTravelStatus","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%status}","value":"@pageContext.crewMemberTravelStatus","enabled":1,"required":0},{"endColumn":11,"hidden":"@js.hasCheckedIn","dataType":"datetime","index":12,"fontStyle":"standard","type":"paragraphText","title":"{%checkInDateTime}","enabled":0,"required":0,"startColumn":0,"inputType":"date","id":"checkInCapturedTime","alignment":"left","value":"@pageContext.checkInCapturedTime"}]},{"endColumn":11,"hidden":"@js.hideReviewNotes","heading":"{%reviewNotes}","startColumn":0,"index":3,"id":"reviewNotes","title":"{%reviewNotes}","type":"collapsiblecontentbox","content":[{"endColumn":11,"startColumn":0,"id":"rejectionReason","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%rejectionReason}","value":"@pageContext.cancellationReason","enabled":1,"required":0},{"endColumn":11,"startColumn":0,"id":"rejectionComments","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%comments}","value":"@pageContext.cancellationNotes","enabled":1,"required":0}]},{"endColumn":11,"hidden":"@js.hideIncidentReviewNotes","heading":"{%incidentReviewResult}","startColumn":0,"index":4,"id":"incidentReviewResult","title":"{%incidentReviewResult}","type":"collapsiblecontentbox","content":[{"endColumn":11,"startColumn":0,"id":"note","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%note}","value":"@pageContext.cancellationNotes","enabled":1,"required":0}]},{"endColumn":11,"heading":"{%taskDetails}","startColumn":0,"index":5,"id":"content3","title":"{%taskDetails}","type":"collapsiblecontentbox","content":[{"endColumn":11,"address":"@pageContext.address","lng":"@pageContext.longitude","startColumn":0,"id":"gCustomerLocation","radius":0.5,"type":"map","value":"@pageContext.mapLatLong","lat":"@pageContext.latitude"},{"endColumn":11,"startColumn":0,"id":"address","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%address}","value":"@pageContext.address","enabled":1,"required":0},{"endColumn":11,"startColumn":0,"id":"customer","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%customer}","value":"@pageContext.customerName","enabled":1,"required":0},{"endColumn":11,"startColumn":0,"id":"contactNumber","type":"paragraphText","fontStyle":"standard","alignment":"left","title":"{%contactNumber}","value":"@pageContext.contactPhone","enabled":1,"required":0},{"endColumn":11,"startColumn":0,"id":"WorkOrderId","type":"paragraphText","fontStyle":"standard","alignment":"left","title":"{%WorkOrderId}","value":"@pageContext.workOrderId","enabled":1,"required":0},{"endColumn":11,"startColumn":0,"id":"taskId","type":"paragraphText","fontStyle":"standard","alignment":"left","title":"{%taskId}","value":"@js.setTaskId","enabled":1,"required":0},{"endColumn":11,"startColumn":0,"id":"taskType","type":"paragraphText","fontStyle":"standard","alignment":"left","title":"{%taskType}","value":"@pageContext.taskTypeName","enabled":1,"required":0},{"endColumn":11,"hidden":false,"startColumn":0,"id":"taskPriority","type":"paragraphText","fontStyle":"standard","title":"{%priority}","alignment":"left","value":"@pageContext.taskPriority","enabled":1,"required":0},{"endColumn":11,"hidden":false,"dataType":"datetime","type":"paragraphText","fontStyle":"standard","title":"{%startDateTime}","enabled":1,"required":0,"startColumn":0,"inputType":"date","id":"plannedDate","alignment":"left","value":"@pageContext.scheduledDate"},{"endColumn":11,"hidden":false,"dataType":"datetime","type":"paragraphText","fontStyle":"standard","title":"{%endDate}","enabled":1,"required":0,"startColumn":0,"inputType":"date","id":"endDate","alignment":"left","value":"@pageContext.endDate"},{"endColumn":11,"startColumn":0,"id":"taskDescription","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%taskNotes}","value":"@pageContext.taskDescription","enabled":1,"required":0}]},{"endColumn":11,"startColumn":0,"index":6,"id":"crewLeadDetails","title":"{%crewLead}","type":"collapsiblecontentbox","content":[{"endColumn":11,"startColumn":0,"index":0,"id":"crewLeadName","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%crewLeadName}","value":"@js.setLeadName","enabled":1,"required":0},{"endColumn":11,"startColumn":0,"index":1,"id":"crewLeadPhone","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%crewLeadPhone}","value":"@js.setLeadPhone","enabled":1,"required":0}]},{"endColumn":11,"hidden":"@js.hasCheckedIn","heading":"{%checkOutToSubmitYourAttendance}","optTitleKey":"listOptionAnswer","title":"{%checkOutToSubmitYourAttendance}","type":"radio","enabled":true,"required":true,"startColumn":0,"options":"@pageContext.crewMemberSubmitTypeListOptions","id":"submitType","optValueKey":"listOptionAnswerId","capturedTime":"@pageContext.recordSubmitServicesTime","locationCoordinates":"@pageContext.submitServicesLocationCoordinates","value":"@pageContext.submitType"},{"endColumn":11,"hidden":true,"startColumn":0,"index":8,"id":"statusId","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%statusId}","value":"@pageContext.statusId","enabled":0,"required":0},{"endColumn":11,"hidden":true,"startColumn":0,"index":9,"id":"incorrectAddress","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%incorrectAddress}","value":"@pageContext.incorrectAddress","enabled":0,"required":0},{"endColumn":11,"hidden":true,"startColumn":0,"index":10,"id":"endTravelLocationCoordinates","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%endTravelLocationCoordinates}","value":"@pageContext.endTravelLocationCoordinates","enabled":0,"required":0},{"endColumn":11,"hidden":true,"startColumn":0,"index":11,"id":"endTravelDate","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%endTravelDate}","value":"@pageContext.endTravelDate","enabled":0,"required":0},{"endColumn":11,"hidden":true,"startColumn":0,"index":12,"id":"newLocationPhoto","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%newLocationPhoto}","value":"@pageContext.newLocationPhoto","enabled":0,"required":0},{"endColumn":11,"hidden":true,"startColumn":0,"index":13,"id":"reasonOfwrongSite","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%reasonOfwrongSite}","value":"@pageContext.reasonOfwrongSite","enabled":0,"required":0},{"endColumn":11,"hidden":true,"startColumn":0,"index":14,"id":"incorrectSiteComments","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%incorrectSiteComments}","value":"@pageContext.incorrectSiteComments","enabled":0,"required":0},{"endColumn":11,"hidden":true,"startColumn":0,"index":15,"id":"checkInTime","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%checkInTime}","value":"@pageContext.checkInTime","enabled":0,"required":0}],"span":1}]}