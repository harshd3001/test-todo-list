{"pageContext":{},"actionOnLoad":["@actions.setInitialData","@actions.getCancellationReasonData"],"localPageContext":true,"jslib":{"isConfirmDisabled":"function(pageContext){return ( (typeof pageContext.cancellationReason === 'undefined') || (pageContext.cancellationReason === ''))}"},"header":{"children":[{"buttonType":"primary","actionOnClick":["@actions.setSubActionCancelWorkOrderTask","@actions.fireProcessEvent","@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"disabled":"@jslib.isConfirmDisabled","id":"submit","type":"button","title":"@lang.['c15','Confirm']"},{"icon":"@iconlib.NavigationCloseGrey","actionOnClick":["@actions.closePanel","@actions.clearPageContext"],"id":"close","type":"buttonIcon"}],"title":"@lang.['ct4','Cancel Task']"},"body":{"children":[{"children":[{"isRequired":true,"options":"@pageContext.cancellationReasonData","id":"taskTypeCancellationListOptionId","optTitleKey":"listOptionAnswerAnswerOptionText","optValueKey":"listOptionAnswerId","type":"select","title":"@lang.['r5','Reason']","value":"@pageContext.cancellationReason","placeHolder":"@lang.['sr3','Select Reason']"},{"id":"workOrderTaskCancellationNotes","label":"@lang.['n2','Notes (Optional)']","type":"textarea","value":"@pageContext.workOrderTaskCancellationNotes","placeHolder":"@lang.['en2','Enter notes']"}],"label":"","id":"cancelTaskInfo","type":"section"}]},"actions":[{"endPoint":"event/start","name":"fireProcessEvent","outputVarMap":{"data":"@pageContext.responseData"},"type":"api","actionDef":{"data":[{"eventId":"BM58GU7UNT","contextVar":{"workOrderTask":[{"statusId":"workOrderTaskCancelled","cancellationNotes":"@pageContext.workOrderTaskCancellationNotes","id":"@pageContext.workOrderTaskId","eventType":"workOrderTaskCancelled"}],"subAction":"@pageContext.subAction","workOrderTaskReason":"@pageContext.cancellationReason"}}]}},{"name":"setSubActionCancelWorkOrderTask","type":"script","actionDef":"function(pageContext){pageContext.subAction='upsertWorkOrderTask'}"},{"name":"getCancellationReasonData","outputVarMap":{"data":"@pageContext.cancellationReasonData"},"type":"query","actionDef":{"filter":"{$taskType.id}={@taskTypeId} AND {$listOption.id} = {$taskType.cancellationListOptionId}","models":["taskType","listOption","listOptionAnswer"],"columns":{"listOptionAnswerId":"listOptionAnswer.id","listOptionAnswerAnswerOptionText":"listOptionAnswer.answerOptionText"},"inputs":{"taskTypeId":"@pageContext.workOrderTaskTypeId"},"links":{"listOption":"listOptionAnswer"},"translate":true}},{"name":"setInitialData","type":"script","actionDef":"function(pageContext){pageContext.workOrderTaskCancellationNotes=''; pageContext.workOrderTaskTypeId=pageContext.workOrderTaskTypeId?pageContext.workOrderTaskTypeId:pageContext.workOrderTaskTaskTypeId;}"},{"name":"clearPageContext","type":"clearPageContext"},{"name":"closePanel","type":"closePanel"},{"name":"refreshDataGrid","type":"refreshDataGrid"}]}