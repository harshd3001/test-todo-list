{"pageContext":{},"actionOnLoad":["@actions.getTimeZone","@actions.fetchResourceType","@actions.decisionForWFData","@actions.fetchWorkOrderQueryData","@actions.normalizeWorkflowData","@actions.processContractData","@actions.fetchAllCalendar","@actions.fetchPrimaryAppraiser","@actions.fetchWFData","@actions.setResourceType","@actions.fetchCustomerDetails","@actions.setCustomerDetails","@actions.fetchacLenderId","@actions.isImported","@actions.initialData","@actions.enableRecordGrid","@actions.refreshWorkOrderDataGrid"],"children":[],"jslib":{"isActionDropdownHidden":"function(pageContext) {if(pageContext.workOrderAction == 'edit') {if(pageContext.workOrderStatusId === 'workOrderInProgress' || pageContext.workOrderStatusId === 'workOrderScheduled' || pageContext.workOrderStatusId === 'workOrderOpen') {return false} else {return true;}}return true;}","isCompletedAnow":"function(pageContext) { return (pageContext.workOrderStatusId == 'completedInANow') }","isDeadlineDisabled":"function(pageContext) { if (pageContext.workOrderAction == 'view' || pageContext.workOrderAction == 'showWorkOrder' || (typeof pageContext.workOrderSlaResolutionTime !== 'undefined' && pageContext.workOrderSlaResolutionTime !== '' && pageContext.workOrderSlaResolutionTime !== '-')) { return true; } return false; }","isBanner":"function(pageContext){if(pageContext.bannerType=='workOrderTaskSchedule' || pageContext.bannerType=='workOrderDuplicate' || pageContext.bannerType=='taskDeleteBanner'){return false;}else{return true;}}","hideCalendarWithNoContract":"function (pageContext) { return (typeof pageContext.contractList !== 'undefined' && pageContext.contractList.length > 0 || (!(pageContext.workOrderAction == 'add'))); }","workOrderTaskSuccessMessage":"function (pageContext) { if (pageContext.bannerType == 'workOrderTaskSchedule') { return '@lang.[\"twsc\",\"Task was succesfully created\"]'; } else if (pageContext.bannerType == 'workOrderDuplicate') { return '@lang.[\"twsd\",\"Task was succesfully duplicated\"]'; }else if(pageContext.bannerType=='taskDeleteBanner'){ return '@lang.[\"twsd1\",\"Task was successfully deleted\"]'; } }","isTaskDependencyGridHidden":"function(pageContext) { var count = 0; if (pageContext.workOrderStatusId !== '' && typeof pageContext.workOrderStatusId != 'undefined') { if (typeof pageContext.workOrderTaskData != 'undefined' && pageContext.workOrderTaskData !== '' && pageContext.workOrderTaskData.length > 1) { pageContext.workOrderTaskData.forEach(function(element) { if (element.workOrderTaskStatusId !== 'workOrderTaskCancelled') { count++; } }); } } return (count < 2); }","hideCompAddress":"function(pageContext) { if (pageContext.workOrderStatusId == 'workOrderCompleted' || pageContext.workOrderAction == 'showWorkOrder' || pageContext.workOrderAction == 'view') { return true; } else if (pageContext.workOrderAction == 'edit' || pageContext.workOrderAction == 'add') { return false; } }","isWorkOrderActionNotAdd":"function(pageContext){return (!(pageContext.workOrderAction=='add')); }","isWorkOrderOpen":"function(pageContext) { return (pageContext.workOrderStatusId !== 'workOrderCompleted') }","isCompletedAnowHidden":"function(pageContext) { return (pageContext.workOrderStatusId !== 'completedInANow') }","isNotesDisable":"function(pageContext){return (pageContext.workOrderAction=='showWorkOrder' || pageContext.workOrderAction=='view'); }","isWorkOrderCancelled":"function(pageContext) { return (!(pageContext.workOrderStatusId === 'workOrderCancelled')); }","isShowWorkorderId":"function(pageContext){return (!(pageContext.workOrderAction=='edit'||pageContext.workOrderAction=='view' || pageContext.workOrderAction=='showWorkOrder'));}","isSaveHidden":"function(pageContext){return(!(pageContext.workOrderAction=='edit')); }","dynamicHeaderText":"function(pageContext){ if(pageContext.workOrderAction === 'add'){return '@lang.[\"anwo\",\"Add New Work Order\"]'} else if (pageContext.workOrderAction ==='edit' ){return '@lang.[\"ewo\",\"Edit Work Order\"]'} else if(pageContext.workOrderAction==='showWorkOrder' || pageContext.workOrderAction==='view'){return '@lang.[\"vwo\",\"View Work Order\"]'} }","isSaveDisable":"function(pageContext) { return (((pageContext.initialWorkOrderRequestedDate == pageContext.workOrderRequestedDate) && (pageContext.initialWorkOrderWorkOrderTypeId == pageContext.workOrderWorkOrderTypeId) && (pageContext.initialWorkOrderPriorityPriority == pageContext.workOrderPriorityPriority) && (pageContext.initialWorkOrderCustomerId == pageContext.workOrderCustomerId) && (pageContext.initialWorkOrderContractId == pageContext.workOrderContractId) && (pageContext.initialWorkOrderDeadline == pageContext.workOrderDeadline) &&(pageContext.initialPrimaryAppraiser[0].value == pageContext.primaryAppraiser[0].value) &&(pageContext.initialReportType == pageContext.reportType) &&(pageContext.initialLoanType == pageContext.loanType) && (pageContext.initialAcLenderId[0].value == pageContext.acLenderId[0].value) &&(pageContext.initialContractValue == pageContext.contractValue) && (pageContext.initialWorkOrderNotes == pageContext.workOrderNotes)) || ((pageContext.workOrderId === '') || (pageContext.workOrderRequestedDate === '') || (pageContext.workOrderWorkOrderTypeId === '') || (pageContext.workOrderPriorityPriority === '') || (pageContext.workOrderCustomerId === '') ||(pageContext.primaryAppraiser === '')||(pageContext.acLenderId === '')|| (pageContext.reportType=== '')||(pageContext.loanType=== '')||(pageContext.contractValue === '')||(typeof pageContext.contractList !== 'undefined' && pageContext.contractList.length > 0 && pageContext.workOrderContractId === ''))) }","isBannerText2":"function(pageContext) { if (pageContext.acCompletedANowNotificationWFOut[0].outputVar.showBanner == 'true') { return pageContext.bannerText2 = 'Please update site information contact details.'; } }","isDisableContract":"function(pageContext){return (pageContext.workOrderAction=='view'|| pageContext.workOrderAction=='showWorkOrder'||(typeof pageContext.contractList !== 'undefined' && pageContext.contractList.length==0)); }","isBannerText1":"function(pageContext){return pageContext.bannerText='@lang.[\"wotinc\",\"Work order task is not created\"]'}","hideCalendarWithContract":"function (pageContext) { return (typeof pageContext.contractList !== 'undefined' && pageContext.contractList.length == 0 || (!(pageContext.workOrderAction == 'add'))); }","isWorkOrderActionAdd":"function(pageContext){return (pageContext.workOrderAction=='add');}","isSaveAndContinueDisabled":"function(pageContext) { return ((pageContext.workOrderRequestedDate == '' || typeof pageContext.workOrderRequestedDate == 'undefined') || (pageContext.workOrderWorkOrderTypeId == '' || typeof pageContext.workOrderWorkOrderTypeId == 'undefined') || (pageContext.workOrderPriorityPriority == '' || typeof pageContext.workOrderPriorityPriority == 'undefined') || (pageContext.workOrderCustomerId == '' || typeof pageContext.workOrderCustomerId == 'undefined') || (pageContext.workOrderCalendarId == '' || typeof pageContext.workOrderCalendarId == 'undefined') ||(pageContext.reportType == '' || typeof pageContext.reportType == 'undefined')||(pageContext.loanType == '' || typeof pageContext.loanType == 'undefined')||(pageContext.contractValue == '' || typeof pageContext.contractValue == 'undefined')||(pageContext.acLenderId == '' || typeof pageContext.acLenderId == 'undefined')||(pageContext.tags == '' || typeof pageContext.tags == 'undefined')||(pageContext.primaryAppraiser == '' || typeof pageContext.primaryAppraiser == 'undefined')); }","isDeleteButtonHidden":"function(pageContext){return (!(pageContext.workOrderStatusId=='workOrderCancelled' || pageContext.workOrderStatusId=='workOrderCompleted' ));}","checkTask":"function(pageContext) { if (pageContext.workOrderTaskData !== '' && typeof pageContext.workOrderTaskData !== 'undefined') { return true; } else { return false; } }","isBannerHidden":"function(pageContext){if(pageContext.bannerType=='workOrderTaskSchedule' || pageContext.bannerType=='workOrderDuplicate' || pageContext.bannerType=='taskDeleteBanner' ){return false;}else{return true;}}","isWorkOrderDetailsSectionHidden":"function(pageContext){return (pageContext.customerId == '' || pageContext.workOrderCustomerId == ''); }","isCompAddress":"function(pageContext) { if (pageContext.workOrderAction == 'edit') { if (pageContext.workOrderStatusId == 'workOrderOpen' || pageContext.workOrderStatusId == 'workOrderScheduled' || pageContext.workOrderStatusId == 'workOrderInProgress') { if (pageContext.compAddress !== '' && typeof pageContext.compAddress !== 'undefined' && pageContext.workOrderTaskData !== '' && typeof pageContext.workOrderTaskData !== 'undefined') { return false; } else { return true; } } else { return true; } } else { return true; } }","isSaveDisabledForCancellationNotes":"function(pageContext){return ((pageContext.initialWorkOrderCancellationNotes==pageContext.workOrderCancellationNotes)||(pageContext.workOrderCancellationNotes===''))}","isBannerText":"function(pageContext){if(pageContext.bannerType=='workOrderDuplicate'){return pageContext.bannerText='@lang.[\"wosd\",\"Work order successfully duplicated\"]';}else if(pageContext.bannerType=='workOrderTemplate'){return pageContext.bannerText='@lang.[\"twsc1\",\"Template was successfully created\"]';}}","checkTaskStatus":"function(pageContext) { if (pageContext.workOrderAction == 'edit' ) { if (pageContext.workOrderStatusId == 'workOrderOpen' || pageContext.workOrderStatusId == 'workOrderScheduled') { return false; } else { return true; } } else { return true; } }","isWorkOrderActionShowWorkOrder":"function(pageContext){return (pageContext.workOrderAction=='showWorkOrder');}","disableAnowData":"function(pageContext) { if (pageContext.workOrderStatusId == 'workOrderInProgress' || pageContext.workOrderAction == 'showWorkOrder' || pageContext.workOrderAction == 'view') { return true; } else if (pageContext.workOrderAction == 'edit' || pageContext.workOrderAction == 'add') { return false; } }","isShowBannerForTemplateAndDuplicate2":"function(pageContext) { if (pageContext.acCompletedANowNotificationWFOut[0].outputVar.showBanner == 'true') { return false; } else { return true; } }","isShowBannerForTemplateAndDuplicate":"function(pageContext){if(pageContext.bannerType=='workOrderDuplicate'||pageContext.bannerType=='workOrderTemplate'){return false;}else{return true;}}"},"header":{"children":[{"hidden":"@jslib.isWorkOrderActionShowWorkOrder","statusColor":"@pageContext.statusNameColor","id":"status","type":"status","value":"@pageContext.statusName"},{"activeIcon":"@iconlib.ActionsBinPurple","hidden":"@jslib.isDeleteButtonHidden","name":"@lang.['dwo','Delete Work Order']","icon":"@iconlib.ActionsBinGrey","tooltip":"@lang.['dwo','Delete Work Order ']","actionOnClick":["@actions.setActionForWorkOrderDelete","@actions.openWorkOrderCancelDeleteModal"],"type":"buttonIcon"},{"isRequired":false,"hidden":"@jslib.isWorkOrderOpen","data":[{"buttonType":"secondary","hidden":"@jslib.isWorkOrderOpen","actionOnClick":["@actions.submitCompletedAnow"],"disabled":"@jslib.isCompletedAnow","id":"approveTask","type":"button","title":"Completed ANow"},{"buttonType":"secondary","hidden":"@jslib.isWorkOrderOpen","actionOnClick":["@actions.openCloseOutSidepanel"],"id":"closeOutButton","type":"button","title":"@lang.['cp5','Closeout Package']"}],"type":"actionDropdown","title":"@lang.['o4','Options']"},{"buttonType":"secondary","hidden":"@jslib.isCompletedAnowHidden","actionOnClick":["@actions.openCloseOutSidepanel"],"id":"closeOutButton","type":"button","title":"@lang.['cp5','Closeout Package']"},{"buttonType":"primary","hidden":"@jslib.isWorkOrderCancelled","actionOnClick":["@actions.setSubAction","@actions.fireProcessEvent","@actions.closePanel","@actions.refreshDataGrid"],"disabled":"@jslib.isSaveDisabledForCancellationNotes","id":"submit1","type":"button","title":"@lang.['s12','Save']"},{"buttonType":"primary","hidden":"@jslib.isWorkOrderActionNotAdd","actionOnClick":["@actions.setActionForButtonHidden","@actions.setSubAction","@actions.fireProcessEvent","@actions.setWorkOrderId","@actions.subActionForWorkOrderEdit","@actions.fetchWorkOrderQueryData","@actions.normalizeWorkflowData","@actions.initialData","@actions.refreshDataGrid"],"disabled":"@jslib.isSaveAndContinueDisabled","id":"saveAndContinue","type":"button","title":"@lang.['sc1','Save & Continue']"},{"hidden":"@jslib.isActionDropdownHidden","data":[{"buttonType":"secondary","actionOnClick":["@actions.openTemplateSidepanel","@actions.setSubAction"],"id":"saveAsTemplate","type":"button","title":"@lang.['sat','Save as Template']"},{"buttonType":"secondary","actionOnClick":["@actions.fetchAutoSchedulingTasks","@actions.popUpDisplayCheck"],"id":"cancelWorkOrder","type":"button","title":" @lang.['cwo','Cancel Work Order']"}],"type":"actionDropdown","title":"@lang.['o4','Options']"},{"buttonType":"primary","hidden":"@jslib.isSaveHidden","actionOnClick":["@actions.setSubAction","@actions.setWorkOrderStatus","@actions.fireProcessEvent","@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"disabled":"@jslib.isSaveDisable","id":"submit2","type":"button","title":"@lang.['s12','Save']"},{"icon":"@iconlib.NavigationCloseGrey","actionOnClick":["@actions.closePanel","@actions.clearPageContext"],"id":"close","type":"buttonIcon"}],"title":"@jslib.dynamicHeaderText"},"body":{"children":[{"children":[{"children":[{"alertMessage":"@jslib.isBannerText","actionOnChange":"@actions.clearbannerType","onClose":"@actions.clearbannerType","alertType":"success","hidden":"@jslib.isShowBannerForTemplateAndDuplicate","id":"alertMessage","label":"alert_1231","type":"alert","timeout":5000},{"alertMessage":"@jslib.isBannerText2","actionOnChange":"@actions.clearbannerType","onClose":"@actions.clearbannerType","alertType":"warning","hidden":"@jslib.isShowBannerForTemplateAndDuplicate2","id":"alertMessage3","label":"alert_1231","type":"alert","timeout":5000},{"children":[{"actionOnChange":["@actions.decisionActionForWorkOrderTemplate"],"isMultiSelect":false,"optLabelMap":"templateName","optValueMap":"templateId","searchByOptions":{"dataSourceId":"query/read","sourceType":"query","dataToBeSent":{"filter":" {$templateName} like {@filter}","models":["workOrderTemplateV2"],"columns":{"templateName":"workOrderTemplateV2.name","templateId":"workOrderTemplateV2.id"},"inputs":{},"orderBy":"templateName ASC","distinct":true}},"hidden":"@jslib.isWorkOrderActionNotAdd","isMainPage":false,"id":"templateId","label":"@lang.['wot2','Work Order Template (Optional)']","type":"selectDropdown","value":"@pageContext.templateId","placeHolder":"@lang.['st2','Select template']"},{"hidden":"@jslib.isShowWorkorderId","disabled":true,"id":"workOrderId","label":"@lang.['woi3','Work Order ID']","type":"input","value":"@pageContext.workOrderId"}],"id":"workOrderInformation","type":"section"},{"children":[{"actionOnChange":["@actions.setPrimaryAppraiserId","@actions.fetchWFData","@actions.setResourceType"],"isMultiSelect":false,"optLabelMap":"wfName","optValueMap":"userID","searchByOptions":{"dataSourceId":"query/read","sourceType":"query","dataToBeSent":{"filter":"{$resourceType} in {@resourceType} and {$wfName} like {@filter}","models":["User","workforce"],"inputs":{"resourceType":["CLKV2Q1ALX","G2BW2Q1MI8"]},"columns":{"wfName":"User.name","userID":"User.id","resourceType":"workforce.acWfType"},"orderBy":"wfName ASC"}},"disabled":"@jslib.disableAnowData","label":"@lang.['pa3','Primary Appraiser']","id":"primaryAppraiser","type":"selectDropdown","value":"@pageContext.primaryAppraiser"},{"hidden":false,"readOnly":true,"id":"tags","label":"@lang.['rt7','Resource Type']","type":"input","value":"@pageContext.appraiserType"},{"hidden":"@jslib.isWorkOrderActionNotAdd","disabled":"@jslib.disableAnowData","inputType":"text","id":"input_3655","label":"@lang.['rt01','Report Type']","placeholder":"@lang.['ert1','Enter Report Type']","type":"input","title":"input_3655","value":"@pageContext.reportType"},{"hidden":"@jslib.isWorkOrderActionAdd","disabled":"@jslib.disableAnowData","id":"reportType","label":"@lang.['rt01','Report Type']","type":"input","value":"@pageContext.reportType"},{"actionOnChange":[],"optLabelMap":"lenderName","optValueMap":"lenderId","isMultiSelect":false,"searchByOptions":{"dataSourceId":"query/read","sourceType":"query","dataToBeSent":{"filter":"","models":["accLender"],"columns":{"lenderName":"accLender.lenderName","lenderId":"accLender.id"},"inputs":{},"distinct":true}},"isMainPage":false,"readOnly":"@jslib.isWorkOrderActionNotAdd","id":"acLenderId","label":"@lang.['ln4','Lender Name']","type":"selectDropdown","value":"@pageContext.acLenderId","placeHolder":"@lang.['sln4','Select Lender Name']"},{"hidden":"@jslib.isWorkOrderActionNotAdd","disabled":"@jslib.disableAnowData","inputType":"text","id":"input_8537","label":"@lang.['lt1','Loan Type']","placeholder":"@lang.['elt1','Enter Loan Type']","type":"input","title":"input_8537","value":"@pageContext.loanType"},{"hidden":"@jslib.isWorkOrderActionAdd","disabled":"@jslib.disableAnowData","id":"loanType","label":"@lang.['lt1','Loan Type']","type":"input","value":"@pageContext.loanType"},{"hidden":"@jslib.isWorkOrderActionNotAdd","disabled":"@jslib.disableAnowData","inputType":"number","id":"input_2787","label":"@lang.['cv1','Contract Value']","placeholder":"@lang.['ecv','Enter Contract Value']","type":"input","title":"input_2787","value":"@pageContext.contractValue"},{"hidden":"@jslib.isWorkOrderActionAdd","disabled":"@jslib.disableAnowData","id":"contractValue","label":"@lang.['cv1','Contract Value']","type":"input","value":"@pageContext.contractValue"},{"hidden":"@jslib.isWorkOrderActionNotAdd","disabled":false,"inputType":"text","id":"input_9295","label":"@lang.['t01','Tags']","placeholder":"@lang.['et01','Enter Tags']","type":"input","title":"input_9295","value":"@pageContext.tags"},{"hidden":"@jslib.isWorkOrderActionAdd","readOnly":true,"id":"tags","label":"@lang.['t01','Tags']","type":"input","value":"@pageContext.tags"},{"hidden":"@jslib.isWorkOrderActionNotAdd","disabled":false,"inputType":"text","id":"input_1145","label":"@lang.['go02','GLA (Optional)']","placeholder":"@lang.['egla','Enter GLA']","type":"input","title":"input_1145","value":"@pageContext.gla"},{"hidden":"@jslib.isWorkOrderActionAdd","readOnly":true,"id":"gla","label":"@lang.['g02','GLA']","type":"input","value":"@pageContext.gla"},{"hidden":"@jslib.isWorkOrderActionNotAdd","disabled":false,"inputType":"text","id":"input_4227","label":"@lang.['cop03','Complex (Optional)']","placeholder":"@lang.['ec03','Enter Complex']","type":"input","title":"input_4227","value":"@pageContext.complex"},{"hidden":"@jslib.isWorkOrderActionAdd","readOnly":true,"id":"complex","label":"@lang.['c03','Complex']","type":"input","value":"@pageContext.complex"},{"hidden":"@jslib.isWorkOrderActionNotAdd","disabled":false,"inputType":"text","id":"input_1024","label":"@lang.['ro02','Rural (Optional)']","placeholder":"@lang.['er02','Enter Rural']","type":"input","title":"input_1024","value":"@pageContext.rural"},{"hidden":"@jslib.isWorkOrderActionAdd","readOnly":true,"id":"rural","label":"@lang.['r02','Rural']","type":"input","value":"@pageContext.rural"},{"hidden":"@jslib.isWorkOrderActionNotAdd","disabled":false,"inputType":"text","id":"input_5719","label":"@lang.['ho01','Historical (Optional)']","placeholder":"@lang.['eh01','Enter Historical']","type":"input","title":"input_5719","value":"@pageContext.historical"},{"hidden":"@jslib.isWorkOrderActionAdd","readOnly":true,"id":"historical","label":"@lang.['h01','Historical']","type":"input","value":"@pageContext.historical"}],"id":"section_6136","label":"@lang.['ad5','Anow Data']","type":"section","title":"section_6136"},{"children":[{"minDate":"1970-01-01 12:00","actionOnChange":["@actions.getTimeZone","@actions.setCalendarId","@actions.getSlaTimeAndDeadline","@actions.setSlaResponseTimeAndDeadline"],"hidden":"@jslib.isWorkOrderActionNotAdd","id":"workOrderRequestedDate","label":"datetime_4534","title":"@lang.['ro1','Requested on']","type":"datetime","value":"@pageContext.workOrderRequestedDate"},{"hidden":"@jslib.isWorkOrderActionAdd","readOnly":true,"id":"workOrderRequestedDateOnEdit","label":"datetime_7718","title":"@lang.['ro1','Requested on']","type":"datetime","value":"@pageContext.workOrderRequestedDate"},{"isRequired":true,"hidden":"@jslib.isWorkOrderActionNotAdd","options":"@pageContext.workOrderTypeList","optTitleKey":"workOrderTypeName","optValueKey":"workOrderTypeId","id":"workOrderTypeList","label":"select_473","title":"@lang.['wot1','Work Order Type']","type":"select","value":"@pageContext.workOrderWorkOrderTypeId","placeHolder":"@lang.['swot','Select work order type']"},{"hidden":"@jslib.isWorkOrderActionAdd","readOnly":true,"id":"workOrderTypeName","label":"@lang.['wot1','Work Order Type']","placeholder":"@lang.['swot','Select work order type']","type":"input","value":"@pageContext.workOrderTypeName"},{"isRequired":true,"actionOnChange":["@actions.setSlaResponseTimeAndDeadline"],"hidden":"@jslib.isWorkOrderActionNotAdd","optTitleKey":"ZPriorityPriorityName","label":"select_8988","title":"@lang.['p03','Priority']","type":"select","options":"@pageContext.priorityList","disabled":true,"optValueKey":"ZPriorityPriorityId","id":"priorityList","value":"@pageContext.workOrderPriorityPriority","placeHolder":"@lang.['sp','Select priority']"},{"hidden":"@jslib.isWorkOrderActionAdd","readOnly":true,"id":"ZPriorityPriorityName","label":"@lang.['p03','Priority']","type":"input","value":"@pageContext.priorityName"},{"isRequired":true,"actionOnChange":["@actions.decisionActionForCustomerData"],"optLabelMap":"customerCompanyName","optValueMap":"customerId","hidden":"@jslib.isWorkOrderActionNotAdd","isMainPage":false,"label":"@lang.['c16','Customer']","type":"selectDropdown","isMultiSelect":false,"searchByOptions":{"dataSourceId":"query/read","sourceType":"query","dataToBeSent":{"filter":" {$customerCompanyName} like {@filter} AND {$customer.statusId}!='customerDeactivated'","models":["customer"],"columns":{"customerCompanyName":"customer.companyName","customerId":"customer.id"},"inputs":{},"orderBy":"customerCompanyName ASC","distinct":true}},"id":"customerId","value":"@pageContext.customerId","placeHolder":"@lang.['sc','Select customer']"},{"hidden":"@jslib.isWorkOrderActionAdd","readOnly":true,"id":"customerCompanyName","label":"@lang.['c16','Customer']","placeholder":"@lang.['sc','Select customer']","type":"input","value":"@pageContext.customerCompanyName"},{"hidden":"@jslib.isWorkOrderActionAdd","readOnly":true,"id":"customerCompanyName","label":"Work Order Creation","type":"input","value":"@pageContext.IsImported"}],"label":"@lang.['gi','General Information']","id":"generalInformationSection","type":"section"},{"hidden":"@jslib.isWorkOrderDetailsSectionHidden","children":[{"isRequired":true,"actionOnChange":["@actions.clearSlaAndCalendarData","@actions.fetchCalendar","@actions.setCalendarId","@actions.getSlaTimeAndDeadline","@actions.setSlaResponseTimeAndDeadline"],"hidden":"@jslib.isWorkOrderActionNotAdd","optTitleKey":"contractContractNumber","label":"select_3966","title":"@lang.['c12','Contract']","type":"select","options":"@pageContext.contractList","disabled":"@jslib.isDisableContract","optValueKey":"contractId","id":"contractList","value":"@pageContext.workOrderContractId","placeHolder":"@lang.['ncawtc','No contracts associated with this customer']"},{"hidden":"@jslib.isWorkOrderActionAdd","readOnly":true,"id":"contractNumber","label":"@lang.['c12','Contract']","type":"input","value":"@pageContext.contractContractNumber"},{"isRequired":true,"hidden":"@jslib.hideCalendarWithContract","options":"@pageContext.calendarList","disabled":true,"optTitleKey":"calendarName","optValueKey":"calendarId","id":"calendarList","label":"select_6168","title":"@lang.['navSW','Service Window']","type":"select","value":"@pageContext.workOrderCalendarId","placeHolder":"@lang.['swwbabotsc','Service window will be autofilled based on the selected contract']"},{"isRequired":true,"hidden":"@jslib.hideCalendarWithNoContract","options":"@pageContext.calendarAllList","optTitleKey":"calendarName","optValueKey":"calendarId","id":"calendarListForNoContracts","label":"select_9745","title":"@lang.['sw01','Service Window']","type":"select","value":"@pageContext.workOrderCalendarId","placeHolder":"@lang.['saswtdsoh','Select a service window to define standard operating hours']"},{"hidden":"@jslib.isWorkOrderActionAdd","readOnly":true,"id":"workOrderCalendarName","label":"@lang.['sw01','Service Window']","type":"input","value":"@pageContext.workOrderCalendarName"},{"readOnly":true,"id":"slaResolutionTime","label":"@lang.['srt1','SLA Resolution Time']","type":"input","value":"@pageContext.workOrderSlaResolutionTime"},{"minDate":"@pageContext.workOrderRequestedDate","hidden":"@jslib.isWorkOrderActionNotAdd","disabled":"@jslib.disableAnowData","id":"workOrderDeadline","label":"datetime_9710","title":"@lang.['dd1O','Due Date (Optional)']","type":"datetime","value":"@pageContext.workOrderDeadline"},{"minDate":"@pageContext.workOrderRequestedDate","hidden":"@jslib.isWorkOrderActionAdd","disabled":"@jslib.disableAnowData","id":"workOrderDeadline","label":"datetime_8974","title":"@lang.['dd1O','Due Date (Optional)']","type":"datetime","value":"@pageContext.workOrderDeadline"},{"disabled":"@jslib.isNotesDisable","id":"notes","label":"@lang.['n2','Notes (Optional)']","type":"textarea","value":"@pageContext.workOrderNotes","placeHolder":"@lang.['en3','Enter notes (Optional)']"}],"label":"@lang.['wod','Work Order Details']","id":"workOrderDetailsSection","type":"section"}],"label":"@lang.['woi1','Work Order Information']","id":"tab_8720","type":"tab"},{"hidden":"@jslib.isWorkOrderActionAdd","children":[{"children":[{"alertMessage":"@jslib.workOrderTaskSuccessMessage","actionOnChange":"@actions.clearbannerType","onClose":"@actions.clearbannerType","alertType":"success","hidden":"@jslib.isBannerHidden","id":"alertMessage","label":"alert_9979","type":"alert","timeout":5000},{"children":[{"label":"@lang.['t7','Tasks']","id":"workOrderTaskDataGrid","type":"dataGrid","jsonDef":{"isScrollAble":true,"searchAllowed":true,"tableWidth":"90rem","searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsBinPurple","hidden":true,"name":"@lang.['dt1','Delete Task']","icon":"@iconlib.ActionsBinGrey","tooltip":"@lang.['d1','Delete']","actionOnClick":["@actions.setActionDelete"],"type":"buttonIcon"},{"activeIcon":"@iconlib.ActionsDuplicatePurple","hidden":{"workOrderTaskStatusId":["workOrderTaskRejected","workOrderTaskSiteChangeRequest","workOrderTaskCompleted","workOrderTaskCancelled","workOrderTaskAutoScheduling"]},"name":"@lang.['d15','duplicateWorkOrderTask']","icon":"@iconlib.ActionsDuplicateGrey","tooltip":"@lang.['d6','Duplicate']","actionOnClick":["@actions.setActionDuplicate","@actions.duplicateModal"],"type":"buttonIcon"},{"activeIcon":"@iconlib.ActionsEditPurple","hidden":{"workOrderTaskStatusId":["workOrderTaskDispatched","workOrderTaskInTransit","workOrderTaskDelayed","workOrderTaskIncident","workOrderTaskDiscontinued","workOrderTaskInProgress","workOrderTaskPendingReview","workOrderTaskRejected","workOrderTaskCompleted","workOrderTaskSiteChangeRequest","workOrderTaskCancelled","workOrderTaskAutoScheduling"]},"name":"@lang.['et1','Edit Task']","icon":"@iconlib.ActionsEditGrey","tooltip":"@lang.['e1','Edit']","actionOnClick":["@actions.setActionEdit","@actions.changeTztime","@actions.openWorkTaskSP"],"type":"buttonIcon"},{"activeIcon":"@iconlib.ActionsVisiblePurple","hidden":true,"name":"@lang.['vtr','View Task Results']","icon":"@iconlib.ActionsVisibleGrey","tooltip":"@lang.['vtr','View Task Results']","actionOnClick":["@actions.setActionView","@actions.openWorkOrderTaskResultSP"],"type":"buttonIcon"},{"activeIcon":"@iconlib.ActionsVisiblePurple","hidden":{"workOrderTaskStatusId":["workOrderTaskDraft","workOrderTaskOpen","workOrderTaskScheduled","workOrderTaskReopened"]},"name":"@lang.['vt','View Task']","icon":"@iconlib.ActionsVisibleGrey","tooltip":"@lang.['vt','View Task']","actionOnClick":["@actions.setActionView","@actions.changeTztime","@actions.openWorkTaskSP"],"type":"buttonIcon"}]},"gridRefreshId":"workOrderTaskDataGrid","emptyScreen":{"image":"@iconlib.ActionsSearchGrey","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSync":true,"dataToBeSent":{"filter":"{$workOrderTaskWorkOrderId} = {@workOrderId}","models":["ZStatus","workOrderTask","taskType","site","workOrderTaskAppointmentWindow","workOrder"],"columns":{"workOrderTaskStatusId":"workOrderTask.statusId","workOrderTaskStatusName":"ZStatus.name","workOrderTaskScheduledDateSP":"workOrderTask.scheduledDate","workOrderTaskAppointmentWindow":"workOrderTaskAppointmentWindow.startEndJson","acLenderId":"workOrder.acLenderId","siteName":"site.name","siteAddress":"site.address","siteTimeZone":"site.acTimeZone","taskTypeName":"taskType.name","siteTimezoneOffset":"site.timezoneOffset","workOrderTaskRecver":"workOrderTask.recver","siteLatitude":"site.latitude","workOrderTaskSiteId":"workOrderTask.siteId","workOrderTaskStatusNameColor":"ZStatus.colorCode","workOrderTaskNotes":"workOrderTask.notes","workOrderTaskId":"workOrderTask.id","workOrderTaskWorkOrderId":"workOrderTask.workOrderId","workOrderTaskModifiedDate":"workOrderTask.modifiedDate","workOrderTaskEstimatedDuration":"ROUND({$workOrderTask.estimatedDuration}/60,2)","workOrderTaskTaskTypeId":"workOrderTask.taskTypeId","siteLongitude":"site.longitude","workOrderTaskStatusTargetModel":"workOrderTask.statusTargetModel"},"inputs":{"workOrderId":"@pageContext.workOrderId"},"orderBy":"workOrderTaskScheduledDateSP DESC","outerJoinOnModel":"workOrderTask","distinct":true,"links":{"workOrder":"workOrderTask","taskType":"workOrderTask","site":"workOrderTask","ZStatus":"workOrderTask"},"getCount":true},"tableHeader":[{"name":"@lang.['s','Status']","options":{"flex":1,"colorCode":"workOrderTaskStatusNameColor","showLabel":true},"key":"workOrderTaskStatusName"},{"name":"@lang.['ti02','Task ID']","options":{"flex":0.8,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"workOrderTaskId","primaryKey":true},{"name":"@lang.['tt03','Task Type']","options":{"flex":1.4,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"taskTypeName"},{"name":"@lang.['cs','Customer Site']","options":{"flex":1,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"siteName"},{"name":"@lang.['sst','Scheduled Start Time']","options":{"flex":1.2,"currentSorted":true,"sortable":true,"type":"datetime","showLabel":true},"key":"workOrderTaskScheduledDateSP"},{"name":"@lang.['aw01','Appointment Window']","options":{"flex":1,"dateRangeType":"datetime","type":"dateRange","showLabel":true},"key":"workOrderTaskAppointmentWindow"},{"name":"@lang.['d28','Duration (hrs)']","options":{"flex":1.2,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"workOrderTaskEstimatedDuration"}],"dataSourceId":"query/read","jslib":{"isWorkOrderClosed":"function(pageContext){if(pageContext.workOrderStatusId === 'workOrderCompleted' || pageContext.workOrderStatusId === 'workOrderCancelled' || pageContext.workOrderAction=='view' || pageContext.workOrderAction=='showWorkOrder'){return true;}else {return false;}}"},"rowTextLength":50,"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['t7','Tasks']","children":[{"buttonType":"primary","hidden":"@jslib.isWorkOrderClosed","actionOnClick":["@actions.setActionAdd","@actions.openWorkTaskSP"],"id":"addNew","type":"button","title":"@lang.['at3','Add Task']"}]},"isSelectable":false,"updateAllowed":true,"actions":[{"name":"setActionAdd","type":"script","actionDef":"function(pageContext){pageContext.workOrderTaskAction='add';}"},{"name":"setActionEdit","type":"script","actionDef":"function(pageContext){pageContext.workOrderTaskAction='edit';}"},{"name":"setActionView","type":"script","actionDef":"function(pageContext){pageContext.workOrderTaskAction='view';pageContext.workOrderTaskTypeId=pageContext.workOrderTaskTaskTypeId;}"},{"name":"setActionDuplicate","type":"script","actionDef":"function(pageContext){pageContext.subAction='duplicateWorkOrderTask'}"},{"name":"changeTztime","type":"script","continueOnError":true,"actionDef":"function(pageContext) { function formatDate(date) { if (date) { var d = new Date(new Date(date).getTime() - pageContext.siteTimezoneOffset * 60 * 1000); return d.getFullYear() + '-' + (parseInt(d.getMonth() + 1) < 10 ? '0' + parseInt(d.getMonth() + 1) : parseInt(d.getMonth() + 1)) + '-' + (d.getDate() < 10 ? '0' + d.getDate() : d.getDate()) + ' ' + (d.getHours() < 10 ? '0' + d.getHours() : d.getHours()) + ':' + (d.getMinutes() < 10 ? '0' + d.getMinutes() : d.getMinutes()) + ':00.000'; d = new Date(new Date(d + ' UTC').toLocaleString('en-us', { timeZone: pageContext.siteTimeZone })), month = '' + (d.getMonth() + 1), day = '' + d.getDate(), year = d.getFullYear(); var hours = d.getHours().toString(); var minutes = d.getMinutes().toString(); var seconds = d.getSeconds().toString(); var timeZone = new Date().toString().split(' ')[5]; if (minutes.length < 2) minutes = '0' + minutes; if (hours.length < 2) hours = '0' + hours; if (seconds.length < 2) seconds = '0' + seconds; time = hours + ':' + minutes + ':' + seconds; if (month.length < 2) month = '0' + month; if (day.length < 2) day = '0' + day; date = ([year, month, day].join('-') + ' ' + time); } else { return '-'; } } pageContext.siteLocalTime = formatDate(pageContext.workOrderTaskScheduledDateSP); }"},{"name":"openWorkTaskSP","type":"openPanel","pageId":"CJXUPK78YL"},{"name":"openWorkOrderTaskResultSP","type":"openPanel","pageId":"PORTE48LUB"},{"subTitle":"@lang.['aysywtdtt1','Are you sure you want to duplicate this task?']","name":"duplicateModal","options":[{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.fireProcessEventForDuplicateTask","@actions.workOrderTaskDuplicateSuccessMessage","@actions.refreshWorkOrderDataGrid","@actions.closeModal","@actions.clearScheduledDate"],"type":"button","title":"@lang.['c13','Continue']"}],"type":"openModal","title":"@lang.['dt8','Duplicate Task']"}],"searchKeys":["workOrderTaskId","workOrderTaskStatusName","taskTypeName","siteName"]}}],"id":"dataGridForTasks","type":"section","transparent":true}],"id":"datagridTask","type":"section","transparent":true},{"hidden":true,"children":[{"label":"@lang.['d27','Dependencies']","id":"dependencies","type":"dataGrid","jsonDef":{"isScrollAble":true,"searchAllowed":false,"tableWidth":"60rem","searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsBinPurple","hidden":"@jslib.isActionDependencyHidden","name":"@lang.['dtd','Delete Task Dependency']","icon":"@iconlib.ActionsBinGrey","tooltip":"@lang.['d1','Delete']","actionOnClick":"@actions.deleteTaskDependencyData","type":"buttonIcon"},{"activeIcon":"@iconlib.ActionsEditPurple","hidden":"@jslib.isActionDependencyHidden","name":"@lang.['et3','Edit Task Dependency']","icon":"@iconlib.ActionsEditGrey","tooltip":"@lang.['e1','Edit']","actionOnClick":["@actions.setTaskDependencyActionEdit","@actions.openTaskDependencyNSP"],"type":"buttonIcon"}]},"gridRefreshId":"dependencies","emptyScreen":{"image":"@iconlib.ActionsSearchGrey","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSync":true,"tableHeader":[{"name":"@lang.['t7','Tasks']","options":{"flex":0.8,"showLabel":true},"key":"taskDependencyPrecedentTask"},{"name":"@lang.['c26','Condition']","options":{"flex":0.6,"showLabel":true},"key":"taskDependencyEnforceAllDependency"},{"name":"@lang.['s','Status']","options":{"flex":0.55,"showLabel":true},"key":"taskDependencyPrecedentStatusName"},{"name":"@lang.['dt5','Dependent Tasks']","options":{"flex":0.8,"showLabel":true},"key":"taskDependencyDependentTask"},{"name":"@lang.['ds3','Dependent Status']","options":{"flex":0.55,"showLabel":true},"key":"taskDependencyDependentStatusName"}],"dataToBeSent":{"apiResponseParams":["count"],"processId":"workOrderTaskDependencyDataFetchWF","apiResponseFormat":true,"contextVar":{"workOrderId":"@pageContext.workOrderId"},"apiResponseObject":"taskDependencyData"},"dataSourceId":"process/start","sourceType":"api","jslib":{"isActionDependencyHidden":"function(pageContext){return(pageContext.workOrderStatusId === 'workOrderPendingReview' || pageContext.workOrderStatusId === 'workOrderRejected' || pageContext.workOrderStatusId === 'workOrderCompleted'  || pageContext.workOrderStatusId === 'workOrderCancelled' || pageContext.workOrderAction=='view' || pageContext.workOrderAction=='showWorkOrder');}","isWorkOrderClosed":"function(pageContext){if(pageContext.workOrderStatusId === 'workOrderCompleted' || pageContext.workOrderStatusId === 'workOrderCancelled' || pageContext.workOrderAction=='view' || pageContext.workOrderAction=='showWorkOrder'){return true;}else {return false;}}"},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['td3','Task Dependencies']","children":[{"buttonType":"primary","hidden":"@jslib.isWorkOrderClosed","actionOnClick":["@actions.setTaskDependencyActionAdd","@actions.openTaskDependencyNSP"],"id":"addNew","type":"button","title":"@lang.['ad1','Add Dependency']"}]},"isSelectable":false,"updateAllowed":true,"actions":[{"name":"setTaskDependencyActionAdd","type":"script","actionDef":"function(pageContext){pageContext.workOrderTaskDependencyAction='add';}"},{"name":"setTaskDependencyActionEdit","type":"script","actionDef":"function(pageContext){pageContext.workOrderTaskDependencyAction='edit';}"},{"name":"openTaskDependencyNSP","type":"openPanel","pageId":"3E3E1ODVST"},{"subTitle":"@lang.['aysywtrtdtwrterwotitwo','Are you sure you want to remove this dependency? This will remove the existing relationships with other tasks in the work order.']","name":"deleteTaskDependencyData","options":[{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.setSubActionDeleteTaskDependency","@actions.fireProcessEventToDeleteTaskDependency","@actions.subActionForWorkOrderEdit","@actions.closeModal","@actions.refreshDataGrid"],"type":"button","title":"@lang.['yc','Yes, Continue']"}],"type":"openModal","title":"@lang.['cd','Confirm Delete']"},{"name":"refreshDataGrid","type":"refreshDataGrid"}],"searchKeys":[]}}],"id":"dataGridForTasksDependencies","label":"section_9168","type":"section","transparent":true}],"label":"@lang.['t7','Tasks']","id":"tab_7252","type":"tab"},{"hidden":"@jslib.isWorkOrderCancelled","children":[{"children":[{"minDate":"1970-01-01 12:00","disabled":true,"id":"workOrderCancelledOn","label":"datetime_3723","title":"@lang.['co1','Cancelled On']","type":"datetime","value":"@pageContext.workOrderCancelledDate"},{"disabled":true,"id":"workOrderTaskCancelledBy","label":"@lang.['cb','Cancelled By']","placeholder":"@lang.['cb','Cancelled By']","type":"input","value":"@pageContext.workOrderCancelledBy"},{"disabled":true,"id":"workOrderCancellationReason","label":"@lang.['cr','Cancellation Reason']","placeholder":"@lang.['er1','Enter reason']","type":"input","value":"@pageContext.workOrderCancellationReason"},{"inputType":"text","id":"cancellationNotes","label":"@lang.['n3','Notes']","type":"textarea","value":"@pageContext.workOrderCancellationNotes","placeHolder":"@lang.['en2','Enter notes']"}],"id":"section_772","label":"@lang.['cd2','Cancellation Details']","type":"section"}],"label":"@lang.['cd2','Cancellation Details']","id":"tab_200","type":"tab"},{"hidden":"@jslib.isWorkOrderActionAdd","children":[{"alertMessage":"@jslib.isBannerText1","actionOnChange":"@actions.clearbannerType","onClose":"@actions.clearbannerType","alertType":"warning","hidden":"@jslib.checkTask","id":"alertMessage","label":"alert_1231","type":"alert","timeout":5000},{"hidden":"@jslib.hideCompAddress","children":[{"isRequired":true,"actionOnChange":"@actions.clearLocation","disabled":false,"id":"siteAddress","label":"Comparable Address","placeholder":"@lang.['ea','Enter address']","type":"address","value":"@pageContext.compAddress"},{"buttonType":"primary","hidden":false,"actionOnClick":["@actions.modelUpdate","@actions.clearCompsData","@actions.refreshCompsDataGrid","@actions.callReferenceData"],"disabled":"@jslib.isCompAddress","id":"button_3358","title":"@lang.['a15','Add']","type":"button","helperText":"","required":false}],"label":"@lang.['cp7','Comparable Property']","id":"customerSiteDetails","type":"section"},{"children":[{"id":"partsAndMaterials","type":"dataGrid","jsonDef":{"isScrollAble":false,"tableWidth":"100rem","searchAllowed":true,"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsEditPurple","hidden":"@jslib.checkTaskStatus","name":"@lang.['e1','Edit']","icon":"@iconlib.ActionsEditGrey","tooltip":"@lang.['e1','Edit']","actionOnClick":["@actions.setWorkOrderInventoryActionForEdit","@actions.openPartNSP"],"type":"buttonIcon"},{"activeIcon":"@iconlib.ActionsBinPurple","hidden":"@jslib.checkTaskStatus","name":"@lang.['d1','Delete']","icon":"@iconlib.ActionsBinGrey","tooltip":"@lang.['d1','Delete']","actionOnClick":["@actions.deleteCompAddress","@actions.refreshMainDataGrid"],"type":"buttonIcon"}]},"gridRefreshId":"compGrid","emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['a20','Address']","options":{"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"address"},{"hidden":"true","name":"@lang.['id','id']","options":{"sortOrder":"ASC","sortable":true,"showLabel":false},"key":"id"}],"dataToBeSent":{"filter":"{$workOrderId} = {@workOrderId} AND {$locationType} = 'Comparable'","models":["acCompAddress"],"columns":{"address":"acCompAddress.address","locationType":"acCompAddress.locationType","id":"acCompAddress.id","workOrderId":"acCompAddress.workOrderId","compAddressRecver":"recver"},"inputs":{"workOrderId":"@pageContext.workOrderId"},"distinct":true},"dataSourceId":"query/read","jslib":{"checkTaskStatus":"function(pageContext) { if (pageContext.workOrderAction == 'edit' ) { if (pageContext.workOrderStatusId == 'workOrderOpen' || pageContext.workOrderStatusId == 'workOrderScheduled') { return false; } else { return true; } } else { return true; } }"},"rowTextLength":50,"header":{"subHeaderText":"@lang.['r','Records']","headerText":"Comparable Address","children":[]},"isSelectable":false,"actions":[{"endPoint":"process/start","alertMessage":true,"name":"callReferenceData","outputVarMap":{"data":"@pageContext.callReferenceData"},"type":"api","actionDef":{"data":[{"processId":"acRefDataUpdateInstance","contextVar":{"workOrderId":"@pageContext.workOrderId"}}]}},{"name":"setWorkOrderInventoryActionForEdit","type":"script","actionDef":"function(pageContext){pageContext.workOrderInventoryAction='edit';}"},{"subTitle":"@lang.['aysywtdtc1','Are you sure you want to delete this comp?']","name":"deleteCompAddress","options":[{"buttonType":"primary","name":"yes","actionOnClick":["@actions.deleteComp","@actions.closeModal","@actions.refreshAuditorAttachments","@actions.callReferenceData"],"type":"button","title":"@lang.['yc','Yes, Continue']"},{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['cancel','Cancel']"}],"type":"openModal","title":"@lang.['cd4','Confirm delete']"},{"name":"setWorkOrderInventoryActionForAdd","type":"script","actionDef":"function(pageContext){pageContext.workOrderInventoryAction='addInitial';}"},{"name":"closeModal","type":"closeModal"},{"endPoint":"model/delete","name":"deleteComp","type":"api","actionDef":{"data":[{"modelName":"acCompAddress","recver":"@pageContext.compAddressRecver","id":"@pageContext.id"}],"purge":true}},{"name":"setSubActionForDelete","type":"script","actionDef":"function(pageContext){pageContext.subAction='delete';}"},{"name":"openPartNSP","type":"openPanel","pageId":"acCompAddressNSP"},{"endPoint":"process/start","name":"fireProcessEventForDelete","type":"api","actionDef":{"data":[{"processId":"workOrderInventoryWF","contextVar":{"jsonArrayToDelete":[{"recver":"@pageContext.recver","id":"@pageContext.id"}],"subAction":"@pageContext.subAction"}}]}},{"name":"refreshMainDataGrid","gridId":["partsAndMaterialsGrid"],"type":"RefreshGridOnSidePanel"},{"name":"refreshAuditorAttachments","gridId":["compGrid"],"type":"RefreshGridOnSidePanel"}],"searchKeys":["address"]}}],"id":"partsAndMaterials","type":"section","transparent":true}],"label":"Comparable Address","id":"tab_1043","type":"tab"},{"hidden":"@jslib.isWorkOrderActionAdd","children":[{"children":[{"id":"workOrderLogs","label":"dataGrid_4442","type":"dataGrid","jsonDef":{"isScrollAble":false,"tableWidth":"50rem","searchAllowed":true,"rowActions":{},"gridRefreshId":"workOrderLogsGrid","emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['i','id']","options":{"hidden":true,"showLabel":false},"key":"workOrderLogId","primaryKey":true},{"name":"@lang.['t18','Timestamp']","options":{"sortOrder":"DESC","sortable":true,"type":"dateTime","showLabel":true},"key":"workOrderLogLogDate"},{"name":"@lang.['e10','Event']","options":{"flex":0.8,"sortOrder":"DESC","sortable":true,"showLabel":true},"key":"listOptionAnswerText"},{"name":"@lang.['mb1','Modified By']","options":{"sortOrder":"DESC","sortable":true,"showLabel":true},"key":"userName"},{"name":"@lang.['d17','Details']","options":{"showLabel":true},"key":"workOrderLogDetails"}],"dataToBeSent":{"filter":"{$workOrderLog.workOrderId} = {@workOrderId}","models":["workOrderLog","User","listOptionAnswer"],"columns":{"workOrderLogDetails":"IF({$workOrderLog.details} IS NULL,'-',{$workOrderLog.details})","workOrderLogLogDate":"workOrderLog.logDate","workOrderLogId":"workOrderLog.id","workOrderLogEvent":"workOrderLog.event","listOptionAnswerText":"listOptionAnswer.answerOptionText","userName":"User.name","workOrderLogLoggedByUserId":"workOrderLog.loggedByUserId"},"inputs":{"workOrderId":"@pageContext.workOrderId"},"orderBy":"workOrderLogLogDate DESC","outerJoinOnModel":"workOrderLog","links":{"listOptionAnswer":"workOrderLog","User":"workOrderLog"},"translate":true},"dataSourceId":"query/read","jslib":{},"rowTextLength":30,"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['wol','Work Order Logs']"},"isSelectable":false,"actions":[],"searchKeys":["listOptionAnswerText","userName"]}}],"id":"workOrderLogs","label":"section_4161","type":"section","transparent":true}],"label":"@lang.['navL','Logs']","id":"tab_8532","type":"tab"}],"id":"taskTab","label":"tab_238","type":"tab"}]},"actions":[{"name":"setPrimaryAppraiserId","type":"script","actionDef":"function(pageContext){pageContext.primaryAppraiserId =pageContext.primaryAppraiser[0].value;}"},{"name":"setResourceType","type":"script","actionDef":"function(pageContext){for(var i=0;i<pageContext.listResourceType.length;i++){if(pageContext.listResourceType[i].id == pageContext.wfData[0].type){pageContext.appraiserType = pageContext.listResourceType[i].type; break;}} }"},{"name":"fetchWFData","outputVarMap":{"data":"@pageContext.wfData"},"type":"query","actionDef":{"filter":"{$id} = {@wfID}","models":["workforce","User"],"inputs":{"wfID":"@pageContext.primaryAppraiserId"},"columns":{"wfName":"User.name","id":"User.id","type":"workforce.acWfType"}}},{"name":"fetchResourceType","outputVarMap":{"data":"@pageContext.listResourceType"},"type":"query","actionDef":{"filter":"{$listOption.id} = {@idFilter} && {$id} != 'N1ZR2Q17ZF'","models":["listOption","listOptionAnswer"],"inputs":{"idFilter":"ZFER2Q1DOP"},"columns":{"id":"listOptionAnswer.id","type":"listOptionAnswer.answerOptionText"},"orderBy":"type ASC","batchSize":50,"getCount":true,"batchNumber":1}},{"endPoint":"process/start","name":"fetchWorkOrderQueryData","outputVarMap":{"data":"@pageContext.queryData"},"type":"api","actionDef":{"data":[{"processId":"acWorkOrderFetchDataWF","contextVar":{"timezoneOffset":"@pageContext.timezoneOffset","subAction":"@pageContext.subAction","workOrderId":"@pageContext.workOrderId"}}]}},{"endPoint":"model/delete","name":"deleteComp","type":"api","actionDef":{"data":[{"modelName":"acCompAddress","recver":"@pageContext.compAddressRecver","id":"@pageContext.id"}],"purge":true}},{"name":"refreshAuditorAttachments","gridId":["compGrid"],"type":"RefreshGridOnSidePanel"},{"endPoint":"process/start","alertMessage":true,"name":"callReferenceData","outputVarMap":{"data":"@pageContext.callReferenceData"},"type":"api","actionDef":{"data":[{"processId":"acRefDataUpdateInstance","contextVar":{"workOrderId":"@pageContext.workOrderId"}}]}},{"endPoint":"model/insert","name":"modelUpdate","outputVarMap":{"data":"@pageContext.responseDataComp"},"type":"api","actionDef":{"data":[{"modelName":"acCompAddress","address":"@pageContext.compAddress","latitude":"@pageContext.latitude","locationType":"Comparable","workOrderId":"@pageContext.workOrderId","longitude":"@pageContext.longitude"}]}},{"name":"normalizeWorkflowData","type":"script","actionDef":"function (pageContext) { for (var key in pageContext.queryData[0].outputVar) { if (key === '__status' || key === 'contextType') continue; pageContext[key] = pageContext.queryData[0].outputVar[key]; } if (pageContext.workOrderAction === 'add') { pageContext.workOrderRequestedDate = new Date().toISOString().replace('T', ' ').replace('Z', ''); } else { if (typeof pageContext.contractList !== 'undefined' && pageContext.contractList !== '' && pageContext.contractList.length === 0) { pageContext.calendarAllList = pageContext.queryData[0].outputVar.calendarList }; for (var key in pageContext.workOrderList[0]) { pageContext[key] = pageContext.workOrderList[0][key]; } if (pageContext.workOrderCancelledBy === '' || typeof pageContext.workOrderCancelledBy === 'undefined') { pageContext.workOrderCancelledBy = '@lang.[\"a30\",\"Automation\"]'; } if (pageContext.queryData[0].outputVar.slaTimeFrameList !== '') { pageContext.workOrderSlaResolutionTime = pageContext.queryData[0].outputVar.slaTimeFrameList[0].workOrderSlaResolutionTime; } else if (typeof pageContext.workOrderSlaResolutionTime === 'undefined' || pageContext.workOrderSlaResolutionTime === '') { pageContext.workOrderSlaResolutionTime = '-'; } pageContext.initialWorkOrderCancellationNotes = pageContext.workOrderCancellationNotes; if (Array.isArray(pageContext.calendarList) && pageContext.calendarList.length > 0) { pageContext.calendarName = pageContext.calendarList[0].calendarName; } else { pageContext.calendarName = '-'; } } }"},{"name":"clearScheduledDate","type":"script","actionDef":"function(pageContext){pageContext.workOrderTaskScheduledDateSP = '';}"},{"name":"initialData","type":"script","actionDef":"function (pageContext) { if (pageContext.workOrderAction === 'add') { pageContext.contractContractNumber = ''; pageContext.workOrderTemplateWorkOrderId = ''; pageContext.workOrderId = ''; pageContext.workOrderWorkOrderTypeId = ''; pageContext.workOrderPriorityPriority = ''; pageContext.workOrderCustomerId = ''; pageContext.workOrderContractId = ''; pageContext.workOrderCalendarId = ''; pageContext.workOrderTemplateId = ''; pageContext.workOrderSlaResolutionTime = '-'; pageContext.workOrderDeadline = ''; pageContext.workOrderNotes = ''; pageContext.initialPrimaryAppraiser = ''; pageContext.initialAcLenderId = ''; pageContext.initialReportType = ''; pageContext.initialLoanType = ''; pageContext.initialContractValue = ''; } else { if (typeof pageContext.workOrderDeadline === 'undefined' || pageContext.workOrderDeadline === '') { pageContext.workOrderDeadline = '-'; } if (typeof pageContext.contractContractNumber === 'undefined' || pageContext.contractContractNumber === '') { pageContext.contractContractNumber = '-'; } if (typeof pageContext.calendarAllList !== 'undefined' && pageContext.calendarAllList !== '' && pageContext.calendarAllList.length > 0) { pageContext.calendarAllList.forEach(function (element) { if (element.calendarId === pageContext.workOrderCalendarId) { pageContext.workOrderCalendarName = element.calendarName; } }); } pageContext.initialWorkOrderId = pageContext.workOrderId; pageContext.initialWorkOrderRequestedDate = pageContext.workOrderRequestedDate; pageContext.initialWorkOrderWorkOrderTypeId = pageContext.workOrderWorkOrderTypeId; pageContext.initialWorkOrderPriorityPriority = pageContext.workOrderPriorityPriority; pageContext.initialWorkOrderCustomerId = pageContext.workOrderCustomerId; pageContext.initialWorkOrderTemplateId = pageContext.workOrderTemplateId; pageContext.initialWorkOrderContractId = pageContext.workOrderContractId; pageContext.initialWorkOrderCalendarId = pageContext.workOrderCalendarId; pageContext.initialWorkOrderSlaResolutionTime = pageContext.workOrderSlaResolutionTime; pageContext.initialWorkOrderDeadline = pageContext.workOrderDeadline; pageContext.initialPrimaryAppraiser = pageContext.primaryAppraiser; pageContext.initialAcLenderId = pageContext.acLenderId;pageContext.lenderId = pageContext.acLenderId[0].value; pageContext.initialReportType = pageContext.reportType; pageContext.initialLoanType = pageContext.loanType; pageContext.initialContractValue = pageContext.contractValue; pageContext.initialWorkOrderNotes = pageContext.workOrderNotes; } }"},{"name":"clearPageContext","type":"clearPageContext"},{"endPoint":"event/start","name":"fireProcessEventForDuplicateTask","outputVarMap":{"data":"@pageContext.responseDataForDuplicateTask"},"type":"api","actionDef":{"data":[{"eventId":"BM58GU7UNT","inputVar":{},"contextVar":{"subAction":"@pageContext.subAction","workOrderTaskId":"@pageContext.workOrderTaskId","customerId":"@pageContext.workOrderCustomerId","workOrderId":"@pageContext.workOrderId"}}]}},{"name":"closePanel","type":"closePanel"},{"endPoint":"event/start","name":"fireProcessEvent","outputVarMap":{"data":"@pageContext.responseData"},"type":"api","actionDef":{"data":[{"eventId":"NCJHIL7VSE","inputVar":{},"contextVar":{"workOrder":[{"notes":"@pageContext.workOrderNotes","workOrderTypeId":"@pageContext.workOrderWorkOrderTypeId","acLenderId":"@pageContext.acLenderId[0].value","acContractValue":"@pageContext.contractValue","acTagHistorical":"@pageContext.historical","priorityTargetModel":"workOrder","priorityPriority":"@pageContext.workOrderPriorityPriority","recver":"@pageContext.workOrderRecver","customerId":"@pageContext.workOrderCustomerId","id":"@pageContext.workOrderId","requestedDate":"@pageContext.workOrderRequestedDate","acTagGla":"@pageContext.gla","deadline":"@pageContext.workOrderDeadline","acPrimaryAppraiserId":"@pageContext.primaryAppraiserId","acReportType":"@pageContext.reportType","cancellationNotes":"@pageContext.workOrderCancellationNotes","slaId":"@pageContext.workOrderSlaId","statusTargetModel":"workOrder","acTagRural":"@pageContext.rural","statusId":"@pageContext.workOrderStatusId","calendarId":"@pageContext.workOrderCalendarId","isTemplate":"@pageContext.workOrderIsTemplate","contractId":"@pageContext.workOrderContractId","acTagComplex":"@pageContext.complex","acTags":"@pageContext.tags","acLoanType":"@pageContext.loanType"}],"workOrderTemplateId":"@pageContext.workOrderTemplateId","subAction":"@pageContext.subAction"}}]}},{"name":"workOrderTaskDuplicateSuccessMessage","type":"script","actionDef":"function(pageContext){pageContext.bannerType='workOrderDuplicate';}"},{"name":"clearSlaAndContract","type":"script","actionDef":"function(pageContext){if(typeof pageContext.contractList !== 'undefined' && pageContext.contractList.length==0){pageContext.workOrderContractId='';pageContext.workOrderSlaId='';pageContext.workOrderSlaResolutionTime='-';pageContext.workOrderDeadline='';}}"},{"name":"clearSlaAndCalendarData","type":"script","actionDef":"function(pageContext){pageContext.workOrderCalendarId = '';pageContext.workOrderSlaResolutionTime = '-';pageContext.workOrderDeadline = ''; pageContext.workOrderSlaId='';}"},{"name":"processContractData","type":"script","actionDef":"function(pageContext) { if (typeof pageContext.contractList !== 'undefined' && pageContext.contractList.length === 1) { pageContext.workOrderContractId = pageContext.contractList[0].contractId; } }"},{"name":"setWorkOrderId","type":"script","actionDef":"function(pageContext){pageContext.workOrderId=pageContext.responseData[0].data[0].workOrderId;}"},{"name":"refreshDataGrid","type":"refreshDataGrid"},{"name":"refreshWorkOrderDataGrid","gridId":["workOrderTaskDataGrid","dependencies"],"type":"RefreshGridOnSidePanel"},{"name":"refreshCompsDataGrid","gridId":["compGrid"],"type":"RefreshGridOnSidePanel"},{"name":"setCalendarId","type":"script","actionDef":"function (pageContext) { if (typeof pageContext.contractList !== 'undefined' && pageContext.contractList.length > 0) { for (var i = 0; i < pageContext.contractList.length; i++) { if (pageContext.contractList[i].contractId == pageContext.workOrderContractId) { pageContext.workOrderCalendarId = pageContext.contractList[i].contractCalendarId; pageContext.workOrderSlaId = pageContext.contractList[i].contractSlaId; } } } }"},{"name":"clearbannerType","type":"script","actionDef":"function(pageContext){pageContext.bannerType='';}"},{"name":"setSlaResponseTimeAndDeadline","type":"script","actionDef":"function (pageContext) { pageContext.workOrderSlaResolutionTime = '-'; pageContext.workOrderDeadline = ''; if (typeof pageContext.workOrderData !== 'undefined' && pageContext.workOrderData !== '' && pageContext.workOrderData.length > 0) { pageContext.slaAndDeadlineData = pageContext.workOrderData[0].data[0].priorityDeadlineData; } else { pageContext.slaAndDeadlineData = pageContext.queryData[0].outputVar.priorityDeadlineData; } for (var j = 0; j < pageContext.slaAndDeadlineData.length; j++) { if (pageContext.slaAndDeadlineData[j].priority === pageContext.workOrderPriorityPriority) { pageContext.workOrderDeadline = pageContext.slaAndDeadlineData[j].deadline; pageContext.workOrderSlaResolutionTime = (pageContext.slaAndDeadlineData[j].resolutionTime + ' ' + pageContext.slaAndDeadlineData[j].resolutionUnit); } } }"},{"name":"fetchCalendar","outputVarMap":{"data":"@pageContext.calendarList"},"type":"query","actionDef":{"filter":"{$contractId} = {@workOrderContractId}","models":["contract","calendar"],"columns":{"calendarName":"calendar.name","calendarId":"calendar.id","contractId":"contract.id","contractCalendarId":"contract.calendarId"},"inputs":{"workOrderContractId":"@pageContext.workOrderContractId"}}},{"name":"fetchAutoSchedulingTasks","outputVarMap":{"data":"@pageContext.autoSchedulingTasksList","count":"@pageContext.autoSchedulingTasksCount"},"type":"query","actionDef":{"filter":"{$workOrderTaskWorkOrderId} = {@id} && {$workOrderTaskStatusId} = 'workOrderTaskAutoScheduling' ","models":["workOrderTask"],"columns":{"workOrderTaskStatusId":"workOrderTask.statusId","workOrderTaskWorkOrderId":"workOrderTask.workOrderId"},"inputs":{"id":"@pageContext.workOrderId"},"getCount":true}},{"falseStep":["@actions.cancelWorkOrder"],"trueStep":["@actions.cannotCancelWorkOrder"],"name":"popUpDisplayCheck","type":"decision","actionDef":"function(pageContext){return(pageContext.autoSchedulingTasksCount>0);}"},{"name":"fetchAllCalendar","outputVarMap":{"data":"@pageContext.calendarAllList"},"type":"query","actionDef":{"filter":"{$calendarCalendarType}='serviceWindow'","models":["calendar"],"columns":{"calendarName":"calendar.name","calendarId":"calendar.id","calendarCalendarType":"calendar.calendarType"}}},{"name":"fetchPrimaryAppraiser","outputVarMap":{"data":"@pageContext.primaryAppraiser"},"type":"query","actionDef":{"filter":"{$value}={@value}","models":["User"],"columns":{"label":"User.name","value":"User.id"},"inputs":{"value":"@pageContext.primaryAppraiserId"}}},{"name":"fetchacLenderId","outputVarMap":{"data":"@pageContext.acLenderId"},"type":"query","actionDef":{"filter":"{$value}={@value}","models":["accLender"],"columns":{"label":"accLender.lenderName","value":"accLender.id"},"inputs":{"value":"@pageContext.lenderId"}}},{"endPoint":"event/start","name":"getSlaTimeAndDeadline","outputVarMap":{"data":"@pageContext.workOrderData"},"type":"api","actionDef":{"data":[{"eventId":"B14YXV7KOT","inputVar":{},"contextVar":{"workOrderCalendarId":"@pageContext.workOrderCalendarId","workOrderSlaId":"@pageContext.workOrderSlaId","timezoneOffset":"@pageContext.timezoneOffset","workOrderRequestedDate":"@pageContext.workOrderRequestedDate"}}]}},{"endPoint":"event/start","name":"fireProcessEventToCallCloseoutPackageWF","outputVarMap":{"data":"@pageContext.pdfUrlData"},"type":"api","actionDef":{"data":[{"eventId":"WXOEFH8TW9","inputVar":{},"contextVar":{"workOrderId":"@pageContext.workOrderId"}}]}},{"name":"processCustomerData","type":"script","actionDef":"function(pageContext){if ( typeof pageContext.customerId !== 'undefined' && pageContext.customerId.length > 0 ) {pageContext.workOrderCustomerId = pageContext.customerId[0].value; }}"},{"falseStep":[""],"trueStep":["@actions.fetchWFData","@actions.setAnowDetails","@actions.setResourceType"],"name":"decisionForWFData","type":"decision","actionDef":"function(pageContext){if(pageContext.workOrderAction == 'edit'){return true;} else{ return false;}}"},{"falseStep":["@actions.clearWorkOrderTemplateData"],"trueStep":["@actions.processWorkOrderTemplateData","@actions.getWorkorderTemplateData","@actions.setWorkOrderTemplateData"],"name":"decisionActionForWorkOrderTemplate","type":"decision","actionDef":"function(pageContext){if(typeof pageContext.templateId !== 'undefined' && pageContext.templateId.length > 0 && pageContext.templateId[0] !== null ){return true;} else{ return false;}}"},{"name":"processWorkOrderTemplateData","type":"script","actionDef":"function (pageContext) { if (typeof pageContext.templateId !== 'undefined' && pageContext.templateId.length > 0 && pageContext.templateId[0] !== null) { pageContext.workOrderTemplateId = pageContext.templateId[0].value; } }"},{"name":"fetchContracts","outputVarMap":{"data":"@pageContext.contractList"},"type":"query","actionDef":{"filter":"{$contractCustomerId} = {@workOrderCustomerId} AND {$contractStatusId} != 'contractNotStarted' AND {$contractStatusId} != 'contractExpired' AND {$contractStatusId} != 'contractDeactivated'","models":["contract"],"columns":{"contractCustomerId":"contract.customerId","contractContractNumber":"contract.contractNumber","contractId":"contract.id","contractStatusId":"contract.statusId","contractSlaId":"contract.slaId","contractCalendarId":"contract.calendarId"},"inputs":{"workOrderCustomerId":"@pageContext.workOrderCustomerId"}}},{"name":"openPdfUrl","type":"script","actionDef":"function(pageContext){window.open(pageContext.pdfUrlData[0].data[0].pdfUrl);}"},{"name":"setSubAction","type":"script","actionDef":"function(pageContext) { if (pageContext.workOrderAction == 'edit' || pageContext.workOrderAction == 'add' || pageContext.workOrderAction == 'view') { pageContext.subAction = 'upsertWorkOrder'; } else if (pageContext.workOrderAction == 'delete') { pageContext.subAction = 'deleteWorkOrder' } if (pageContext.gla == '' || typeof pageContext.gla == 'undefined') { pageContext.gla = '-'; } if (pageContext.historical == '' || typeof pageContext.historical == 'undefined') { pageContext.historical = '-'; } if (pageContext.rural == '' || typeof pageContext.rural == 'undefined') { pageContext.rural = '-'; } if (pageContext.complex == '' || typeof pageContext.complex == 'undefined') { pageContext.complex = '-'; } }"},{"name":"subActionForWorkOrderEdit","type":"script","actionDef":"function(pageContext){pageContext.subAction='editWorkOrder';}"},{"name":"setActionForButtonHidden","type":"script","actionDef":"function(pageContext){pageContext.workOrderAction='edit';pageContext.workOrderStatusId='workOrderOpen';pageContext.statusNameColor ='#a5a5a5';pageContext.statusName ='Open';}"},{"name":"setWorkOrderStatus","type":"script","actionDef":"function(pageContext){ if (pageContext.workOrderAction == 'add') {pageContext.workOrderStatusId = 'Open';}else if(pageContext.workOrderAction == 'edit'){pageContext.workOrderStatusId = pageContext.workOrderStatusId;}}"},{"name":"setActionForWorkOrderDelete","type":"script","actionDef":"function(pageContext){pageContext.subAction='deleteWorkOrder';}"},{"subTitle":"@lang.['aysywtctwoatwtwwbac','Are you sure you want to cancel this Work Order? Note that all tasks will be automatically cancelled.']","name":"cancelWorkOrder","options":[{"buttonType":"secondary","name":"no","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.closeModal","@actions.openCancelWorkOrderSidepanel"],"type":"button","title":"@lang.['yp','Yes, Proceed']"}],"type":"openModal","title":"@lang.['cwo','Cancel Work Order']"},{"subTitle":"@lang.['twocbcaoomtitwoaciass','The work order cannot be cancelled, as one or more tasks in the work order are currently in Auto Scheduling status.']","name":"cannotCancelWorkOrder","options":[{"buttonType":"primary","name":"ok","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['o1','Ok']"}],"type":"openModal","title":"@lang.['cwo','Cancel Work Order']"},{"subTitle":"@lang.['aysywtdtwoatathwbadaw','Are you sure you want to delete this work order? All tasks and their history will be automatically deleted.']","name":"openWorkOrderCancelDeleteModal","options":[{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.fireProcessEvent","@actions.closeModal","@actions.clearPageContext","@actions.closePanel","@actions.refreshDataGrid"],"type":"button","title":"@lang.['d1','Delete']"}],"type":"openModal","title":"@lang.['dwo','Delete Work Order ']"},{"name":"openTemplateSidepanel","type":"openPanel","pageId":"4VMGQK7VSJ"},{"name":"openCancelWorkOrderSidepanel","type":"openPanel","pageId":"H7K0H2A5LK"},{"name":"closeModal","type":"closeModal"},{"name":"openCloseOutSidepanel","type":"openPanel","pageId":"acWorkOrderCompletedCloseoutNSP"},{"name":"getWorkorderTemplateData","outputVarMap":{"data":"@pageContext.templateData"},"type":"query","actionDef":{"filter":"{$workOrderTemplateV2.id} = {@workOrderTemplateId} ","models":["workOrderTemplateV2","workOrderType"],"columns":{"workOrderTypeId":"workOrderType.id","workOrderTemplateWorkOrderTypeId":"workOrderTemplateV2.workOrderTypeId","workOrderTypeName":"workOrderType.name","workOrderTemplatePriorityPriority":"workOrderTemplateV2.priorityPriority"},"inputs":{"workOrderTemplateId":"@pageContext.workOrderTemplateId"},"links":{"workOrderTemplateV2":"workOrderType"}}},{"name":"setSubActionDeleteTaskDependency","type":"script","actionDef":"function(pageContext){pageContext.subAction='deleteTaskDependency';}"},{"name":"setAnowDetails","type":"script","actionDef":"function (pageContext) {if(pageContext.workOrderAction == 'edit') {var obj1 = { 'value': pageContext.lenderId, 'label': pageContext.lenderName} ; pageContext.acLenderId = []; pageContext.acLenderId.push(obj1); var obj2 = { 'value': pageContext.primaryAppraiserId, 'label': pageContext.wfData[0].wfName} ; pageContext.primaryAppraiser = []; pageContext.primaryAppraiser.push(obj2);} }"},{"name":"getTimeZone","type":"script","actionDef":"function(pageContext) { pageContext.timezoneOffset = (typeof pageContext.workOrderRequestedDate !== 'undefined' && pageContext.workOrderRequestedDate !== '') ? new Date(pageContext.workOrderRequestedDate).getTimezoneOffset() : new Date().getTimezoneOffset(); pageContext.workOrderPriorityPriority = '20'; }"},{"name":"clearCompsData","type":"script","actionDef":"function (pageContext) { pageContext.compAddress = '';}"},{"endPoint":"event/start","name":"fireProcessEventToDeleteTaskDependency","outputVarMap":{"data":"@pageContext.data"},"type":"api","actionDef":{"data":[{"eventId":"workOrderTaskDependencyProcessEvent","contextVar":{"subAction":"@pageContext.subAction","taskDependency":[{"taskDependencyRecver":"@pageContext.taskDependencyRecver","taskDependencyId":"@pageContext.taskDependencyId"}]}}]}},{"name":"enableRecordGrid","type":"script","actionDef":"function(pageContext){pageContext.enable=true;}"},{"name":"setWorkOrderTemplateData","type":"script","actionDef":"function(pageContext) { if (typeof pageContext.templateData != 'undefined' && pageContext.templateData.length > 0) { pageContext.workOrderPriorityPriority = pageContext.templateData[0].workOrderTemplatePriorityPriority; pageContext.workOrderWorkOrderTypeId = pageContext.templateData[0].workOrderTemplateWorkOrderTypeId; if(pageContext.workOrderWorkOrderTypeId == '9BDLOL15YC'){ pageContext.gla = 'GLA1'; } if(pageContext.workOrderWorkOrderTypeId == '45FMOL12AU'){ pageContext.gla = 'GLA2'; } if(pageContext.workOrderWorkOrderTypeId == '1Z7XOL1SPP'){ pageContext.gla = 'GLA3'; } if(pageContext.workOrderWorkOrderTypeId == 'OZUXOL1GSF'){ pageContext.gla = 'GLA4'; } if(pageContext.workOrderWorkOrderTypeId == 'Q4LYOL19IV'){ pageContext.gla = 'GLA5'; } } }"},{"name":"clearWorkOrderTemplateData","type":"script","actionDef":"function(pageContext){if(typeof pageContext.templateId === 'undefined' || pageContext.templateId.length == 0 || pageContext.templateId[0] === null ){pageContext.workOrderPriorityPriority = ''; pageContext.workOrderWorkOrderTypeId = '';}}"},{"name":"isImported","type":"script","actionDef":"function(pageContext) { pageContext.isManual = pageContext.queryData[0].outputVar.workOrderList[0].workOrderIsImported; if (pageContext.isManual == false) { pageContext.IsImported = 'Manual'; } else { pageContext.IsImported = 'Import'; } }"},{"falseStep":["@actions.clearCustomerData"],"trueStep":["@actions.processCustomerData","@actions.fetchContracts","@actions.processContractData","@actions.fetchAllCalendar","@actions.clearSlaAndContract","@actions.fetchCalendar","@actions.setCalendarId","@actions.getSlaTimeAndDeadline","@actions.setSlaResponseTimeAndDeadline"],"name":"decisionActionForCustomerData","type":"decision","actionDef":"function(pageContext){if(typeof pageContext.customerId !=='undefined' && pageContext.customerId !=='' && pageContext.customerId[0] !== null) {return true;} return false;}"},{"name":"clearCustomerData","type":"script","actionDef":"function(pageContext){pageContext.workOrderCalendarId='';pageContext.workOrderCustomerId='';}"},{"endPoint":"model/update","name":"woModelUpdate","outputVarMap":{"data":"@pageContext.woModelUpdate"},"type":"api","actionDef":{"data":[{"modelName":"workOrder","statusId":"completedInANow","recver":"@pageContext.workOrderRecver","id":"@pageContext.workOrderId"}],"columns":["statusId"]}},{"subTitle":"Your work order will be closed and the final notification will be sent to the property contact. Do you want to continue?","name":"submitCompletedAnow","options":[{"buttonType":"primary","name":"yes","actionOnClick":["@actions.acCompletedANowNotificationWF","@actions.decisionForBanner"],"type":"button","title":"@lang.['YesContinue','Yes, Continue']"},{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal1","type":"button","title":"@lang.['Cancel','Cancel']"}],"type":"openModal","title":"Confirm Submit"},{"name":"closeModal1","type":"closeModal"},{"name":"fetchCustomerDetails","outputVarMap":{"data":"@pageContext.customerDetails"},"type":"query","continueOnError":true,"actionDef":{"filter":"{$id}={@id}","models":["customer"],"columns":{"phoneNumber":"customer.contactPhone","propertyContactPerson":"customer.contactPerson","siteAddress":"customer.billingAddress","id":"customer.id"},"inputs":{"id":"@pageContext.workOrderCustomerId"}}},{"name":"setCustomerDetails","type":"script","continueOnError":true,"actionDef":"function(pageContext) { pageContext.propertyContactPerson = pageContext.customerDetails[0].propertyContactPerson; pageContext.siteAddress = pageContext.customerDetails[0].siteAddress; pageContext.phoneNumber = pageContext.customerDetails[0].phoneNumber; }"},{"endPoint":"process/start","alertMessage":true,"name":"acCompletedANowNotificationWF","outputVarMap":{"data":"@pageContext.acCompletedANowNotificationWFOut"},"type":"api","actionDef":{"data":[{"processId":"acCompletedANowNotificationWF","contextVar":{"workOrderId":"@pageContext.workOrderId","techType":"N1ZR2Q17ZF"}}]}},{"endPoint":"process/start","alertMessage":true,"name":"acCompletedANowWF","outputVarMap":{"data":"@pageContext.acCompletedANowWFOut"},"type":"api","actionDef":{"data":[{"processId":"acWorkOrderTaskCompletedInAnowWF","contextVar":{"workOrderTaskData":"@pageContext.workOrderTaskData","techType":"N1ZR2Q17ZF"}}]}},{"falseStep":["@actions.woModelUpdate","@actions.acCompletedANowWF","@actions.closeModal1","@actions.closePanel","@actions.refreshDataGrid"],"trueStep":["@actions.closeModal1"],"name":"decisionForBanner","type":"decision","actionDef":"function(pageContext) { if (pageContext.acCompletedANowNotificationWFOut[0].outputVar.showBanner == 'true') { pageContext.showBanner = 'true'; return true; } else { return false; } }"}]}