{"pageContext":{},"actionOnLoad":["@actions.getAllWorkOrderTypeData","@actions.getAllPriorityData","@actions.initialData"],"localPageContext":true,"jslib":{"isTemplateHidden":"function(pageContext){ if(pageContext.workOrderAction=='edit'){return true;}else{return false;}}","isSaveTemplateDisabled":"function(pageContext){ if((typeof pageContext.workOrderTemplateName == 'undefined' || pageContext.initialWorkOrderTemplateName == pageContext.workOrderTemplateName || pageContext.workOrderTemplateName == '') && (pageContext.initialWorkOrderTemplateDescription == pageContext.workOrderTemplateDescription) && (typeof pageContext.workOrderTemplateWorkOrderTypeId == 'undefined' || pageContext.initialWorkOrderTemplateWorkOrderTypeId == pageContext.workOrderTemplateWorkOrderTypeId || pageContext.workOrderTemplateWorkOrderTypeId == '') && (typeof pageContext.workOrderTemplatePriorityPriority == 'undefined' || pageContext.initialWorkOrderTemplatePriorityPriority == pageContext.workOrderTemplatePriorityPriority || pageContext.workOrderTemplatePriorityPriority == '') ) { return true; } else { return false; } }","isSaveDisabled":"function(pageContext) {return ( (typeof pageContext.workOrderTemplateName === 'undefined') || (pageContext.workOrderTemplateName === ''))}","isWOSaveHidden":"function(pageContext){if(pageContext.workOrderAction!='edit'){return true;}else{return false;}}"},"header":{"leftData":{"children":[{"hidden":"@jslib.isWOSaveHidden","icon":"@iconlib.NavigationArrowBackGrey","actionOnClick":["@actions.openPreviousPanel"],"id":"back","type":"buttonIcon"}]},"children":[{"activeIcon":"@iconlib.ActionsBinPurple","hidden":"@jslib.isTemplateHidden","name":"@lang.['dt4','Delete Template']","icon":"@iconlib.ActionsBinGrey","tooltip":"@lang.['d1','Delete']","actionOnClick":["@actions.openModal"],"type":"buttonIcon"},{"buttonType":"primary","hidden":"@jslib.isWOSaveHidden","actionOnClick":["@actions.setTemplateSubActionUpsert","@actions.fireProcessEvent","@actions.setBannerTypeWorkOrderTemplate","@actions.openPreviousPanel"],"disabled":"@jslib.isSaveDisabled","id":"submitFromWorkOrderPage","type":"button","title":"@lang.['s12','Save']"},{"buttonType":"primary","hidden":"@jslib.isTemplateHidden","actionOnClick":["@actions.setTemplateSubActionUpsert","@actions.setWorkTemplateData","@actions.fireProcessEvent","@actions.setBannerTypeWorkOrderTemplate","@actions.closePanel","@actions.refreshDataGrid"],"disabled":"@jslib.isSaveTemplateDisabled","id":"submit","type":"button","title":"@lang.['s12','Save']"},{"icon":"@iconlib.NavigationCloseGrey","actionOnClick":["@actions.closePanel","@actions.clearPageContext"],"id":"close","type":"buttonIcon"}],"title":"@lang.['ewot1','Edit Work Order Template']"},"body":{"children":[{"children":[{"children":[{"children":[{"isRequired":true,"inputType":"text","id":"workOrderTemplateName","label":"@lang.['tn','Template Name']","placeholder":"@lang.['etn','Enter template name']","type":"input","value":"@pageContext.workOrderTemplateName"},{"id":"workOrderTemplateDescription","label":"@lang.['d7','Description (Optional)']","type":"textarea","value":"@pageContext.workOrderTemplateDescription","placeHolder":"@lang.['ed1','Enter description']"}],"label":"@lang.['gi','General Information']","id":"templateInfo","type":"section"},{"hidden":"@jslib.isTemplateHidden","children":[{"isRequired":true,"options":"@pageContext.workOrderTypeList","optTitleKey":"workOrderTypeName","optValueKey":"workOrderTypeId","id":"workOrderTypeList","title":"@lang.['wot1','Work Order Type']","type":"select","value":"@pageContext.workOrderTemplateWorkOrderTypeId","placeHolder":"@lang.['swot','Select work order type']"},{"isRequired":true,"actionOnChange":[],"options":"@pageContext.priorityList","optTitleKey":"ZPriorityPriorityName","optValueKey":"ZPriorityPriorityId","id":"priorityList","title":"@lang.['priority','Priority']","type":"select","value":"@pageContext.workOrderTemplatePriorityPriority","placeHolder":"@lang.['sp','Select priority']"}],"label":"@lang.['woi1','Work Order Information']","id":"generalInformationSection","type":"section"}],"label":"@lang.['gi','General Information']","type":"tab"},{"hidden":"@jslib.isTemplateHidden","children":[{"children":[{"label":"@lang.['t7','Tasks']","id":"tasks","type":"dataGrid","jsonDef":{"isScrollAble":true,"searchAllowed":true,"tableWidth":"30rem","searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsEditPurple","name":"@lang.['et1','Edit Task']","icon":"@iconlib.ActionsEditGrey","tooltip":"@lang.['e1','Edit']","actionOnClick":["@actions.openWorkOrderTemplateTaskNSP"],"type":"buttonIcon"}]},"emptyScreen":{"image":"@iconlib.ActionsSearchGrey","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSync":true,"tableHeader":[{"name":"@lang.['t12','Task']","options":{"flex":1,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"workOrderTemplateTaskName"},{"name":"@lang.['taskType','Task Type']","options":{"flex":1,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"taskTypeName"},{"name":"@lang.['d28','Duration (hrs)']","options":{"flex":1,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"workOrderTemplateTaskEstimatedDuration"}],"dataToBeSent":{"filter":"{$workOrderTemplateTaskWorkOrderTemplateId} = {@workOrderTemplateId}","models":["workOrderTemplateTask","taskType"],"columns":{"workOrderTemplateTaskName":"workOrderTemplateTask.name","workOrderTemplateTaskWorkOrderTemplateId":"workOrderTemplateTask.workOrderTemplateId","workOrderTemplateTaskEnableServices":"workOrderTemplateTask.enableServices","workOrderTemplateTaskEstimatedDuration":"ROUND({$workOrderTemplateTask.estimatedDuration}/60,2)","workOrderTemplateTaskModifiedDate":"workOrderTemplateTask.modifiedDate","workOrderTemplateTaskTaskTypeId":"workOrderTemplateTask.taskTypeId","workOrderTemplateTaskServices":"workOrderTemplateTask.services","taskTypeName":"taskType.name","workOrderTemplateTaskId":"workOrderTemplateTask.id"},"inputs":{"workOrderTemplateId":"@pageContext.workOrderTemplateId"},"orderBy":"workOrderTemplateTaskName ASC"},"dataSourceId":"query/read","jslib":{},"rowTextLength":25,"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['t7','Tasks']"},"isSelectable":false,"updateAllowed":true,"actions":[{"name":"openWorkOrderTemplateTaskNSP","type":"openPanel","pageId":"1RX2DWBBQQ"}],"searchKeys":["taskTypeName"]}}],"id":"dataGridForTasks","type":"section","transparent":true},{"children":[{"label":"@lang.['d27','Dependencies']","id":"tasksDependency","type":"dataGrid","jsonDef":{"isScrollAble":true,"searchAllowed":false,"tableWidth":"60rem","searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsVisiblePurple","name":"@lang.['v1','View']","icon":"@iconlib.ActionsVisibleGrey","tooltip":"@lang.['v1','View']","actionOnClick":["@actions.openWorkOrderTemplateTaskDependencyNestedSidePanel"],"type":"buttonIcon"}]},"emptyScreen":{"image":"@iconlib.ActionsSearchGrey","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSync":true,"tableHeader":[{"name":"@lang.['t7','Tasks']","options":{"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"templateTaskDependencyPrecedentTask","primaryKey":false},{"name":"@lang.['c26','Condition']","options":{"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"templateTaskDependencyEnforceAllDependency"},{"name":"@lang.['s','Status']","options":{"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"templateTaskDependencyPrecedentStatusId"},{"name":"@lang.['dt5','Dependent Tasks']","options":{"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"templateTaskDependencyDependentTask","primaryKey":false},{"name":"@lang.['ds3','Dependent Status']","options":{"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"templateTaskDependencyDependentStatusId"}],"dataToBeSent":{"apiResponseParams":["count"],"processId":"workOrderTemplateTaskDependencyFetchDataWF","apiResponseFormat":true,"contextVar":{"workOrderTemplateId":"@pageContext.workOrderTemplateId"},"apiResponseObject":"templateTaskDependencyData"},"dataSourceId":"process/start","sourceType":"api","jslib":{},"rowTextLength":25,"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['td3','Task Dependencies']"},"isSelectable":false,"updateAllowed":true,"actions":[{"name":"openWorkOrderTemplateTaskDependencyNestedSidePanel","type":"openPanel","pageId":"IHYQSJE4LH"}],"searchKeys":[]}}],"id":"dataGridForTasksDependency","type":"section","transparent":true}],"label":"@lang.['t7','Tasks']","type":"tab"},{"children":[{"children":[{"id":"partsAndMaterials","type":"dataGrid","jsonDef":{"isScrollAble":false,"tableWidth":"70rem","searchAllowed":true,"rowActions":{},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['mn','Model Name']","options":{"flex":2,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"modelName"},{"name":"@lang.['mn1','Model Number']","options":{"flex":2,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"modelNumber"},{"name":"@lang.['t5','Type']","options":{"flex":1,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"catalogTypeName"},{"name":"@lang.['lp','List Price']","options":{"flex":1.5,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"listPrice"},{"name":"@lang.['eq1','Estimated Quantity']","options":{"flex":2.5,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"estimatedQty"},{"name":"@lang.['ec5','Estimated Cost']","options":{"flex":2,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"estimatedCost"},{"name":"@lang.['ep2','Estimated Price']","options":{"flex":2,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"estimatedPrice"},{"name":"@lang.['t12','Task']","options":{"flex":1,"showLabel":true},"key":"templateTaskName"}],"dataToBeSent":{"apiResponseParams":["count"],"processId":"fetchWorkOrderTemplateInventoryDataWF","apiResponseFormat":true,"contextVar":{"workOrderTemplateId":"@pageContext.workOrderTemplateId"},"apiResponseObject":"workOrderTemplateInventoryDataset"},"dataSourceId":"process/start","sourceType":"api","jslib":{},"rowTextLength":50,"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['pam','Parts and Materials']","children":[]},"isSelectable":false,"actions":[],"searchKeys":["modelName","modelNumber","catalogTypeName"]}}],"id":"partsAndMaterials","label":"@lang.['pam','Parts and Materials']","type":"section","transparent":true}],"label":"@lang.['pr1','Part Requirements']","type":"tab"}],"id":"TasksTab","type":"tab"}]},"actions":[{"endPoint":"event/start","name":"fireProcessEvent","outputVarMap":{"data":"@pageContext.responseData"},"type":"api","actionDef":{"data":[{"eventId":"GB6MAV7BA1","contextVar":{"workOrderTemplate":[{"priorityPriority":"@pageContext.workOrderPriorityPriority","workOrderTypeId":"@pageContext.workOrderWorkOrderTypeId","recver":"@pageContext.workOrderTemplateRecver","name":"@pageContext.workOrderTemplateName","description":"@pageContext.workOrderTemplateDescription","workOrderId":"@pageContext.workOrderId","id":"@pageContext.workOrderTemplateId","priorityTargetModel":"@pageContext.workOrderPriorityTargetModel"}],"templateSubAction":"@pageContext.templateSubAction"}}]}},{"name":"setBannerTypeWorkOrderTemplate","type":"script","actionDef":"function(pageContext){pageContext.bannerType='workOrderTemplate';}"},{"name":"setWorkTemplateData","type":"script","actionDef":"function(pageContext){pageContext.workOrderWorkOrderTypeId=pageContext.workOrderTemplateWorkOrderTypeId;pageContext.workOrderPriorityPriority=pageContext.workOrderTemplatePriorityPriority;}"},{"name":"setTemplateSubAction","type":"script","actionDef":"function(pageContext){pageContext.templateSubAction='deleteTemplate';}"},{"name":"setTemplateSubActionUpsert","type":"script","actionDef":"function(pageContext){pageContext.templateSubAction='upsertTemplate';}"},{"name":"getAllWorkOrderTypeData","outputVarMap":{"data":"@pageContext.workOrderTypeList"},"type":"query","actionDef":{"filter":"{$workOrderTypeStatusId} = 'workOrderTypeActive'","models":["workOrderType"],"columns":{"workOrderTypeStatusId":"workOrderType.statusId","workOrderTypeId":"workOrderType.id","workOrderTypeName":"workOrderType.name"}}},{"name":"getAllPriorityData","outputVarMap":{"data":"@pageContext.priorityList"},"type":"query","actionDef":{"filter":"{$ZPriorityTargetModel} = 'workOrder'","models":["ZPriority"],"columns":{"ZPriorityTargetModel":"ZPriority.targetModel","ZPriorityPriorityId":"ZPriority.priority","ZPriorityPriorityName":"ZPriority.name"}}},{"name":"initialData","type":"script","actionDef":"function(pageContext){ pageContext.initialWorkOrderTemplateName = pageContext.workOrderTemplateName; pageContext.initialWorkOrderTemplateDescription = pageContext.workOrderTemplateDescription; pageContext.initialWorkOrderTemplateWorkOrderTypeId = pageContext.workOrderTemplateWorkOrderTypeId; pageContext.initialWorkOrderTemplatePriorityPriority = pageContext.workOrderTemplatePriorityPriority; }"},{"name":"clearPageContext","type":"clearPageContext"},{"name":"closePanel","type":"closePanel"},{"name":"openPreviousPanel","type":"backPanel"},{"name":"refreshDataGrid","type":"refreshDataGrid"},{"subTitle":"@lang.['aysywtdtttcbu1','Are you sure you want to delete the Template? This cannot be undone.']","name":"openModal","options":[{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.setTemplateSubAction","@actions.fireProcessEvent","@actions.closeModal","@actions.closePanel","@actions.refreshDataGrid"],"type":"button","title":"@lang.['d1','Delete']"}],"type":"openModal","title":"@lang.['dt4','Delete Template']"},{"name":"closeModal","type":"closeModal"}]}