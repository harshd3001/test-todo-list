{"workflowContext":{"taskTypeId":"L3N2KDC1IA","catalogTypeId":"projectActivity","status":"workOrderTaskCompleted"},"processTimeTrackData":{"connectors":[{"exitPortType":"NextStep","nodeId":"exportAllData"}],"contextChangePermitted":true,"name":"processTimeTrackData","description":"Processing data","processRule":"{ contextVar.resultArray = []; var obj = {}; for (var i = 0; i < contextVar.timeTrackingData.length; i++) { obj.activityName = contextVar.timeTrackingData[i].activityName; obj.effort = contextVar.timeTrackingData[i].effort; obj.technicianName = contextVar.timeTrackingData[i].technicianName; obj.completedDate = contextVar.timeTrackingData[i].completedDate; obj.endDate = contextVar.timeTrackingData[i].endDate; obj.startDate = contextVar.timeTrackingData[i].startDate; obj.projectName = contextVar.timeTrackingData[i].projectName; obj.id = contextVar.timeTrackingData[i].id; obj.activityResultCreatedDate = contextVar.timeTrackingData[i].activityResultCreatedDate; obj.activityDescription = contextVar.timeTrackingData[i].activityDescription; obj.id = contextVar.timeTrackingData[i].id; contextVar.resultArray.push(obj); var obj = {}; } for (var k = 0; k < contextVar.resultArray.length; k++) { for (var l = 0; l < contextVar.catalogData.length; l++) { if (contextVar.resultArray[k].projectName == '') { contextVar.resultArray[k].unitPrice = ''; } else if (contextVar.resultArray[k].projectName === contextVar.catalogData[l].name) { contextVar.resultArray[k].unitPrice = contextVar.catalogData[l].unitPrice; } } } contextVar.count = contextVar.resultArray.length; }","id":"processTimeTrackDataId","nodeType":"PROCESS"},"queryTimeTracking":{"filter":"filter","models":["timeTracking"],"connectors":[{"exitPortType":"NextStep","nodeId":"processTimeTrackData"}],"columns":{"unitPrice":"if({$timeTracking.unitPrice} = 1, 'Active', 'Inactive')","endDate":"timeTracking.endDate","technicianName":"timeTracking.technicianName","activityName":"timeTracking.activityName","effort":"timeTracking.effort","completedDate":"timeTracking.completedDate","recver":"timeTracking.recver","activityResultCreatedDate":"timeTracking.activityResultCreatedDate","modifiedDate":"timeTracking.modifiedDate","activityDescription":"timeTracking.activityDescription","id":"timeTracking.id","activityType":"timeTracking.activityType","projectName":"timeTracking.projectName","startDate":"timeTracking.startDate","taskId":"timeTracking.taskId"},"name":"queryTimeTracking","description":"queryTimeTracking","orderBy":"modifiedDate DESC","inputVarMap":{"filter":"filter"},"id":"queryTimeTrackingId","outputVarMap":{"data":"timeTrackingData"},"nodeType":"QUERY","getCount":true},"exportAllData":{"connectors":[{"exitPortType":"NextStep","nodeId":"generateCSV"}],"contextChangePermitted":true,"name":"exportAllData","description":"exportAllData","processRule":"{ contextVar.fileName = 'Detalles_de_registro_del_tiempo'; contextVar.timeTrackData = {}; contextVar.timeTrackCSVData = []; contextVar.headers = ['Nombre del Consultor', 'Nombre del Proyecto', 'Tipo de Actividad', 'Descripción de la actividad', 'Fecha Inicial', 'Fecha Final', 'Esfuerzo', 'Estado del proyecto', 'Fecha de creación del registro']; if (typeof contextVar.resultArray != 'undefined' && contextVar.resultArray != '') { var len = contextVar.resultArray.length; for (var i = 0; i < len; i++) { contextVar.timeTrackData['Nombre del Consultor'] = contextVar.resultArray[i].technicianName; contextVar.timeTrackData['Nombre del Proyecto'] = contextVar.resultArray[i].projectName; contextVar.timeTrackData['Tipo de Actividad'] = contextVar.resultArray[i].activityName; contextVar.timeTrackData['Descripción de la actividad'] = contextVar.resultArray[i].activityDescription; contextVar.timeTrackData['Fecha Inicial'] = contextVar.resultArray[i].startDate; contextVar.timeTrackData['Fecha Final'] = contextVar.resultArray[i].endDate; contextVar.timeTrackData['Esfuerzo'] = contextVar.resultArray[i].effort; contextVar.timeTrackData['Estado del proyecto'] = contextVar.resultArray[i].unitPrice; contextVar.timeTrackData['Fecha de creación del registro'] = contextVar.resultArray[i].activityResultCreatedDate; contextVar.timeTrackCSVData.push(contextVar.timeTrackData); contextVar.timeTrackData = {}; } } }","nodeType":"PROCESS"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"queryCatalog"}],"name":"start","description":"Start","id":"start","nodeType":"START"},"queryCatalog":{"filter":"{$catalogTypeId} = 'consultingProject'","models":["catalog"],"connectors":[{"exitPortType":"NextStep","nodeId":"queryTimeTracking"}],"columns":{"unitPrice":"if({$catalog.unitPrice} = 1, 'Active', 'Inactive')","name":"catalog.name","catalogTypeId":"catalog.catalogTypeId","id":"catalog.id"},"name":"queryCatalog","description":"Fetch catalog data","inputVarMap":{},"id":"queryCatalogId","outputVarMap":{"data":"catalogData"},"nodeType":"QUERY","getCount":true},"end":{"name":"end","description":"End","inputVarMap":{"csvUrl":"csvUrl"},"outputVarMap":{"csvUrl":"csvUrl"},"id":"end","nodeType":"END"},"generateCSV":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"fileName":"fileName","name":"generateCSV","publicFile":true,"description":"generateCSV","inputVarMap":{"headers":"headers","fileName":"fileName","timeTrackCSVData":"data"},"outputVarMap":{"data":"csvUrl"},"nodeType":"CSV"},"workflowNodes":["start","queryCatalog","queryTimeTracking","processTimeTrackData","exportAllData","generateCSV","end"]}