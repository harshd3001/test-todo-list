{"getMoreFilteredTechnicians":{"models":["User","calendar","workforce","skill","workforceSkill","skillLevel"],"connectors":[{"exitPortType":"NextStep","nodeId":"appendTechs"}],"columns":{"workforceType":"workforce.workforceType","workforceUserId":"workforce.userId","userName":"User.name","workforceCalendarId":"workforce.calendarId"},"orderBy":"userName ASC","distinct":true,"inputVarMap":{"customBatchSize":"batchSize","skillFilter":"filter","calendarId":"calendarId","skillLevelIds":"skillLevelIds","techsBatchNumber":"batchNumber"},"nodeType":"QUERY","filter":"filter","name":"getMoreFilteredTechnicians","links":{"calendar":"workforce","workforceSkill":"skill","User":"workforce","skill":"skillLevel","workforce":"workforceSkill"},"id":"getMoreFilteredTechnicians","outputVarMap":{"data":"appendSkillFilteredTechs"},"getCount":true},"appendTechs":{"connectors":[{"exitPortType":"NextStep","nodeId":"areMoreTechsPresent"}],"contextChangePermitted":true,"name":"appendTechs","description":"appendTechs","processRule":"if (Array.isArray(contextVar.appendSkillFilteredTechs)) { contextVar.techniciansData = contextVar.techniciansData.concat(contextVar.appendSkillFilteredTechs) } contextVar.techsBatchNumber = contextVar.techsBatchNumber + 1;","nodeType":"PROCESS"},"workflowContext":{"customBatchSize":1000,"noOfBatches":0},"findNumberOfBatches":{"connectors":[{"exitPortType":"NextStep","nodeId":"areMoreTechsPresent"}],"contextChangePermitted":true,"name":"findNumberOfBatches","description":"findNumberOfBatches","processRule":"{contextVar.noOfBatches = Math.ceil(contextVar.skillTechsCount / contextVar.customBatchSize);contextVar.techsBatchNumber = contextVar.techsBatchNumber + 1;}","id":"findNumberOfBatches","nodeType":"PROCESS"},"areMoreTechsPresent":{"connectors":[{"exitPortType":"TrueStep","nodeId":"getMoreFilteredTechnicians"},{"exitPortType":"FalseStep","nodeId":"addFilteredTechsToArray"}],"name":"areMoreTechsPresent","description":"areMoreTechsPresent","processRule":"contextVar.noOfBatches >= 2 && contextVar.noOfBatches >= contextVar.techsBatchNumber","nodeType":"DECISION"},"addFilteredTechsToArray":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"contextChangePermitted":true,"name":"addFilteredTechsToArray","description":"addFilteredTechsToArray","processRule":"contextVar.skillFilteredTechs = [];if(typeof contextVar.techniciansData!=='undefined' && contextVar.techniciansData.length>0){ contextVar.techniciansData.forEach(function(element){ contextVar.skillFilteredTechs.push(element.workforceUserId); });}","nodeType":"PROCESS"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"isSkillFilterApplied"}],"name":"start","description":"Start","nodeType":"START"},"isSkillFilterApplied":{"connectors":[{"exitPortType":"TrueStep","nodeId":"getFilteredTechnicians"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"isSkillFilterApplied","description":"isSkillFilterApplied","processRule":"typeof contextVar.skillLevelIds !== 'undefined' && contextVar.skillLevelIds.length > 0","id":"isSkillFilterApplied","nodeType":"DECISION"},"end":{"name":"end","description":"End","inputVarMap":{"skillFilteredTechs":"skillFilteredTechs"},"outputVarMap":{"skillFilteredTechs":"skillFilteredTechs"},"nodeType":"END"},"getFilteredTechnicians":{"models":["User","calendar","workforce","skill","workforceSkill","skillLevel"],"connectors":[{"exitPortType":"NextStep","nodeId":"findNumberOfBatches"}],"columns":{"workforceType":"workforce.workforceType","workforceUserId":"workforce.userId","userName":"User.name","workforceCalendarId":"workforce.calendarId"},"orderBy":"userName ASC","distinct":true,"inputVarMap":{"customBatchSize":"batchSize","skillFilter":"filter","calendarId":"calendarId","skillLevelIds":"skillLevelIds"},"nodeType":"QUERY","filter":"filter","name":"getFilteredTechnicians","links":{"calendar":"workforce","workforceSkill":"skill","User":"workforce","skill":"skillLevel","workforce":"workforceSkill"},"id":"getFilteredTechnicians","outputVarMap":{"data":"techniciansData","count":"skillTechsCount","batchNumber":"techsBatchNumber"},"getCount":true},"workflowNodes":["start","isSkillFilterApplied","getFilteredTechnicians","findNumberOfBatches","areMoreTechsPresent","getMoreFilteredTechnicians","appendTechs","addFilteredTechsToArray","end"]}