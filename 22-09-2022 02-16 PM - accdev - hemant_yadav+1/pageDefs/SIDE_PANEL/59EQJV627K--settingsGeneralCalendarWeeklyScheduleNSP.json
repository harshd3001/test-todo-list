{"pageContext":{},"actionOnLoad":["@actions.initialData"],"localPageContext":true,"jslib":{"isTimeDisabled":"function(pageContext){ return (pageContext.scheduleType == '24hours' || pageContext.scheduleType == 'closed')}","isAddWeeklyDisabled":"function(pageContext){return (pageContext.initialscheduleType === pageContext.scheduleType && pageContext.initialWeeklyScheduleSchedule1StartTime === pageContext.weeklyScheduleSchedule1StartTime && pageContext.initialWeeklyScheduleSchedule1EndTime === pageContext.weeklyScheduleSchedule1EndTime || (pageContext.scheduleType !=='closed' && ((pageContext.weeklyScheduleSchedule1StartTime) >= (pageContext.weeklyScheduleSchedule1EndTime))));}","isEndTimeNotValid":"function(pageContext){ if (pageContext.weeklyScheduleSchedule1StartTime < pageContext.weeklyScheduleSchedule1EndTime || pageContext.weeklyScheduleSchedule1StartTime ==='' || pageContext.weeklyScheduleSchedule1EndTime=== '') {return false;} else {return true;}}"},"header":{"leftData":{"children":[{"name":"back","icon":"@iconlib.NavigationArrowBackGrey","actionOnClick":["@actions.openPreviousPanel","@actions.refreshDataGrid"],"type":"buttonIcon"}]},"children":[{"buttonType":"primary","actionOnClick":["@actions.setScheduleAndSubActionUpsertWeeklySchedule","@actions.fireProcessEvent","@actions.openPreviousPanel","@actions.refreshDataGrid"],"disabled":"@jslib.isAddWeeklyDisabled","id":"submit","type":"button","title":"@lang.['s12','Save']"}],"title":"@lang.['ews','Edit Weekly Schedule']"},"body":{"children":[{"children":[{"actionOnChange":"@actions.assignScheduleValues","options":[{"name":"@lang.['c10','Closed']","id":"closed"},{"name":"@lang.['2h','24 Hours']","id":"24hours"},{"name":"@lang.['ch','Custom Hours']","id":"customHours"}],"id":"scheduleType","optTitleKey":"name","optValueKey":"id","type":"dropdown","title":"@lang.['st','Schedule Type']","value":"@pageContext.scheduleType","placeHolder":"@lang.['sast','Select a schedule type']"},{"errorText":"@lang.['otsbltct','Opening Time should be less than Closing Time']","isRequired":true,"validator":"@jslib.isEndTimeNotValid","enableTime":true,"disabled":"@jslib.isTimeDisabled","id":"openingTime","placeholder":"@lang.['st1','Select time']","title":"@lang.['ot1','Opening Time']","type":"absoluteTime","value":"@pageContext.weeklyScheduleSchedule1StartTime"},{"errorText":"@lang.['otsbltct','Opening Time should be less than Closing Time']","isRequired":true,"validator":"@jslib.isEndTimeNotValid","enableTime":true,"disabled":"@jslib.isTimeDisabled","id":"closingTime","placeholder":"@lang.['st1','Select time']","title":"@lang.['ct2','Closing Time']","type":"absoluteTime","value":"@pageContext.weeklyScheduleSchedule1EndTime"}],"label":"@lang.['es1','Edit Schedule']","id":"addNewBusinessHour","type":"section"}]},"actions":[{"name":"openPreviousPanel","type":"backPanel"},{"name":"setScheduleAndSubActionUpsertWeeklySchedule","type":"script","actionDef":"function(pageContext){function needToAppendMS(str) { if (str.includes('.')) { return str; } else { return str = str + '.000'; } } pageContext.subAction = 'upsertWeeklySchedule'; if (pageContext.weeklyScheduleIsOpen) { pageContext.weeklyScheduleSchedule = [{ 'start': needToAppendMS(pageContext.weeklyScheduleSchedule1StartTime), 'end': needToAppendMS(pageContext.weeklyScheduleSchedule1EndTime) }]; }}"},{"name":"assignScheduleValues","type":"script","actionDef":"function(pageContext){if (pageContext.scheduleType === 'closed') { pageContext.weeklyScheduleSchedule1EndTime = ''; pageContext.weeklyScheduleSchedule1StartTime = ''; pageContext.weeklyScheduleIsOpen = false; pageContext.weeklyScheduleIsAllDay = false; } else if (pageContext.scheduleType === '24hours') { pageContext.weeklyScheduleSchedule1EndTime = '23:59:59.000'; pageContext.weeklyScheduleSchedule1StartTime = '00:00:00.000'; pageContext.weeklyScheduleIsOpen = true; pageContext.weeklyScheduleIsAllDay = true; } else { (pageContext.initialWeeklyScheduleSchedule1StartTime === '' || typeof pageContext.initialWeeklyScheduleSchedule1StartTime === 'undefined') ? pageContext.weeklyScheduleSchedule1StartTime = '09:00:00.000' : pageContext.weeklyScheduleSchedule1StartTime = pageContext.initialWeeklyScheduleSchedule1StartTime; (pageContext.initialWeeklyScheduleSchedule1EndTime === '' || typeof pageContext.initialWeeklyScheduleSchedule1EndTime === 'undefined') ? pageContext.weeklyScheduleSchedule1EndTime = '17:00:00.000' : pageContext.weeklyScheduleSchedule1EndTime = pageContext.initialWeeklyScheduleSchedule1EndTime; pageContext.weeklyScheduleIsOpen = true; pageContext.weeklyScheduleIsAllDay = false; }}"},{"endPoint":"event/start","name":"fireProcessEvent","outputVarMap":{"data":"@pageContext.workFlowResult"},"type":"api","actionDef":{"data":[{"eventId":"settingsGeneralCalendarProcessEvent","contextVar":{"weeklySchedule":{"schedule":"@pageContext.weeklyScheduleSchedule","isAllDay":"@pageContext.weeklyScheduleIsAllDay","isOpen":"@pageContext.weeklyScheduleIsOpen","calendarId":"@pageContext.calendarId","recver":"@pageContext.weeklyScheduleRecver","displayOrder":"@pageContext.weeklyScheduleDisplayOrder"},"subAction":"@pageContext.subAction"}}]}},{"isAsync":true,"name":"initialData","type":"script","actionDef":"function(pageContext) {function needToAppendMS(str) { if (str.includes('.')) { return str; } else { return str = str + '.000'; } } if (typeof pageContext.weeklyScheduleSchedule1StartTime !== 'undefined' && pageContext.weeklyScheduleSchedule1StartTime !== '') { pageContext.initialWeeklyScheduleSchedule1StartTime = needToAppendMS(pageContext.weeklyScheduleSchedule1StartTime); } if (typeof pageContext.weeklyScheduleSchedule1EndTime !== 'undefined' && pageContext.weeklyScheduleSchedule1EndTime !== '') { pageContext.initialWeeklyScheduleSchedule1EndTime = needToAppendMS(pageContext.weeklyScheduleSchedule1EndTime); } if (!pageContext.weeklyScheduleIsOpen) { pageContext.scheduleType = 'closed'; pageContext.weeklyScheduleSchedule1StartTime = ''; pageContext.initialWeeklyScheduleSchedule1StartTime = ''; pageContext.weeklyScheduleSchedule1EndTime = '';pageContext.initialWeeklyScheduleSchedule1EndTime = ''; } else if (pageContext.weeklyScheduleIsOpen && !pageContext.weeklyScheduleIsAllDay) { pageContext.scheduleType = 'customHours'; } else { pageContext.scheduleType = '24hours'; }; pageContext.initialscheduleType = pageContext.scheduleType;}"},{"name":"refreshDataGrid","type":"refreshDataGrid"}]}