{"pageContext":{},"actionOnLoad":["@actions.getShiftTechnicianCount","@actions.initialData","@actions.getTimeZone","@actions.getWeeklyScheduleData","@actions.enableDataGridAndSetWeeklyScheduleData","@actions.refreshDataGrid"],"localPageContext":true,"jslib":{"cannotDeleteShift":"function(pageContext){return (pageContext.action !== 'edit' || (pageContext.action === 'edit' &&(typeof pageContext.shiftTechnicianCount === 'undefined' || pageContext.shiftTechnicianCount === '' ||pageContext.shiftTechnicianCount>0)));}","isSave&ContinueDisabled":"function(pageContext){ return (pageContext.calendarName === undefined || pageContext.calendarName === '')}","canDeleteShift":"function(pageContext){return (pageContext.action !== 'edit' || (pageContext.action === 'edit' &&(typeof pageContext.shiftTechnicianCount === 'undefined' || pageContext.shiftTechnicianCount === '' ||pageContext.shiftTechnicianCount===0)));}","dynamicHeaderText":"function(pageContext){ if(pageContext.action === 'add'){return '@lang.[\"ans3\",\"Add New Shift\"]'}else if(pageContext.action === 'edit'){return '@lang.[\"es7\",\"Edit Shift\"]'}}","isSaveDisabled":"function(pageContext){ return ((pageContext.calendarName === pageContext.initialCalendarName && pageContext.calendarDescription=== pageContext.initialCalendarDescription)||(pageContext.calendarName === undefined || pageContext.calendarName === ''))}","isActionEdit":"function(pageContext){return (pageContext.action==='add');}","isActionAdd":"function(pageContext){return (pageContext.action==='edit');}"},"header":{"children":[{"buttonType":"primary","hidden":"@jslib.isActionAdd","actionOnClick":["@actions.setSubActionInsertCalendar","@actions.getTimeZone","@actions.fireProcessEvent","@actions.setEditPageData","@actions.initialData","@actions.getShiftTechnicianCount","@actions.getWeeklyScheduleData","@actions.enableDataGridAndSetWeeklyScheduleData","@actions.refreshDataGrid"],"disabled":"@jslib.isSave&ContinueDisabled","id":"submit","type":"button","title":"@lang.['sc1','Save & Continue']"},{"hidden":"@jslib.cannotDeleteShift","icon":"@iconlib.ActionsBinGrey","actionOnClick":["@actions.openCanDeleteModal"],"id":"canDeleteCalendar","type":"buttonIcon"},{"hidden":"@jslib.canDeleteShift","icon":"@iconlib.ActionsBinGrey","actionOnClick":["@actions.openCannotDeleteModal"],"id":"cannotDeleteCalendar","type":"buttonIcon"},{"buttonType":"primary","hidden":"@jslib.isActionEdit","actionOnClick":["@actions.setSubActionUpdateCalendar","@actions.fireProcessEvent","@actions.refreshDataGrid","@actions.closePanel"],"disabled":"@jslib.isSaveDisabled","id":"save","type":"button","title":"@lang.['s12','Save']"},{"icon":"@iconlib.NavigationCloseGrey","actionOnClick":["@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"id":"close","type":"buttonIcon"}],"title":"@jslib.dynamicHeaderText"},"body":{"children":[{"children":[{"isRequired":true,"id":"enterName","label":"@lang.['sn4','Shift Name']","placeholder":"@lang.['esn3','Enter shift name']","type":"input","value":"@pageContext.calendarName"},{"id":"description","label":"@lang.['d7','Description (Optional)']","type":"textarea","value":"@pageContext.calendarDescription","placeHolder":"@lang.['ed1','Enter description']"}],"label":"@lang.['gi','General Information']","id":"calendarAddNewSection","type":"section"},{"hidden":"@jslib.isActionEdit","children":[{"label":"","id":"weeklyScheduleDatagrid","type":"datagrid","jsonDef":{"pageContextConfig":{"enable":true,"isPaginationReqd":false,"tableData":{"source":"@pageContext.calendarData"}},"isScrollAble":false,"tableWidth":"50rem","rowActions":{"children":[{"activeIcon":"@iconlib.ActionsEditPurple","name":"@lang.['e','edit']","icon":"@iconlib.ActionsEditGrey","tooltip":"@lang.['e1','Edit']","actionOnClick":["@actions.openWeeklyScheduleNestedSidePanel"],"type":"buttonIcon"}]},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['ws','Weekly Schedule']"},"isSelectable":false,"dataSource":[],"actions":[{"name":"openWeeklyScheduleNestedSidePanel","type":"openPanel","pageId":"XLEUZU92GR"}],"tableHeader":[{"name":"@lang.['d12','Day']","options":{"flex":1.2,"sortable":true,"showLabel":true},"key":"weeklyScheduleDay"},{"name":"@lang.['s','Status']","options":{"flex":1,"showLabel":true},"key":"shiftWeeklyScheduleIsOpen"},{"name":"@lang.['t11','Timings']","options":{"flex":3,"dateRangeType":"absoluteTime","sortable":true,"type":"dateRange","showLabel":true},"key":"weeklyScheduleTimings"},{"name":"@lang.['tt2','Total Time']","options":{"flex":1.3,"sortable":true,"showLabel":true},"key":"weeklyScheduleTotalHours"},{"name":"@lang.['b2','Break']","options":{"flex":3,"dateRangeType":"absoluteTime","sortable":true,"type":"dateRange","showLabel":true},"key":"weeklyScheduleLunchBreakSchedule"},{"name":"@lang.['mbd','Min Break Duration (Minutes)']","options":{"sortable":true,"showLabel":true},"key":"minimumBreakDuration"}],"searchKeys":[]}}],"label":"@lang.['ws','Weekly Schedule']","id":"dataGridWeeklySchedule","type":"section","transparent":true},{"hidden":"@jslib.isActionEdit","children":[{"label":"@lang.['navPH','Public Holidays']","id":"publicHolidaysDatagrid","type":"datagrid","jsonDef":{"dataSourceId":"query/read","isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[]},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['navPH','Public Holidays']","children":[{"buttonType":"primary","actionOnClick":["@actions.openPublicHolidayNestedSidePanel"],"id":"addNew","type":"button","title":"@lang.['addNew','Add New']"}]},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSelectable":false,"actions":[{"name":"openPublicHolidayNestedSidePanel","type":"openPanel","pageId":"U08RJV667G"}],"tableHeader":[{"name":"@lang.['n','Name']","options":{"sortable":true,"showLabel":true},"key":"holidayName"},{"name":"@lang.['d3','Date']","options":{"sortable":true,"type":"date","showLabel":true},"key":"holidayDate"}],"dataToBeSent":{"filter":"{$calendarHolidayId} = {@idFilter}","models":["calendarHoliday","holiday"],"inputs":{"idFilter":"@pageContext.calendarId"},"columns":{"calendarHolidayId":"calendarHoliday.calendarId","holidayName":"holiday.name","holidayDate":"holiday.date"},"orderBy":"holidayDate ASC"},"searchKeys":["holidayName"]}}],"id":"datagridPublicHolidays","type":"section","transparent":true}]},"actions":[{"name":"getTimeZone","type":"script","actionDef":"function(pageContext) {pageContext.timezoneOffset=new Date().getTimezoneOffset();}"},{"name":"enableDataGridAndSetWeeklyScheduleData","type":"script","actionDef":"function(pageContext){pageContext.enable=true;pageContext.calendarData=pageContext.weeklyScheduleData[0].outputVar.calendarData;}"},{"endPoint":"process/start","name":"getWeeklyScheduleData","outputVarMap":{"data":"@pageContext.weeklyScheduleData"},"type":"api","actionDef":{"data":[{"processId":"settingsGeneralCalendarWeeklyScheduleFetchDataWF","contextVar":{"timezoneOffset":"@pageContext.timezoneOffset","id":"@pageContext.calendarId"}}]}},{"name":"initialData","type":"script","actionDef":"function(pageContext){pageContext.initialCalendarName = pageContext.calendarName; pageContext.initialCalendarDescription = pageContext.calendarDescription;}"},{"name":"setSubActionInsertCalendar","type":"script","actionDef":"function(pageContext){pageContext.subAction='insertCalendar';}"},{"name":"setSubActionUpdateCalendar","type":"script","actionDef":"function(pageContext){pageContext.subAction='updateCalendar';}"},{"name":"setSubActionDeleteCalendar","type":"script","actionDef":"function(pageContext){pageContext.subAction='deleteCalendar';}"},{"name":"setEditPageData","type":"script","actionDef":"function(pageContext){pageContext.calendarId=pageContext.workFlowResult[0].data[0].calId;pageContext.action='edit';}"},{"endPoint":"event/start","name":"fireProcessEvent","outputVarMap":{"data":"@pageContext.workFlowResult"},"type":"api","actionDef":{"data":[{"eventId":"settingsGeneralCalendarProcessEvent","contextVar":{"calendar":{"calendarType":"shift","recver":"@pageContext.calendarRecver","name":"@pageContext.calendarName","description":"@pageContext.calendarDescription","id":"@pageContext.calendarId"},"timezoneOffset":"@pageContext.timezoneOffset","subAction":"@pageContext.subAction"}}]}},{"subTitle":"@lang.['aysywtdtstwitwsoatatts','Are you sure you want to delete this shift? This will impact the work schedule of any technicians assigned to this shift.']","name":"openCanDeleteModal","options":[{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.setSubActionDeleteCalendar","@actions.fireProcessEvent","@actions.closeModal","@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"type":"button","title":"@lang.['d1','Delete']"}],"type":"openModal","title":"@lang.['ds2','Delete Shift']"},{"subTitle":"@lang.['scbdboomtautspcttsaata','Shift cannot be deleted because one or more technicians are using this Shift. Please change the technician Shift assignments and try again.']","name":"openCannotDeleteModal","options":[{"buttonType":"primary","name":"yes","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['o2','OK']"}],"type":"openModal","title":"@lang.['ds2','Delete Shift']"},{"name":"getShiftTechnicianCount","outputVarMap":{"count":"@pageContext.shiftTechnicianCount"},"type":"query","actionDef":{"filter":"{$workforceCalendarId}={@calendarId}","models":["workforce"],"inputs":{"calendarId":"@pageContext.calendarId"},"columns":{"workforceUserId":"workforce.userId","workforceCalendarId":"workforce.calendarId"},"getCount":true}},{"name":"clearPageContext","type":"clearPageContext"},{"name":"closePanel","type":"closePanel"},{"name":"refreshDataGrid","type":"refreshDataGrid"},{"name":"closeModal","type":"closeModal"}]}