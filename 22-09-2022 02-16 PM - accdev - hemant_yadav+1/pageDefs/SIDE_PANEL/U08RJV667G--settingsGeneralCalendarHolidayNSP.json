{"pageContext":{},"actionOnLoad":["@actions.fetchSelectedHolidays","@actions.setInitialData"],"localPageContext":true,"jslib":{"isAddHolidayDisabled":"function(pageContext){if(typeof pageContext.initialSelectedRowIdsArray !== 'undefined' && pageContext.initialSelectedRowIdsArray !== '' && pageContext.selectedRowIds.length!=pageContext.initialSelectedRowIdsArray.length){return false;}else{for(var i in pageContext.selectedRowIds){if(pageContext.initialSelectedRowIdsArray.indexOf(pageContext.selectedRowIds[i].holidayId)==-1){return false};};return true;}}"},"header":{"leftData":{"children":[{"name":"back","icon":"@iconlib.NavigationArrowBackGrey","actionOnClick":["@actions.openPreviousPanel","@actions.refreshDataGrid"],"type":"buttonIcon"}]},"children":[{"buttonType":"primary","actionOnClick":["@actions.setSubActionInsertCalendarHolidays","@actions.comparePrevHolidayId","@actions.fireProcessEvent","@actions.openPreviousPanel","@actions.refreshDataGrid"],"disabled":"@jslib.isAddHolidayDisabled","id":"submit","type":"button","title":"@lang.['s12','Save']"}],"title":"@lang.['ah1','Add Holidays']"},"body":{"children":[{"label":"@lang.['navPH','Public Holidays']","id":"holidaysDataGrid","type":"datagrid","jsonDef":{"rowsToSelect":{"filter":"{$calendarHoliday.calendarId} = {@idFilter} ","models":["calendarHoliday","holiday"],"inputs":{"idFilter":"@pageContext.calendarId"},"columns":{"holidayRecver":"holiday.recver","holidayName":"holiday.name","holidayDate":"holiday.date","holidayId":"holiday.id"},"orderBy":"holidayDate DESC"},"dataSourceId":"query/read","isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['navPH','Public Holidays']"},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSelectable":true,"actions":[],"tableHeader":[{"name":"@lang.['i','id']","options":{"hidden":true,"showLabel":false},"key":"holidayId","primaryKey":true},{"name":"@lang.['hn','Holiday Name']","options":{"sortable":true,"showLabel":true},"key":"holidayName"},{"name":"@lang.['d3','Date']","options":{"sortable":true,"type":"date","showLabel":true},"key":"holidayDate"}],"dataToBeSent":{"models":["holiday"],"columns":{"holidayRecver":"holiday.recver","holidayName":"holiday.name","holidayDate":"holiday.date","holidayId":"holiday.id"},"orderBy":"holidayDate ASC"},"searchKeys":["holidayName","holidayDate"]}}],"label":"Public Holidays","id":"datagridPublicHolidays","type":"section","transparent":true},"updateAllowed":true,"isSelectable":true,"actions":[{"name":"openPreviousPanel","type":"backPanel"},{"name":"setSubActionInsertCalendarHolidays","type":"script","actionDef":"function(pageContext){pageContext.subAction='insertCalendarHolidays';}"},{"endPoint":"event/start","name":"fireProcessEvent","outputVarMap":{"data":"@pageContext.holidayList"},"type":"api","actionDef":{"data":[{"eventId":"settingsGeneralCalendarProcessEvent","contextVar":{"subAction":"@pageContext.subAction","calendarHoliday":{"removeHolidayList":"@pageContext.unSelectList","id":"@pageContext.calendarId","holidayList":"@pageContext.selectedRowIds"}}}]}},{"name":"fetchSelectedHolidays","outputVarMap":{"data":"@pageContext.selectedHolidayList"},"type":"query","actionDef":{"filter":"{$calendarHolidayCalendarId} = {@idFilter}","models":["calendarHoliday","holiday"],"columns":{"calendarHolidayRecver":"calendarHoliday.recver","calendarHolidayCalendarId":"calendarHoliday.calendarId","holidayName":"holiday.name","holidayId":"holiday.id"},"inputs":{"idFilter":"@pageContext.calendarId"},"orderBy":"holidayName ASC"}},{"name":"setInitialData","type":"script","actionDef":"function(pageContext){pageContext.initialSelectedRowIdsArray=[];if(pageContext.selectedHolidayList !== 'undefined'){for(var i=0;i<pageContext.selectedHolidayList.length;i++){pageContext.initialSelectedRowIdsArray.push(pageContext.selectedHolidayList[i].holidayId);}};}"},{"name":"comparePrevHolidayId","type":"script","actionDef":"function(pageContext){pageContext.selectList=[];pageContext.selectedRowIds.map(select=>pageContext.selectList.push({holidayId:select.holidayId}));pageContext.unSelectList=[];var props=['holidayId','calendarHolidayCalendarId','calendarHolidayRecver'];var result=pageContext.selectedHolidayList.filter(function(o1){return!pageContext.selectedRowIds.some(function(o2){return o1.holidayId===o2.holidayId})}).map(function(o){return props.reduce(function(newo,name){newo[name]=o[name];return newo},{})});pageContext.unSelectList=result;}"},{"name":"refreshDataGrid","type":"refreshDataGrid"}]}