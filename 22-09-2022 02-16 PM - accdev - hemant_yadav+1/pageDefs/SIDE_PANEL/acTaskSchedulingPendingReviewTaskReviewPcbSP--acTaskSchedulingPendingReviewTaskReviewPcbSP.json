{"pageContext":{},"actionOnLoad":["@actions.setDateAndChecklist","@actions.enableRecordGrid","@actions.fireProcessEventForTaskReviewFetchData","@actions.fetchacLenderId","@actions.setCheckListNames","@actions.processResponseData","@actions.setTravelDetails","@actions.calculatedActualTaskDuration"],"children":[],"localPageContext":true,"jslib":{"isFinalEvidenceHidden":"function (pageContext) { if( typeof pageContext.showFinalEvidenceGrid != 'undefined' &&  pageContext.showFinalEvidenceGrid == true ) { return false; } else { return true; } }","isAssignedUserHidden":"function (pageContext) { return (typeof pageContext.responseData !=='undefined' && pageContext.responseData.length > 0 && typeof pageContext.responseData[0].data[0].crewData !== 'undefined' && pageContext.responseData[0].data[0].crewData.length>0); }","isTaskResultHidden":"function (pageContext) { return !(pageContext.statusId==='workOrderTaskCompleted'|| pageContext.statusId==='workOrderTaskCancelled'); }","isHiddenDependencyDatagrid":"function (pageContext){if (typeof pageContext.taskDependencyData !== 'undefined' && pageContext.taskDependencyData.length > 0) {return false;}else{return true;}}","isAssignedCrewHidden":"function (pageContext) { return (typeof pageContext.responseData === 'undefined' || pageContext.responseData === '' || typeof pageContext.responseData[0].data[0].crewData === 'undefined' || pageContext.responseData[0].data[0].crewData === ''); }","isServicesHidden":"function (pageContext) { if( typeof pageContext.selectedFilterForView !== 'undefined' && pageContext.selectedFilterForView === 'byServices'){return false;}else{return true;} }","isShowActualStartTime":"function(pageContext){if(pageContext.status === 'workOrderTaskInProgress'){return false;}else{return true;}}","isDeleteTaskHidden":"function(pageContext){return(pageContext.status === 'workOrderTaskPendingReview' || pageContext.status === 'workOrderTaskSiteChangeRequest');}","isWorkOrderTaskCancelledHidden":"function(pageContext){ if (pageContext.status === 'workOrderTaskCancelled') {return false;}else {return true;}}","isServicesDeliveredHidden":"function (pageContext) { if( typeof pageContext.showServicesDeliveredGrid != 'undefined' &&  pageContext.showServicesDeliveredGrid == true ) { return false; } else { return true; } }","isPreviousAssigneeHidden":"function (pageContext) { return !(typeof pageContext.previousAssignees !== 'undefined' && pageContext.previousAssignees.length > 0); }","istravelDetailsHidden":"function(pageContext){if(pageContext.viewTravelStatus && (pageContext.status === 'workOrderTaskInTransit' || pageContext.status === 'workOrderTaskInProgress' || pageContext.status === 'workOrderTaskPendingReview' || pageContext.status === 'workOrderTaskCancelled' || pageContext.status === 'workOrderTaskCompleted')){return false;}else{return true;}}","hasCustomerSignature":"function(pageContext){if(typeof pageContext.customerSignature=='undefined' || pageContext.customerSignature==''){return true;}}","dynamicHeaderText":"function(pageContext){ if(pageContext.status === 'workOrderTaskPendingReview'){return '@lang.[\"tr1\",\"Task Review\"]'} else if(pageContext.subAction === 'calendarViewTask' || pageContext.status === 'workOrderTaskCompleted' || pageContext.status === 'workOrderTaskCancelled'){return '@lang.[\"vt\",\"View Task\"]'} }","isTaskCompeletedOrCancelled":"function (pageContext) { return (pageContext.status==='workOrderTaskCompleted'|| pageContext.status==='workOrderTaskCancelled'); }","getLocationCoordinates":"function(pageContext) { if ((typeof pageContext.address !== 'undefined' && pageContext.address !== '') && ((typeof pageContext.latitude !== 'undefined' && pageContext.latitude !== '') && (typeof pageContext.longitude !== 'undefined' && pageContext.longitude !== ''))) { return [Number(pageContext.latitude), Number(pageContext.longitude)]; } return [0, 0]; }","isDependencyOverrideHidden":"function (pageContext) { return (typeof pageContext.workOrder === 'undefined' || pageContext.workOrderTaskResult === '' || typeof pageContext.workOrderTaskResult[0].overrideReason === 'undefined' || pageContext.workOrderTaskResult[0].overrideReason === '') }","isViewProgressReportHidden":"function (pageContext) { var flag = true; if ( Array.isArray(pageContext.workOrderTaskResult)  &&pageContext.workOrderTaskResult.length > 0  && JSON.stringify(pageContext.workOrderTaskResult).indexOf('submitType') > 0) { for (var i = 0; i < pageContext.workOrderTaskResult.length; i++) { if ((typeof pageContext.workOrderTaskResult[i].initialEvidenceDataGrid !== 'undefined' && pageContext.workOrderTaskResult[i].initialEvidenceDataGrid.length > 0) || (typeof pageContext.workOrderTaskResult[i].submitProgressEvidenceDataGrid !== 'undefined' && pageContext.workOrderTaskResult[i].submitProgressEvidenceDataGrid.length > 0) || (typeof pageContext.workOrderTaskResult[i].servicesDataGrid !== 'undefined' && pageContext.workOrderTaskResult[i].servicesDataGrid.length > 0)) { flag = false; } else { flag = true; } } }return flag; }","isActivityHidden":"function(pageContext) { if (pageContext.status === 'workOrderTaskCompleted' || pageContext.status === 'workOrderTaskPendingReview') { return false; } else if (pageContext.status === 'workOrderTaskCancelled') { if (typeof pageContext.responseData[0].data[0].workOrderTaskData.workOrderTaskResult !== 'undefined') { return false; } else { return true; } } else if (pageContext.workOrderTaskService === false) { return true; } else{ return true;} }","isAppointmentWindowHidden":"function(pageContext){return !(pageContext.workOrderTaskAppointmentBasedFlag)}","isIncidentReportHidden":"function(pageContext){if(typeof pageContext.incidentDetails === 'undefined' || pageContext.incidentDetails === '' || pageContext.incidentDetails.length <= 0){return true;}else{return false;}}","isInitialEvidenceHidden":"function (pageContext) { if( typeof pageContext.showInitialEvidenceGrid != 'undefined' &&  pageContext.showInitialEvidenceGrid == true ) { return false; } else { return true; } }","isSubmittedProgressHidden":"function (pageContext) { if( typeof pageContext.selectedFilterForView !== 'undefined' &&  pageContext.selectedFilterForView === 'byDate'){return false;}else{return true;} }","isSelectedServicesHidden":"function (pageContext) { if( typeof pageContext.showSelectedServicesGrid != 'undefined' &&  pageContext.showSelectedServicesGrid == true ) { return false; } else { return true; } }","isAfterOverAllCommentsHidden":"function(pageContext){ if (typeof pageContext.afterOverallComments === 'undefined' || pageContext.afterOverallComments== '') {return true;}}"},"header":{"children":[{"statusColor":"@pageContext.statusNameColor","id":"status","type":"status","value":"@pageContext.statusName"},{"isRequired":false,"hidden":"@jslib.isTaskCompeletedOrCancelled","data":[{"buttonType":"secondary","hidden":false,"actionOnClick":["@actions.setActionApproveTask","@actions.openApproveNSP"],"id":"approveTask","type":"button","title":"@lang.['at6','Approve Task ']"},{"buttonType":"secondary","hidden":false,"actionOnClick":["@actions.setActionRejectTask","@actions.openApproveNSP"],"id":"rejectTask","type":"button","title":"@lang.['rt6','Reject Task']"},{"buttonType":"secondary","actionOnClick":["@actions.cancelTaskModal"],"id":"cancelTask","type":"button","title":"@lang.['ct4','Cancel Task']"}],"type":"actionDropdown","title":"@lang.['o4','Options']"},{"activeIcon":"@iconlib.ActionsBinPurple","hidden":"@jslib.isDeleteTaskHidden","icon":"@iconlib.ActionsBinGrey","actionOnClick":["@actions.deleteTaskModal"],"id":"deleteTask","type":"buttonIcon","title":"@lang.['d1','Delete']"},{"icon":"@iconlib.NavigationCloseGrey","actionOnClick":["@actions.closePanel","@actions.clearPageContext"],"id":"close","type":"buttonIcon"}],"title":"@jslib.dynamicHeaderText"},"body":{"children":[{"children":[{"hidden":false,"children":[{"hidden":"@jslib.isTaskResultHidden","children":[{"readOnly":true,"id":"taskReviewResult","label":"@lang.['trr','Task Review Result']","type":"input","value":"@pageContext.taskReviewResult","placeHolder":""},{"readOnly":true,"id":"taskReviewLogReviewNotes","label":"@lang.['rn01','Review Notes']","type":"textarea","value":"@pageContext.taskReviewLogReviewNotes","placeHolder":""}],"id":"taskResult","label":"@lang.['tr1','Task Review']","type":"section"},{"hidden":false,"children":[{"children":[{"actionOnChange":["@actions.setTimeZoneAndLocale","@actions.decisionActionForFilter","@actions.viewChange"],"options":[{"label":"@lang.['d3','Date']","value":"byDate"},{"label":"@lang.['navS3','Services']","value":"byServices"}],"id":"dropdown","label":"@lang.['vprb','View Progress Reports By']","optTitleKey":"label","optValueKey":"value","title":"@lang.['vprb','View Progress Reports By']","type":"dropdown","value":"@pageContext.dropdown","placeHolder":"@lang.['so','Select option']","hoverText":{"title":"@lang.['tdtfiwywtrsftmtbdh','This determines the format in which you want the results submitted from the mobile to be displayed here.']"}}],"id":"filterDropdown","type":"section","transparent":true}],"id":"viewProgressReportsBy","label":"@lang.['s38','Scheduling']","type":"section","transparent":false},{"hidden":"@jslib.isSelectedServicesHidden","children":[{"id":"servicesGrid","type":"dataGrid","jsonDef":{"pageContextConfig":{"enable":true,"isPaginationReqd":false,"tableData":{"source":"@pageContext.taskProgressDataByServices[0].servicesArrayForTaskProgress"}},"isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{},"gridRefreshId":"servicesDataGrid","emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['si1','Service Id']","options":{"hidden":true,"flex":1.4,"showLabel":false},"key":"id","primaryKey":true},{"name":"@lang.['sn2','Service Name']","options":{"flex":1.4,"showLabel":true},"key":"serviceName","primaryKey":true},{"name":"@lang.['s','Status']","options":{"flex":1.4,"showLabel":true},"key":"serviceStatus"},{"name":"@lang.['r','Records']","options":{"hidden":true,"flex":1.4,"showLabel":true},"key":"numberOfServicesUsed"},{"name":"@lang.['sd11','service Data']","options":{"hidden":true,"flex":1.4,"showLabel":false},"key":"servicesData","primaryKey":true}],"singleSelect":false,"actionOnLoad":[],"dataSourceId":"query/read","jslib":{"isViewResultsByServicesDisabled":"function (pageContext) { if( typeof pageContext.selectedRowIds != 'undefined' &&  pageContext.selectedRowIds.length > 0 ) { return false; } else { return true; } }"},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['navS3','Services']","children":[{"buttonType":"primary","hidden":true,"actionOnClick":["@actions.setSelectedServicesData","@actions.setFlagsToShowSelectedServices","@actions.refreshSelectedServicesDataGrid"],"disabled":"@jslib.isViewResultsByServicesDisabled","id":"viewResults","type":"button","title":"@lang.['vr','View Results']"}]},"isSelectable":false,"actions":[{"name":"refreshSelectedServicesDataGrid","gridId":["selectedServicesDataGrid"],"type":"RefreshGridOnSidePanel"},{"name":"setSelectedServicesData","type":"script","actionDef":"function (pageContext) { if (typeof pageContext.selectedRowIds !== 'undefined' && pageContext.selectedRowIds.length > 0) { pageContext.selectedServiceName = pageContext.selectedRowIds[0].serviceName; pageContext.selectedServiceData = []; var obj = {}; if (typeof pageContext.selectedRowIds[0].servicesData !== 'undefined') { pageContext.selectedRowIds[0].servicesData.forEach(function (element, index) { obj = { ...element, 'action': element.serviceGridWrapper[index].serviceModeName, 'actionData': element.serviceGridWrapper[index], 'serviceMode': element.serviceGridWrapper[index].serviceMode, 'addedBy': element.serviceGridWrapper[index].addedBy }; delete obj.serviceGridWrapper; pageContext.selectedServiceData.push(obj); }); } } }"},{"name":"setFlagsToShowSelectedServices","type":"script","actionDef":"function(pageContext){pageContext.showSelectedServicesGrid = true;}"}],"searchKeys":["serviceName"]}}],"label":"","id":"selectedServices","type":"section","transparent":true},{"hidden":"@jslib.isInitialEvidenceHidden","children":[{"children":[{"id":"initialEvidenceData","type":"dataGrid","jsonDef":{"pageContextConfig":{"enable":true,"isPaginationReqd":false,"tableData":{"source":"@pageContext.initialEvidenceGridData"}},"isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsVisiblePurple","name":"@lang.['vtr','View Task Results']","icon":"@iconlib.ActionsVisibleGrey","tooltip":"@lang.['v1','View']","actionOnClick":["@actions.isInitialEvidence","@actions.openInitialEvidenceNSP"],"type":"buttonIcon"}]},"gridRefreshId":"initialEvidenceDataGrid","emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['co2','Captured On']","options":{"type":"datetime","showLabel":true},"key":"initialEvidenceCapturedTime"},{"name":"@lang.['cb1','Captured By']","options":{"showLabel":true},"key":"capturedBy"},{"name":"@lang.['pp2','Photo Preview']","options":{"hidden":false,"showLabel":true},"type":"thumbnail","key":"initialEvidence","fileType":"JPG"},{"name":"@lang.['n3','Notes']","options":{"showLabel":true},"key":"initialEvidenceNotes"}],"dataSourceId":"query/read","jslib":{},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['ie03','Initial Evidence']"},"updateAllowed":true,"isSelectable":false,"actions":[{"name":"openInitialEvidenceNSP","type":"openPanel","pageId":"0BFEEOE9ON"},{"name":"isInitialEvidence","type":"script","actionDef":"function(pageContext){ pageContext.isInitialEvidence=true; pageContext.isFinalEvidence=false;}"}],"searchKeys":["capturedBy"],"multiSelect":false}}],"label":"","id":"initialEvidenceGrid","type":"section","transparent":true},{"children":[{"readOnly":true,"id":"notes","label":"@lang.['n3','Notes']","placeholder":"@lang.['blank4','-']","type":"input","value":"@pageContext.initialComments"}],"label":"","id":"notes","type":"section"}],"label":"@lang.['ie03','Initial Evidence']","id":"initialEvidence","type":"collapseSection","transparent":true},{"hidden":"@jslib.isServicesDeliveredHidden","children":[{"id":"servicesDeliveredData","type":"dataGrid","jsonDef":{"pageContextConfig":{"enable":true,"isPaginationReqd":false,"tableData":{"source":"@pageContext.finalServicesData"}},"isScrollAble":false,"tableWidth":"60rem","searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsVisiblePurple","name":"@lang.['vtr','View Task Results']","icon":"@iconlib.ActionsVisibleGrey","tooltip":"@lang.['v1','View']","actionOnClick":["@actions.openServicesDeliveredNSP"],"type":"buttonIcon"}]},"gridRefreshId":"servicesDeliveredDataGrid","emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['co3','Completed On']","options":{"flex":1.4,"type":"datetime","showLabel":true},"key":"completedOn"},{"name":"@lang.['s21','Service']","options":{"flex":1.4,"showLabel":true},"key":"serviceType"},{"name":"@lang.['a04','Action']","options":{"showLabel":true},"key":"action"},{"name":"@lang.['an1','Asset Name']","options":{"flex":1.8,"showLabel":true},"key":"assetName"},{"name":"@lang.['cb1','Captured By']","options":{"flex":1.2,"showLabel":true},"key":"capturedBy"}],"dataSourceId":"query/read","jslib":{},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['sd12','Services Delivered']"},"isSelectable":false,"actions":[{"name":"openServicesDeliveredNSP","type":"openPanel","pageId":"KBFLEOEEL2"}],"searchKeys":["startDate","endDate","durationInHours"]}}],"label":"@lang.['s03','Services']","id":"servicesDelivered","type":"collapseSection","transparent":true},{"hidden":"@jslib.isSubmittedProgressHidden","children":[{"hidden":"@jslib.isSubmittedProgressHidden","readOnly":true,"id":"workOrderRequestedDateOnEdit","title":"@lang.['dat','Date & Time']","type":"datetime","value":"@pageContext.workOrderRequestedDateOnEdit"},{"hidden":"@jslib.isSubmittedProgressHidden","readOnly":true,"id":"latitude1","label":"@lang.['l','Latitude']","type":"input","value":"@pageContext.latitude1"},{"hidden":"@jslib.isSubmittedProgressHidden","readOnly":true,"id":"longitude1","label":"@lang.['l1','Longitude']","type":"input","value":"@pageContext.longitude1"}],"id":"latitude","label":"@lang.['uR0','Upload Report']","type":"collapseSection"},{"hidden":"@jslib.isSubmittedProgressHidden","children":[{"id":"sectionsDataGrid","label":"","type":"dataGrid","jsonDef":{"pageContextConfig":{"hidden":true,"enable":false,"isPaginationReqd":false,"tableData":{"source":"@pageContext.workOrderTaskResult[0].acCheckList"}},"hidden":true,"deleteAllowed":false,"isScrollAble":false,"searchAllowed":false,"searchEmptyScreen":{"image":"https://s3-us-west-2.amazonaws.com/zinier-static/mastec/loc-search-cross.svg","contentValue":"SORRY! YOUR SEARCH RESULTS CAME UP EMPTY","type":"noData"},"rowActions":{},"gridRefreshId":"sectionsDataGrid","emptyScreen":{"image":"https://s3-us-west-2.amazonaws.com/zinier-static/mastec/doc-clipboard.svg","contentValue":"YOU DO NOT HAVE ANY RECORDS AVAILABLE AT THIS TIME","type":"noData"},"tableHeader":[{"name":"@lang.['cl02','Check List']","options":{"flex":2.1,"sortOrder":"ASC","sortable":false,"showLabel":true},"key":"item"},{"name":"@lang.['c06','Checked']","options":{"flex":1.1,"sortOrder":"ASC","sortable":false,"showLabel":true},"key":"isChecked","primaryKey":true}],"dataToBeSent":{},"dataSourceId":"","sourceType":"api","rowTextLength":20,"jslib":{"isTenValues":"function(pageContext){ pageContext.counting =0; if( pageContext.sectionsDataGrid !== ''  && typeof  pageContext.sectionsDataGrid !=='undefined'){ for(var m=0; m < pageContext.sectionsDataGrid.length; m++ ){ pageContext.counting++; } if(pageContext.counting < 12){return false; } else{ return true; } } else if(pageContext.counting < 12){  return false; } else{ return true; } }"},"mainFilter":{},"header":{"filterAllowed":true,"subHeaderText":"Records","headerText":"@lang.['cl03','checkList']","children":[]},"disabled":true,"enableSidePanelFilter":true,"updateAllowed":false,"isSelectable":true,"actions":[{"subTitle":"@lang.['aysywtdtt1','Are you sure you want to duplicate this task type?']","name":"duplicateModal","options":[{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.checkAction","@actions.fireDupicateRecordData","@actions.refreshWorkOrderDataGrid","@actions.closeModal"],"type":"button","title":"@lang.['c13','Continue']"}],"type":"openModal","title":"@lang.['dt8','Duplicate Task']"},{"name":"fireDupicateRecordData","type":"script","actionDef":"function(pageContext) { if (pageContext.customTaskAction === 'create') { var checkListObj2 = { 'sectionId' : Math.random().toString(16).slice(2), 'itemTitle': pageContext.itemTitle + ' COPY', 'checklistDataGrid': pageContext.checklistDataGrid, 'descriptionSections': pageContext.descriptionSections, 'enableSectionLevelPhotosAndComments': pageContext.enableSectionLevelPhotosAndComments, 'iconPhoto': pageContext.iconPhoto, 'fileManualGuideUpload': pageContext.fileManualGuideUpload, 'image': pageContext.image, 'instructionsOptional': pageContext.instructionsOptional, 'nameSections': pageContext.nameSections + ' COPY', 'enableCheckbox': pageContext.enableCheckbox, 'checkboxTitle': pageContext.checkboxTitle }; pageContext.sectionsDataGrid.push(checkListObj2); } if (pageContext.customTaskAction === 'edit') { if (typeof pageContext.sectionsDataGrid !== 'undefined' && pageContext.sectionsDataGrid.length > 0) { var checkListObj3 = { 'sectionId' : Math.random().toString(16).slice(2), 'itemTitle': pageContext.itemTitle + ' COPY', 'checklistDataGrid': pageContext.checklistDataGrid, 'descriptionSections': pageContext.descriptionSections, 'iconPhoto': pageContext.iconPhoto, 'enableSectionLevelPhotosAndComments': pageContext.enableSectionLevelPhotosAndComments, 'fileManualGuideUpload': pageContext.fileManualGuideUpload, 'image': pageContext.image, 'instructionsOptional': pageContext.instructionsOptional, 'nameSections': pageContext.nameSections + ' COPY', 'enableCheckbox': pageContext.enableCheckbox, 'checkboxTitle': pageContext.checkboxTitle }; pageContext.sectionsDataGrid.push(checkListObj3); } } }"},{"name":"refreshWorkOrderDataGrid","gridId":["sectionsDataGrid"],"type":"RefreshGridOnSidePanel"},{"name":"closeModal","type":"closeModal"},{"name":"checkAction","type":"script","actionDef":"function(pageContext) { }"},{"name":"setActionEditSection","type":"script","actionDef":"function(pageContext){pageContext.customTaskSectionAction ='editSection';}"},{"name":"getChecklistDataGrid","type":"script","actionDef":"function(pageContext) { if (pageContext.customTaskAction === 'edit') { var checkObj = {}; var ansOpt, j; for (var i = 0; i < pageContext.sectionsDataGrid.length; i++) { if (pageContext.sectionsDataGrid[i].sectionId === pageContext.sectionId) { pageContext.checklistDataGridDetails = pageContext.sectionsDataGrid[i].checklistDataGrid; } } pageContext.checklistDataGrid = []; for (var i = 0; i < pageContext.checklistDataGridDetails.length; i++) { var answerOptionsDataArray = []; for (j = 0; j < pageContext.checklistDataGridDetails[i].answerOptions.length; j++) { if (typeof pageContext.checklistDataGridDetails[i].answerOptions[j].option === 'undefined') { ansOpt = pageContext.checklistDataGridDetails[i].answerOptions[j] } else { ansOpt = pageContext.checklistDataGridDetails[i].answerOptions[j].option; } answerOptionsDataArray.push(ansOpt); } checkObj = { 'checklistId': pageContext.checklistDataGridDetails[i].checklistId, 'testTitle': pageContext.checklistDataGridDetails[i].itemTitleChecklist, 'itemTitleChecklist': pageContext.checklistDataGridDetails[i].itemTitleChecklist, 'instructionsOptionalCheckList': pageContext.checklistDataGridDetails[i].instructionsOptionalCheckList ? pageContext.checklistDataGridDetails[i].instructionsOptionalCheckList : '-', 'inputMandatory': pageContext.checklistDataGridDetails[i].inputMandatory ? pageContext.checklistDataGridDetails[i].inputMandatory : '', 'isMandatory': pageContext.checklistDataGridDetails[i].inputMandatory ? pageContext.checklistDataGridDetails[i].inputMandatory : '-', 'imageChecklist': pageContext.checklistDataGridDetails[i].imageOptional, 'enableCommentsCapture': pageContext.checklistDataGridDetails[i].enableCommentsCapture, 'enableBarcodeCapture': pageContext.checklistDataGridDetails[i].enableBarcodeCapture, 'enablePhotosCapture': pageContext.checklistDataGridDetails[i].enablePhotosCapture, 'selectedUploadType': pageContext.checklistDataGridDetails[i].selectedUploadType, 'allowUploadFromGallery': pageContext.checklistDataGridDetails[i].allowUploadFromGallery, 'enableVideosCapture': pageContext.checklistDataGridDetails[i].enableVideosCapture, 'enableQuestionsWithOpenInput': pageContext.checklistDataGridDetails[i].enableQuestionsWithOpenInput, 'openQuestionTitle': pageContext.checklistDataGridDetails[i].openQuestionTitle, 'enableQuestionWithMultipleOptions': pageContext.checklistDataGridDetails[i].enableQuestionWithMultipleOptions, 'multipleOptionsQuestionTitle': pageContext.checklistDataGridDetails[i].multipleOptionsQuestionTitle, 'answerOptions': answerOptionsDataArray }; pageContext.checklistDataGrid.push(checkObj); } } }"},{"name":"setActionAddNewSection","type":"script","actionDef":"function(pageContext){pageContext.customTaskSectionAction ='addSection';}"},{"name":"settingsWOsettingsCustomTaskInputsAddNewNSP","type":"openPanel","pageId":"settingsWOsettingsCustomTaskInputsAddNewNSP"},{"name":"clearFields","type":"script","actionDef":"function (pageContext){ pageContext.itemTitle = ''; pageContext.sectionId = ''; pageContext.instructionsOptional = ''; pageContext.image = ''; pageContext.fileManualGuideUpload = ''; pageContext.instructionsOptional = ''; pageContext.enableSectionLevelPhotosAndComments = ''; pageContext.checklistDataGrid = ''; pageContext.iconPhoto = ''; pageContext.checkboxTitle = ''; pageContext.enableCheckbox = ''; }"},{"name":"changePositionDown","type":"script","actionDef":"function(pageContext){ pageContext.tempVar = []; var num = pageContext.sectionsDataGrid.length; var j = 0; if (typeof pageContext.sectionsDataGrid !== 'undefined' && pageContext.sectionsDataGrid.length > 0) { for (var i = 0; i < num; i++) { if (i === num - 1) { break; } else if (pageContext.sectionsDataGrid[i].sectionId === pageContext.sectionId) { pageContext.tempVar[j] = pageContext.sectionsDataGrid[i]; pageContext.sectionsDataGrid[i] = pageContext.sectionsDataGrid[i + 1]; pageContext.sectionsDataGrid[i + 1] = pageContext.tempVar[j]; break; } } } }"},{"name":"deleteSectionEntry","type":"script","actionDef":"function(pageContext){ pageContext.tempVariable = []; var num = pageContext.sectionsDataGrid.length; if (typeof pageContext.sectionsDataGrid !== 'undefined' && pageContext.sectionsDataGrid.length > 0) { for (var i = 0; i <= num - 1; i++) { if (pageContext.sectionsDataGrid[i].sectionId !== pageContext.sectionId) { pageContext.tempVariable.push(pageContext.sectionsDataGrid[i]); } } } pageContext.sectionsDataGrid = pageContext.tempVariable; }"},{"name":"changePositionUp","type":"script","actionDef":"function(pageContext){ pageContext.tempVar = []; var num = pageContext.sectionsDataGrid.length; var j = 0; if (typeof pageContext.sectionsDataGrid !== 'undefined' && pageContext.sectionsDataGrid.length > 0) { for (var i = 0; i < num; i++) { if (i === 0) { continue; } else if (pageContext.sectionsDataGrid[i].sectionId === pageContext.sectionId) { pageContext.tempVar[j] = pageContext.sectionsDataGrid[i]; pageContext.sectionsDataGrid[i] = pageContext.sectionsDataGrid[i - 1]; pageContext.sectionsDataGrid[i - 1] = pageContext.tempVar[j]; break; } } } }"},{"name":"changePositionDownforButton","type":"script","actionDef":"function(pageContext){ pageContext.tempVar = []; var num = pageContext.sectionsDataGrid.length; var j = 0; if (typeof pageContext.sectionsDataGrid !== 'undefined' && pageContext.sectionsDataGrid.length > 0) { for (var i = 0; i < num; i++) { if (i === num - 1) { break; } else if (pageContext.sectionsDataGrid[i].sectionId === pageContext.selectedRowIds[0].sectionId) { pageContext.tempVar[j] = pageContext.sectionsDataGrid[i]; pageContext.sectionsDataGrid[i] = pageContext.sectionsDataGrid[i + 1]; pageContext.sectionsDataGrid[i + 1] = pageContext.tempVar[j]; break; } } } }"},{"name":"changePositionUpforButton","type":"script","actionDef":"function(pageContext){ pageContext.tempVar = []; var num = pageContext.sectionsDataGrid.length; var j = 0; if (typeof pageContext.sectionsDataGrid !== 'undefined' && pageContext.sectionsDataGrid.length > 0) { for (var i = 0; i < num; i++) { if (i === 0) { continue; } else if (pageContext.sectionsDataGrid[i].sectionId === pageContext.selectedRowIds[0].sectionId) { pageContext.tempVar[j] = pageContext.sectionsDataGrid[i]; pageContext.sectionsDataGrid[i] = pageContext.sectionsDataGrid[i - 1]; pageContext.sectionsDataGrid[i - 1] = pageContext.tempVar[j]; break; } } } }"},{"name":"refreshSectionsDataGrid","gridId":["sectionsDataGrid"],"type":"RefreshGridOnSidePanel"}],"searchKeys":["item"],"multiSelect":true},"title":"section"},{"checkAll":false,"data":"@pageContext.checkListNames","disabled":true,"id":"multipleCheckBox1","type":"multipleCheckBox","value":"@pageContext.checkListValues","hoverText":{"title":"@lang.['Map','text']"}}],"disabled":true,"id":"checkList","label":"@lang.['cl03','Checklist']","type":"collapseSection"},{"hidden":"@jslib.isSubmittedProgressHidden","children":[{"id":"sectionsDataGrid","label":"","type":"dataGrid","jsonDef":{"pageContextConfig":{"enable":false,"isPaginationReqd":false,"tableData":{"source":"@pageContext.acDrivingDataGrid"}},"deleteAllowed":false,"isScrollAble":false,"searchAllowed":false,"searchEmptyScreen":{"image":"https://s3-us-west-2.amazonaws.com/zinier-static/mastec/loc-search-cross.svg","contentValue":"SORRY! YOUR SEARCH RESULTS CAME UP EMPTY","type":"noData"},"rowActions":{},"gridRefreshId":"sectionsDataGrid","emptyScreen":{"image":"https://s3-us-west-2.amazonaws.com/zinier-static/mastec/doc-clipboard.svg","contentValue":"YOU DO NOT HAVE ANY RECORDS AVAILABLE AT THIS TIME","type":"noData"},"tableHeader":[{"name":"@lang.['df01', 'Drive From']","options":{"flex":2,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"driveFromAddress"},{"name":"@lang.['dt02','Drive To']","options":{"flex":2,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"propertyType"},{"name":"@lang.['st01','Start Time']","options":{"flex":2,"sortOrder":"ASC","sortable":true,"type":"dateTime","showLabel":true},"key":"startTravelDate"},{"name":"@lang.['et02','End Time']","options":{"flex":2,"sortOrder":"ASC","sortable":true,"type":"dateTime","showLabel":true},"key":"endTravelDate"},{"name":"@lang.['dtis','Drive Time(In Sec)']","options":{"flex":2,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"driveTime"},{"name":"@lang.['m01','Mileage']","options":{"flex":2.3,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"distance"},{"name":"@lang.['sl01','Start Latitude']","options":{"flex":2.3,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"startLatitude"},{"name":"@lang.['sl02','Start Longitude']","options":{"flex":2.3,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"startLongitude"},{"name":"@lang.['el01','End Latitude']","options":{"flex":2.3,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"endLatitude"},{"name":"@lang.['el02','End longitude']","options":{"flex":2.3,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"endLongitude"}],"dataToBeSent":{},"dataSourceId":"","sourceType":"api","rowTextLength":20,"jslib":{"isTenValues":"function(pageContext){ pageContext.counting =0; if( pageContext.sectionsDataGrid !== ''  && typeof  pageContext.sectionsDataGrid !=='undefined'){ for(var m=0; m < pageContext.sectionsDataGrid.length; m++ ){ pageContext.counting++; } if(pageContext.counting < 12){return false; } else{ return true; } } else if(pageContext.counting < 12){  return false; } else{ return true; } }"},"mainFilter":{},"header":{"filterAllowed":false,"subHeaderText":"Records","headerText":"@lang.['dt20','Drive Times']","children":[]},"disabled":true,"enableSidePanelFilter":true,"updateAllowed":false,"isSelectable":false,"actions":[{"subTitle":"@lang.['aysywtdtt1','Are you sure you want to duplicate this task type?']","name":"duplicateModal","options":[{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.checkAction","@actions.fireDupicateRecordData","@actions.refreshWorkOrderDataGrid","@actions.closeModal"],"type":"button","title":"@lang.['c13','Continue']"}],"type":"openModal","title":"@lang.['dt8','Duplicate Task']"},{"name":"fireDupicateRecordData","type":"script","actionDef":"function(pageContext) { if (pageContext.customTaskAction === 'create') { var checkListObj2 = { 'sectionId' : Math.random().toString(16).slice(2), 'itemTitle': pageContext.itemTitle + ' COPY', 'checklistDataGrid': pageContext.checklistDataGrid, 'descriptionSections': pageContext.descriptionSections, 'enableSectionLevelPhotosAndComments': pageContext.enableSectionLevelPhotosAndComments, 'iconPhoto': pageContext.iconPhoto, 'fileManualGuideUpload': pageContext.fileManualGuideUpload, 'image': pageContext.image, 'instructionsOptional': pageContext.instructionsOptional, 'nameSections': pageContext.nameSections + ' COPY', 'enableCheckbox': pageContext.enableCheckbox, 'checkboxTitle': pageContext.checkboxTitle }; pageContext.sectionsDataGrid.push(checkListObj2); } if (pageContext.customTaskAction === 'edit') { if (typeof pageContext.sectionsDataGrid !== 'undefined' && pageContext.sectionsDataGrid.length > 0) { var checkListObj3 = { 'sectionId' : Math.random().toString(16).slice(2), 'itemTitle': pageContext.itemTitle + ' COPY', 'checklistDataGrid': pageContext.checklistDataGrid, 'descriptionSections': pageContext.descriptionSections, 'iconPhoto': pageContext.iconPhoto, 'enableSectionLevelPhotosAndComments': pageContext.enableSectionLevelPhotosAndComments, 'fileManualGuideUpload': pageContext.fileManualGuideUpload, 'image': pageContext.image, 'instructionsOptional': pageContext.instructionsOptional, 'nameSections': pageContext.nameSections + ' COPY', 'enableCheckbox': pageContext.enableCheckbox, 'checkboxTitle': pageContext.checkboxTitle }; pageContext.sectionsDataGrid.push(checkListObj3); } } }"},{"name":"refreshWorkOrderDataGrid","gridId":["sectionsDataGrid"],"type":"RefreshGridOnSidePanel"},{"name":"closeModal","type":"closeModal"},{"name":"checkAction","type":"script","actionDef":"function(pageContext) { }"},{"name":"setActionEditSection","type":"script","actionDef":"function(pageContext){pageContext.customTaskSectionAction ='editSection';}"},{"name":"getChecklistDataGrid","type":"script","actionDef":"function(pageContext) { if (pageContext.customTaskAction === 'edit') { var checkObj = {}; var ansOpt, j; for (var i = 0; i < pageContext.sectionsDataGrid.length; i++) { if (pageContext.sectionsDataGrid[i].sectionId === pageContext.sectionId) { pageContext.checklistDataGridDetails = pageContext.sectionsDataGrid[i].checklistDataGrid; } } pageContext.checklistDataGrid = []; for (var i = 0; i < pageContext.checklistDataGridDetails.length; i++) { var answerOptionsDataArray = []; for (j = 0; j < pageContext.checklistDataGridDetails[i].answerOptions.length; j++) { if (typeof pageContext.checklistDataGridDetails[i].answerOptions[j].option === 'undefined') { ansOpt = pageContext.checklistDataGridDetails[i].answerOptions[j] } else { ansOpt = pageContext.checklistDataGridDetails[i].answerOptions[j].option; } answerOptionsDataArray.push(ansOpt); } checkObj = { 'checklistId': pageContext.checklistDataGridDetails[i].checklistId, 'testTitle': pageContext.checklistDataGridDetails[i].itemTitleChecklist, 'itemTitleChecklist': pageContext.checklistDataGridDetails[i].itemTitleChecklist, 'instructionsOptionalCheckList': pageContext.checklistDataGridDetails[i].instructionsOptionalCheckList ? pageContext.checklistDataGridDetails[i].instructionsOptionalCheckList : '-', 'inputMandatory': pageContext.checklistDataGridDetails[i].inputMandatory ? pageContext.checklistDataGridDetails[i].inputMandatory : '', 'isMandatory': pageContext.checklistDataGridDetails[i].inputMandatory ? pageContext.checklistDataGridDetails[i].inputMandatory : '-', 'imageChecklist': pageContext.checklistDataGridDetails[i].imageOptional, 'enableCommentsCapture': pageContext.checklistDataGridDetails[i].enableCommentsCapture, 'enableBarcodeCapture': pageContext.checklistDataGridDetails[i].enableBarcodeCapture, 'enablePhotosCapture': pageContext.checklistDataGridDetails[i].enablePhotosCapture, 'selectedUploadType': pageContext.checklistDataGridDetails[i].selectedUploadType, 'allowUploadFromGallery': pageContext.checklistDataGridDetails[i].allowUploadFromGallery, 'enableVideosCapture': pageContext.checklistDataGridDetails[i].enableVideosCapture, 'enableQuestionsWithOpenInput': pageContext.checklistDataGridDetails[i].enableQuestionsWithOpenInput, 'openQuestionTitle': pageContext.checklistDataGridDetails[i].openQuestionTitle, 'enableQuestionWithMultipleOptions': pageContext.checklistDataGridDetails[i].enableQuestionWithMultipleOptions, 'multipleOptionsQuestionTitle': pageContext.checklistDataGridDetails[i].multipleOptionsQuestionTitle, 'answerOptions': answerOptionsDataArray }; pageContext.checklistDataGrid.push(checkObj); } } }"},{"name":"setActionAddNewSection","type":"script","actionDef":"function(pageContext){pageContext.customTaskSectionAction ='addSection';}"},{"name":"settingsWOsettingsCustomTaskInputsAddNewNSP","type":"openPanel","pageId":"settingsWOsettingsCustomTaskInputsAddNewNSP"},{"name":"clearFields","type":"script","actionDef":"function (pageContext){ pageContext.itemTitle = ''; pageContext.sectionId = ''; pageContext.instructionsOptional = ''; pageContext.image = ''; pageContext.fileManualGuideUpload = ''; pageContext.instructionsOptional = ''; pageContext.enableSectionLevelPhotosAndComments = ''; pageContext.checklistDataGrid = ''; pageContext.iconPhoto = ''; pageContext.checkboxTitle = ''; pageContext.enableCheckbox = ''; }"},{"name":"changePositionDown","type":"script","actionDef":"function(pageContext){ pageContext.tempVar = []; var num = pageContext.sectionsDataGrid.length; var j = 0; if (typeof pageContext.sectionsDataGrid !== 'undefined' && pageContext.sectionsDataGrid.length > 0) { for (var i = 0; i < num; i++) { if (i === num - 1) { break; } else if (pageContext.sectionsDataGrid[i].sectionId === pageContext.sectionId) { pageContext.tempVar[j] = pageContext.sectionsDataGrid[i]; pageContext.sectionsDataGrid[i] = pageContext.sectionsDataGrid[i + 1]; pageContext.sectionsDataGrid[i + 1] = pageContext.tempVar[j]; break; } } } }"},{"name":"deleteSectionEntry","type":"script","actionDef":"function(pageContext){ pageContext.tempVariable = []; var num = pageContext.sectionsDataGrid.length; if (typeof pageContext.sectionsDataGrid !== 'undefined' && pageContext.sectionsDataGrid.length > 0) { for (var i = 0; i <= num - 1; i++) { if (pageContext.sectionsDataGrid[i].sectionId !== pageContext.sectionId) { pageContext.tempVariable.push(pageContext.sectionsDataGrid[i]); } } } pageContext.sectionsDataGrid = pageContext.tempVariable; }"},{"name":"changePositionUp","type":"script","actionDef":"function(pageContext){ pageContext.tempVar = []; var num = pageContext.sectionsDataGrid.length; var j = 0; if (typeof pageContext.sectionsDataGrid !== 'undefined' && pageContext.sectionsDataGrid.length > 0) { for (var i = 0; i < num; i++) { if (i === 0) { continue; } else if (pageContext.sectionsDataGrid[i].sectionId === pageContext.sectionId) { pageContext.tempVar[j] = pageContext.sectionsDataGrid[i]; pageContext.sectionsDataGrid[i] = pageContext.sectionsDataGrid[i - 1]; pageContext.sectionsDataGrid[i - 1] = pageContext.tempVar[j]; break; } } } }"},{"name":"changePositionDownforButton","type":"script","actionDef":"function(pageContext){ pageContext.tempVar = []; var num = pageContext.sectionsDataGrid.length; var j = 0; if (typeof pageContext.sectionsDataGrid !== 'undefined' && pageContext.sectionsDataGrid.length > 0) { for (var i = 0; i < num; i++) { if (i === num - 1) { break; } else if (pageContext.sectionsDataGrid[i].sectionId === pageContext.selectedRowIds[0].sectionId) { pageContext.tempVar[j] = pageContext.sectionsDataGrid[i]; pageContext.sectionsDataGrid[i] = pageContext.sectionsDataGrid[i + 1]; pageContext.sectionsDataGrid[i + 1] = pageContext.tempVar[j]; break; } } } }"},{"name":"changePositionUpforButton","type":"script","actionDef":"function(pageContext){ pageContext.tempVar = []; var num = pageContext.sectionsDataGrid.length; var j = 0; if (typeof pageContext.sectionsDataGrid !== 'undefined' && pageContext.sectionsDataGrid.length > 0) { for (var i = 0; i < num; i++) { if (i === 0) { continue; } else if (pageContext.sectionsDataGrid[i].sectionId === pageContext.selectedRowIds[0].sectionId) { pageContext.tempVar[j] = pageContext.sectionsDataGrid[i]; pageContext.sectionsDataGrid[i] = pageContext.sectionsDataGrid[i - 1]; pageContext.sectionsDataGrid[i - 1] = pageContext.tempVar[j]; break; } } } }"},{"name":"refreshSectionsDataGrid","gridId":["sectionsDataGrid"],"type":"RefreshGridOnSidePanel"}],"searchKeys":["item"],"multiSelect":true},"title":"section"}],"id":"driveTimes","label":"@lang.['dt30','Drive Time']","type":"collapseSection"},{"hidden":"@jslib.isFinalEvidenceHidden","children":[{"children":[{"id":"finalEvidenceMainDatagrid","type":"dataGrid","jsonDef":{"pageContextConfig":{"enable":true,"isPaginationReqd":false,"tableData":{"source":"@pageContext.finalEvidenceMainDatagrid"}},"isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsVisiblePurple","name":"@lang.['vtr','View Task Results']","icon":"@iconlib.ActionsVisibleGrey","tooltip":"@lang.['v1','View']","actionOnClick":["@actions.isFinalEvidence","@actions.openFinalEvidenceNSP"],"type":"buttonIcon"}]},"gridRefreshId":"finalEvidenceDataGrid","emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['co2','Captured On']","options":{"type":"datetime","showLabel":true},"key":"finalEvidenceCapturedTime"},{"name":"@lang.['cb1','Captured By']","options":{"showLabel":true},"key":"submittedBy"},{"name":"@lang.['pp2','Photo Preview']","options":{"hidden":false,"showLabel":true},"type":"thumbnail","key":"finalEvidence","fileType":"JPG"},{"name":"@lang.['n3','Notes']","options":{"showLabel":true},"key":"finalEvidenceNotes"}],"dataSourceId":"query/read","jslib":{},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['fer','Final Evidence Recorded']"},"updateAllowed":true,"isSelectable":false,"actions":[{"name":"openFinalEvidenceNSP","type":"openPanel","pageId":"0BFEEOE9ON"},{"name":"isFinalEvidence","type":"script","actionDef":"function(pageContext){ pageContext.isFinalEvidence=true; pageContext.isInitialEvidence=false;}"}],"searchKeys":["submittedBy"],"multiSelect":false}}],"label":"","id":"finalEvidenceGrid","type":"section","transparent":true},{"children":[{"readOnly":true,"id":"notes","label":"@lang.['n3','Notes']","placeholder":"@lang.['blank4','-']","type":"input","value":"@pageContext.finalComments"}],"label":"","id":"notes","type":"section"}],"label":"@lang.['fe1','Final Evidences']","id":"finalEvidence","type":"collapseSection","transparent":true},{"hidden":true,"children":[{"aspectRation":"","disabled":true,"id":"image_209","label":"image_209","type":"image","value":"@pageContext.customerSignature"}],"id":"CustomerSignature","label":"@lang.['cs02','Customer Signature']","type":"section"},{"hidden":true,"children":[{"readOnly":true,"id":"approvedBy","label":"@lang.['ab','Approved by (Optional)']","placeholder":"@lang.['ab','Approved by (Optional)']","type":"input","value":"@pageContext.approvedBy"}],"id":"section_4121","label":"","type":"section"}],"label":"@lang.['tr3','Task Results']","id":"tab_2975","type":"tab"},{"children":[{"children":[{"hidden":"@jslib.isAssignedUserHidden","disabled":true,"id":"technicianList","label":"@lang.['aa2','Appraiser/Analyst']","type":"input","value":"@pageContext.userName"},{"hidden":"@jslib.isAssignedCrewHidden","disabled":true,"id":"assignedCrew","label":"@lang.['ac1','Assigned Crew']","type":"input","value":"@pageContext.crewName"}],"id":"taskResult","label":"@lang.['a4','Assignee']","type":"section"},{"children":[{"hidden":"","readOnly":true,"id":"primaryApprasier","label":"@lang.['pa3','Primary Appraiser']","type":"input","value":"@pageContext.primaryApprasier"},{"hidden":"","readOnly":true,"id":"LenderName","label":"@lang.['ln4','Lender Name']","type":"input","value":"@pageContext.lenderId[0].label"},{"hidden":"","readOnly":true,"id":"reportType","label":"@lang.['rt01','Report Type']","type":"input","value":"@pageContext.reportType"},{"hidden":"","readOnly":true,"id":"loanType","label":"@lang.['lt1','Loan Type']","type":"input","value":"@pageContext.loanType"},{"hidden":"","readOnly":true,"id":"contractValue","label":"@lang.['cv1','Contract Value']","type":"input","value":"@pageContext.contractValue"},{"hidden":"","readOnly":true,"id":"tags","label":"@lang.['t01','Tags']","type":"input","value":"@pageContext.tags"},{"hidden":"","readOnly":true,"id":"gla","label":"@lang.['g02','GLA']","type":"input","value":"@pageContext.gla"},{"hidden":"","readOnly":true,"id":"complex","label":"@lang.['c02','Complex']","type":"input","value":"@pageContext.complex"},{"hidden":"","readOnly":true,"id":"rural","label":"@lang.['r02','Rural']","type":"input","value":"@pageContext.rural"},{"hidden":"","readOnly":true,"id":"historical","label":"@lang.['h01','Historical']","type":"input","value":"@pageContext.historical"}],"id":"section_6136","label":"@lang.['ad5','Anow Data']","type":"section","title":"section_6136"},{"children":[{"disabled":true,"id":"workOrderTaskId","label":"@lang.['ti02','Task ID']","type":"input","value":"@pageContext.workOrderTaskId"},{"disabled":true,"id":"taskTypeName","label":"@lang.['tt03','Task Type']","type":"input","value":"@pageContext.taskTypeName"},{"disabled":true,"id":"workOrderTaskWorkOrderId","label":"@lang.['woi3','Work Order ID']","type":"input","value":"@pageContext.workOrderId"},{"disabled":true,"id":"workOrderTypeName","label":"@lang.['wot1','Work Order Type']","type":"input","value":"@pageContext.responseData[0].data[0].workOrderTaskData[0].workOrderTaskData.workOrderTypeName"},{"disabled":true,"id":"ZPriorityName","label":"@lang.['p03','Priority']","type":"input","value":"@pageContext.priorityName"},{"disabled":true,"id":"siteName","label":"@lang.['cs','Customer Site']","type":"input","value":"@pageContext.siteName"},{"disabled":true,"inputType":"text","id":"internalNotes","label":"@lang.['ino','Internal Notes (Optional)']","type":"textarea","value":"@pageContext.workOrderTaskAcInternalNotes","placeHolder":"@lang.['ino','Internal Notes (Optional)']"},{"disabled":true,"inputType":"text","id":"workOrderTaskNotes","label":"@lang.['n2','Notes (Optional)']","type":"textarea","value":"@pageContext.workOrderTaskNotes","placeHolder":"@lang.['en','Enter Notes (Optional)']"}],"id":"taskDetails","label":"@lang.['td02','Task Details']","type":"section"},{"children":[{"children":[{"children":[{"isRequired":true,"minDate":"1970-01-01 00:00","readOnly":true,"id":"scheduledStartDate","label":"@lang.['ssd1','Scheduled Start Date']","title":"@lang.['ssd1','Scheduled Start Date']","type":"absoluteDate","value":"@pageContext.scheduledStartDateAbsolute","placeHolder":"@lang.['sd8','Select date']"}],"flex":"3","type":"column"},{"children":[{"isRequired":true,"minDate":"1970-01-01 00:00","readOnly":true,"id":"scheduledEndDate","label":"@lang.['sed1','Scheduled End Date']","title":"@lang.['sed1','Scheduled End Date']","type":"absoluteDate","value":"@pageContext.scheduledEndDateAbsolute","placeHolder":"@lang.['sd8','Select date']"}],"flex":"3","type":"column"}],"id":"scheduledStartEndDateRow","type":"row"},{"children":[{"children":[{"isRequired":true,"readOnly":true,"id":"scheduledStartTime","label":"@lang.['sst','Scheduled Start Time']","title":"@lang.['sst','Scheduled Start Time']","type":"absoluteTime","value":"@pageContext.scheduledStartTimeAbsolute","placeHolder":"@lang.['st1','Select time']"}],"flex":"3","type":"column"},{"children":[{"isRequired":true,"readOnly":true,"id":"scheduledEndTime","label":"@lang.['set1','Scheduled End Time']","title":"@lang.['set1','Scheduled End Time']","type":"absoluteTime","value":"@pageContext.scheduledEndTimeAbsolute","placeHolder":"@lang.['st1','Select time']"}],"flex":"3","type":"column"}],"id":"scheduledStartEndTimeRow","type":"row"},{"hidden":"@jslib.isAppointmentWindowHidden","children":[{"children":[{"readOnly":true,"id":"appointmentWindowStart","label":"@lang.['aws','Appointment Window Start']","title":"@lang.['aws','Appointment Window Start']","type":"datetime","value":"@pageContext.workOrderTaskAppointmentWindowStartDate"}],"flex":"3","type":"column"},{"children":[{"readOnly":true,"id":"appointmentWindowEnd","label":"@lang.['awe','Appointment Window End']","title":"@lang.['awe','Appointment Window End']","type":"datetime","value":"@pageContext.workOrderTaskAppointmentWindowEndDate"}],"flex":"3","type":"column"}],"id":"appointmentWindowRow","type":"row"},{"readOnly":true,"id":"workOrderTaskEstimatedDuration","label":"@lang.['etd1','Estimated Task Duration (Minutes)']","type":"input","value":"@pageContext.workOrderTaskEstimatedDurationMinutes"}],"id":"originalSchedule","label":"@lang.['os','Original Schedule']","type":"collapseSection"},{"children":[{"id":"updateScheduleBreakdown","label":"","type":"dataGrid","jsonDef":{"actionOnLoad":["@actions.initialData","@actions.enableDataGrid"],"pageContextConfig":{"enable":true,"isPaginationReqd":false,"tableData":{"source":"@pageContext.taskScheduleBreakdown"}},"isScrollAble":false,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{},"jslib":{},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['sb1','Schedule Breakdown']","children":[]},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSelectable":false,"actions":[{"name":"enableDataGrid","type":"script","actionDef":"function(pageContext){pageContext.enable=true;}"},{"name":"initialData","type":"script","actionDef":"function (pageContext) { pageContext.initialworkOrderTaskId = pageContext.workOrderTaskId; pageContext.initialWorkOrderTaskTaskTypeId = pageContext.workOrderTaskTaskTypeId; pageContext.initialtaskTypeEstimatedDuration = pageContext.workOrderTaskEstimatedDuration; pageContext.initialSiteId = pageContext.workOrderTaskSiteId; pageContext.initialSiteAddress = pageContext.siteAddress; pageContext.initialWorkOrderTaskNotes = pageContext.workOrderTaskNotes; pageContext.initialWorkOrderTaskScheduledDate = pageContext.workOrderTaskScheduledDate; pageContext.workOrderTaskTaskTypeId = pageContext.workOrderTaskTaskTypeId; pageContext.initialWorkOrderTaskService = pageContext.workOrderTaskService; pageContext.taskTypeService = ''; if (typeof pageContext.hideDataGrid === 'undefined' || pageContext.hideDataGrid === ''){pageContext.hideDataGrid = true;} "}],"tableHeader":[{"name":"@lang.['sd01','Scheduled Date']","options":{"type":"date","showLabel":true},"key":"startDate"},{"name":"@lang.['st7','Start Time']","options":{"type":"time","showLabel":true},"key":"startDate"},{"name":"@lang.['et02','End Time']","options":{"type":"time","showLabel":true},"key":"endDate"},{"name":"@lang.['dh1','Duration(In Hours)']","options":{"showLabel":true},"key":"durationInHours"}],"searchKeys":[]}}],"label":"","id":"taskScheduleBreakdown","type":"section","transparent":true},{"hidden":"@jslib.isActivityHidden","children":[{"children":[{"children":[{"isRequired":true,"minDate":"1970-01-01 00:00","readOnly":true,"id":"actualStartDate","label":"@lang.['asd','Actual Start Date']","title":"@lang.['asd','Actual Start Date']","type":"absoluteDate","value":"@pageContext.actualStartDateAbsolute","placeHolder":"@lang.['sd8','Select date']"}],"flex":"3","type":"column"},{"children":[{"isRequired":true,"minDate":"1970-01-01 00:00","readOnly":true,"id":"actualEndDate","label":"@lang.['aed','Actual End Date']","title":"@lang.['aed','Actual End Date']","type":"absoluteDate","value":"@pageContext.actualEndDateAbsolute","placeHolder":"@lang.['sd8','Select date']"}],"flex":"3","type":"column"}],"id":"actualStartEndDateRow","type":"row"},{"children":[{"children":[{"isRequired":true,"readOnly":true,"id":"actualStartTime","label":"@lang.['ast1','Actual Start Time']","title":"@lang.['ast1','Actual Start Time']","type":"absoluteTime","value":"@pageContext.actualStartTimeAbsolute","placeHolder":"@lang.['st1','Select time']"}],"flex":"3","type":"column"},{"children":[{"isRequired":true,"readOnly":true,"id":"actualEndTime","label":"@lang.['aet','Actual End Time']","title":"@lang.['aet','Actual End Time']","type":"absoluteTime","value":"@pageContext.actualEndTimeAbsolute","placeHolder":"@lang.['st1','Select time']"}],"flex":"3","type":"column"}],"id":"actualStartEndTimeRow","type":"row"},{"readOnly":true,"id":"actualTaskDuration","label":"@lang.['atd','Actual Task Duration (Minutes)']","type":"input","value":"@pageContext.actualTaskDuration"}],"id":"actualSchedule","label":"@lang.['as','Actual Schedule']","type":"collapseSection"},{"hidden":"@jslib.istravelDetailsHidden","children":[{"readOnly":true,"id":"startTravelAt","title":"@lang.['sta','Started travelling at']","type":"datetime","value":"@pageContext.startTravelAt"},{"readOnly":true,"id":"transportMode","label":"@lang.['mot','Mode of Transport']","type":"input","value":"@pageContext.transportMode"},{"readOnly":true,"id":"estimatedArrivalTime","title":"@lang.['etoaacs','Estimated Time of Arrival at Customer Site']","type":"datetime","value":"@pageContext.estimatedArrivalTime","hoverText":{"title":"@lang.['cbotmotubtaa','Calculated based on the Mode of Transport used by the Technician']"}},{"hidden":"@jslib.isShowActualStartTime","readOnly":true,"id":"actualArrivalTime","title":"@lang.['atoaacacs','Actual Time of Arrival and Check In at Customer Site']","type":"datetime","value":"@pageContext.actualStartTime"},{"readOnly":true,"id":"startedTravelFrom","label":"@lang.['stf2','Started travelling from']","type":"input","value":"@pageContext.startAddress"},{"readOnly":true,"id":"customerSite","label":"@lang.['cs','Customer Site']","type":"input","value":"@pageContext.siteName"},{"readOnly":true,"id":"endAddress","label":"@lang.['a20','Address']","type":"input","value":"@pageContext.siteAddress"}],"label":"@lang.['td2','Travel Details']","id":"taskTravelDetails","type":"collapseSection"},{"hidden":"@jslib.isDependencyOverrideHidden","children":[{"readOnly":true,"id":"workOrderTaskOverrideReason","label":"@lang.['rfopd','Reason for overriding pending dependency']","type":"input","value":"@pageContext.workOrderTaskOverrideReason"},{"readOnly":true,"id":"workOrderTaskOverrideComment","label":"@lang.['c4','Comments']","type":"input","value":"@pageContext.workOrderTaskOverrideComment"}],"id":"dependencyOverride","label":"@lang.['do','Dependency Override']","type":"section"},{"hidden":"@jslib.isHiddenDependencyDatagrid","children":[{"label":"dataGrid_4123","id":"dependenciesDataGrid","type":"dataGrid","jsonDef":{"pageContextConfig":{"enable":true,"isPaginationReqd":false,"tableData":{"source":"@pageContext.taskDependencyData"}},"isScrollAble":true,"tableWidth":"60rem","jslib":{},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['td3','Task Dependencies']"},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSelectable":false,"dataSource":[],"actions":[],"tableHeader":[{"name":"@lang.['t7','Tasks']","options":{"flex":0.8,"showLabel":true},"key":"taskDependencyPrecedentTask"},{"name":"@lang.['c26','Condition']","options":{"flex":0.6,"sortOrder":"ASC","sortable":false,"showLabel":true},"key":"taskDependencyEnforceAllDependency"},{"name":"@lang.['s','Status']","options":{"flex":0.55,"sortOrder":"ASC","sortable":false,"showLabel":true},"key":"taskDependencyPrecedentStatusName"},{"name":"@lang.['dt5','Dependent Tasks']","options":{"flex":0.8,"showLabel":true},"key":"taskDependencyDependentTask"},{"name":"@lang.['ds3','Dependent Status']","options":{"flex":0.55,"sortOrder":"ASC","sortable":false,"showLabel":true},"key":"taskDependencyDependentStatusName"}],"searchKeys":[]}}],"id":"dependencies","label":"@lang.['d27','Dependencies']","type":"section","transparent":true}],"label":"@lang.['td02','Task Details']","id":"tab_2985","type":"tab"},{"hidden":"@jslib.isWorkOrderTaskCancelledHidden","children":[{"children":[{"minDate":"1970-01-01 12:00","disabled":true,"id":"workOrderTaskCancelledOn","label":"datetime_116","title":"@lang.['co1','Cancelled On']","type":"datetime","value":"@pageContext.workOrderTaskCancelledDate"},{"disabled":true,"id":"workOrderTaskCancelledBy","label":"@lang.['cb','Cancelled By']","placeholder":"@lang.['cb','Cancelled By']","type":"input","value":"@pageContext.workOrderTaskCancelledBy"},{"disabled":true,"id":"workOrderTaskCancellationReason","label":"@lang.['cr','Cancellation Reason']","placeholder":"@lang.['er1','Enter reason']","type":"input","value":"@pageContext.workOrderTaskCancellationReasonData"},{"disabled":true,"inputType":"text","id":"cancellationNotes","label":"@lang.['n3','Notes']","type":"textarea","value":"@pageContext.workOrderTaskCancellationNotes","placeHolder":"@lang.['en2','Enter notes']"}],"id":"cancellationsResult","label":"section_4863","type":"section"}],"label":"@lang.['cr2','Cancellation Result']","id":"tab_8412","type":"tab"},{"children":[{"children":[{"disabled":true,"id":"customerCompanyName","label":"@lang.['c16','Customer']","type":"input","value":"@pageContext.customerCompanyName"},{"disabled":true,"id":"customerContactPerson","label":"@lang.['cpn','Contact Person Name']","type":"input","value":"@pageContext.contactName"},{"disabled":true,"id":"customerContactTitle","label":"@lang.['ct3','Contact Title']","type":"input","value":"@pageContext.responseData[0].data[0].workOrderTaskData[0].workOrderTaskData.customerContactTitle"},{"disabled":true,"id":"customerContactPhone","label":"@lang.['cp','Contact Phone']","type":"phoneNumber","value":"@pageContext.responseData[0].data[0].workOrderTaskData[0].workOrderTaskData.customerContactPhone"},{"disabled":true,"id":"customerContactEmail","label":"@lang.['ce','Contact Email']","type":"input","value":"@pageContext.responseData[0].data[0].workOrderTaskData[0].workOrderTaskData.customerContactEmail"}],"id":"customer","label":"@lang.['cd3','Customer Details']","type":"section"},{"children":[{"disabled":true,"id":"siteName","label":"@lang.['cs','Customer Site']","type":"input","value":"@pageContext.siteName"},{"disabled":true,"id":"siteAddress","label":"@lang.['a20','Address']","type":"address","value":"@pageContext.address"},{"disabled":true,"id":"siteRegion","label":"@lang.['m12','Market']","type":"input","value":"@pageContext.regionName"},{"containerElementHeight":"30rem","defaultZoom":17,"preserveViewport":false,"location":{"children":[{"dataType":"label","id":"locationText","type":"text","value":"@pageContext.address"}],"coordinates":"@jslib.getLocationCoordinates","icon":"https://cdn.zeplin.io/5be3ee39a464fd7e89ffaaa0/assets/57BF1B12-69E2-4E77-881C-A53900EB4260.svg","type":"Point"},"id":"mapForShowStatic","label":"Map","type":"map","renderType":"location","mapElementHeight":"100%","mapJson":{}}],"id":"location","label":"@lang.['l3','Location']","type":"section"}],"label":"@lang.['sd3','Site Details']","id":"tab_2112","type":"tab"},{"hidden":false,"children":[{"hidden":"@jslib.isAssignedCrewHidden","children":[{"readOnly":true,"id":"assignedCrew","label":"@lang.['ac1','Assigned Crew']","type":"input","value":"@pageContext.crewName"}],"id":"crewName","label":"section_9545","type":"section"},{"hidden":"@jslib.isAssignedUserHidden","children":[{"readOnly":true,"id":"assignee","label":"@lang.['a4','Assignee']","type":"input","value":"@pageContext.userName"},{"readOnly":true,"id":"phoneNumber","label":"@lang.['pn','Phone Number']","type":"input","value":"@pageContext.userPhoneNumber"},{"readOnly":true,"id":"email","label":"@lang.['e4','Email']","type":"input","value":"@pageContext.userEmail"}],"id":"singleAttendance","label":"@lang.['ca','Current Assignee']","type":"section"},{"hidden":"@jslib.isAssignedCrewHidden","children":[{"label":"dataGrid_5882","id":"crewMembers","type":"dataGrid","jsonDef":{"isScrollAble":true,"searchAllowed":true,"tableWidth":"80rem","searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsVisiblePurple","hidden":{"checkInType":[false]},"name":"@lang.['va1','View Attendance']","tooltip":"@lang.['va1','View Attendance']","icon":"@iconlib.ActionsVisibleGrey","actionOnClick":["@actions.openViewCrewDataSidePanel"],"type":"buttonIcon"}]},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSync":true,"tableHeader":[{"name":"@lang.['n123','Name']","options":{"flex":1,"showLabel":true},"key":"userName"},{"name":"@lang.['c27','Crew']","options":{"flex":1,"showLabel":true},"key":"crewName"},{"name":"@lang.['e4','Email']","options":{"flex":1.5,"showLabel":true},"key":"userEmail"},{"name":"@lang.['pn','Phone Number']","options":{"flex":1,"showLabel":true},"key":"userPhoneNumber"},{"name":"@lang.['ci03','Check In']","options":{"flex":1,"type":"dateTime","showLabel":true},"key":"checkIn"},{"name":"@lang.['co03','Check Out']","options":{"flex":1,"type":"dateTime","showLabel":true},"key":"checkOut"},{"name":"@lang.['r8','Role']","options":{"flex":1,"showLabel":true},"key":"crewRole"},{"name":"@lang.['mci','Manual Check In']","options":{"flex":1,"showLabel":true},"key":"manualCheckIn"},{"name":"@lang.['cit','Check In Type']","options":{"hidden":true,"flex":1,"showLabel":false},"key":"checkInType"}],"dataToBeSent":{"apiResponseParams":["count"],"processId":"workOrderTaskCrewDataWF","apiResponseFormat":true,"contextVar":{"responseGrid":"crewAttendance","workOrderTaskId":"@pageContext.workOrderTaskId"},"apiResponseObject":"crewAttendance"},"dataSourceId":"process/start","sourceType":"api","header":{"filterAllowed":true,"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['cm','Crew Members']"},"isSelectable":false,"updateAllowed":true,"actions":[{"name":"openViewCrewDataSidePanel","type":"openPanel","pageId":"97DNWZDQMO"}],"searchKeys":["userName"]}}],"id":"crewMembers","label":"@lang.['a10','Assignees']","type":"section","transparent":true},{"hidden":"@jslib.isAssignedUserHidden","children":[{"label":"","id":"singleTechAttendanceHistoryDataGrid","type":"dataGrid","jsonDef":{"isScrollAble":true,"searchAllowed":true,"tableWidth":"80rem","searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsVisiblePurple","hidden":{"checkInType":[false]},"name":"@lang.['vd','View Details']","tooltip":"@lang.['vd','View Details']","icon":"@iconlib.ActionsVisibleGrey","actionOnClick":["@actions.openCheckInDetailsNNSP"],"type":"buttonIcon"}]},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSync":true,"tableHeader":[{"name":"@lang.['ci03','Check In']","options":{"flex":1,"type":"dateTime","showLabel":true},"key":"checkInTime"},{"name":"@lang.['co03','Check Out']","options":{"flex":1,"type":"dateTime","showLabel":true},"key":"checkOutTime"},{"name":"@lang.['au1','Address Updated']","options":{"flex":1,"showLabel":true},"key":"addressUpdated"},{"name":"@lang.['ul','Updated Location']","options":{"flex":1,"showLabel":true},"key":"location"},{"name":"@lang.['n123','Name']","options":{"flex":1,"showLabel":true},"key":"userName"},{"name":"@lang.['e4','Email']","options":{"flex":1.5,"showLabel":true},"key":"userEmail"},{"name":"@lang.['pn','Phone Number']","options":{"flex":1,"showLabel":true},"key":"userPhoneNumber"},{"name":"@lang.['cit','Check In Type']","options":{"hidden":true,"flex":1,"showLabel":false},"key":"checkInType"}],"dataToBeSent":{"apiResponseParams":["count"],"processId":"workOrderTaskCrewDataWF","apiResponseFormat":true,"contextVar":{"responseGrid":"currentAssigneeAddendance","workOrderTaskId":"@pageContext.workOrderTaskId"},"apiResponseObject":"currentAssigneeAddendance"},"dataSourceId":"process/start","sourceType":"api","header":{"filterAllowed":true,"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['ah2','Attendance History']"},"isSelectable":false,"updateAllowed":true,"actions":[{"name":"openCheckInDetailsNNSP","type":"openPanel","pageId":"B0F4A2FXUE"}],"searchKeys":["userName"]}}],"id":"currentAssigneeAttendance","label":"@lang.['aoca','Attendance Of Current Assignees']","type":"section","transparent":true},{"hidden":"@jslib.isPreviousAssigneeHidden","children":[{"label":"dataGrid_437","id":"previousAssigneeGridData","type":"dataGrid","jsonDef":{"isScrollAble":true,"searchAllowed":true,"tableWidth":"80rem","searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsVisiblePurple","hidden":{"checkInType":[false]},"name":"@lang.['va1','View Attendance']","tooltip":"@lang.['va1','View Attendance']","icon":"@iconlib.ActionsVisibleGrey","actionOnClick":["@actions.openCheckInDetailsNNSP"],"type":"buttonIcon"}]},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSync":true,"tableHeader":[{"name":"@lang.['n123','Name']","options":{"flex":1,"showLabel":true},"key":"userName"},{"name":"@lang.['e4','Email']","options":{"flex":1.5,"showLabel":true},"key":"userEmail"},{"name":"@lang.['pn','Phone Number']","options":{"flex":1,"showLabel":true},"key":"userPhoneNumber"},{"name":"@lang.['ci03','Check In']","options":{"flex":1,"type":"dateTime","showLabel":true},"key":"checkInTime"},{"name":"@lang.['co03','Check Out']","options":{"flex":1,"type":"dateTime","showLabel":true},"key":"checkOutTime"},{"name":"@lang.['au1','Address Updated']","options":{"flex":1,"showLabel":true},"key":"addressUpdated"},{"name":"@lang.['cit','Check In Type']","options":{"hidden":true,"flex":1,"showLabel":false},"key":"checkInType"}],"dataToBeSent":{"apiResponseParams":["count"],"processId":"workOrderTaskCrewDataWF","apiResponseFormat":true,"contextVar":{"responseGrid":"previousAssignees","workOrderTaskId":"@pageContext.workOrderTaskId"},"apiResponseObject":"previousAssignees"},"dataSourceId":"process/start","sourceType":"api","header":{"filterAllowed":true,"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['pa2','Previous Assignees']"},"isSelectable":false,"updateAllowed":true,"actions":[{"name":"openCheckInDetailsNNSP","type":"openPanel","pageId":"97DNWZDQMO"}],"searchKeys":["userName"]}}],"id":"previousAssignee","label":"@lang.['pa2','Previous Assignees']","type":"section","transparent":true}],"label":"@lang.['a11','Attendance']","id":"tab_1298","type":"tab"},{"hidden":"@jslib.isIncidentReportHidden","children":[{"children":[{"id":"incidentReports","label":"dataGrid_3439","type":"dataGrid","jsonDef":{"isScrollAble":true,"searchAllowed":false,"tableWidth":"70rem","rowActions":{"children":[{"activeIcon":"@iconlib.ActionsVisiblePurple","name":"@lang.['t1','taskView']","icon":"@iconlib.ActionsVisibleGrey","tooltip":"@lang.['v1','View']","actionOnClick":["@actions.openIncidentDetailsSidePanel"],"type":"buttonIcon"}]},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSync":true,"tableHeader":[{"name":"@lang.['it','Incident Type']","options":{"flex":1.5,"sortable":false,"showLabel":true},"key":"incidentType","primaryKey":true},{"name":"@lang.['r5','Reason']","options":{"flex":1.5,"sortable":false,"showLabel":true},"key":"travelIncidentReason"},{"name":"@lang.['st9','Submission Time']","options":{"flex":1.5,"sortable":false,"type":"dateTime","showLabel":true},"key":"reportIssueCapturedTime"},{"name":"@lang.['a04','Action']","options":{"flex":1.5,"sortable":false,"showLabel":true},"key":"reportIssueType"},{"name":"@lang.['dm','Delay (In Minutes)']","options":{"flex":1.5,"sortable":false,"showLabel":true},"key":"taskDelay"}],"dataToBeSent":{"apiResponseParams":["count"],"processId":"workorderTaskIncidentReportWF","apiResponseFormat":true,"contextVar":{"workOrderTaskId":"@pageContext.workOrderTaskId"},"apiResponseObject":"incidentReportsData"},"dataSourceId":"process/start","sourceType":"api","header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['il','Incident Logs']"},"isSelectable":false,"updateAllowed":true,"actions":[{"name":"openIncidentDetailsSidePanel","type":"openPanel","pageId":"UGWILUCH1E"}],"searchKeys":[]}}],"id":"incidentReports","label":"section_5182","type":"section","transparent":true}],"label":"@lang.['il','Incident Logs']","id":"tab_1398","type":"tab"},{"children":[{"children":[{"id":"workOrderTaskLogs","label":"","type":"dataGrid","jsonDef":{"isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"tableWidth":"50rem","rowActions":{},"gridRefreshId":"logsGridId","emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['ts03','Time Stamp']","options":{"flex":1.5,"sortOrder":"DESC","sortable":true,"type":"datetime","showLabel":true},"key":"workOrderTaskLogLogDate"},{"name":"@lang.['e10','Event']","options":{"flex":1.5,"sortOrder":"DESC","sortable":true,"showLabel":true},"key":"listOptionAnswerAnswerOptionText"},{"name":"@lang.['mb1','Modified By']","options":{"flex":1.5,"sortOrder":"DESC","sortable":true,"showLabel":true},"key":"userName"},{"name":"@lang.['d03','Details']","options":{"flex":2,"showLabel":true},"key":"workOrderTaskLogDetails"},{"name":"@lang.['i','id']","options":{"hidden":true,"showLabel":false},"key":"workOrderTaskLogId","primaryKey":true}],"dataToBeSent":{"filter":"{$workOrderTaskLog.workOrderTaskId} = {@selectedWorkOrderTaskId} AND {$listOptionAnswer.listOptionId}='workOrderTaskLogEvents'","models":["workOrderTaskLog","User","listOptionAnswer"],"columns":{"workOrderTaskLogLogDate":"workOrderTaskLog.logDate","workOrderTaskLogId":"workOrderTaskLog.id","workOrderTaskLogDetails":"workOrderTaskLog.details","listOptionAnswerAnswerOptionText":"listOptionAnswer.answerOptionText","userName":"User.name"},"inputs":{"selectedWorkOrderTaskId":"@pageContext.workOrderTaskId"},"orderBy":"workOrderTaskLogLogDate DESC","outerJoinOnModel":"workOrderTaskLog","links":{"listOptionAnswer":"workOrderTaskLog","workOrderTaskLog":"User"},"translate":true},"dataSourceId":"query/read","jslib":{},"rowTextLength":40,"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['tl','Task Logs']","children":[]},"isSelectable":false,"dataSource":[],"actions":[],"searchKeys":["listOptionAnswerAnswerOptionText","userName"],"multiSelect":false}}],"label":"","id":"workOrderTaskLogSection","type":"section","transparent":true}],"label":"@lang.['l30','Logs']","id":"tab_7480","type":"tab"}],"label":"tab_3206","id":"tab_8367","type":"tab"}]},"actions":[{"endPoint":"event/start","name":"fireProcessEventForTaskSchedulingAndAssignFetchData","outputVarMap":{"data":"@pageContext.workOrderTaskData"},"type":"api","continueOnError":true,"actionDef":{"data":[{"eventId":"NN3OQ58980","inputVar":{},"apiResponseFormat":true,"contextVar":{"statusId":"@pageContext.status","workOrderTaskId":"@pageContext.workOrderTaskId","workOrderId":"@pageContext.workOrderId","workOrderTypeName":"@pageContext.workOrderTypeName","viewTravelStatus":"@pageContext.viewTravelStatus"}}]}},{"name":"clearPageContext","type":"clearPageContext"},{"name":"closePanel","type":"closePanel"},{"name":"openPreviousPanel","type":"backPanel","pageId":"8L04RP7A7D"},{"name":"openApproveNSP","type":"openPanel","pageId":"0650A2FJ18"},{"endPoint":"event/start","name":"fireProcessEventForTaskReviewFetchData","outputVarMap":{"data":"@pageContext.responseData"},"type":"api","actionDef":{"data":[{"eventId":"LHCUF48WQB","contextVar":{"statusId":"@pageContext.status","workOrderTaskId":"@pageContext.workOrderTaskId","workOrderId":"@pageContext.workOrderId","workOrderTypeName":"@pageContext.workOrderTypeName","viewTravelStatus":"@pageContext.viewTravelStatus"}}]}},{"endPoint":"event/start","name":"fireProcessEventForWorkOrderTaskDelete","type":"api","actionDef":{"data":[{"eventId":"BM58GU7UNT","contextVar":{"workOrderTask":{"recver":"@pageContext.workOrderTaskRecver","id":"@pageContext.workOrderTaskId"},"subAction":"deleteWorkOrderTask"}}]}},{"subTitle":"@lang.['aysywtctt','Are you sure you want to cancel this task?']","name":"cancelTaskModal","options":[{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.closeModal","@actions.openCancelTaskNestedSidePanel"],"type":"button","title":"@lang.['yp','Yes, Proceed']"}],"type":"openModal","title":"@lang.['ct4','Cancel Task']"},{"name":"setActionApproveTask","type":"script","actionDef":"function(pageContext) {pageContext.taskReviewResult = 'approve';}"},{"name":"setActionRejectTask","type":"script","actionDef":"function(pageContext) {pageContext.taskReviewResult = 'reject';}"},{"name":"refreshDataGrid","type":"refreshDataGrid"},{"name":"setCheckListNames","type":"script","actionDef":"function(pageContext) { pageContext.checkListNames = []; pageContext.checkListValues = []; pageContext.workOrderTaskResult = pageContext.responseData[0].data[0].workOrderTaskData[0].workOrderTaskData.workOrderTaskResult; pageContext.checkListNamesDoop = pageContext.workOrderTaskResult[0].acCheckList; for (var j = 0; j < pageContext.checkListNamesDoop.length; j++) { var singleName = pageContext.checkListNamesDoop[j].item; pageContext.checkListNames.push(singleName); pageContext.singleValue = pageContext.checkListNamesDoop[j].isChecked; if (pageContext.singleValue == 'No') { pageContext.singleValues = false; } else { pageContext.singleValues = true; } var obj = {}; obj[singleName] = pageContext.singleValues; pageContext.checkListValues.push(obj);} }"},{"name":"setDateAndChecklist","type":"script","actionDef":"function(pageContext) { if ((typeof pageContext.workOrderTaskResult !== 'undefined' && pageContext.workOrderTaskResult !== '' && pageContext.workOrderTaskResult.length > 0) && (typeof pageContext.workOrderTaskResult[0].acUploadReport !== 'undefined' && pageContext.workOrderTaskResult[0].acUploadReport !== '')) { pageContext.workOrderRequestedDateOnEdit = pageContext.workOrderTaskResult[0].acUploadReport[0].date; pageContext.latitude1 = pageContext.workOrderTaskResult[0].acUploadReport[0].latitude; pageContext.longitude1 = pageContext.workOrderTaskResult[0].acUploadReport[0].longitude; } else { pageContext.workOrderRequestedDateOnEdit = '-'; pageContext.latitude1 = '-'; pageContext.longitude1 = '-'; pageContext.checkListNames = ['Download Report to your iPad', 'Arrive at property/greet homeowner', 'Measure the exterior of the home (including porches,patios, any other building improvements)', 'Take exterior photos (See attached guide for full list)', 'Measure other interior spaces, if applicable(2nd, 3rd Floors, Basement, etc)', 'Take interior photos (See attached guide for full list)', 'Interview homeowner / Fill out checklist', 'Drive comps and get photos', 'Upload Report to cloud', 'Change status in Anow', 'Look for moments to provide Unexpected Service']; } }"},{"name":"processResponseData","type":"script","actionDef":"function(pageContext) { console.log('Hi Console'); pageContext.selectedRowIds[0].isChecked = true; for (var i = 0; i < pageContext.responseData[0].data[0].workOrderTaskData.length; i++) { console.log('For loop 1'); if (typeof pageContext.responseData[0].data[0].workOrderTaskData[i].taskDependencyData !== 'undefined' && pageContext.responseData[0].data[0].workOrderTaskData[i].taskDependencyData.length > 0) { pageContext.taskDependencyData = pageContext.responseData[0].data[0].workOrderTaskData[i].taskDependencyData; } if (typeof pageContext.responseData[0].data[0].workOrderTaskData[i].previousAssignees !== 'undefined' && pageContext.responseData[0].data[0].workOrderTaskData[i].previousAssignees.length > 0) { pageContext.previousAssignees = pageContext.responseData[0].data[0].workOrderTaskData[i].previousAssignees; } if (typeof pageContext.responseData[0].data[0].workOrderTaskData[i].taskScheduleBreakdown != 'undefined' && pageContext.responseData[0].data[0].workOrderTaskData[i].taskScheduleBreakdown.length > 0) { pageContext.taskScheduleBreakdown = pageContext.responseData[0].data[0].workOrderTaskData[i].taskScheduleBreakdown; } if (typeof pageContext.responseData[0].data[0].workOrderTaskData != 'undefined' && pageContext.responseData[0].data[0].workOrderTaskData.length > 0) { pageContext.workOrderTaskData = pageContext.responseData[0].data[0].workOrderTaskData; } if (typeof pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData !== 'undefined' && pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData !== '') { if (typeof pageContext.responseData !== 'undefined' && pageContext.responseData !== '') { if (Array.isArray(pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskResult) && pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskResult.length > 0) { pageContext.workOrderTaskResult = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskResult; if (typeof pageContext.workOrderTaskResult[0].overrideReason !== 'undefined' && pageContext.workOrderTaskResult[0].overrideReason !== '') { pageContext.workOrderTaskOverrideReason = pageContext.workOrderTaskResult[0].overrideReason.reason; pageContext.workOrderTaskOverrideComment = pageContext.workOrderTaskResult[0].overrideReason.comment; } } if (typeof pageContext.workOrderTaskResult !== 'undefined' && pageContext.workOrderTaskResult.length > 0) { for (var j = 0; j < pageContext.workOrderTaskResult.length; j++) { if (typeof pageContext.workOrderTaskResult[j].submitType !== 'undefined' && pageContext.workOrderTaskResult[j].submitType !== '' && pageContext.workOrderTaskResult[j].submitType === 'endTask') { pageContext.customerSignature = pageContext.workOrderTaskResult[j].customerSignature; if (typeof pageContext.workOrderTaskResult[j].approvedBy !== 'undefined') { pageContext.approvedBy = pageContext.workOrderTaskResult[j].approvedBy; } else { pageContext.approvedBy = '-'; } } } } else { pageContext.approvedBy = '-'; pageContext.customerSignature = ''; } pageContext.workOrderId = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskWorkOrderId; pageContext.siteId = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.siteId; pageContext.listOption = pageContext.responseData[0].data[0].listOptionData; pageContext.statusId = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskStatusId; pageContext.workOrderTaskId = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskId; pageContext.incidentDetails = (pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.incidentDetails) ? pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.incidentDetails : ''; pageContext.taskTypeName = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.taskTypeName; pageContext.workOrderTaskWorkOrderId = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskWorkOrderId; pageContext.workOrderTypeName = pageContext.responseData[0].data[0].workOrderTaskData[0].workOrderTaskData.workOrderTypeName; pageContext.ZPriorityName = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.ZPriorityName; pageContext.siteName = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.siteName; pageContext.workOrderTaskNotes = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskNotes; pageContext.workOrderTaskAcInternalNotes = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskAcInternalNotes; pageContext.workOrderTaskDueDate = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskDueDate; pageContext.workOrderCalendarId = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderCalendarId; pageContext.workOrderTaskEstimatedDuration = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskEstimatedDuration; if (typeof pageContext.workOrderTaskEstimatedDuration !== 'undefined' && pageContext.workOrderTaskEstimatedDuration !== '') { pageContext.workOrderTaskEstimatedDurationMinutes = pageContext.workOrderTaskEstimatedDuration * 60; } pageContext.workOrderTaskActualStartTime = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskActualStartTime; pageContext.workOrderTaskCompletedDate = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskCompletedDate; pageContext.workOrderTaskService = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskService; pageContext.actualTaskDuration = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.actualTaskDuration; console.log('Hello log'); pageContext.customerCompanyName = pageContext.responseData[0].data[0].workOrderTaskData[0].workOrderTaskData.customerCompanyName; pageContext.customerContactPerson = pageContext.responseData[0].data[0].workOrderTaskData[0].workOrderTaskData.customerContactPerson; pageContext.customerContactTitle = pageContext.responseData[0].data[0].workOrderTaskData[0].workOrderTaskData.customerContactTitle; pageContext.customerContactPhone = pageContext.responseData[0].data[0].workOrderTaskData[0].workOrderTaskData.customerContactPhone; pageContext.customerContactEmail = pageContext.responseData[0].data[0].workOrderTaskData[0].workOrderTaskData.customerContactEmail; pageContext.siteAddress = pageContext.responseData[0].data[0].workOrderTaskData[0].workOrderTaskData.siteAddress; pageContext.siteLongitude = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.siteLongitude; pageContext.siteLatitude = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.siteLatitude; pageContext.workOrderTaskScheduledDate = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskScheduledDate; pageContext.timezoneOffset = new Date().getTimezoneOffset(); pageContext.siteTimezoneOffset = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.siteTimezoneOffset; var addMinutes = function(date) { return (new Date(date.getTime() - (pageContext.timezoneOffset * 60000) - (pageContext.timezoneOffset * 60000))).toISOString().replace('T', ' ').replace('Z', ''); }; if (typeof pageContext.workOrderTaskScheduledDate !== 'undefined' && pageContext.workOrderTaskScheduledDate !== '') { var startDateInAbsolute = addMinutes(new Date(pageContext.workOrderTaskScheduledDate)); pageContext.scheduledStartDateAbsolute = startDateInAbsolute.split(' ')[0]; pageContext.scheduledStartTimeAbsolute = startDateInAbsolute.split(' ')[1]; } if (typeof pageContext.workOrderTaskDueDate !== 'undefined' && pageContext.workOrderTaskDueDate !== '') { var endDateInAbsolute = addMinutes(new Date(pageContext.workOrderTaskDueDate)); pageContext.scheduledEndDateAbsolute = endDateInAbsolute.split(' ')[0]; pageContext.scheduledEndTimeAbsolute = endDateInAbsolute.split(' ')[1]; } if (typeof pageContext.workOrderTaskActualStartTime !== 'undefined' && pageContext.workOrderTaskActualStartTime !== '') { var actualStartInAbsolute = addMinutes(new Date(pageContext.workOrderTaskActualStartTime)); pageContext.actualStartDateAbsolute = actualStartInAbsolute.split(' ')[0]; pageContext.actualStartTimeAbsolute = actualStartInAbsolute.split(' ')[1]; } if (typeof pageContext.workOrderTaskCompletedDate !== 'undefined' && pageContext.workOrderTaskCompletedDate !== '') { var actualEndInAbsolute = addMinutes(new Date(pageContext.workOrderTaskCompletedDate)); pageContext.actualEndDateAbsolute = actualEndInAbsolute.split(' ')[0]; pageContext.actualEndTimeAbsolute = actualEndInAbsolute.split(' ')[1]; } pageContext.workOrderTaskAppointmentBasedFlag = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskAppointmentBasedFlag; pageContext.workOrderTaskAppointmentWindowId = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskAppointmentWindowId; pageContext.workOrderTaskAppointmentWindowStartDate = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskAppointmentWindowStartDate; pageContext.workOrderTaskAppointmentWindowEndDate = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskAppointmentWindowEndDate; pageContext.statusNameColor = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.statusNameColor; pageContext.statusName = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.statusName; pageContext.taskTypeMobileProcessId = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.taskTypeMobileProcessId; pageContext.taskTypeCrewTask = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.taskTypeCrewTask; pageContext.workOrderTaskAssignedToUserId = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskAssignedToUserId; pageContext.workOrderTaskReOpenCount = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskReOpenCount; pageContext.taskTypeWebTask = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.taskTypeWebTask; pageContext.workOrderTaskProcessInstanceId = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskProcessInstanceId; pageContext.activityDetails = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.activityDetails; pageContext.workOrderTaskServicesArray = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskServicesArray; pageContext.workOrderTaskRecver = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskRecver; pageContext.regionName = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.regionName; pageContext.siteCustomerId = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.siteCustomerId; pageContext.siteRegionId = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.siteRegionId; pageContext.workOrderDeadline = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderDeadline; pageContext.hideDataGrid = true; pageContext.workOrderTaskStatusTargetModel = 'workOrderTask'; pageContext.userName = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.userName; pageContext.userPhoneNumber = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.userPhoneNumber; pageContext.userEmail = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.userEmail; pageContext.latitude = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.siteLatitude; pageContext.longitude = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.siteLongitude; pageContext.workOrderTaskTaskTypeId = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskTaskTypeId; pageContext.workOrderPriorityPriority = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderPriorityPriority; pageContext.initialAssignee = pageContext.workOrderTaskAssignedToUserId; pageContext.initialWorkOrderTaskEstimatedDurationMinutes = pageContext.workOrderTaskEstimatedDurationMinutes; pageContext.initialworkOrderTaskEstimatedDuration = pageContext.workOrderTaskEstimatedDuration; pageContext.initialWorkOrderTaskNotes = pageContext.workOrderTaskNotes; pageContext.initialworkOrderTaskAcInternalNotes = pageContext.workOrderTaskAcInternalNotes; if (typeof pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.crewName !== 'undefined') { pageContext.workOrderTaskAssignedToCrewId = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskAssignedToCrewId; pageContext.crewName = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.crewName; pageContext.crewLeadUserName = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.crewName.crewLeadUserName; } if (typeof pageContext.responseData[0].data[0].taskReviewLogData !== 'undefined' && pageContext.responseData[0].data[0].taskReviewLogData !== '' && pageContext.responseData[0].data[0].taskReviewLogData.length > 0) { if (pageContext.status !== 'workOrderTaskPendingReview') { pageContext.taskReviewLogReviewNotes = pageContext.responseData[0].data[0].taskReviewLogData[0].taskReviewLogReviewNotes; } if (pageContext.status === 'workOrderTaskCompleted') { pageContext.taskReviewResult = 'Approve'; } } if (pageContext.taskTypeCrewTask && (typeof pageContext.workOrderTaskAssignedToCrewId !== 'undefined' && pageContext.workOrderTaskAssignedToCrewId !== '')) { pageContext.selectDropdown = []; pageContext.initialAssignee = pageContext.workOrderTaskAssignedToCrewId; pageContext.crewLeadUserId = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.crewLeadUserId; pageContext.selectDropdown.push({ 'value': pageContext.workOrderTaskAssignedToCrewId, 'label': pageContext.crewName }) } else if (typeof pageContext.userName !== 'undefined') { pageContext.selectDropdown = []; pageContext.selectDropdown.push({ 'value': pageContext.workOrderTaskAssignedToUserId, 'label': pageContext.userName }) }; if (pageContext.status === 'workOrderTaskCancelled') { pageContext.workOrderTaskCancellationNotes = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskCancellationNotes; pageContext.workOrderTaskCancellationReasonData = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskCancellationReasonData; pageContext.workOrderTaskCancelledDate = pageContext.responseData[0].data[0].workOrderTaskData[i].workOrderTaskData.workOrderTaskCancelledDate; if (Array.isArray(pageContext.responseData[0].data[0].workOrderTaskCancelled) && pageContext.responseData[0].data[0].workOrderTaskCancelled.length > 0) { pageContext.workOrderTaskCancelledBy = pageContext.responseData[0].data[0].workOrderTaskCancelled[0].cancelledByUserName; } else { pageContext.workOrderTaskCancelledBy = '@lang.[\"a30\",\"Automation\"]'; } } if (typeof pageContext.workOrderTaskScheduledDate == 'undefined') { pageContext.workOrderTaskScheduledDate = ''; } pageContext.currentDate = new Date().toISOString().replace('T', ' ').replace('Z', ''); pageContext.initialWorkOrderTaskScheduledDate = pageContext.workOrderTaskScheduledDate; if (pageContext.status === 'workOrderTaskDispatched' || pageContext.status === 'workOrderTaskInProgress') { pageContext.isEnabled = false; pageContext.currentDate = pageContext.workOrderTaskScheduledDate; } else if (pageContext.action === 'view') { pageContext.isEnabled = true; pageContext.currentDate = pageContext.workOrderTaskScheduledDate; } if (typeof pageContext.siteLatitude !== 'undefined' && typeof pageContext.siteLongitude !== 'undefined') { pageContext.coordinates = [pageContext.siteLatitude, pageContext.siteLongitude]; } else { pageContext.coordinates = [0, 0]; } } } } }"},{"name":"setTimeZoneAndLocale","type":"script","actionDef":"function (pageContext) { pageContext.timeZone = Intl.DateTimeFormat().resolvedOptions().timeZone; pageContext.userLocale = sessionStorage.getItem('locale');}"},{"falseStep":["@actions.fetchTaskProgressDataByServices"],"trueStep":["@actions.fetchTaskProgressDataByDate"],"name":"decisionActionForFilter","type":"decision","actionDef":"function(pageContext){if( typeof pageContext.dropdown !== 'undefined' && pageContext.dropdown !='' && pageContext.dropdown === 'byDate'){return true;} else {return false;}}"},{"name":"viewChange","type":"script","actionDef":"function (pageContext) { if (typeof pageContext.dropdown !== 'undefined' && pageContext.dropdown !== '') { if (pageContext.dropdown === 'byDate') { pageContext.selectedFilterForView = 'byDate'; pageContext.showSelectedServicesGrid = false;} if (pageContext.dropdown === 'byServices') { pageContext.selectedFilterForView = 'byServices'; pageContext.showSelectedServicesGrid = true; pageContext.showInitialEvidenceGrid = false; pageContext.showServicesDeliveredGrid = false; pageContext.showFinalEvidenceGrid=false; } } }"},{"endPoint":"event/start","name":"fetchAllTaskSchedularBreakdownData","outputVarMap":{"data":"@pageContext.taskScheduleBreakdown"},"type":"api","actionDef":{"data":[{"eventId":"workOrderTaskScheduleBreakdownProcessEvent","contextVar":{"calendarId":"@pageContext.workOrderCalendarId","estimatedDuration":"@pageContext.workOrderTaskEstimatedDuration","scheduledStartDate":"@pageContext.workOrderTaskScheduledDate"}}]}},{"name":"openCancelTaskNestedSidePanel","type":"openPanel","pageId":"1RFSG2AF8J"},{"subTitle":"@lang.['aysywtdtttcbu','Are you sure you want to delete this task? This cannot be undone.']","name":"deleteTaskModal","options":[{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.setSubActionDeleteWorkOrderTask","@actions.fireProcessEventForWorkOrderTaskDelete","@actions.closeModal","@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"type":"button","title":"@lang.['d1','Delete']"}],"type":"openModal","title":"@lang.['dt1','Delete Task']"},{"name":"setSubActionDeleteWorkOrderTask","type":"script","actionDef":"function(pageContext){pageContext.subAction='deleteWorkOrderTask';}"},{"async":true,"name":"setTravelDetails","type":"script","actionDef":"function(pageContext) { console.log('a'); for (var j = 0; j < pageContext.responseData[0].data[0].workOrderTaskData.length; j++) { if (typeof pageContext.responseData[0].data[0].workOrderTaskData[j].originAddress !== 'undefined' && pageContext.responseData[0].data[0].workOrderTaskData[j].originAddress !== '') { pageContext.startTravelAt = pageContext.responseData[0].data[0].workOrderTaskData[j].taskData[0].workOrderTaskStartDate; pageContext.estimatedArrivalTime = pageContext.responseData[0].data[0].workOrderTaskData[j].duration; pageContext.startAddress = pageContext.responseData[0].data[0].workOrderTaskData[j].originAddress; pageContext.customerSite = pageContext.responseData[0].data[0].workOrderTaskData[j].taskData[0].siteName; pageContext.endAddress = pageContext.responseData[0].data[0].workOrderTaskData[j].destinationAddress; if (typeof pageContext.responseData[0].data[0].workOrderTaskData[j].taskData[0].workOrderTaskActualStartTime !== 'undefined') { pageContext.actualStartTime = pageContext.responseData[0].data[0].workOrderTaskData[j].taskData[0].workOrderTaskActualStartTime; } else { pageContext.actualStartTime = ''; } pageContext.transportMode = pageContext.responseData[0].data[0].workOrderTaskData[j].taskData[0].workOrderTaskTravelDetails[0].transportMode; if (pageContext.transportMode == undefined || pageContext.transportMode == '') { pageContext.transportMode = '@lang.[\"d20\",\"Driving\"]'; }; if (pageContext.transportMode != undefined && pageContext.transportMode == '{%b1}') { pageContext.transportMode = '@lang.[\"b1\",\"Bicycling\"]'; }; if (pageContext.transportMode != undefined && pageContext.transportMode == '{%d20}') { pageContext.transportMode = '@lang.[\"d20\",\"Driving\"]'; }; if (pageContext.transportMode != undefined && pageContext.transportMode == '{%w4}') { pageContext.transportMode = '@lang.[\"w4\",\"Walking\"]'; }; } } if (pageContext.workOrderTaskResult[0].acDrivingDataGrid.length > 0) { pageContext.workOrderTaskResult[0].acDrivingDataGrid.forEach(function(value) { var b = []; b = value.startLocationCoordinates.split(','); var c = []; c = value.endLocationCoordinates.split(','); pageContext.acDrivingDataGrid = []; pageContext.acDrivingDataGrid.push({ 'distance': value.distance, 'driveTime': value.driveTime, 'endTravelDate': value.endTravelDate, 'startTravelDate': value.startTravelDate, 'driveFromAddress': value.driveFromAddress, 'propertyType': value.propertyType, 'startLatitude': b[0], 'startLongitude': b[1], 'endLongitude': c[1], 'endLatitude': c[0] }) }) } }"},{"async":true,"name":"calculatedActualTaskDuration","type":"script","actionDef":"function (pageContext) {if (typeof pageContext.workOrderTaskCompletedDate !== 'undefined' && pageContext.workOrderTaskCompletedDate !== '' && pageContext.workOrderTaskActualStartTime !== 'undefined' && pageContext.workOrderTaskActualStartTime !== '' && pageContext.workOrderTaskCompletedDate > pageContext.workOrderTaskActualStartTime) { let startDate = new Date(pageContext.workOrderTaskActualStartTime); let completedDate = new Date(pageContext.workOrderTaskCompletedDate); let diffTime = Math.abs(completedDate - startDate); pageContext.actualTaskDuration = Math.ceil(diffTime / (1000 * 60)); } }"},{"endPoint":"process/start","name":"fetchTaskProgressDataByDate","outputVarMap":{"data":"@pageContext.taskProgressDataByDate"},"type":"api","actionDef":{"data":[{"inputVar":{},"processId":"taskSchedulingDispatchedViewTaskProgressByDateWF","apiResponseFormat":true,"contextVar":{"userLocale":"@pageContext.userLocale","workOrderTaskId":"@pageContext.workOrderTaskId","timeZone":"@pageContext.timeZone"}}]}},{"endPoint":"process/start","name":"fetchTaskProgressDataByServices","outputVarMap":{"data":"@pageContext.taskProgressDataByServices"},"type":"api","actionDef":{"data":[{"inputVar":{},"processId":"acTaskSchedulingDispatchedViewTaskProgressByServicesWF","apiResponseFormat":true,"contextVar":{"userLocale":"@pageContext.userLocale","workOrderTaskId":"@pageContext.workOrderTaskId","timeZone":"@pageContext.timeZone"}}]}},{"name":"closeModal","type":"closeModal"},{"name":"enableRecordGrid","type":"script","actionDef":"function(pageContext) { pageContext.acDrivingDataGrid = []; pageContext.enable = true; if ((typeof pageContext.workOrderTaskResult !== 'undefined' && pageContext.workOrderTaskResult !== '' && pageContext.workOrderTaskResult.length > 0) && (typeof pageContext.workOrderTaskResult[0].acDrivingDataGrid !== 'undefined' && pageContext.workOrderTaskResult[0].acDrivingDataGrid !== '')) { if (pageContext.workOrderTaskResult[0].acDrivingDataGrid.length > 0) { pageContext.workOrderTaskResult[0].acDrivingDataGrid.forEach(function(value) { var b = []; b = value.startLocationCoordinates.split(','); var c = []; c = value.endLocationCoordinates.split(','); pageContext.acDrivingDataGrid.push({ 'distance': value.distance, 'driveTime': value.driveTime, 'endTravelDate': value.endTravelDate, 'startTravelDate': value.startTravelDate, 'propertyType': value.propertyType, 'driveFromAddress': value.driveFromAddress, 'startLatitude': b[0], 'startLongitude': b[1], 'endLongitude': c[1], 'endLatitude': c[0] }) }) } } }"},{"name":"fetchacLenderId","outputVarMap":{"data":"@pageContext.lenderId"},"type":"query","actionDef":{"filter":"{$value}={@value}","models":["accLender"],"columns":{"label":"accLender.lenderName","value":"accLender.id"},"inputs":{"value":"@pageContext.acLenderId"}}}]}