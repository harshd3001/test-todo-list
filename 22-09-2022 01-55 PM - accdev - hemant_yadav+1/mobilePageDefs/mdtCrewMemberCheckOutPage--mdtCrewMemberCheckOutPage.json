{"instance_nav":false,"footer":{"leftButton":{"id":"aFootLeft","title":"","enabled":"@js.enableLeftButton"},"rightButton":{"id":"aFootRight","title":"","enabled":0}},"jslib":{"calculateTaskProgress":"function(pageContext){ var taskProgress = 'NA'; var hours; var minutes; var newformat; if (pageContext.dateArray && pageContext.dateArray.length > 0) { if (pageContext.dateArray.length > 1) { if (pageContext.breakDownData[new Date().toDateString().replace(/ /mg, '')]){ taskProgress = pageContext.breakDownData[new Date().toDateString().replace(/ /mg, '')].day } else{ let firstDay = new Date(new Date(pageContext.breakDownData[pageContext.dateArray[0]].elements[0].startDateActual).toDateString()); let lastDay = new Date(new Date(pageContext.breakDownData[pageContext.dateArray[pageContext.dateArray.length - 1]].elements[0].startDateActual).toDateString()); let today = new Date(new Date().toDateString()); if (today < firstDay){ taskProgress = ((today - firstDay) / 86400000); } if (today > lastDay ){ taskProgress = ((today - lastDay) / 86400000) + pageContext.breakDownData[pageContext.dateArray[pageContext.dateArray.length - 1]].day; } if (today > firstDay && today < lastDay){ pageContext.dateArray.some((element,index)=>{ let currentOne = new Date(new Date(pageContext.breakDownData[element].elements[0].startDateActual).toDateString()); if (today < currentOne){ taskProgress = pageContext.breakDownData[pageContext.dateArray[index - 1]].day; return true; } }); } } taskProgress = '{%day}' + ' ' + taskProgress + '/' + pageContext.dateArray.length; } else {    var maxLength=pageContext.breakDownData[pageContext.dateArray[0]].elements.length-1; taskProgress = new Date(pageContext.breakDownData[pageContext.dateArray[0]].elements[maxLength].endDateActual); hours = taskProgress.getHours(); minutes = taskProgress.getMinutes(); newformat = hours >= 12 ? 'PM' : 'AM'; hours = hours % 12; hours = hours ? hours : 12; minutes = minutes < 10 ? '0' + minutes : minutes; taskProgress = hours + ' : ' + minutes + ' ' + newformat; } } return taskProgress; }","setEndTaskTimeTitle":"function(pageContext){if(typeof pageContext.dateArray!='undefined' && pageContext.dateArray!='' && pageContext.dateArray.length > 1){return true;} return false;}","enableLeftButton":"function (pageContext){return (typeof pageContext.checkOutCheckBoxForSubmit=='undefined' || pageContext.checkOutCheckBoxForSubmit =='' || pageContext.checkOutCheckBoxForSubmit!='true' )}","enableRightButton":"function (pageContext){return (typeof pageContext.checkOutCheckBoxForSubmit!=='undefined' && pageContext.checkOutCheckBoxForSubmit !=''  && pageContext.checkOutCheckBoxForSubmit=='true')}","setTaskProgressTitle":"function(pageContext){if(typeof pageContext.dateArray!='undefined' && pageContext.dateArray!='' && pageContext.dateArray.length > 1){return false;} return true;}"},"header":{"leftButton":{"id":"aHeadLeft","title":"x","enabled":"1"},"rightButton":{"image":"@icon.kebabMenuWhite","action":"openDropdown","id":"aHeadRight","list":[{"image":"https://d122pusslfmuhu.cloudfront.net/solutions/xxhdpi/icons-jumbotrons-task.png","cancelAllowed":"true","startPage":"mdtTaskDetails","name":"{%taskDetails}","id":"taskDetails","type":"genericPage","enabled":"1"},{"image":"https://d122pusslfmuhu.cloudfront.net/field-service-elements/icons/wa-report-an-issue.png","cancelAllowed":"true","startPage":"mdtReportIssue","useBufferedSync":true,"startProcessId":"reportIssueSubmitWF","name":"{%reportAnIssue}","id":"reportIssue","type":"genericPage","enabled":"1"}],"title":"Instructions","enabled":"1"}},"id":"submitted","title":"{%proceesToCheckOut}","cols":[{"name":"c1","body":[{"endColumn":11,"startColumn":0,"index":0,"id":"beforeYouLeaveBox","type":"contentbox","content":[{"endColumn":11,"hidden":"@js.setTaskProgressTitle","index":0,"fontStyle":"standard","type":"paragraphText","title":"{%taskProgress}","enabled":1,"required":0,"startColumn":0,"id":"taskProgress","capturedTime":"@pageContext.recordInitialEvidenceTime","locationCoordinates":"@pageContext.recordInitialEvidenceLocationCoordinates","alignment":"left","value":"@js.calculateTaskProgress"},{"endColumn":11,"hidden":"@js.setEndTaskTimeTitle","startColumn":0,"index":1,"id":"taskEndTime","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%taskEndTime}","value":"@js.calculateTaskProgress","enabled":1,"required":0},{"endColumn":11,"hidden":false,"dataType":"datetime","index":2,"type":"paragraphText","fontStyle":"standard","title":"{%endDate}","enabled":1,"required":0,"startColumn":0,"inputType":"date","id":"endDate","alignment":"left","value":"@pageContext.endDate"}]},{"endColumn":11,"heading":"{%checkOutHeading}","startColumn":0,"index":2,"id":"checkOutCheckBoxForSubmit","locationCoordinates":"@pageContext.checkOutCheckBoxForSubmitLocationCoordinates","capturedTime":"@pageContext.checkOutCheckBoxForSubmitCapturedTime","type":"checkbox","title":"{%checkOutTitle}","value":"@pageContext.checkOutCheckBoxForSubmit","required":1},{"endColumn":11,"hidden":1,"startColumn":0,"index":3,"id":"bproceedNextBox","type":"contentBox","content":[{"endColumn":11,"hidden":1,"startColumn":0,"id":"proceedNextSubmitInfo","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"","value":"{%proceedNextSubmitInfo}","enabled":1,"required":0}]},{"endColumn":11,"buttonType":"primary","startColumn":0,"index":3,"id":"submitAndEndTask","capturedTime":"@pageContext.submitTaskTime","locationCoordinates":"@pageContext.submitTaskLocationCoordinates","title":"{%checkOut}","type":"button","enabled":"@js.enableRightButton","required":false},{"endColumn":11,"hidden":true,"startColumn":0,"index":2,"id":"statusId","fontStyle":"standard","type":"paragraphText","alignment":"left","title":"{%statusId}","value":"@pageContext.statusId","enabled":0,"required":0}]}]}