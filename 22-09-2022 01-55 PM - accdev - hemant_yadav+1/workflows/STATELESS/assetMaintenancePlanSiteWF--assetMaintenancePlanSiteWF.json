{"getMaintenancePlanSites":{"filter":"{$assetMaintenancePlanId}={@assetMaintenancePlanId}","models":["assetMaintenancePlanSite"],"connectors":[{"exitPortType":"NextStep","nodeId":"processZRule"}],"columns":{"assetMaintenancePlanId":"assetMaintenancePlanSite.assetMaintenancePlanId","siteId":"assetMaintenancePlanSite.siteId"},"name":"getMaintenancePlanSites","description":"getMaintenancePlanSites","inputVarMap":{"assetMaintenancePlanId":"assetMaintenancePlanId"},"outputVarMap":{"data":"assetMaintenancePlanSiteData"},"nodeType":"QUERY"},"areSitesToBeDeleted":{"connectors":[{"exitPortType":"TrueStep","nodeId":"deleteAssetMaintenancePlanSite"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"areSitesToBeDeleted","description":"areSitesToBeDeleted","processRule":"(contextVar.sitesToDelete.length > 0)","nodeType":"DECISION"},"fetchInputData":{"connectors":[{"exitPortType":"NextStep","nodeId":"multiDecisionNodeforAction"}],"contextChangePermitted":true,"name":"fetchInputData","description":"fetchInputData","processRule":"{if(typeof contextVar.assetMaintenancePlanSite !== 'undefined' && contextVar.assetMaintenancePlanSite !== ''){contextVar.assetMaintenancePlanId = contextVar.assetMaintenancePlanSite.assetMaintenancePlanId;contextVar.selectedSites = contextVar.assetMaintenancePlanSite.selectedSites;}}","nodeType":"PROCESS"},"upsertAssetMaintenancePlanSite":{"modelName":"assetMaintenancePlanSite","connectors":[{"exitPortType":"NextStep","nodeId":"areSitesToBeDeleted"}],"multirecord":true,"name":"upsertAssetMaintenancePlanSite","description":"upsert upsertAssetMaintenancePlanSite","inputVarMap":{"sitesToInsert":"data"},"outputVarMap":{"data":"assetMaintenancePlanSiteData"},"nodeType":"MODEL","operation":4},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchInputData"}],"name":"start","description":"Start","nodeType":"START"},"multiDecisionNodeforAction":{"connectors":[{"condition":"contextVar.subAction==='upsertAssetMaintenancePlanSite'","exitPortType":"NextStep","nodeId":"getMaintenancePlanSites"},{"DefaultStep":true,"condition":"contextVar.subAction===''","exitPortType":"NextStep","nodeId":"end"}],"name":"multiDecisionNodeforAction","description":"multiDecisionNodeforAction","nodeType":"MULTIDECISION"},"areSitesToBeInserted":{"connectors":[{"exitPortType":"TrueStep","nodeId":"upsertAssetMaintenancePlanSite"},{"exitPortType":"FalseStep","nodeId":"areSitesToBeDeleted"}],"name":"areSitesToBeInserted","description":"areSitesToBeInserted","processRule":"(contextVar.sitesToInsert.length > 0)","nodeType":"DECISION"},"deleteAssetMaintenancePlanSite":{"modelName":"assetMaintenancePlanSite","connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"multirecord":true,"name":"deleteAssetMaintenancePlanSite","description":"delete assetMaintenancePlanSite","inputVarMap":{"sitesToDelete":"data"},"outputVarMap":{},"nodeType":"MODEL","operation":3},"end":{"name":"end","description":"end","inputVarMap":{"assetMaintenancePlanSiteData":"assetMaintenancePlanSiteData"},"outputVarMap":{"assetMaintenancePlanSiteData":"assetMaintenancePlanSiteData"},"nodeType":"END"},"processZRule":{"connectors":[{"exitPortType":"NextStep","nodeId":"areSitesToBeInserted"}],"contextChangePermitted":true,"name":"processZRule ","description":"processZRule","processRule":"@GZ8GYWP4L7","nodeType":"PROCESS","jsEngine":"es6"},"workflowNodes":["start","fetchInputData","multiDecisionNodeforAction","getMaintenancePlanSites","processZRule","areSitesToBeInserted","upsertAssetMaintenancePlanSite","areSitesToBeDeleted","deleteAssetMaintenancePlanSite","end"]}