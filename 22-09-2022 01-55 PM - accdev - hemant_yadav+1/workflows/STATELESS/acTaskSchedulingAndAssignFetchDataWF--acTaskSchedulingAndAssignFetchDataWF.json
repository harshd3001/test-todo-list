{"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"getWorkOrderTaskData"}],"name":"start","description":"Start","nodeType":"START"},"getPriorityAndWorkOrderTypeData":{"filter":"{$ZPriorityTargetModel} = {@workOrderStatusTargetModel} AND {$ZPriorityPriority}={@workOrderPriorityPriority} AND {$workOrderTypeId}={@workOrderWorkOrderTypeId} AND {$workOrderId}={@workOrderTaskWorkOrderId} ","models":{"u":"User","wo":"workOrder","woty":"workOrderType","acl":"accLender","zpt":"ZPriority"},"connectors":[{"exitPortType":"NextStep","nodeId":"getCustomerAndRegionData"}],"columns":{"ZPriorityName":"zpt.name","anowGLA":"wo.acTagGla","workOrderTypeId":"woty.id","ZPriorityTargetModel":"zpt.targetModel","primaryAppraiserId":"wo.acPrimaryAppraiserId","anowRural":"wo.acTagRural","tags":"wo.acTags","primaryAppraiser":"u.name","anowComplex":"wo.acTagComplex","lenderName":"acl.lenderName","ZPriorityPriority":"zpt.priority","anowContractValue":"wo.acContractValue","anowLoanType":"wo.acLoanType","workOrderId":"wo.id","workOrderTypeName":"woty.name","anowReportType":"wo.acReportType","anowHistorical":"wo.acTagHistorical"},"name":"getPriorityAndWorkOrderTypeData","outerJoinOnModel":"workOrder","description":"getPriorityAndWorkOrderTypeData","inputVarMap":{"workOrderWorkOrderTypeId":"workOrderWorkOrderTypeId","workOrderPriorityPriority":"workOrderPriorityPriority","workOrderTaskWorkOrderId":"workOrderTaskWorkOrderId","workOrderStatusTargetModel":"workOrderStatusTargetModel","workOrderTaskData":"workOrderTaskData"},"outputVarMap":{"data":"priorityData"},"nodeType":"QUERY","joinCondition":[{"acl":" wo.z2ac_lender_id = acl.z2id"},{"woty":"woty.z2id= wo.z2work_order_type_id"},{"u":"u.id= wo.z2ac_primary_appraiser_id"},{"zpt":"zpt.priority= wo.z2priority_priority"}]},"workflowNodes":["start","getWorkOrderTaskData","getWorkOrderTaskInstalledBaseData","processWorkOrderTaskData","processServicesData","getUserId","getCancelledByUserName","mapWorkOrderTaskData","getPriorityAndWorkOrderTypeData","getCustomerAndRegionData","dependencyOverrideReasonCheck","getOverrideReason","mapData","fetchTaskScheduleBreakdownData","end"],"dependencyOverrideReasonCheck":{"connectors":[{"exitPortType":"TrueStep","nodeId":"getOverrideReason"},{"exitPortType":"FalseStep","nodeId":"mapData"}],"name":"dependencyOverrideReasonCheck","description":"dependencyOverrideReasonCheck","processRule":"(typeof contextVar.workOrderTaskOverrideReason !== 'undefined' && contextVar.workOrderTaskOverrideReason !== '')","nodeType":"DECISION"},"getWorkOrderTaskData":{"filter":"{$workOrderTaskId} =  {@workOrderTaskId}","models":["workOrderTask","workOrder","workOrderTaskAppointmentWindow","site","taskType","User","ZStatus","crew"],"connectors":[{"exitPortType":"NextStep","nodeId":"getWorkOrderTaskInstalledBaseData"}],"columns":{"siteRegionId":"site.regionId","workOrderTaskCancellationReason":"workOrderTask.result","workOrderTaskService":"workOrderTask.enableServices","siteContactPerson":"site.contactPerson","taskTypeMobileProcessId":"taskType.mobileProcessId","userPhoneNumber":"User.phoneNumber","workOrderTaskAssignedToCrewId":"workOrderTask.assignedToCrewId","siteTimezoneOffset":"site.timezoneOffset","workOrderTaskCancelledDate":"workOrderTask.cancelledDate","workOrderTaskCancellationReasonData":"workOrderTask.cancellationReason","workOrderCalendarId":"workOrder.calendarId","workOrderCustomerSignature":"workOrderTask.customerSignature","workOrderTaskId":"workOrderTask.id","workOrderTaskEstimatedDurationMinutes":"workOrderTask.estimatedDuration","workOrderTaskCompletedDate":"workOrderTask.completedDate","crewLeadUserId":"crew.leadUserId","workOrderTaskLongDurationFlag":"workOrderTask.isLongDurationTask","workOrderTaskStatusId":"workOrderTask.statusId","taskTypeWebTask":"taskType.webTask","siteAddress":"site.address","crewName":"crew.name","taskTypeCrewTask":"taskType.crewTask","workOrderTaskRecver":"workOrderTask.recver","anowStatus":"workOrderTask.acProcessStatus","workOrderTaskActualStartTime":"workOrderTask.actualStartTime","siteLatitude":"site.latitude","incidentDetails":"workOrderTask.incidentDetails","workOrderTaskTaskTypeId":"workOrderTask.taskTypeId","workOrderTaskAcInternalNotes":"workOrderTask.acInternalNotes","workOrderTaskAppointmentWindowStartDate":"workOrderTaskAppointmentWindow.startDate","siteContactPhone":"site.contactPhone","workOrderTaskServices":"workOrderTask.services","workOrderTaskCancelledBy":"workOrderTask.cancelledBy","siteName":"site.name","taskTypeName":"taskType.name","statusName":"ZStatus.name","workOrderTaskEstimatedDuration":"Round(({$workOrderTask.estimatedDuration})/60,2)","workOrderStatusTargetModel":"workOrder.statusTargetModel","userEmail":"User.emailId","workOrderTaskReOpenCount":"workOrderTask.reopenCount","workOrderTaskStatusTargetModel":"workOrderTask.statusTargetModel","siteLongitude":"site.longitude","workOrderTaskResult":"workOrderTask.result","workOrderTaskAppointmentWindowEndDate":"workOrderTaskAppointmentWindow.endDate","workOrderTaskAppointmentBasedFlag":"workOrderTask.isAppointmentBasedTask","workOrderTaskAssignedToUserId":"workOrderTask.assignedToUserId","workOrderPriorityPriority":"workOrder.priorityPriority","workOrderDeadline":"workOrder.deadline","workOrderTaskAppointmentWindow":"workOrderTaskAppointmentWindow.startEndJson","workOrderTaskAppointmentWindowId":"workOrderTaskAppointmentWindow.appointmentWindowId","workOrderTaskProcessInstanceId":"workOrderTask.processInstanceId","crewStatusId":"crew.statusId","siteCustomerId":"site.customerId","userName":"User.name","siteTimeZone":"site.acTimeZone","workOrderTaskCancellationNotes":"workOrderTask.cancellationNotes","statusNameColor":"ZStatus.colorCode","workOrderResult":"workOrderTask.cancellationReason","siteContactTitle":"site.contactTitle","workOrderTaskDueDate":"workOrderTask.dueDate","workOrderWorkOrderTypeId":"workOrder.workOrderTypeId","workOrderTaskSiteId":"workOrderTask.siteId","workOrderTaskNotes":"workOrderTask.notes","siteContactEmail":"site.contactEmail","workOrderTaskWorkOrderId":"workOrderTask.workOrderId","siteId":"site.id","workOrderTaskScheduledDate":"workOrderTask.scheduledDate"},"name":"getWorkOrderTaskData","outerJoinOnModel":"workOrderTask","description":"getWorkOrderTaskData","links":{"workOrder":"workOrderTask","site":"workOrderTask","taskType":"workOrderTask","User":"workOrderTask","workOrderTaskAppointmentWindow":"workOrderTask","ZStatus":"workOrderTask","crew":"workOrderTask"},"inputVarMap":{"workOrderTaskId":"workOrderTaskId"},"outputVarMap":{"data":"workOrderTaskData"},"nodeType":"QUERY","translate":true},"mapWorkOrderTaskData":{"connectors":[{"exitPortType":"NextStep","nodeId":"getPriorityAndWorkOrderTypeData"}],"contextChangePermitted":true,"name":"mapWorkOrderTaskData","description":"Mapping customer, priority, workOrderType and region data to the workOrderTask data","processRule":"{ if (Array.isArray(contextVar.workOrderTaskData) && contextVar.workOrderTaskData.length > 0) { contextVar.workOrderTaskData = contextVar.workOrderTaskData[0]; contextVar.workOrderStatusTargetModel = contextVar.workOrderTaskData.workOrderStatusTargetModel; contextVar.workOrderCalendarId = contextVar.workOrderTaskData.workOrderCalendarId; contextVar.workOrderPriorityPriority = contextVar.workOrderTaskData.workOrderPriorityPriority; contextVar.workOrderWorkOrderTypeId = contextVar.workOrderTaskData.workOrderWorkOrderTypeId; contextVar.workOrderTaskWorkOrderId = contextVar.workOrderTaskData.workOrderTaskWorkOrderId; contextVar.siteCustomerId = contextVar.workOrderTaskData.siteCustomerId; contextVar.siteRegionId = contextVar.workOrderTaskData.siteRegionId; contextVar.siteId = contextVar.workOrderTaskData.siteId; if (Array.isArray(contextVar.workOrderTaskData.workOrderTaskResult) && contextVar.workOrderTaskData.workOrderTaskResult.length > 0) { if (typeof contextVar.workOrderTaskData.workOrderTaskResult[0].overrideReason !== 'undefined' && typeof contextVar.workOrderTaskData.workOrderTaskResult[0].overrideReason.reason !== 'undefined' && contextVar.workOrderTaskData.workOrderTaskResult[0].overrideReason.reason !== '') { contextVar.workOrderTaskOverrideReason = contextVar.workOrderTaskData.workOrderTaskResult[0].overrideReason.reason; contextVar.workOrderTaskOverrideComment = contextVar.workOrderTaskData.workOrderTaskResult[0].overrideReason.comment; } } } }","nodeType":"PROCESS"},"mapData":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchTaskScheduleBreakdownData"}],"contextChangePermitted":true,"name":"mapData","description":"Mapping customer, priority, workOrderType and region data to the workOrderTaskData","processRule":"{ if (Array.isArray(contextVar.priorityData) && contextVar.priorityData.length > 0) { contextVar.workOrderTaskData.anowReportType = contextVar.priorityData[0].anowReportType; contextVar.workOrderTaskData.anowLoanType = contextVar.priorityData[0].anowLoanType; contextVar.workOrderTaskData.lenderName = contextVar.priorityData[0].lenderName; contextVar.workOrderTaskData.lenderName = contextVar.priorityData[0].lenderName; contextVar.workOrderTaskData.primaryAppraiser = contextVar.priorityData[0].primaryAppraiser; contextVar.workOrderTaskData.anowContractValue = contextVar.priorityData[0].anowContractValue; contextVar.workOrderTaskData.anowTags = contextVar.priorityData[0].tags; contextVar.workOrderTaskData.anowGLA = contextVar.priorityData[0].anowGLA; contextVar.workOrderTaskData.anowComplex = contextVar.priorityData[0].anowComplex; contextVar.workOrderTaskData.anowRural = contextVar.priorityData[0].anowRural; contextVar.workOrderTaskData.anowHistorical = contextVar.priorityData[0].anowHistorical; contextVar.workOrderTaskData.ZPriorityName = contextVar.priorityData[0].ZPriorityName; contextVar.workOrderTaskData.workOrderTypeName = contextVar.priorityData[0].workOrderTypeName; contextVar.workOrderTaskData.ZPriorityName = contextVar.priorityData[0].ZPriorityName; } if (Array.isArray(contextVar.customerData) && contextVar.customerData.length > 0) { contextVar.workOrderTaskData.regionName = contextVar.customerData[0].regionName; contextVar.workOrderTaskData.customerCompanyName = contextVar.customerData[0].customerCompanyName; if (typeof contextVar.customerData[0].siteContactPhone == 'undefined' || contextVar.customerData[0].siteContactPhone == '') { contextVar.workOrderTaskData.customerContactPhone = contextVar.customerData[0].customerContactPhone; } else { contextVar.workOrderTaskData.customerContactPhone = contextVar.customerData[0].siteContactPhone; } if (typeof contextVar.customerData[0].siteContactTitle == 'undefined' || contextVar.customerData[0].siteContactTitle == '') { contextVar.workOrderTaskData.customerContactTitle = contextVar.customerData[0].customerContactTitle; } else { contextVar.workOrderTaskData.customerContactTitle = contextVar.customerData[0].siteContactTitle; } if (typeof contextVar.customerData[0].siteContactPerson == 'undefined' || contextVar.customerData[0].siteContacsiteContactPersontPhone == '') { contextVar.workOrderTaskData.customerContactPerson = contextVar.customerData[0].customerContactPerson; } else { contextVar.workOrderTaskData.customerContactPerson = contextVar.customerData[0].siteContactPerson; } if (typeof contextVar.customerData[0].siteContactEmail == 'undefined' || contextVar.customerData[0].siteContactEmail == '') { contextVar.workOrderTaskData.customerContactEmail = contextVar.customerData[0].customerContactEmail; } else { contextVar.workOrderTaskData.customerContactEmail = contextVar.customerData[0].siteContactEmail; } } if (Array.isArray(contextVar.overrideReason) && contextVar.overrideReason.length > 0) { contextVar.workOrderTaskData.overrideReason = { reason: contextVar.overrideReason[0].answerOptionText, comment: contextVar.workOrderTaskOverrideComment } } }","nodeType":"PROCESS"},"processServicesData":{"connectors":[{"exitPortType":"NextStep","nodeId":"getUserId"}],"contextChangePermitted":true,"name":"processServicesData","description":"process Services Data","processRule":"{var workOrderTaskServicesArray; for(var i =0 ;i<contextVar.workOrderTaskData.length;i++) { workOrderTaskServicesArray =[]; if(contextVar.workOrderTaskData[i].workOrderTaskServices!=undefined) { for(var k =0 ;k<contextVar.workOrderTaskData[i].workOrderTaskServices.length;k++) { workOrderTaskServicesArray.push(contextVar.workOrderTaskData[i].workOrderTaskServices[k].catalogId); } contextVar.workOrderTaskData[i]['workOrderTaskServicesArray']=workOrderTaskServicesArray; } }}","id":"processServicesData","nodeType":"PROCESS"},"fetchTaskScheduleBreakdownData":{"filter":"{$workOrderTaskId}={@workOrderTaskId}","models":["taskScheduleBreakdown"],"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"columns":{"duration":"taskScheduleBreakdown.duration","endDate":"taskScheduleBreakdown.endDate","durationInHours":"Round(({$taskScheduleBreakdown.duration})/60,2)","startDate":"taskScheduleBreakdown.startDate"},"name":"fetchTaskScheduleBreakdownData","orderBy":"startDate ASC","description":"fetchTaskScheduleBreakdownData","inputVarMap":{"workOrderTaskId":"workOrderTaskId"},"outputVarMap":{"data":"taskScheduleBreakdown"},"nodeType":"QUERY"},"getWorkOrderTaskInstalledBaseData":{"filter":"{$workOrderTaskInstalledBase.workOrderTaskId} = {@workOrderTaskId}","models":["workOrderTaskInstalledBase","catalog","installedBase"],"connectors":[{"exitPortType":"NextStep","nodeId":"processWorkOrderTaskData"}],"columns":{"catalogNameCatalogModelNumber":"CONCAT({$catalog.name},' - ',{$catalog.modelNumber})","installedBaseId":"installedBase.id"},"name":"getWorkOrderTaskInstalledBaseData","description":"getWorkOrderTaskInstalledBaseData","links":{"installedBase":"workOrderTaskInstalledBase","catalog":"installedBase"},"inputVarMap":{"workOrderTaskId":"workOrderTaskId"},"outputVarMap":{"data":"workOrderTaskInstalledBaseData"},"nodeType":"QUERY"},"getOverrideReason":{"filter":"{$listOptionAnswer.id} = {@workOrderTaskOverrideReason}","models":["listOptionAnswer"],"connectors":[{"exitPortType":"NextStep","nodeId":"mapData"}],"columns":{"answerOptionText":"listOptionAnswer.answerOptionText"},"name":"getOverrideReason","description":"getOverrideReason","inputVarMap":{"workOrderTaskOverrideReason":"workOrderTaskOverrideReason"},"outputVarMap":{"data":"overrideReason"},"batchSize":"1","nodeType":"QUERY","translate":"true"},"processWorkOrderTaskData":{"connectors":[{"exitPortType":"NextStep","nodeId":"processServicesData"}],"contextChangePermitted":true,"name":"processWorkOrderTaskData","description":"processWorkOrderTaskData","processRule":"{ if (Array.isArray(contextVar.workOrderTaskInstalledBaseData) && contextVar.workOrderTaskInstalledBaseData.length > 0) { var reason = ''; for (var i = 0; i < contextVar.workOrderTaskInstalledBaseData.length; i++) { reason = reason.concat(contextVar.workOrderTaskInstalledBaseData[i].catalogNameCatalogModelNumber, ', '); } contextVar.selectedCatalog = reason.substring(0, reason.lastIndexOf(',')); } else { contextVar.selectedCatalog = '-'; } contextVar.workOrderTaskData[0].selectedCatalog = contextVar.selectedCatalog; if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason != 'undefined') { for (var j = 0; j < contextVar.workOrderTaskData[0].workOrderTaskCancellationReason.length; j++) { if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].beforeCaptureEvidence != 'undefined') { contextVar.workOrderTaskData[0]['beforeEvidencePhoto1'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].beforeCaptureEvidence.media; contextVar.workOrderTaskData[0]['beforeEvidence1Comments'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].beforeCaptureEvidence.comment; if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].beforeCaptureEvidenceOptionalFirst.media != 'undefined') { contextVar.workOrderTaskData[0]['beforeEvidencePhoto2'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].beforeCaptureEvidenceOptionalFirst.media; } if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].beforeCaptureEvidenceOptionalFirst.comment != 'undefined') { contextVar.workOrderTaskData[0]['beforeEvidence2Comments'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].beforeCaptureEvidenceOptionalFirst.comment; } if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].beforeCaptureEvidenceOptionalSecond.media != 'undefined') { contextVar.workOrderTaskData[0]['beforeEvidencePhoto3'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].beforeCaptureEvidenceOptionalSecond.media; } if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].beforeCaptureEvidenceOptionalSecond.comment != 'undefined') { contextVar.workOrderTaskData[0]['beforeEvidence3Comments'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].beforeCaptureEvidenceOptionalSecond.comment; } contextVar.workOrderTaskData[0]['beforeOverallComments'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].beforeComments; contextVar.workOrderTaskData[0]['afterEvidencePhoto1'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].afterCaptureEvidence.media; contextVar.workOrderTaskData[0]['afterEvidence1Comments'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].afterCaptureEvidence.comment; if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].afterCaptureEvidenceOptionalFirst.media != 'undefined') { contextVar.workOrderTaskData[0]['afterEvidencePhoto2'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].afterCaptureEvidenceOptionalFirst.media; } if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].afterCaptureEvidenceOptionalFirst.comment != 'undefined') { contextVar.workOrderTaskData[0]['afterEvidence2Comment'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].afterCaptureEvidenceOptionalFirst.comment; } if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].afterCaptureEvidenceOptionalSecond.media != 'undefined') { contextVar.workOrderTaskData[0]['afterEvidencePhoto3'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].afterCaptureEvidenceOptionalSecond.media; } if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].afterCaptureEvidenceOptionalSecond.comment != 'undefined') { contextVar.workOrderTaskData[0]['afterEvidence3Comment'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].afterCaptureEvidenceOptionalSecond.comment; } contextVar.workOrderTaskData[0]['afterOverallComments'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].afterComments; if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid != 'undefined' && contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid != '') { if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[0].assets != 'undefined' && contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[0].assets != '') { contextVar.workOrderTaskData[0]['assetName'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[0].assets; } if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[0].barcode != 'undefined' && contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[0].barcode != '') { contextVar.workOrderTaskData[0]['assetNumber'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[0].barcode; } contextVar.workOrderTaskData[0]['serviceType'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[0].taskActivity; contextVar.activityDetails = []; for (var i = 0; i < contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid.length; i++) { contextVar.activityDetails.push({}); if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].assets != 'undefined' && contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].assets != '') { contextVar.activityDetails[i]['assetName'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].assets[0].catalogName; } if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].barcode != 'undefined' && contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].barcode != '') { contextVar.activityDetails[i]['assetNumber'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].barcode; } contextVar.activityDetails[i]['serviceName'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].taskActivity[0].serviceName; if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].photo1 != 'undefined' && typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].photo1.media != 'undefined') { contextVar.activityDetails[i]['assetPhoto1'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].photo1.media; } if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].photo1 != 'undefined' && typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].photo1.comment != 'undefined') { contextVar.activityDetails[i]['assetComment1'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].photo1.comment; } if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].photo2Optional != 'undefined' && typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].photo2Optional.media != 'undefined') { contextVar.activityDetails[i]['assetPhoto2'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].photo2Optional.media; } if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].photo2Optional != 'undefined' && typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].photo2Optional.comment != 'undefined') { contextVar.activityDetails[i]['assetComment2'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].photo2Optional.comment; } if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].photo3Optional != 'undefined' && typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].photo3Optional.media != 'undefined') { contextVar.activityDetails[i]['assetPhoto3'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].photo3Optional.media; } if (typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].photo3Optional != 'undefined' && typeof contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].photo3Optional.comment != 'undefined') { contextVar.activityDetails[i]['assetComment3'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].photo3Optional.comment; } contextVar.activityDetails[i]['activityComments'] = contextVar.workOrderTaskData[0].workOrderTaskCancellationReason[j].activityDataGrid[i].activityComments; contextVar.workOrderTaskData[0]['activityDetails'] = contextVar.activityDetails; } } } } } }","nodeType":"PROCESS"},"getCancelledByUserName":{"filter":"{$userId} = {@workOrderTaskCancelledBy}","models":["User"],"connectors":[{"exitPortType":"NextStep","nodeId":"mapWorkOrderTaskData"}],"columns":{"cancelledByUserName":"User.name","userId":"User.id"},"name":"getCancelledByUserName","description":"getCancelledByUserName","inputVarMap":{"workOrderTaskCancelledBy":"workOrderTaskCancelledBy"},"outputVarMap":{"data":"workOrderTaskCancelled"},"nodeType":"QUERY"},"end":{"name":"end","description":"end","inputVarMap":{"taskScheduleBreakdown":"taskScheduleBreakdown","workOrderTaskCancelled":"workOrderTaskCancelled","workOrderTaskData":"workOrderTaskData"},"outputVarMap":{"taskScheduleBreakdown":"taskScheduleBreakdown","workOrderTaskCancelled":"workOrderTaskCancelled","workOrderTaskData":"workOrderTaskData"},"nodeType":"END"},"getCustomerAndRegionData":{"filter":"{$customerId}={@siteCustomerId} AND {$regionId}={@siteRegionId} AND {$siteId}={@siteId} ","models":["site","customer","region"],"connectors":[{"exitPortType":"NextStep","nodeId":"dependencyOverrideReasonCheck"}],"columns":{"siteContactPhone":"site.contactPhone","customerContactPerson":"customer.contactPerson","siteContactPerson":"site.contactPerson","customerContactEmail":"customer.contactEmail","customerCompanyName":"customer.companyName","customerContactTitle":"customer.contactTitle","regionName":"region.name","siteContactTitle":"site.contactTitle","customerContactPhone":"customer.contactPhone","regionId":"region.id","customerId":"customer.id","siteContactEmail":"site.contactEmail","siteId":"site.id"},"name":"getCustomerAndRegionData","outerJoinOnModel":"site","description":"getCustomerAndRegionData","links":{"region":"site","customer":"site"},"inputVarMap":{"siteRegionId":"siteRegionId","siteId":"siteId","siteCustomerId":"siteCustomerId"},"outputVarMap":{"data":"customerData"},"nodeType":"QUERY"},"getUserId":{"connectors":[{"exitPortType":"NextStep","nodeId":"getCancelledByUserName"}],"contextChangePermitted":true,"name":"getUserId","description":"getUserId","processRule":"{contextVar.workOrderTaskCancelledBy = contextVar.workOrderTaskData[0].workOrderTaskCancelledBy;}","nodeType":"PROCESS"}}