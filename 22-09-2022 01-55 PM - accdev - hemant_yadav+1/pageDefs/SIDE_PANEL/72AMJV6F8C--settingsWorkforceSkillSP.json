{"pageContext":{},"actionOnLoad":["@actions.initialData"],"localPageContext":true,"jslib":{"isSkillActionEdit":"function(pageContext) {return pageContext.workforceSkillAction === 'edit';}","dynamicHeaderText":"function(pageContext){ if(pageContext.workforceSkillAction === 'add'){return '@lang.[\"ans\",\"Add New Skill\"]'}else if(pageContext.workforceSkillAction === 'edit'){return '@lang.[\"es6\",\"Edit Skill\"]'}}","isSkillActionAdd":"function(pageContext) {return pageContext.workforceSkillAction === 'add';}","isSaveDisabled":"function(pageContext){if (pageContext.workforceSkillAction === 'add'){return (pageContext.skillName === '');}else if (pageContext.workforceSkillAction === 'edit'){return (((pageContext.skillName === pageContext.initialName  && pageContext.skillDescription === pageContext.initialDescription) || (pageContext.skillName === '')));}}"},"header":{"children":[{"activeIcon":"@iconlib.ActionsBinPurple","hidden":true,"icon":"@iconlib.ActionsBinGrey","tooltip":"@lang.['d1','Delete']","actionOnClick":["@actions.openSkillModal"],"id":"delete","type":"buttonIcon"},{"buttonType":"primary","hidden":"@jslib.isSkillActionEdit","actionOnClick":["@actions.setSubActionUpsertSkill","@actions.fireProcessEvent","@actions.processApiOutput","@actions.setSkillActionEdit","@actions.initialData","@actions.refreshDataGrid"],"disabled":"@jslib.isSaveDisabled","id":"saveContinue","type":"button","title":"@lang.['sc1','Save & Continue']"},{"buttonType":"primary","hidden":"@jslib.isSkillActionAdd","actionOnClick":["@actions.setSubActionUpsertSkill","@actions.fireProcessEvent","@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"disabled":"@jslib.isSaveDisabled","id":"save","type":"button","title":"@lang.['s12','Save']"},{"icon":"@iconlib.NavigationCloseGrey","actionOnClick":["@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"id":"Close","type":"buttonIcon"}],"title":"@jslib.dynamicHeaderText"},"body":{"children":[{"children":[{"isRequired":true,"inputType":"text","id":"name","label":"@lang.['n','Name']","placeholder":"@lang.['en1','Enter name']","type":"input","value":"@pageContext.skillName"},{"id":"description","label":"@lang.['d7','Description (Optional)']","type":"textarea","value":"@pageContext.skillDescription","placeHolder":"@lang.['ed1','Enter description']"}],"label":"@lang.['gi','General Information']","id":"skillInfo","type":"section"},{"hidden":"@jslib.isSkillActionAdd","children":[{"id":"level","label":"","type":"datagrid","jsonDef":{"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsEditPurple","name":"@lang.['e1','Edit']","tooltip":"@lang.['e1','Edit']","icon":"@iconlib.ActionsEditGrey","actionOnClick":["@actions.setSkillLevelActionEdit","@actions.openNestedSidePanel"],"type":"buttonIcon"},{"activeIcon":"@iconlib.ActionsBinPurple","hidden":true,"name":"@lang.['d1','Delete']","tooltip":"@lang.['d1','Delete']","icon":"@iconlib.ActionsBinGrey","actionOnClick":["@actions.openSkillLevelModal"],"type":"buttonIcon"}]},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"importable":false,"tableHeader":[{"name":"@lang.['n','Name']","options":{"showLabel":true},"key":"skillLevelName"},{"name":"@lang.['r3','Rank']","options":{"showLabel":true},"key":"skillLevelRank"}],"dataToBeSent":{"filter":"{$skillLevelSkillId} = {@skillId}","models":["skillLevel"],"columns":{"skillLevelSkillId":"skillLevel.skillId","skillLevelId":"skillLevel.id","skillLevelRank":"skillLevel.rank","skillLevelName":"skillLevel.name","skillLevelRecver":"skillLevel.recver"},"inputs":{"skillId":"@pageContext.skillId"},"orderBy":"skillLevelRank DESC"},"dataSourceId":"query/read","exportable":false,"header":{"filterAllowed":true,"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['l2','Levels']","children":[{"buttonType":"primary","actionOnClick":["@actions.setSkillLevelActionAdd","@actions.openNestedSidePanel"],"id":"addNew","type":"button","title":"@lang.['addNew','Add New']"}]},"updateAllowed":true,"isSelectable":false,"actions":[{"name":"setSkillLevelActionAdd","type":"script","actionDef":"function(pageContext){pageContext.skillLevelAction='add';}"},{"name":"setSkillLevelActionEdit","type":"script","actionDef":"function(pageContext){pageContext.skillLevelAction='edit';}"},{"name":"openNestedSidePanel","type":"openPanel","pageId":"5TSPYV6SUU"},{"subTitle":"@lang.['aysywtdtsltcbu','Are you sure you want to delete the skill level? This cannot be undone.']","name":"openSkillLevelModal","options":[{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.setSubActionDeleteSkillLevel","@actions.fireProcessEvent","@actions.closeModal","@actions.refreshDataGrid"],"type":"button","title":"@lang.['d1','Delete']"}],"type":"openModal","title":"@lang.['dsl','Delete Skill Level']"}],"searchKeys":["skillLevelName","skillLevelRank"]}}],"label":"@lang.['sl1','Skill Levels']","id":"datagrid","type":"section","transparent":true}]},"actions":[{"name":"closePanel","type":"closePanel"},{"name":"initialData","type":"script","actionDef":"function(pageContext){ if(typeof pageContext === undefined || pageContext === null || pageContext.workforceSkillAction === 'add'){ pageContext.skillName = ''; pageContext.skillDescription = '';} else if (pageContext.workforceSkillAction === 'edit'){pageContext.initialName = pageContext.skillName; pageContext.initialDescription = pageContext.skillDescription;}}"},{"name":"setSkillActionEdit","type":"script","actionDef":"function(pageContext){pageContext.workforceSkillAction='edit';}"},{"name":"processApiOutput","type":"script","actionDef":"function(pageContext){pageContext.skillId=pageContext.data[0].data[0].skillId;}"},{"name":"setSubActionUpsertSkill","type":"script","actionDef":"function(pageContext){pageContext.subAction='upsertSkill';}"},{"name":"setSubActionDeleteSkill","type":"script","actionDef":"function(pageContext){pageContext.subAction='deleteSkill';}"},{"name":"setSubActionDeleteSkillLevel","type":"script","actionDef":"function(pageContext){pageContext.subAction='deleteSkillLevel';}"},{"subTitle":"@lang.['aysywtdtstcbu1','Are you sure you want to delete the skill? This cannot be undone.']","name":"openSkillModal","options":[{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.setSubActionDeleteSkill","@actions.fireProcessEvent","@actions.closeModal","@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"type":"button","title":"@lang.['d1','Delete']"}],"type":"openModal","title":"@lang.['ds','Delete Skill']"},{"endPoint":"event/start","name":"fireProcessEvent","outputVarMap":{"data":"@pageContext.data"},"type":"api","actionDef":{"data":[{"eventId":"settingsWorkforceSkillProcessEvent","contextVar":{"skill":{"recver":"@pageContext.skillRecver","name":"@pageContext.skillName","description":"@pageContext.skillDescription","id":"@pageContext.skillId"},"subAction":"@pageContext.subAction","skillLevel":{"recver":"@pageContext.skillLevelRecver","id":"@pageContext.skillLevelId"}}}]}},{"name":"closeModal","type":"closeModal"},{"name":"clearPageContext","type":"clearPageContext"},{"name":"refreshDataGrid","type":"refreshDataGrid"}]}