{"pageContext":{},"actionOnLoad":["@actions.getWorkOrderCancelReasonList"],"localPageContext":true,"jslib":{"isActionApprove":"function (pageContext) { return (pageContext.taskReviewResult === 'approve')}","isActionReject":"function (pageContext) { return (pageContext.taskReviewResult === 'reject')}","dynamicHeaderText":"function (pageContext) { if (pageContext.taskReviewResult === 'approve') { return 'Task Approval' } else if (pageContext.taskReviewResult === 'reject') { return 'Task Rejection' }}"},"header":{"leftData":{"children":[{"icon":"@iconlib.NavigationArrowBackGrey","actionOnClick":["@actions.openPreviousPanel"],"id":"back","type":"buttonIcon"}]},"children":[{"buttonType":"primary","hidden":"@jslib.isActionApprove","actionOnClick":["@actions.setStatus","@actions.setSubAction","@actions.clearTaskReviewLogReviewNotes","@actions.fireProcessEventForUpdateSiteChange","@actions.closePanel","@actions.refreshDataGrid"],"id":"reject","type":"button","title":"@lang.['r4','Reject']"},{"buttonType":"primary","hidden":"@jslib.isActionReject","actionOnClick":["@actions.setStatus","@actions.setSubAction","@actions.clearTaskReviewLogReviewNotes","@actions.fireProcessEventForUpdateSiteChange","@actions.closePanel","@actions.refreshDataGrid"],"id":"approve","type":"button","title":"@lang.['a1','Approve']"},{"icon":"@iconlib.NavigationCloseGrey","actionOnClick":["@actions.closePanel","@actions.clearPageContext"],"id":"close","type":"buttonIcon"}],"title":"@jslib.dynamicHeaderText"},"body":{"children":[{"children":[{"inputType":"text","id":"taskReviewLogReviewNotes","label":"@lang.['rn','Review Notes (Optional)']","type":"textarea","value":"@pageContext.taskReviewLogReviewNotes","placeHolder":"@lang.['en2','Enter notes']"}],"id":"reviewNotes","label":"","type":"section"}]},"actions":[{"name":"setStatus","type":"script","actionDef":"function(pageContext){pageContext.subAction=pageContext.taskReviewResult;if (pageContext.taskReviewResult === 'approve'){pageContext.statusId = 'workOrderTaskCompleted';} else if (pageContext.taskReviewResult === 'reject') {pageContext.statusId = 'workOrderTaskRejected';}}"},{"name":"setSubAction","type":"script","actionDef":"function(pageContext){if (pageContext.taskReviewResult == 'approve'){pageContext.subAction = 'upsertCustomerSite';pageContext.computeMode = 'true';}}"},{"name":"clearTaskReviewLogReviewNotes","type":"script","actionDef":"function (pageContext) {pageContext.taskReviewLogReviewNotes = '';}"},{"endPoint":"batch/apis","name":"fireProcessEventForUpdateSiteChange","outputVarMap":{"data":"@pageContext.siteChangeResponseData"},"type":"api","actionDef":{"data":[{"updateWorkOrderTask":{"data":[{"processId":"QIFGIU7FDJ","contextVar":{"workOrderTask":{"statusId":"@pageContext.statusId","taskTypeWebTask":"@pageContext.taskTypeWebTask","id":"@pageContext.workOrderTaskId","workOrderId":"@pageContext.workOrderTaskWorkOrderId"},"subAction":"upsertWorkOrderTask"}}],"actionUrl":"process/start"},"taskReviewWF":{"data":[{"processId":"V4NYJ58HL1","contextVar":{"statusId":"@pageContext.statusId","subAction":"@pageContext.taskReviewResult","workOrderTaskId":"@pageContext.workOrderTaskId","taskReviewLogReviewNotes":"@pageContext.taskReviewLogReviewNotes"}}],"actionUrl":"process/start"},"updateSite":{"data":[{"processId":"9Y3HVI9FKG","contextVar":{"site":[{"address":"@pageContext.updatedLocation","siteLatitude":"@pageContext.siteLatitude","latitude":"@pageContext.updatedLat","siteAddress":"@pageContext.siteAddress","id":"@pageContext.siteId","siteLongitude":"@pageContext.siteLongitude","longitude":"@pageContext.updatedLong"}],"siteChangeLogId":"@pageContext.siteChangeLogId","computeMode":"@pageContext.computeMode","subAction":"@pageContext.subAction"}}],"actionUrl":"process/start"}}]}},{"name":"clearPageContext","type":"clearPageContext"},{"name":"closePanel","type":"closePanel"},{"name":"refreshDataGrid","type":"refreshDataGrid"}]}