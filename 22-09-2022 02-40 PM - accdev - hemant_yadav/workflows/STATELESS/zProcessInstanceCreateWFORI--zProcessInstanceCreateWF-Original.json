{"processInstanceId":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"contextChangePermitted":true,"name":"processInstanceId","description":"processInstanceId","processRule":"{if(typeof contextVar.zProcessInstanceData !== 'undefined' && contextVar.zProcessInstanceData !== ''){contextVar.zProcessInstanceId=contextVar.zProcessInstanceData[0].zProcessInstanceId;}}","nodeType":"PROCESS"},"createInstance":{"connectors":[{"exitPortType":"NextStep","nodeId":"instanceIdCheck"}],"name":"createInstance","description":"createInstance","inputVarMap":{"workOrderTaskSiteId":"siteId","siteLatitude":"{@lat}","workOrderTaskId":"workOrderTaskId","siteAddress":"{@address}","workOrderTaskScheduledDate":"{@plannedStartTime}","workOrderTaskEstimatedDuration":"workOrderTaskEstimatedDuration","mobileProcessId":"processId","workOrderTaskReOpenCount":"workOrderTaskReOpenCount","userId":"assignedToUserId","timeTakenForTask":"{@estimatedDurationInHours}","siteLongitude":"{@lng}"},"outputVarMap":{"zProcessInstanceId":"zProcessInstanceId"},"execType":"fork","nodeType":"WORKFLOW"},"getInstanceId":{"filter":"{$ZProcessInstance.mainTitle} = {@workOrderTaskId} AND {$ZProcessInstance.assignedToUserId} = {@userId}","models":["ZProcessInstance"],"connectors":[{"exitPortType":"NextStep","nodeId":"processInstanceId"}],"columns":{"createdDate":"ZProcessInstance.createdDate","zProcessInstanceId":"ZProcessInstance.id"},"name":"getInstanceId","description":"getInstanceId","orderBy":"createdDate DESC","inputVarMap":{"workOrderTaskId":"workOrderTaskId","userId":"userId"},"outputVarMap":{"data":"zProcessInstanceData"},"batchSize":"1","nodeType":"QUERY"},"workflowContext":{},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"createInstance"}],"name":"start","description":"Start","id":"start","nodeType":"START"},"end":{"name":"end","description":"end","inputVarMap":{"zProcessInstanceId":"zProcessInstanceId"},"outputVarMap":{"zProcessInstanceId":"zProcessInstanceId"},"nodeType":"END"},"workflowNodes":["start","createInstance","instanceIdCheck","getInstanceId","processInstanceId","end"],"instanceIdCheck":{"connectors":[{"exitPortType":"TrueStep","nodeId":"end"},{"exitPortType":"FalseStep","nodeId":"getInstanceId"}],"name":"instanceIdCheck","description":"instanceIdCheck","processRule":"(typeof contextVar.zProcessInstanceId !== 'undefined' && contextVar.zProcessInstanceId !== '')","nodeType":"DECISION"}}