{"fetchTaskLogData":{"models":["taskLog"],"connectors":[{"exitPortType":"NextStep","nodeId":"appendTaskLogData"}],"columns":{"taskLogEventType":"taskLog.eventType","taskLogTaskId":"taskLog.taskId"},"description":"Fetch Task Details","distinct":true,"inputVarMap":{"techBatchSize":"batchSize","newBatchNumber":"batchNumber"},"nodeType":"QUERY","name":"fetchTaskLogData","id":"fetchTaskLogData","outputVarMap":{"data":"techDataToAppend"},"batchSize":"batchSize","getCount":true,"batchNumber":"batchNumber"},"fetchMoreTaskLogs":{"connectors":[{"exitPortType":"TrueStep","nodeId":"fetchTaskLogData"},{"exitPortType":"FalseStep","nodeId":"end"}],"data":"taskLogData","name":"fetchMoreTaskLogs","description":"fetchMoreTaskLogs","inputVarMap":{},"processRule":"contextVar.noOfBatches >= contextVar.newBatchNumber","id":"fetchMoreTaskLogs","outputVarMap":{},"nodeType":"WHILELOOP"},"getTaskLogData":{"filter":"{$taskLogEventType}='taskDeadlineBreached'","models":["taskLog"],"connectors":[{"exitPortType":"NextStep","nodeId":"findNumberOfBatches"}],"columns":{"taskLogEventType":"taskLog.eventType","taskLogTaskId":"taskLog.taskId"},"name":"getTaskLogData","description":"getTaskLogData","inputVarMap":{},"outputVarMap":{"data":"taskLogData"},"nodeType":"QUERY","getCount":true},"findNumberOfBatches":{"connectors":[{"exitPortType":"NextStep","nodeId":"areMoreTechsPresent"}],"contextChangePermitted":true,"name":"findNumberOfBatches","description":"findNumberOfBatches","processRule":"contextVar.noOfBatches = Math.ceil(contextVar.count / contextVar.techBatchSize);contextVar.newBatchNumber = contextVar.taskBatchNumber + 1;contextVar.techBatchSize = contextVar.techBatchSize;","id":"findNumberOfBatches","nodeType":"PROCESS"},"areMoreTechsPresent":{"connectors":[{"exitPortType":"TrueStep","nodeId":"fetchMoreTaskLogs"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"areMoreTechsPresent","description":"areMoreTechsPresent","processRule":"contextVar.noOfBatches >= 1","id":"areMoreTechsPresent","nodeType":"DECISION"},"appendTaskLogData":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchMoreTaskLogs"}],"contextChangePermitted":true,"name":"appendTaskLogData","description":"appendTaskLogData","processRule":"if (Array.isArray(contextVar.techDataToAppend)) { contextVar.techDataToAppend.forEach(function(obj){contextVar.taskLogData.push(obj);}); } contextVar.newBatchNumber = contextVar.newBatchNumber + 1;","id":"appendTaskLogData","nodeType":"PROCESS"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"getTaskLogData"}],"name":"start","description":"Start","id":"start","nodeType":"START"},"end":{"name":"End","description":"end","inputVarMap":{"taskLogData":"taskLogData"},"outputVarMap":{"taskLogData":"taskLogData"},"id":"end","nodeType":"END"},"workflowNodes":["start","getTaskLogData","findNumberOfBatches","areMoreTechsPresent","fetchMoreTaskLogs","fetchTaskLogData","appendTaskLogData","end"]}