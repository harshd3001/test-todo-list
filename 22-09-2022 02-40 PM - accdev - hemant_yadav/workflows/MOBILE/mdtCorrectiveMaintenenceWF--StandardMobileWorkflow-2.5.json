{"getProcessInstance":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchDetails"}],"name":"getProcessInstance","description":"getProcessInstance","outputVarMap":{"id":"zProcessInstanceId"},"nodeType":"INSTANCE","operation":0},"backwardCompatibilityCheck":{"connectors":[{"exitPortType":"NextStep","nodeId":"mdtTaskDetailsLandingPage"}],"processId":"mdtBackwardCompatibilityWF","name":"backwardCompatibilityCheck","description":"backwardCompatibilityCheck","inputVarMap":{},"id":"backwardCompatibilityCheck","outputVarMap":{},"nodeType":"WORKFLOW"},"mdtInitialEvidencePage":{"connectors":[{"exitPortType":"NextStep","nodeId":"mdtServicesPage"}],"name":"mdtInitialEvidencePage","inputVarMap":{"incorrectAddress":"incorrectAddress","statusId":"statusId","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","reasonOfwrongSite":"reasonOfwrongSite","endTravelLocationCoordinates":"endTravelLocationCoordinates","endTravelDate":"endTravelDate"},"id":"mdtInitialEvidencePage","outputVarMap":{"initialComments":"initialComments","incorrectAddress":"incorrectAddress","recordInitialEvidenceLocationCoordinates":"recordInitialEvidenceLocationCoordinates","statusId":"statusId","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","reasonOfwrongSite":"reasonOfwrongSite","endTravelLocationCoordinates":"endTravelLocationCoordinates","initialEvidenceDataGrid":"initialEvidenceDataGrid","recordInitialEvidenceTime":"recordInitialEvidenceTime","endTravelDate":"endTravelDate"},"nodeType":"PAGE","processPage":"mdtInitialEvidencePage"},"mdtTaskDetailsLandingPageInProgress":{"connectors":[{"exitPortType":"NextStep","nodeId":"mdtInitialEvidencePage"}],"name":"mdtTaskDetailsLandingPageInProgress","description":"Provide some description for your page","inputVarMap":{"submitProgressComments":"submitProgressComments","crewAttendanceDetailsList":"crewAttendanceDetailsList","endDate":"endDate","taskDescription":"taskDescription","dueDate":"dueDate","incidentType":"incidentType","crewMobileAccess":"crewMobileAccess","correctiveTaskRequestReasons":"correctiveTaskRequestReasons","scheduleBreakDown":"scheduleBreakDown","fullTaskScheduleGridData":"fullTaskScheduleGridData","workOrderTaskId":"workOrderTaskId","checkOutCheckBoxForSubmitCapturedTime":"checkOutCheckBoxForSubmitCapturedTime","checkOutCheckBoxForSubmit":"checkOutCheckBoxForSubmit","longitude":"longitude","recordInitialEvidenceTime":"recordInitialEvidenceTime","initialComments":"initialComments","recordInitialEvidenceLocationCoordinates":"recordInitialEvidenceLocationCoordinates","cancellationNotes":"cancellationNotes","modesOfTransport":"modesOfTransport","customerName":"customerName","isCrewTask":"isCrewTask","servicesDataGrid":"servicesDataGrid","statusId":"statusId","enableServices":"enableServices","assetsList":"assetsList","newLocationPhoto":"newLocationPhoto","workOrderId":"workOrderId","taskProgress":"taskProgress","submitProgressEvidenceDataGrid":"submitProgressEvidenceDataGrid","viewTravelStatus":"viewTravelStatus","submitTypeListOptions":"submitTypeListOptions","fetchTransportModes":"fetchTransportModes","breakDownData":"breakDownData","submitType":"submitType","siteChangeReq":"siteChangeReq","latitude":"latitude","dateArray":"dateArray","travelIncidentReasonsListOptions":"travelIncidentReasonsListOptions","scheduledDate":"scheduledDate","taskTypeName":"taskTypeName","checkInIncidentReasonsListOptions":"checkInIncidentReasonsListOptions","submitServicesLocationCoordinates":"submitServicesLocationCoordinates","fetchActivityIncidentListOptions":"fetchActivityIncidentListOptions","reasonOfwrongSite":"reasonOfwrongSite","checkOutCheckBoxForSubmitLocationCoordinates":"checkOutCheckBoxForSubmitLocationCoordinates","workOrderTaskReOpenCount":"workOrderTaskReOpenCount","assignedToUserId":"assignedToUserId","address":"address","incorrectAddress":"incorrectAddress","cancellationReason":"cancellationReason","estimatedTaskDuration":"estimatedTaskDuration","taskPriority":"taskPriority","userName":"userName","fetchReportIssue":"fetchReportIssue","initialEvidenceDataGrid":"initialEvidenceDataGrid","travelStatus":"travelStatus","recordSubmitServicesTime":"recordSubmitServicesTime","serviceList":"serviceList","siteId":"siteId","incorrectSiteComments":"incorrectSiteComments","crewAttendanceDetailsDataGrid":"crewAttendanceDetailsDataGrid","contactPhone":"contactPhone","taskId":"taskId"},"id":"mdtTaskDetailsLandingPageInProgress","outputVarMap":{"isCrewTask":"isCrewTask","incorrectAddress":"incorrectAddress","statusId":"statusId","crewMobileAccess":"crewMobileAccess","incorrectSiteComments":"incorrectSiteComments","crewAttendanceDetailsDataGrid":"crewAttendanceDetailsDataGrid","newLocationPhoto":"newLocationPhoto","reasonOfwrongSite":"reasonOfwrongSite","endTravelLocationCoordinates":"endTravelLocationCoordinates","endTravelDate":"endTravelDate"},"nodeType":"PAGE","processPage":"mdtTaskDetailsLandingPage"},"fetchDetails":{"eventId":"mdtFetchMobileInstanceDetails","connectors":[{"exitPortType":"NextStep","nodeId":"processData"}],"contextChangePermitted":true,"name":"fetchDetails","description":"fetchDetails Event","inputVarMap":{},"outputVarMap":{},"nodeType":"PUBLISH","captureOutput":true},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"isSubmitProgressAtCreation"}],"name":"start","description":" Start","id":"start","nodeType":"START"},"processDataToCheckOut":{"connectors":[{"exitPortType":"NextStep","nodeId":"mdtTaskDetailsLandingPageInProgress"}],"contextChangePermitted":true,"name":"processDataToCheckOut","description":"Process task data to contextVar","processRule":"{ contextVar.submitType= '';contextVar.incorrectSiteComments= '';contextVar.reasonOfwrongSite= '';contextVar.newLocationPhoto= '';contextVar.incorrectAddress= '';contextVar.newLocationPhoto= '';contextVar.checkOutCheckBoxForSubmitCapturedTime= '';contextVar.submitProgressComments= '';contextVar.initialComments= '';contextVar.recordInitialEvidenceTime= ''; contextVar.recordInitialEvidenceLocationCoordinates= '';    contextVar.recordSubmitServicesTime= '';contextVar.submitServicesLocationCoordinates='';contextVar.checkOutCheckBoxForSubmit='';contextVar.travelStatus = '{%checkedOut}';contextVar.viewTravelStatus = contextVar.viewTravelStatus || true;}","id":"processDataToCheckOut","nodeType":"PROCESS"},"mdtPostProcessingSubmitProgress":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"processId":"mdtNewPostProcessingWF","name":"mdtPostProcessingSubmitProgress","description":"mdtPostProcessingSubmitProgress","inputVarMap":{},"id":"mdtPostProcessingSubmitProgress","outputVarMap":{},"execType":"fork","nodeType":"WORKFLOW"},"submitAndEndTask":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"processId":"mdtNewPostProcessingWF","name":"submitAndEndTask","description":"submitAndEndTask","inputVarMap":{"submitTaskTime":"submitTaskTime","submitType":"submitType","customerSignature":"customerSignature","approvedBy":"approvedBy","crewMobileAccess":"crewMobileAccess","pendingReviewStatus":"statusId","submitServicesLocationCoordinates":"submitServicesLocationCoordinates","finalEvidenceDataGrid":"finalEvidenceDataGrid","submitTaskLocationCoordinates":"submitTaskLocationCoordinates","reasonOfwrongSite":"reasonOfwrongSite","recordInitialEvidenceTime":"recordInitialEvidenceTime","initialComments":"initialComments","incorrectAddress":"incorrectAddress","recordInitialEvidenceLocationCoordinates":"recordInitialEvidenceLocationCoordinates","checkOutCheckBoxCapturedTime":"checkOutCheckBoxCapturedTime","endTravelLocationCoordinates":"endTravelLocationCoordinates","completedDate":"completedDate","initialEvidenceDataGrid":"initialEvidenceDataGrid","endTravelDate":"endTravelDate","isCrewTask":"isCrewTask","finalComments":"finalComments","servicesDataGrid":"servicesDataGrid","recordSubmitServicesTime":"recordSubmitServicesTime","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","checkOutCheckBox":"checkOutCheckBox"},"id":"submitAndEndTask","outputVarMap":{},"execType":"fork","nodeType":"WORKFLOW"},"mdtCheckOutPage":{"connectors":[{"exitPortType":"NextStep","nodeId":"mdtEndTaskSubmitPage"}],"name":"mdtCheckOutPage","description":"Provide some description for your page","inputVarMap":{"incorrectAddress":"incorrectAddress","statusId":"statusId","customerSignature":"customerSignature","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","reasonOfwrongSite":"reasonOfwrongSite","endTravelLocationCoordinates":"endTravelLocationCoordinates","endTravelDate":"endTravelDate"},"id":"mdtCheckOutPage","outputVarMap":{"incorrectAddress":"incorrectAddress","statusId":"statusId","customerSignature":"customerSignature","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","checkOutCheckBox":"checkOutCheckBox","reasonOfwrongSite":"reasonOfwrongSite","endTravelLocationCoordinates":"endTravelLocationCoordinates","completedDate":"completedDate","endTravelDate":"endTravelDate"},"nodeType":"PAGE","processPage":"mdtCheckOutPage"},"workflowNodes":["start","isSubmitProgressAtCreation","fetchCrewDetailsWF","mdtTaskDetailsLandingPageInProgress","processDataToCheckOut","getProcessInstance","fetchDetails","processData","backwardCompatibilityCheck","mdtTaskDetailsLandingPage","mdtInitialEvidencePage","mdtServicesPage","isSubmitProgress","mdtSubmitProgressPage","mdtPostProcessingSubmitProgress","mdtCustomerSignaturePage","mdtCheckOutPage","mdtEndTaskSubmitPage","submitAndEndTask","end"],"isSubmitProgress":{"connectors":[{"exitPortType":"TrueStep","nodeId":"mdtSubmitProgressPage"},{"exitPortType":"FalseStep","nodeId":"mdtCustomerSignaturePage"}],"name":"isSubmitProgress","description":"isSubmitProgress","processRule":"(typeof contextVar.submitType !='undefined' && contextVar.submitType != '' && contextVar.submitType=='submitTaskProgress')","nodeType":"DECISION"},"isSubmitProgressAtCreation":{"connectors":[{"exitPortType":"TrueStep","nodeId":"processDataToCheckOut"},{"exitPortType":"FalseStep","nodeId":"getProcessInstance"}],"name":"isSubmitProgressAtCreation","description":"isSubmitProgressAtCreation","processRule":"(typeof contextVar.submitType !='undefined' && contextVar.submitType != '' && contextVar.submitType=='submitTaskProgress')","nodeType":"DECISION"},"mdtServicesPage":{"connectors":[{"exitPortType":"NextStep","nodeId":"isSubmitProgress"}],"name":"mdtServicesPage","inputVarMap":{"incorrectAddress":"incorrectAddress","partsForOthers":"partsForOthers","partsForRemoval":"partsForRemoval","endTravelLocationCoordinates":"endTravelLocationCoordinates","partsForInstallation":"partsForInstallation","endTravelDate":"endTravelDate","assetMaintenanceListOptions":"assetMaintenanceListOptions","partsForService":"partsForService","statusId":"statusId","incorrectSiteComments":"incorrectSiteComments","fetchSuggestedMaterials":"fetchSuggestedMaterials","newLocationPhoto":"newLocationPhoto","reasonOfwrongSite":"reasonOfwrongSite","fetchMaterialsInCatalogNS":"fetchMaterialsInCatalogNS","assetRemovalListOptions":"assetRemovalListOptions"},"id":"mdtServicesPage","outputVarMap":{"incorrectAddress":"incorrectAddress","submitType":"submitType","additionalMaterialsDataGrid":"additionalMaterialsDataGrid","endTravelLocationCoordinates":"endTravelLocationCoordinates","endTravelDate":"endTravelDate","submitServicesLocationCoordinates":"submitServicesLocationCoordinates","finalEvidenceDataGrid":"finalEvidenceDataGrid","finalComments":"finalComments","servicesDataGrid":"servicesDataGrid","statusId":"statusId","recordSubmitServicesTime":"recordSubmitServicesTime","incorrectSiteComments":"incorrectSiteComments","fetchSuggestedMaterials":"fetchSuggestedMaterials","newLocationPhoto":"newLocationPhoto","reasonOfwrongSite":"reasonOfwrongSite"},"nodeType":"PAGE","processPage":"mdtServicesPage"},"processData":{"connectors":[{"exitPortType":"NextStep","nodeId":"backwardCompatibilityCheck"}],"contextChangePermitted":true,"name":"processData","description":"processData","processRule":"let suggestedParts = Array.isArray(contextVar.fetchSuggestedPartsForServ) ? contextVar.fetchSuggestedPartsForServ : []; let suggestedPartsForInst = Array.isArray(contextVar.fetchSuggestedPartsData) ? JSON.parse(JSON.stringify(contextVar.fetchSuggestedPartsData)) : []; let catalogIdList = []; suggestedPartsForInst = suggestedPartsForInst.filter((obj, i) => { if (catalogIdList.indexOf(obj.catalogId) === -1) { catalogIdList.push(obj.catalogId); return true; } else { return false; } }); suggestedPartsForInst.forEach(obj => { delete obj.displayNameWtSerialNo; delete obj.installedBaseId; delete obj.serialNumber; }); let partsInSite = Array.isArray(contextVar.fetchPartsInCustomerSite) ? contextVar.fetchPartsInCustomerSite : []; let partsInCatalogNS = Array.isArray(contextVar.fetchNotSuggestedParts) ? contextVar.fetchNotSuggestedParts : []; contextVar.partsForRemoval = suggestedParts.concat(partsInSite); contextVar.partsForInstallation = suggestedPartsForInst.concat(partsInCatalogNS); contextVar.partsForService = suggestedParts.concat(partsInSite); contextVar.partsForOthers = suggestedParts.concat(partsInSite); let taskDetails = contextVar.taskDetail; if (Array.isArray(taskDetails) && taskDetails.length > 0) { let currStatus = taskDetails[0].currentStatus; if (currStatus === 'workOrderTaskInProgress') { contextVar.travelStatus = '{%checkedOut}'; contextVar.viewTravelStatus = contextVar.viewTravelStatus || true; } }","id":"processData","nodeType":"PROCESS","jsEngine":"es6"},"workflowContext":{"pendingReviewStatus":"workOrderTaskPendingReview","inProgressStatus":"workOrderTaskInProgress","checkedOutTravelStatus":"{%checkedOut}"},"mdtSubmitProgressPage":{"connectors":[{"exitPortType":"NextStep","nodeId":"mdtPostProcessingSubmitProgress"}],"name":"mdtSubmitProgressPage","description":"Provide some description for your page","inputVarMap":{"submitProgressComments":"submitProgressComments","initialComments":"initialComments","incorrectAddress":"incorrectAddress","submitType":"submitType","recordInitialEvidenceLocationCoordinates":"recordInitialEvidenceLocationCoordinates","inProgressStatus":"statusId","endTravelLocationCoordinates":"endTravelLocationCoordinates","initialEvidenceDataGrid":"initialEvidenceDataGrid","endTravelDate":"endTravelDate","submitServicesLocationCoordinates":"submitServicesLocationCoordinates","servicesDataGrid":"servicesDataGrid","recordSubmitServicesTime":"recordSubmitServicesTime","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","reasonOfwrongSite":"reasonOfwrongSite","submitProgressEvidenceDataGrid":"submitProgressEvidenceDataGrid","recordInitialEvidenceTime":"recordInitialEvidenceTime"},"id":"mdtSubmitProgressPage","outputVarMap":{"submitProgressComments":"submitProgressComments","initialComments":"initialComments","incorrectAddress":"incorrectAddress","recordInitialEvidenceLocationCoordinates":"recordInitialEvidenceLocationCoordinates","submitType":"submitType","endTravelLocationCoordinates":"endTravelLocationCoordinates","initialEvidenceDataGrid":"initialEvidenceDataGrid","endTravelDate":"endTravelDate","submitServicesLocationCoordinates":"submitServicesLocationCoordinates","servicesDataGrid":"servicesDataGrid","statusId":"statusId","recordSubmitServicesTime":"recordSubmitServicesTime","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","checkOutCheckBoxForSubmitCapturedTime":"checkOutCheckBoxForSubmitCapturedTime","reasonOfwrongSite":"reasonOfwrongSite","checkOutCheckBoxForSubmitLocationCoordinates":"checkOutCheckBoxForSubmitLocationCoordinates","submitProgressEvidenceDataGrid":"submitProgressEvidenceDataGrid","checkOutCheckBoxForSubmit":"checkOutCheckBoxForSubmit","recordInitialEvidenceTime":"recordInitialEvidenceTime"},"nodeType":"PAGE","processPage":"mdtSubmitProgressPage"},"mdtCustomerSignaturePage":{"connectors":[{"exitPortType":"NextStep","nodeId":"mdtCheckOutPage"}],"name":"mdtCustomerSignaturePage","description":"Provide some description for your page","inputVarMap":{"incorrectAddress":"incorrectAddress","statusId":"statusId","customerSignature":"customerSignature","approvedBy":"approvedBy","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","reasonOfwrongSite":"reasonOfwrongSite","endTravelLocationCoordinates":"endTravelLocationCoordinates","completedDate":"completedDate","endTravelDate":"endTravelDate"},"id":"mdtCustomerSignaturePage","outputVarMap":{"incorrectAddress":"incorrectAddress","statusId":"statusId","customerSignature":"customerSignature","approvedBy":"approvedBy","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","reasonOfwrongSite":"reasonOfwrongSite","endTravelLocationCoordinates":"endTravelLocationCoordinates","endTravelDate":"endTravelDate"},"nodeType":"PAGE","processPage":"mdtCustomerSignaturePage"},"mdtEndTaskSubmitPage":{"connectors":[{"exitPortType":"NextStep","nodeId":"submitAndEndTask"}],"name":"mdtEndTaskSubmitPage","description":"Provide some description for your page","inputVarMap":{"incorrectAddress":"incorrectAddress","statusId":"statusId","customerSignature":"customerSignature","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","checkOutCheckBox":"checkOutCheckBox","reasonOfwrongSite":"reasonOfwrongSite","endTravelLocationCoordinates":"endTravelLocationCoordinates","endTravelDate":"endTravelDate"},"id":"mdtEndTaskSubmitPage","outputVarMap":{"incorrectAddress":"incorrectAddress","statusId":"statusId","submitTaskTime":"submitTaskTime","submitTaskLocationCoordinates":"submitTaskLocationCoordinates","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","checkOutCheckBox":"checkOutCheckBox","reasonOfwrongSite":"reasonOfwrongSite","endTravelLocationCoordinates":"endTravelLocationCoordinates","endTravelDate":"endTravelDate"},"nodeType":"PAGE","processPage":"mdtEndTaskSubmitPage"},"end":{"name":"End","description":"end","inputVarMap":{"zProcessInstanceId":"zProcessInstanceId"},"outputVarMap":{"zProcessInstanceId":"zProcessInstanceId"},"id":"end","nodeType":"END"},"fetchCrewDetailsWF":{"connectors":[{"exitPortType":"NextStep","nodeId":"mdtTaskDetailsLandingPageInProgress"}],"processId":"mdtFetchCrewDetails","name":"fetchCrewDetailsWF","description":"fetchCrewDetailsWF","inputVarMap":{},"id":"fetchCrewDetailsWF","outputVarMap":{},"nodeType":"WORKFLOW"},"mdtTaskDetailsLandingPage":{"connectors":[{"exitPortType":"NextStep","nodeId":"mdtInitialEvidencePage"}],"name":"mdtTaskDetailsLandingPage","description":"Provide some description for your page","inputVarMap":{"submitTypeListOptions":"submitTypeListOptions","fetchTransportModes":"fetchTransportModes","crewAttendanceDetailsList":"crewAttendanceDetailsList","breakDownData":"breakDownData","siteChangeReq":"siteChangeReq","endDate":"endDate","latitude":"latitude","taskDescription":"taskDescription","dueDate":"dueDate","incidentType":"incidentType","dateArray":"dateArray","travelIncidentReasonsListOptions":"travelIncidentReasonsListOptions","scheduledDate":"scheduledDate","crewMobileAccess":"crewMobileAccess","taskTypeName":"taskTypeName","checkInIncidentReasonsListOptions":"checkInIncidentReasonsListOptions","correctiveTaskRequestReasons":"correctiveTaskRequestReasons","scheduleBreakDown":"scheduleBreakDown","fullTaskScheduleGridData":"fullTaskScheduleGridData","workOrderTaskId":"workOrderTaskId","fetchActivityIncidentListOptions":"fetchActivityIncidentListOptions","workOrderTaskReOpenCount":"workOrderTaskReOpenCount","longitude":"longitude","assignedToUserId":"assignedToUserId","address":"address","cancellationNotes":"cancellationNotes","cancellationReason":"cancellationReason","estimatedTaskDuration":"estimatedTaskDuration","taskPriority":"taskPriority","modesOfTransport":"modesOfTransport","userName":"userName","fetchReportIssue":"fetchReportIssue","customerName":"customerName","isCrewTask":"isCrewTask","travelStatus":"travelStatus","statusId":"statusId","enableServices":"enableServices","serviceList":"serviceList","assetsList":"assetsList","siteId":"siteId","crewAttendanceDetailsDataGrid":"crewAttendanceDetailsDataGrid","workOrderId":"workOrderId","contactPhone":"contactPhone","taskProgress":"taskProgress","taskId":"taskId","viewTravelStatus":"viewTravelStatus"},"id":"mdtTaskDetailsLandingPage","outputVarMap":{"isCrewTask":"isCrewTask","incorrectAddress":"incorrectAddress","statusId":"statusId","checkInCapturedTime":"endTravelDate","crewMobileAccess":"crewMobileAccess","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","crewAttendanceDetailsDataGrid":"crewAttendanceDetailsDataGrid","reasonOfwrongSite":"reasonOfwrongSite","endTravelLocationCoordinates":"endTravelLocationCoordinates"},"nodeType":"PAGE","processPage":"mdtTaskDetailsLandingPage"}}