{"pageContext":{},"actionOnLoad":["@actions.decisionAction","@actions.initialData","@actions.getlistOptionData","@actions.initialDataEnd","@actions.setEnableTrue"],"jslib":{"isSaveContinueDisabled":"function (pageContext) { return (!(pageContext.workGroupName !== '' && pageContext.workGroupFilterMethod !== '' && ((typeof pageContext.workGroupFilterValue !== 'undefined' && pageContext.workGroupFilterValue !== '' && pageContext.workGroupFilterValue.length > 0))));}","isSaveAndMembersHidden":"function (pageContext) { return pageContext.workGroupAction === 'add';}","dynamicHeaderText":"function(pageContext){ if( pageContext.workGroupAction === 'add'){return '@lang.[\"ang\",\"Add New Group\"]';}else if(pageContext.workGroupAction === 'edit' || pageContext.workGroupAction === 'editInitial'){return '@lang.[\"edit\",\"Edit\"] ' + pageContext.displayName;}}","isSaveDisabled":"function (pageContext) { if (typeof pageContext.workGroupFilterValue !== 'undefined' && pageContext.workGroupFilterValue !== '' && pageContext.workGroupFilterValue.length > 0 && typeof pageContext.initialWorkGroupFilterValue !== 'undefined' && pageContext.initialWorkGroupFilterValue !== '' && pageContext.initialWorkGroupFilterValue.length > 0 && pageContext.workGroupFilterValue.length !== pageContext.initialWorkGroupFilterValue.length) { pageContext.filterCheck = false; } else { for (var i in pageContext.workGroupFilterValue) { if (typeof pageContext.workGroupFilterValue !== 'undefined' && pageContext.workGroupFilterValue !== '' && pageContext.workGroupFilterValue.length > 0 && typeof pageContext.initialWorkGroupFilterValue !== 'undefined' && pageContext.initialWorkGroupFilterValue !== '' && pageContext.initialWorkGroupFilterValue.length > 0 && pageContext.initialWorkGroupFilterValue.indexOf(pageContext.workGroupFilterValue[i].value) == -1) { pageContext.filterCheck = false; break; } pageContext.filterCheck = true; } } return (pageContext.filterCheck && pageContext.initialWorkGroupName === pageContext.workGroupName && pageContext.initialWorkGroupDescription === pageContext.workGroupDescription && pageContext.initialWorkGroupFilterMethod === pageContext.workGroupFilterMethod || (!(typeof pageContext.workGroupName !== 'undefined' && pageContext.workGroupName !== '' && typeof pageContext.workGroupFilterMethod !== 'undefined' && pageContext.workGroupFilterMethod !== '' && typeof pageContext.workGroupFilterValue !== 'undefined' && pageContext.workGroupFilterValue !== '' && pageContext.workGroupFilterValue.length > 0))); }","isSaveContinueHiddenAndFilterMethodDisabled":"function (pageContext){return (pageContext.workGroupAction === 'edit' || pageContext.workGroupAction === 'editInitial');}"},"header":{"children":[{"buttonType":"primary","hidden":"@jslib.isSaveContinueHiddenAndFilterMethodDisabled","actionOnClick":["@actions.setSubActionUpsertWorkGroup","@actions.fireProcessEvent","@actions.processApiOutput","@actions.setActionEdit","@actions.displayName","@actions.initialData","@actions.initialDataEnd","@actions.refreshDataGrid"],"disabled":"@jslib.isSaveContinueDisabled","id":"saveAndContinue","type":"button","title":"@lang.['sc1','Save & Continue']"},{"buttonType":"primary","hidden":"@jslib.isSaveAndMembersHidden","actionOnClick":["@actions.setSubActionUpsertWorkGroup","@actions.fireProcessEvent","@actions.closePanel","@actions.refreshDataGrid"],"disabled":"@jslib.isSaveDisabled","id":"submit","type":"button","title":"@lang.['s12','Save']"},{"icon":"@iconlib.NavigationCloseGrey","actionOnClick":["@actions.closePanel","@actions.clearPageContext"],"id":"Close","type":"buttonIcon"}],"title":"@jslib.dynamicHeaderText"},"body":{"children":[{"children":[{"children":[{"children":[{"isRequired":true,"id":"name1","label":"@lang.['n','Name']","placeholder":"@lang.['en1','Enter name']","type":"input","value":"@pageContext.workGroupName"},{"id":"description","label":"@lang.['d7','Description (Optional)']","type":"textarea","value":"@pageContext.workGroupDescription","placeHolder":"@lang.['ed1','Enter description']"},{"isRequired":true,"actionOnChange":["@actions.setFilterForWorkGroup","@actions.selectFilter"],"options":"@pageContext.listOptionData","disabled":"@jslib.isSaveContinueHiddenAndFilterMethodDisabled","id":"id","optTitleKey":"listOptionAnswerAnswerOptionText","optValueKey":"listOptionAnswerOptionId","title":"@lang.['fm','Filter Method']","type":"select","value":"@pageContext.workGroupFilterMethod","placeHolder":"@lang.['sfm','Select filter method']"},{"actionOnChange":[],"optLabelMap":"regionName","optValueMap":"regionId","searchByOptions":{"dataSourceId":"query/read","sourceType":"query","dataToBeSent":{"filter":"{$regionName} like {@filter}","models":["region"],"columns":{"regionId":"region.id","regionName":"region.name","regionDescription":"region.description"},"orderBy":"regionName ASC","distinct":true}},"hidden":"@pageContext.hiddenDropdownRegion","isMultiSelect":true,"isAdvanceSearch":{"rowsToSelect":{"filter":"{$regionId} IN {@selectedRegionId}","models":["region"],"columns":{"regionId":"region.id","regionName":"region.name","regionDescription":"region.description"},"inputs":{"selectedRegionId":"@pageContext.selectedRegion"}},"columnsToBeHidden":["regionId"],"selectedRowAdvanceGrid":"regionsAdvancedGrid","rowsToBeSelect":"selectedRegion","sidePanelTitle":"@lang.['as5','Advanced Search']","gridHeaderText":"@lang.['navM','Market']","customColumns":{"regionName":"@lang.['n','Name']","regionDescription":"@lang.['d','Description']"},"searchKeys":["regionName"]},"label":"@lang.['f2','Filters']","id":"workGroupFilterValue","type":"selectDropdown","value":"@pageContext.workGroupFilterValue","placeHolder":"@lang.['sf1','Select filters']"},{"actionOnChange":[],"optLabelMap":"workOrderTypeName","optValueMap":"workOrderTypeId","searchByOptions":{"dataSourceId":"query/read","sourceType":"query","dataToBeSent":{"filter":"{$workOrderTypeStatusId}= 'workOrderTypeActive' AND {$workOrderTypeName} like {@filter}","models":["workOrderType"],"columns":{"workOrderTypeStatusId":"workOrderType.statusId","workOrderTypeId":"workOrderType.id","workOrderTypeName":"workOrderType.name","workOrderTypeDescription":"workOrderType.description"},"orderBy":"workOrderTypeName ASC","distinct":true}},"hidden":"@pageContext.hiddenDropdownWorkOrderType","isMultiSelect":true,"isAdvanceSearch":{"rowsToSelect":{"filter":"{$workOrderTypeId} IN {@selectedWorkOrderTypeId}","models":["workOrderType"],"columns":{"workOrderTypeStatusId":"workOrderType.statusId","workOrderTypeId":"workOrderType.id","workOrderTypeName":"workOrderType.name","workOrderTypeDescription":"workOrderType.description"},"inputs":{"selectedWorkOrderTypeId":"@pageContext.selectedWorkOrderType"}},"columnsToBeHidden":["workOrderTypeId","workOrderTypeStatusId"],"selectedRowAdvanceGrid":"workOrderTypeAdvancedGrid","rowsToBeSelect":"selectedWorkOrderType","sidePanelTitle":"@lang.['as5','Advanced Search']","gridHeaderText":"@lang.['wot1','Work Order Type']","customColumns":{"workOrderTypeName":"@lang.['n','Name']","workOrderTypeDescription":"@lang.['d','Description']"},"searchKeys":["workOrderTypeName"]},"label":"@lang.['f2','Filters']","id":"workGroupFilterValue","type":"selectDropdown","value":"@pageContext.workGroupFilterValue","placeHolder":"@lang.['sf1','Select filters']"},{"actionOnChange":[],"optLabelMap":"taskTypeName","optValueMap":"taskTypeId","searchByOptions":{"dataSourceId":"query/read","sourceType":"query","dataToBeSent":{"filter":"{$taskTypeStatusId}= 'taskTypeActive' AND {$taskTypeName} like {@filter}","models":["taskType"],"columns":{"taskTypeId":"taskType.id","taskTypeDescription":"taskType.description","taskTypeWebTask":"IF({$taskType.webTask}=true,'@lang.['w3','Web']','@lang.['m5','Mobile']')","taskTypeStatusId":"taskType.statusId","taskTypeName":"taskType.name"},"orderBy":"taskTypeName ASC","distinct":true,"translate":true}},"hidden":"@pageContext.hiddenDropdownTaskType","isMultiSelect":true,"isAdvanceSearch":{"rowsToSelect":{"filter":"{$taskTypeId} IN {@selectedTaskTypeId}","models":["taskType"],"columns":{"taskTypeId":"taskType.id","taskTypeDescription":"taskType.description","taskTypeWebTask":"IF({$taskType.webTask}=true,'@lang.['w3','Web']','@lang.['m5','Mobile']')","taskTypeStatusId":"taskType.statusId","taskTypeName":"taskType.name"},"inputs":{"selectedTaskTypeId":"@pageContext.selectedTaskType"}},"columnsToBeHidden":["taskTypeId","taskTypeStatusId"],"selectedRowAdvanceGrid":"taskTypeAdvancedGrid","rowsToBeSelect":"selectedTaskType","sidePanelTitle":"@lang.['as5','Advanced Search']","gridHeaderText":"@lang.['taskType','Task Type']","customColumns":{"taskTypeDescription":"@lang.['d','Description']","taskTypeName":"@lang.['n','Name']"},"searchKeys":["taskTypeName"]},"label":"@lang.['f2','Filters']","id":"workGroupFilterValue","type":"selectDropdown","value":"@pageContext.workGroupFilterValue","placeHolder":"@lang.['sf1','Select filters']"},{"actionOnChange":[],"optLabelMap":"customerName","optValueMap":"customerId","searchByOptions":{"dataSourceId":"query/read","sourceType":"query","dataToBeSent":{"filter":"{$customerStatusId}= 'customerActive' AND {$customerName} like {@filter}","models":["customer"],"columns":{"customerStatusId":"customer.statusId","customerId":"customer.id","customerCity":"customer.city","customerDescription":"customer.description","customerName":"customer.companyName"},"orderBy":"customerName ASC","distinct":true}},"hidden":"@pageContext.hiddenDropdownCustomer","isMultiSelect":true,"isAdvanceSearch":{"rowsToSelect":{"filter":"{$customerId} IN {@selectedCustomerId}","models":["customer"],"columns":{"customerStatusId":"customer.statusId","customerId":"customer.id","customerCity":"customer.city","customerDescription":"customer.description","customerName":"customer.companyName"},"inputs":{"selectedCustomerId":"@pageContext.selectedCustomer"}},"columnsToBeHidden":["customerId","customerStatusId"],"selectedRowAdvanceGrid":"customerAdvancedGrid","rowsToBeSelect":"selectedCustomer","sidePanelTitle":"@lang.['as5','Advanced Search']","gridHeaderText":"@lang.['c16','Customer']","customColumns":{"customerDescription":"@lang.['d','Description']","customerName":"@lang.['n','Name']"},"searchKeys":["customerName"]},"label":"@lang.['f2','Filters']","id":"workGroupFilterValue","type":"selectDropdown","value":"@pageContext.workGroupFilterValue","placeHolder":"@lang.['sf1','Select filters']"}],"id":"workGroupInformation","label":"@lang.['wgi','Work Group Information']","type":"section"}],"label":"@lang.['wgi','Work Group Information']","type":"tab"},{"hidden":"@jslib.isSaveAndMembersHidden","children":[{"children":[{"tableWidth":"100rem","id":"workGroupMemberDatagrid","type":"dataGrid","jsonDef":{"isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY']","type":"noData"},"rowActions":{},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['n','Name']","options":{"flex":0.8,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"userName"},{"name":"@lang.['r8','Role']","options":{"flex":0.7,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"workforceRole"},{"name":"@lang.['c','City']","options":{"flex":0.55,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"workforceCity"},{"name":"@lang.['s11','State']","options":{"flex":0.55,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"workforceState"},{"name":"@lang.['e4','Email']","options":{"flex":1.4,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"userEmail"}],"dataToBeSent":{"filter":"{$workforceWorkGroup.workGroupId} = {@idFilter} AND {$userStatus}!='Deactivated' AND {$workforce.statusId}!= 'workforceDeactivated'","models":["workforceWorkGroup","workforce","User","listOptionAnswer"],"inputs":{"idFilter":"@pageContext.workGroupId"},"columns":{"workforceCity":"workforce.city","userStatus":"User.status","userEmail":"User.emailId","workforceRole":"listOptionAnswer.answerOptionText","userName":"User.name","workforceState":"workforce.state","userId":"User.id"},"name":"getUserList","distinct":true,"orderBy":"userName ASC","description":"getUserData","outerJoinOnModel":"workforce","links":{"workforceWorkGroup":"workforce","User":"workforce","workforce":"listOptionAnswer"},"translate":true},"actionOnLoad":[],"dataSourceId":"query/read","jslib":{},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['i5','Individuals']","children":[{"buttonType":"primary","actionOnClick":["@actions.openWorkForceWorkGroupNestedSidePanel"],"id":"addNew","type":"button","title":"@lang.['e1','Edit']"}]},"isSelectable":false,"actions":[{"name":"openWorkForceWorkGroupNestedSidePanel","type":"openPanel","pageId":"O0QHZJCRT"}],"searchKeys":["userName","workforceCity","workforceState"],"multiSelect":true}}],"id":"membersSection","label":"@lang.['s16','Search']","type":"section","transparent":true}],"label":"@lang.['m7','Members']","id":"membersTab","type":"tab"}],"label":"","type":"tab"}]},"actions":[{"name":"closePanel","type":"closePanel"},{"name":"clearPageContext","type":"clearPageContext"},{"name":"refreshDataGrid","type":"refreshDataGrid"},{"name":"setSubActionUpsertWorkGroup","type":"script","actionDef":"function(pageContext){pageContext.subAction='upsertWorkGroup';}"},{"name":"setActionEdit","type":"script","actionDef":"function(pageContext){pageContext.workGroupAction='editInitial';}"},{"name":"processApiOutput","type":"script","actionDef":"function (pageContext) {if (typeof pageContext.workGroupId === 'undefined' || pageContext.workGroupId === '') { pageContext.workGroupId = pageContext.responseData[0].data[0].workGroupId; }}"},{"falseStep":[],"trueStep":["@actions.selectFilter","@actions.decisionActionRegion"],"name":"decisionAction","type":"decision","actionDef":"function(pageContext){if(pageContext.workGroupAction === 'editInitial'){return true;}}"},{"falseStep":["@actions.decisionActionWorkOrderType"],"trueStep":["@actions.fetchWorkGroupFilterMethodRegion"],"name":"decisionActionRegion","type":"decision","actionDef":"function(pageContext){if(pageContext.workGroupFilterMethod === 'region'){return true;}else {return false;}}"},{"falseStep":["@actions.decisionActionTaskType"],"trueStep":["@actions.fetchWorkGroupFilterMethodWorkOrderType"],"name":"decisionActionWorkOrderType","type":"decision","actionDef":"function(pageContext){if(pageContext.workGroupFilterMethod === 'workOrderType'){return true;}else{return false;}}"},{"falseStep":["@actions.decisionActionCustomer"],"trueStep":["@actions.fetchWorkGroupFilterMethodTaskType"],"name":"decisionActionTaskType","type":"decision","actionDef":"function(pageContext){if(pageContext.workGroupFilterMethod === 'taskType'){return true;}else{return false;}}"},{"falseStep":[],"trueStep":["@actions.fetchWorkGroupFilterMethodCustomer"],"name":"decisionActionCustomer","type":"decision","actionDef":"function(pageContext){if(pageContext.workGroupFilterMethod === 'customer'){return true;}else{return false;}}"},{"name":"displayName","type":"script","actionDef":"function (pageContext) { return pageContext.displayName = pageContext.workGroupName;}"},{"name":"initialData","type":"script","actionDef":"function (pageContext) { if (pageContext.workGroupAction === 'addInitial') { pageContext.workGroupFilterMethod = ''; pageContext.workGroupName = ''; pageContext.workGroupDescription = ''; pageContext.workGroupFilterValue = ''; pageContext.workGroupAction = 'add'; pageContext.hiddenDropdownRegion = true; pageContext.hiddenDropdownWorkOrderType = true; pageContext.hiddenDropdownTaskType = true; pageContext.hiddenDropdownCustomer = true; } else if (pageContext.workGroupAction === 'editInitial') { pageContext.initialWorkGroupDescription = pageContext.workGroupDescription; pageContext.initialWorkGroupFilterMethod = pageContext.workGroupFilterMethod; pageContext.initialWorkGroupName = pageContext.workGroupName; } }"},{"name":"initialDataEnd","type":"script","actionDef":"function (pageContext) {if (pageContext.workGroupAction === 'editInitial') { pageContext.initialWorkGroupFilterValue = []; if (pageContext.workGroupFilterValue !== 'undefined') { for (var i = 0; i < pageContext.workGroupFilterValue.length; i++) { pageContext.initialWorkGroupFilterValue.push(pageContext.workGroupFilterValue[i].value); } } pageContext.workGroupAction = 'edit'; } }"},{"name":"setEnableTrue","type":"script","actionDef":"function (pageContext) {pageContext.enable=true;}"},{"name":"selectFilter","type":"script","actionDef":"function (pageContext) { var filterMethod = ['workOrderType', 'region', 'customer','taskType']; filterMethod.forEach(element => { var name = 'hiddenDropdown' + element.charAt(0).toUpperCase() + element.slice(1); pageContext[name] = (element !== pageContext.workGroupFilterMethod); }); }"},{"name":"setFilterForWorkGroup","type":"script","actionDef":"function (pageContext) { return pageContext.workGroupFilterValue = [];}"},{"name":"fetchWorkGroupFilterMethodRegion","outputVarMap":{"data":"@pageContext.workGroupFilterValue"},"type":"query","actionDef":{"filter":"{$value} IN ({@workGroupFilterValue})","models":["region"],"columns":{"label":"region.name","value":"region.id"},"inputs":{"workGroupFilterValue":{"filter":"{$workGroupFilter.workGroupId} = {@workGroupId}","models":["workGroupFilter"],"columns":{"workGroupFilterValue":"workGroupFilter.filterId"}},"workGroupId":"@pageContext.workGroupId"}}},{"name":"fetchWorkGroupFilterMethodCustomer","outputVarMap":{"data":"@pageContext.workGroupFilterValue"},"type":"query","actionDef":{"filter":"{$value} IN ({@workGroupFilterValue})","models":["customer"],"columns":{"label":"customer.companyName","value":"customer.id"},"inputs":{"workGroupFilterValue":{"filter":"{$workGroupFilter.workGroupId} = {@workGroupId}","models":["workGroupFilter"],"columns":{"workGroupFilterValue":"workGroupFilter.filterId"}},"workGroupId":"@pageContext.workGroupId"}}},{"name":"fetchWorkGroupFilterMethodWorkOrderType","outputVarMap":{"data":"@pageContext.workGroupFilterValue"},"type":"query","actionDef":{"filter":"{$value} IN ({@workGroupFilterValue}) AND {$workOrderTypeStatusId}= 'workOrderTypeActive'","models":["workOrderType"],"columns":{"workOrderTypeStatusId":"workOrderType.statusId","label":"workOrderType.name","value":"workOrderType.id"},"inputs":{"workGroupFilterValue":{"filter":"{$workGroupFilter.workGroupId} = {@workGroupId}","models":["workGroupFilter"],"columns":{"workGroupFilterValue":"workGroupFilter.filterId"}},"workGroupId":"@pageContext.workGroupId"}}},{"name":"fetchWorkGroupFilterMethodTaskType","outputVarMap":{"data":"@pageContext.workGroupFilterValue"},"type":"query","actionDef":{"filter":"{$value} IN ({@workGroupFilterValue}) AND {$taskTypeStatusId}= 'taskTypeActive'","models":["taskType"],"columns":{"taskTypeStatusId":"taskType.statusId","label":"taskType.name","value":"taskType.id"},"inputs":{"workGroupFilterValue":{"filter":"{$workGroupFilter.workGroupId} = {@workGroupId}","models":["workGroupFilter"],"columns":{"workGroupFilterValue":"workGroupFilter.filterId"}},"workGroupId":"@pageContext.workGroupId"}}},{"name":"getlistOptionData","outputVarMap":{"data":"@pageContext.listOptionData"},"type":"query","actionDef":{"filter":"{$listOption.id} = {@workGroupFilter}","models":["listOption","listOptionAnswer"],"columns":{"listOptionAnswerAnswerOptionText":"listOptionAnswer.answerOptionText","listOptionAnswerRank":"listOptionAnswer.rank","listOptionAnswerOptionId":"listOptionAnswer.id"},"inputs":{"workGroupFilter":"workGroupFilter"},"orderBy":"listOptionAnswerRank ASC","links":{"listOption":"listOptionAnswer"},"translate":true}},{"endPoint":"event/start","name":"fireProcessEvent","outputVarMap":{"data":"@pageContext.responseData"},"type":"api","actionDef":{"data":[{"eventId":"workforceWorkGroupProcessEvent","contextVar":{"workGroup":[{"filterMethod":"@pageContext.workGroupFilterMethod","filterValue":"@pageContext.workGroupFilterValue","name":"@pageContext.workGroupName","description":"@pageContext.workGroupDescription","id":"@pageContext.workGroupId"}],"subAction":"@pageContext.subAction"}}]}}]}