{"pageContext":{},"actionOnLoad":["@actions.initialData","@actions.getListOptionCategoryData","@actions.getListOptionData"],"jslib":{"isHiddenOnAddNew":"function(pageContext){if(pageContext.workOrderTypeAction==='add'){return false;}else{return true;}}","isSave&ContinueDisabled":"function(pageContext){ return (pageContext.workOrderTypeName === undefined || pageContext.workOrderTypeName === '' || (typeof pageContext.acceptMobileWorkflowsValue === 'undefined' || pageContext.acceptMobileWorkflowsValue === '') || (typeof pageContext.cancellationListOptionId === 'undefined' || pageContext.cancellationListOptionId === '') || (typeof pageContext.listOptionCategoryId === 'undefined' || pageContext.listOptionCategoryId === ''))}","isDeactivated":"function(pageContext){if(pageContext.workOrderTypeAction=='view'){return true}return false;}","isHiddenOnEdit":"function(pageContext){if(pageContext.workOrderTypeAction==='edit'){return false;}else{return true;}}","notView":"function(pageContext){if(pageContext.workOrderTypeAction !== 'view'){return true} return false;}","dynamicHeaderText":"function(pageContext){ if(pageContext.workOrderTypeAction === 'add'){return '@lang.[\"anwot\",\"Add New Work Order Type\"]'}else if(pageContext.workOrderTypeAction === 'edit' || pageContext.workOrderTypeAction === 'view'){return '@lang.[\"ewot\",\"Edit Work Order Type\"]'}}","isWorkOrderTypeActionAdd":"function(pageContext){return pageContext.workOrderTypeAction === 'add'}","cannotDeactivate":"function(pageContext){if(pageContext.workOrderTypeAction !== 'edit'){return true} return false;}","isSaveDisabled":"function(pageContext){if(pageContext.workOrderTypeAction === 'edit'){if((pageContext.workOrderTypeName === '' || pageContext.workOrderTypeDescription === '' || pageContext.cancellationListOptionId === '' || pageContext.acceptMobileWorkflowsValue === '') || (pageContext.cancellationListOptionId === pageContext.initialCanellationListOptionId && pageContext.acceptMobileWorkflowsValue.toString() === pageContext.initialAcceptMobileWorkflowsValue && pageContext.workOrderTypeName === pageContext.initialWorkOrderTypeName && pageContext.workOrderTypeDescription === pageContext.initialWorkOrderTypeDescription)){return true;}else {return false;}}else {return true;}}"},"header":{"children":[{"hidden":"@jslib.isWorkOrderTypeActionAdd","statusColor":"@pageContext.statusNameColor","id":"status","type":"status","value":"@pageContext.statusName"},{"buttonType":"secondary","hidden":"@jslib.cannotDeactivate","actionOnClick":["@actions.openCanDeactivateModal"],"id":"deactivate","type":"button","title":"@lang.['d10','Deactivate']"},{"buttonType":"secondary","hidden":"@jslib.notView","actionOnClick":["@actions.openReactivateModal"],"id":"reactivate","type":"button","title":"@lang.['r6','Reactivate']"},{"buttonType":"primary","hidden":"@jslib.isHiddenOnEdit","actionOnClick":["@actions.setSubActionUpsertWorkOrderType","@actions.fireProcessEvent","@actions.refreshDataGrid","@actions.closePanel"],"disabled":"@jslib.isSaveDisabled","id":"submit1","type":"button","title":"@lang.['s12','Save']"},{"buttonType":"primary","hidden":"@jslib.isHiddenOnAddNew","actionOnClick":["@actions.setSubActionUpsertWorkOrderType","@actions.fireProcessEvent","@actions.setEditPageData","@actions.getListOptionCategoryData","@actions.getListOptionData","@actions.initialData","@actions.refreshDataGrid"],"disabled":"@jslib.isSave&ContinueDisabled","id":"submit","type":"button","title":"@lang.['sc1','Save & Continue']"},{"icon":"@iconlib.NavigationCloseGrey","actionOnClick":["@actions.clearPageContext","@actions.closePanel","@actions.refreshDataGrid"],"id":"close","type":"buttonIcon"}],"title":"@jslib.dynamicHeaderText"},"body":{"children":[{"children":[{"isRequired":true,"disabled":"@jslib.isDeactivated","inputType":"text","id":"workOrderTypeName","label":"@lang.['n','Name']","placeholder":"@lang.['en1','Enter name']","type":"input","value":"@pageContext.workOrderTypeName"},{"disabled":"@jslib.isDeactivated","id":"workOrderTypeDescription","label":"@lang.['d7','Description (Optional)']","type":"textarea","value":"@pageContext.workOrderTypeDescription","placeHolder":"@lang.['ed1','Enter description']"}],"label":"@lang.['woti','Work Order Type Information']","id":"workOrderTypeInfo","type":"section"},{"children":[{"isRequired":true,"actionOnChange":["@actions.changeInAcceptMobileWorkflowsValue"],"options":[{"name":"@lang.['y','Yes']","id":true},{"name":"@lang.['n1','No']","id":false}],"disabled":"@jslib.isDeactivated","id":"acceptMobileWorkflowsValue","optTitleKey":"name","optValueKey":"id","title":"@lang.['amw','Accept Mobile Workflows']","type":"select","value":"@pageContext.acceptMobileWorkflowsValue","placeHolder":"@lang.['so','Select option']"}],"label":"@lang.['wotc','Work Order Type Configuration']","id":"workorderConfigSection","type":"section"},{"children":[{"actionOnChange":["@actions.decisionActionForListOptionData"],"options":"@pageContext.getListOptionCategoryList","disabled":"@jslib.isDeactivated","id":"categoryId","optTitleKey":"listOptionName","optValueKey":"listOptionCategoryId","label":"@lang.['loc1','List Options Category']","type":"select","title":"@lang.['loc1','List Options Category']","value":"@pageContext.listOptionCategoryId","placeHolder":"@lang.['sloc','Select list option category']"},{"options":"@pageContext.listOptionList","disabled":"@jslib.isDeactivated","id":"cancellationListOptionId","optTitleKey":"listOptionName","optValueKey":"listOptionId","label":"@lang.['navLO','List Options']","type":"select","title":"@lang.['navLO','List Options']","value":"@pageContext.cancellationListOptionId","placeHolder":"@lang.['slo','Select list option']"}],"label":"@lang.['cr1','Cancellation Reasons']","id":"cancellationReasons","type":"section"},{"hidden":"@jslib.isHiddenOnEdit","children":[{"label":"@lang.['att','Associated Task Types']","id":"associatedTaskTypesDatagrid","type":"datagrid","jsonDef":{"isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"tableWidth":"50rem","rowActions":{"children":[]},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['s','Status']","options":{"flex":0.5,"sortOrder":"ASC","colorCode":"statusNameColor","sortable":true,"showLabel":true},"key":"statusName"},{"name":"@lang.['n','Name']","options":{"sortable":true,"showLabel":true},"key":"taskTypeName"},{"name":"@lang.['taskType','Task Type']","options":{"flex":0.5,"sortable":true,"showLabel":true},"key":"taskTypeWebTask"},{"name":"@lang.['d','Description']","options":{"sortable":true,"showLabel":true},"key":"taskTypeDescription"}],"dataToBeSent":{"filter":"{$workOrderTypeId} = {@idFilter}","models":["workOrderTypeTaskType","workOrderType","taskType","ZStatus"],"inputs":{"idFilter":"@pageContext.workOrderTypeId"},"columns":{"taskTypeDescription":"taskType.description","workOrderTypeId":"workOrderType.id","taskTypeWebTask":"IF({$taskType.webTask}=false,'Mobile','Web')","taskTypeStatusId":"taskType.statusId","statusName":"ZStatus.name","workOrderTypeTaskTypeId":"workOrderTypeTaskType.taskTypeId","taskTypeName":"taskType.name","statusNameColor":"ZStatus.colorCode"},"orderBy":"taskTypeName ASC","links":{"taskType":"workOrderTypeTaskType","workOrderType":"workOrderTypeTaskType","ZStatus":"taskType"}},"dataSourceId":"query/read","rowTextLength":40,"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['att','Associated Task Types']","children":[{"buttonType":"primary","actionOnClick":["@actions.opensettingsWorkOrderTypeTaskTypeNSP"],"id":"edit","type":"button","title":"@lang.['e1','Edit']"}]},"isSelectable":false,"dataSource":[],"actions":[{"name":"opensettingsWorkOrderTypeTaskTypeNSP","type":"openPanel","pageId":"settingsWorkOrderTypeTaskTypeNSP"}],"searchKeys":["taskTypeName"]}}],"id":"datagridAssociatedTaskTypes","type":"section","transparent":true}]},"actions":[{"endPoint":"event/start","name":"fireProcessEvent","outputVarMap":{"data":"@pageContext.responseData"},"type":"api","actionDef":{"data":[{"eventId":"settingsWorkOrderWorkOrderTypeProcessEvent","contextVar":{"workOrderType":{"acceptMobileWorkflows":"@pageContext.acceptMobileWorkflowsValue","cancellationListOptionId":"@pageContext.cancellationListOptionId","isDeactivated":"@pageContext.workOrderTypeIsDeactivated","statusId":"@pageContext.workOrderTypeStatusId","statusTargetModel":"workOrderType","recver":"@pageContext.workOrderTypeRecver","name":"@pageContext.workOrderTypeName","description":"@pageContext.workOrderTypeDescription","id":"@pageContext.workOrderTypeId"},"subAction":"@pageContext.subAction"}}]}},{"name":"clearPageContext","type":"clearPageContext"},{"name":"closeModal","type":"closeModal"},{"name":"closePanel","type":"closePanel"},{"name":"initialData","type":"script","actionDef":"function(pageContext){if(pageContext.workOrderTypeAction==='add'){pageContext.workOrderTypeName='';pageContext.workOrderTypeDescription='';pageContext.acceptMobileWorkflowsValue='';pageContext.workOrderTypeStatusId='workOrderTypeActive';pageContext.getListOptionId='';}else if(pageContext.workOrderTypeAction==='edit'){pageContext.initialWorkOrderTypeName=pageContext.workOrderTypeName;pageContext.initialCanellationListOptionId=pageContext.cancellationListOptionId;pageContext.initialWorkOrderTypeDescription=pageContext.workOrderTypeDescription;pageContext.initialAcceptMobileWorkflowsValue=pageContext.acceptMobileWorkflowsValue.toString();pageContext.changeAcceptMobileWorkflowsValue=pageContext.acceptMobileWorkflowsValue.toString()}}"},{"name":"changeInAcceptMobileWorkflowsValue","type":"script","actionDef":"function(pageContext){pageContext.changeAcceptMobileWorkflowsValue = pageContext.acceptMobileWorkflowsValue.toString();}"},{"name":"setSubActionDeactivateWorkorderType","type":"script","actionDef":"function(pageContext){pageContext.subAction='deactivateWorkOrderType';pageContext.workOrderTypeStatusId='workOrderTypeDeactivated';}"},{"name":"setSubActionReactivateWorkOrderType","type":"script","actionDef":"function(pageContext){pageContext.subAction='reactivateWorkOrderType';pageContext.workOrderTypeStatusId='workOrderTypeActive';}"},{"subTitle":"@lang.['aysywtdtwot','Are you sure you want to deactivate this work order type?']","name":"openCanDeactivateModal","options":[{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.setSubActionDeactivateWorkorderType","@actions.fireProcessEvent","@actions.closeModal","@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"type":"button","title":"@lang.['d10','Deactivate']"}],"type":"openModal","title":"@lang.['dwot1','Deactivate Work Order Type']"},{"subTitle":"@lang.['aysywtrtwot','Are you sure you want to reactivate this work order type? ']","name":"openReactivateModal","options":[{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.setSubActionReactivateWorkOrderType","@actions.fireProcessEvent","@actions.closeModal","@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"type":"button","title":"@lang.['r6','Reactivate']"}],"type":"openModal","title":"@lang.['rwot','Reactivate Work Order Type']"},{"name":"getListOptionData","outputVarMap":{"data":"@pageContext.listOptionList"},"type":"query","actionDef":{"filter":"{$categoryId} = {@categoryId}","models":["listOption"],"columns":{"listOptionName":"listOption.name","listOptionId":"listOption.id","categoryId":"listOption.categoryId"},"inputs":{"categoryId":"@pageContext.listOptionCategoryId"}}},{"name":"setEditPageData","type":"script","actionDef":"function(pageContext){pageContext.workOrderTypeId=pageContext.responseData[0].data[0].data[0].id;pageContext.workOrderTypeAction='edit';}"},{"name":"getListOptionCategoryData","outputVarMap":{"data":"@pageContext.getListOptionCategoryList"},"type":"query","actionDef":{"filter":"{$categoryTypeId} = 'listOption' ","models":["category"],"columns":{"listOptionCategoryId":"category.id","listOptionName":"category.name","categoryTypeId":"category.categoryTypeId"},"orderBy":"listOptionName ASC"}},{"name":"refreshDataGrid","type":"refreshDataGrid"},{"name":"setSubActionUpsertWorkOrderType","type":"script","actionDef":"function(pageContext){pageContext.subAction='upsertWorkOrderType';}"},{"falseStep":["@actions.clearListOptionData"],"trueStep":["@actions.getListOptionData","@actions.clearListOptionData"],"name":"decisionActionForListOptionData","type":"decision","actionDef":"function(pageContext){if(typeof pageContext.listOptionCategoryId !=='undefined' && pageContext.listOptionCategoryId !=='' ) {return true;} return false;}"},{"name":"clearListOptionData","type":"script","actionDef":"function(pageContext){pageContext.cancellationListOptionId='';pageContext.initialCanellationListOptionId='';}"}]}