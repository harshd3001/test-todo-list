{"insertIntoWorkOrderLog":{"connectors":[{"exitPortType":"NextStep","nodeId":"isWorkOrderTaskPresent"}],"processId":"workOrderLogWF","name":"insertIntoWorkOrderLog","description":"insertIntoWorkOrderLog","inputVarMap":{"subAction":"subAction","workOrderLog":"workOrderLog"},"outputVarMap":{},"nodeType":"WORKFLOW"},"fetchInputData":{"connectors":[{"exitPortType":"NextStep","nodeId":"processWorkOrderLogData"}],"contextChangePermitted":true,"name":"fetchInputData","description":"fetchInputData","processRule":"{for (var key in contextVar.data) {contextVar[key] = contextVar.data[key];} contextVar.today = new Date().toISOString().replace('T', ' ').replace('Z', '')};contextVar.userId=contextVar.currentUserDetail[0].userId;","nodeType":"PROCESS"},"processWorkOrderLogData":{"connectors":[{"exitPortType":"NextStep","nodeId":"insertIntoWorkOrderLog"}],"contextChangePermitted":true,"name":"processWorkOrderLogData","description":"processWorkOrderLogData","processRule":"{ contextVar.subAction = 'upsertWorkOrderLog'; contextVar.workOrderLog = [{ 'loggedByUserId': contextVar.eventType === 'BEFORE_DELETE' ? contextVar.userId : contextVar.modifiedByUser , 'logDate': contextVar.eventType === 'BEFORE_DELETE' ? contextVar.today : contextVar.modifiedDate , 'workOrderId': contextVar.workOrderId, 'event': contextVar.workOrderPartRequirementsUpdated }]; }","nodeType":"PROCESS","jsEngine":"es6"},"fetchLocalizedKeys":{"filter":"{$listOptionAnswer.listOptionId}='workOrderTaskLogDetails' AND {$listOptionAnswerId}={@partRequirementsUpdated}","models":["listOptionAnswer"],"connectors":[{"exitPortType":"NextStep","nodeId":"processWorkOrderTaskLogData"}],"columns":{"listOptionAnswerId":"listOptionAnswer.id","listOptionAnswerAnswerOptionText":"listOptionAnswer.answerOptionText"},"name":"fetchLocalizedKeys","description":"fetchLocalizedKeys","inputVarMap":{"partRequirementsUpdated":"partRequirementsUpdated"},"outputVarMap":{"data":"localizedData"},"nodeType":"QUERY"},"logger":{"connectors":[{"exitPortType":"NextStep","nodeId":"insertIntoWorkOrderTaskLog"}],"name":"logger","description":"Provide some description for your logger node","inputVarMap":{"logLevel":"logLevel","message":"message"},"id":"logger","nodeType":"LOGGER"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchCurrentUser"}],"name":"Start","description":"Start","nodeType":"START"},"isWorkOrderTaskPresent":{"connectors":[{"exitPortType":"TrueStep","nodeId":"fetchLocalizedKeys"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"isWorkOrderTaskPresent","description":"isWorkOrderTaskPresent","processRule":"(typeof contextVar.workOrderTaskId !== 'undefined' &&  contextVar.workOrderTaskId !==''  &&  contextVar.workOrderTaskId !=='-')","nodeType":"DECISION"},"insertIntoWorkOrderTaskLog":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"processId":"workOrderTaskLogsWF","name":"insertIntoWorkOrderTaskLog","description":"insertIntoWorkOrderTaskLog","inputVarMap":{"workOrderTaskLog":"workOrderTaskLog","subAction":"subAction"},"outputVarMap":{},"nodeType":"WORKFLOW"},"workflowNodes":["start","fetchCurrentUser","fetchInputData","processWorkOrderLogData","insertIntoWorkOrderLog","isWorkOrderTaskPresent","fetchLocalizedKeys","processWorkOrderTaskLogData","processData1","logger","insertIntoWorkOrderTaskLog","end"],"fetchCurrentUser":{"filter":"{$userId}={@userId}","models":["User"],"connectors":[{"exitPortType":"NextStep","nodeId":"fetchInputData"}],"columns":{"userName":"User.name","userId":"User.id"},"name":"fetchCurrentUser","description":"fetchCurrentUser","inputVarMap":{"{@userId}":"userId"},"outputVarMap":{"data":"currentUserDetail"},"nodeType":"QUERY"},"processData1":{"connectors":[{"exitPortType":"NextStep","nodeId":"logger"}],"contextChangePermitted":true,"name":"processData1","description":"Processing site data and task details","processRule":"contextVar.logLevel = 'INFO'; contextVar.message='contextVar = '+ JSON.stringify(contextVar);","id":"processData1","nodeType":"PROCESS"},"workflowContext":{"workOrderPartRequirementsUpdated":"workOrderPriceListUpdated","partRequirementsUpdated":"priceListUpdated","workOrderTaskEdited":"workOrderTaskEdited"},"processWorkOrderTaskLogData":{"connectors":[{"exitPortType":"NextStep","nodeId":"processData1"}],"contextChangePermitted":true,"name":"processWorkOrderTaskLogData","description":"processWorkOrderTaskLogData","processRule":"{ contextVar.subAction = 'upsertWorkOrderTaskLog'; contextVar.workOrderTaskLog = [{ 'loggedByUserId': contextVar.eventType === 'BEFORE_DELETE' ? contextVar.userId : contextVar.modifiedByUser, 'logDate': contextVar.eventType === 'BEFORE_DELETE' ? contextVar.today : contextVar.modifiedDate , 'workOrderTaskId': contextVar.workOrderTaskId, 'event': contextVar.workOrderTaskEdited  , 'details': (contextVar.localizedData !== '' || typeof contextVar.localizedData !== 'undefined') ?  contextVar.localizedData[0].listOptionAnswerAnswerOptionText : '' }]; }","nodeType":"PROCESS","jsEngine":"es6"},"end":{"name":"end","description":"End","inputVarMap":{},"outputVarMap":{},"nodeType":"END"}}