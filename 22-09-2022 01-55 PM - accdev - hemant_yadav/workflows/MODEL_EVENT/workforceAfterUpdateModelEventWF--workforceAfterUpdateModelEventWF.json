{"processInputData":{"connectors":[{"exitPortType":"NextStep","nodeId":"checkIfLocationHasChanged"}],"contextChangePermitted":true,"name":"processInputData","description":"processInputData","processRule":"{ for (const key in contextVar.data) { contextVar[key] = contextVar.data[key]; } contextVar.location = contextVar.latitude + ',' + contextVar.longitude; contextVar.timestamp = Math.floor(Date.now() / 1000); contextVar.language = 'en'; }","nodeType":"PROCESS","jsEngine":"es6"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"processInputData"}],"name":"start","description":"start","nodeType":"START"},"checkIfLocationHasChanged":{"connectors":[{"exitPortType":"TrueStep","nodeId":"fetchTimeZoneOffset"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"checkIfLocationHasChanged","description":"checkIfLocationHasChanged","processRule":"typeof contextVar.latitude !== 'undefined' && contextVar.latitude!=='' && typeof contextVar.longitude!=='undefined' && contextVar.longitude!=='' && (typeof contextVar.latLong ==='undefined' || contextVar.latLong==='' || contextVar.location!==contextVar.latLong)","nodeType":"DECISION"},"decisionNodeForUpsert":{"connectors":[{"exitPortType":"TrueStep","nodeId":"callWorkforceUpsertWF"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"decisionNodeForUpsert","description":"decisionNodeForUpsert","processRule":"contextVar.workforceJsonObj.length > 0","nodeType":"DECISION"},"end":{"name":"end","description":"end","inputVarMap":{},"outputVarMap":{},"nodeType":"END"},"callWorkforceUpsertWF":{"eventId":"workforceModelUpsertEvent","connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"multirecord":true,"name":"callWorkforceUpsertWF","description":"callWorkforceUpsertWF","inputVarMap":{"workforceJsonObj":"workforceJsonObj"},"outputVarMap":{},"nodeType":"PUBLISH"},"processTimeZoneData":{"connectors":[{"exitPortType":"NextStep","nodeId":"decisionNodeForUpsert"}],"contextChangePermitted":true,"name":"processTimeZoneData","description":"processTimeZoneData","processRule":"{ contextVar.workforceJsonObj = []; if (contextVar.timeZoneOffsetData.length > 0) { if (contextVar.timeZoneOffsetData[0].status == 'OK') { if (contextVar.timeZoneOffsetData[0].dstOffset > 0) { contextVar.latestTimeZoneOffset = -((contextVar.timeZoneOffsetData[0].rawOffset + contextVar.timeZoneOffsetData[0].dstOffset) / 60); } else { contextVar.latestTimeZoneOffset = -(contextVar.timeZoneOffsetData[0].rawOffset / 60); } contextVar.workforceJsonObj.push({ 'userId': contextVar.userId, 'timezoneOffset': contextVar.latestTimeZoneOffset, 'latLong':contextVar.location }); } } }","nodeType":"PROCESS","jsEngine":"es6"},"workflowNodes":["start","processInputData","checkIfLocationHasChanged","fetchTimeZoneOffset","processTimeZoneData","decisionNodeForUpsert","callWorkforceUpsertWF","end"],"fetchTimeZoneOffset":{"connectors":[{"exitPortType":"NextStep","nodeId":"processTimeZoneData"}],"name":"fetchTimeZoneOffset","description":"fetchTimeZoneOffset","networkId":"UH6NLJO3AC","inputVarMap":{"location":"location","language":"language","timestamp":"timestamp"},"outputVarMap":{"data":"timeZoneOffsetData"},"nodeType":"NETWORK"}}