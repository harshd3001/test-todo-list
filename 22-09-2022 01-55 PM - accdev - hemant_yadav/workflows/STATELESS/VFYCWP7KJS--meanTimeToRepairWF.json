{"queryAverageTime":{"filter":"{$status} = 'workOrderTaskCompleted'","models":["workOrderTask","User"],"connectors":[{"exitPortType":"NextStep","nodeId":"processAvgTime"}],"columns":{"actualStartTime":"workOrderTask.actualStartTime","avgTime":"AVG(TIMESTAMPDIFF(MINUTE,{$workOrderTask.actualStartTime},{$workOrderTask.completedDate}))","name":"User.name","assignToUserId":"workOrderTask.assignedToUserId","completedDate":"workOrderTask.completedDate","status":"workOrderTask.statusId"},"name":"queryAverageTime","description":"Average Mean time to repair","id":"queryAverageTime","outputVarMap":{"data":"avgTime"},"groupBy":"assignToUserId","nodeType":"QUERY"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"queryAverageTime"}],"name":"start","description":"Start","id":"start","nodeType":"START"},"end":{"name":"End","description":"end","inputVarMap":{"featureValue":"featureValue"},"outputVarMap":{"featureValue":"featureValue"},"id":"end","nodeType":"END"},"processAvgTime":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"contextChangePermitted":true,"name":"processAvgTime","description":"Process average time to provide feature value","processRule":"{var low, high, techValue; var avgTime = contextVar.avgTime; var avgTimeArr = []; if(contextVar.avgTime != '' && typeof contextVar.avgTime != undefined) { for(var i = 0; i < avgTime.length; i++) { avgTimeArr.push(parseInt(avgTime[i].avgTime)); if(contextVar.techId == avgTime[i].assignToUserId) { techValue = parseInt(avgTime[i].avgTime); } } avgTimeArr.sort(function (a, b) { return a - b; }); avgTimeArr = avgTimeArr.filter(function(obj) { return (obj != 0); });low = avgTimeArr[0]; high = avgTimeArr[avgTimeArr.length - 1];contextVar.featureValue = (5 - (5 * (techValue - low) / (high - low))); }}","id":"processAvgTime","nodeType":"PROCESS"},"workflowNodes":["start","queryAverageTime","processAvgTime","end"]}