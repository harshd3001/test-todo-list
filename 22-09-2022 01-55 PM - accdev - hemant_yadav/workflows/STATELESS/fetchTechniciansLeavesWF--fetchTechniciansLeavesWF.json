{"fetchMoreTechsLeaves":{"connectors":[{"exitPortType":"TrueStep","nodeId":"getMoreTechniciansLeaves"},{"exitPortType":"FalseStep","nodeId":"end"}],"data":"appendTechnicianLeaveData","name":"fetchMoreTechsLeaves","description":"fetchMoreTechsLeaves","inputVarMap":{},"processRule":"contextVar.noOfLeavesBatches >= contextVar.newLeavesBatchNumber","id":"fetchMoreTechsLeaves","outputVarMap":{},"nodeType":"WHILELOOP"},"workflowContext":{},"getTechniciansLeaves":{"models":["workforceLeave","workforce"],"connectors":[{"exitPortType":"NextStep","nodeId":"findNumberOfLeavesBatches"}],"columns":{"workforceLeaveEndDate":"workforceLeave.endDate","startTime":"workforceLeave.startDate","endTime":"workforceLeave.endDate","workforceUserId":"workforceLeave.workforceUserId","workforceLeaveStartDate":"workforceLeave.startDate"},"orderBy":"workforceLeaveStartDate ASC","description":"getTechniciansLeaves","distinct":true,"inputVarMap":{"customBatchSize":"batchSize","endDate":"endDate","loopArray":"loopArray","leavesFilter":"filter","startDate":"startDate"},"nodeType":"QUERY","filter":"filter","name":"getTechniciansLeaves","links":{"workforce":"workforceLeave"},"outputVarMap":{"data":"appendTechnicianLeaveData","count":"leavesCount","batchSize":"techLeavesbatchSize","batchNumber":"techLeavesBatchNumber"},"batchSize":"batchSize","getCount":true},"getMoreTechniciansLeaves":{"models":["workforceLeave","workforce"],"connectors":[{"exitPortType":"NextStep","nodeId":"appendShifts"}],"columns":{"workforceLeaveEndDate":"workforceLeave.endDate","startTime":"workforceLeave.startDate","endTime":"workforceLeave.endDate","workforceUserId":"workforceLeave.workforceUserId","workforceLeaveStartDate":"workforceLeave.startDate"},"orderBy":"workforceLeaveStartDate ASC","description":"getMoreTechniciansLeaves","distinct":true,"inputVarMap":{"customBatchSize":"batchSize","endDate":"endDate","newLeavesBatchNumber":"batchNumber","loopArray":"loopArray","leavesFilter":"filter","startDate":"startDate"},"nodeType":"QUERY","filter":"filter","name":"getMoreTechniciansLeaves","links":{"workforce":"workforceLeave"},"outputVarMap":{"data":"appendTechnicianLeaves"},"batchSize":"batchSize","getCount":true,"batchNumber":"batchNumber"},"appendShifts":{"connectors":[{"exitPortType":"NextStep","nodeId":"areMoreTechLeavesPresent"}],"contextChangePermitted":true,"name":"appendTasks","description":"appendTasks","processRule":"if (Array.isArray(contextVar.appendTechnicianLeaves)) { contextVar.appendTechnicianLeaves.forEach(function(obj){contextVar.appendTechnicianLeaveData.push(obj);}); } contextVar.newLeavesBatchNumber = contextVar.newLeavesBatchNumber + 1;","id":"appendTasks","nodeType":"PROCESS"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"getTechniciansLeaves"}],"name":"start","description":"Start","nodeType":"START"},"findNumberOfLeavesBatches":{"connectors":[{"exitPortType":"NextStep","nodeId":"areMoreTechLeavesPresent"}],"contextChangePermitted":true,"name":"findNumberOfLeavesBatches","description":"findNumberOfLeavesBatches","processRule":"contextVar.noOfLeavesBatches = Math.ceil(contextVar.leavesCount / contextVar.customBatchSize);contextVar.newLeavesBatchNumber = contextVar.techLeavesBatchNumber + 1;","nodeType":"PROCESS"},"end":{"name":"end","description":"End","inputVarMap":{"appendTechnicianLeaveData":"appendTechnicianLeaveData"},"outputVarMap":{"appendTechnicianLeaveData":"appendTechnicianLeaveData"},"nodeType":"END"},"areMoreTechLeavesPresent":{"connectors":[{"exitPortType":"TrueStep","nodeId":"fetchMoreTechsLeaves"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"areMoreTechLeavesPresent","description":"areMoreTechLeavesPresent","processRule":"contextVar.noOfLeavesBatches >= 2","id":"areMoreTechLeavesPresent","nodeType":"DECISION"},"workflowNodes":["start","getTechniciansLeaves","findNumberOfLeavesBatches","areMoreTechLeavesPresent","fetchMoreTechsLeaves","getMoreTechniciansLeaves","appendShifts","end"]}