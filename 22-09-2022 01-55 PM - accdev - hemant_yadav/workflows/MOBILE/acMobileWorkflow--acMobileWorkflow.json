{"mdtInitialEvidencePage":{"connectors":[{"exitPortType":"NextStep","nodeId":"workflowacFetchCompAddressData"}],"name":"mdtInitialEvidencePage","inputVarMap":{"incorrectAddress":"incorrectAddress","comps":"comps","value1":"value1","partsForOthers":"partsForOthers","partsForRemoval":"partsForRemoval","progressValue":"progressValue","endTravelLocationCoordinates":"endTravelLocationCoordinates","partsForInstallation":"partsForInstallation","endTravelDate":"endTravelDate","assetMaintenanceListOptions":"assetMaintenanceListOptions","acGuide":"acGuide","partsForService":"partsForService","statusId":"statusId","incorrectSiteComments":"incorrectSiteComments","fetchSuggestedMaterials":"fetchSuggestedMaterials","newLocationPhoto":"newLocationPhoto","endTime":"endTime","reasonOfwrongSite":"reasonOfwrongSite","fetchMaterialsInCatalogNS":"fetchMaterialsInCatalogNS","compsDataGrid":"compsDataGrid","assetRemovalListOptions":"assetRemovalListOptions"},"id":"mdtInitialEvidencePage","outputVarMap":{"value6":"value6","value5":"value5","value8":"value8","value7":"value7","submitTaskTime":"submitTaskTime","value2":"value2","value1":"value1","value4":"value4","value3":"value3","value9":"value9","servicesPerformed":"servicesPerformed","submitTaskLocationCoordinates":"submitTaskLocationCoordinates","end":"end","reasonOfwrongSite":"reasonOfwrongSite","value11":"value11","value10":"value10","compsDataGrid":"compsDataGrid","recordInitialEvidenceTime":"recordInitialEvidenceTime","initialComments":"initialComments","incorrectAddress":"incorrectAddress","comps":"comps","recordInitialEvidenceLocationCoordinates":"recordInitialEvidenceLocationCoordinates","endTravelLocationCoordinates":"endTravelLocationCoordinates","initialEvidenceDataGrid":"initialEvidenceDataGrid","endTravelDate":"endTravelDate","servicesDataGrid":"servicesDataGrid","statusId":"statusId","progress":"progress","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","submitTaskDateTime":"submitTaskDateTime","driveFromAddress":"driveFromAddress"},"position":{"x":3310,"y":20},"nodeType":"PAGE","processPage":"acTaskPage"},"taskDetailsLandingPage":{"connectors":[{"exitPortType":"NextStep","nodeId":"updateResultData1"}],"name":"taskDetailsLandingPage","description":"Provide some description for your page","inputVarMap":{"submitProgressComments":"submitProgressComments","crewAttendanceDetailsList":"crewAttendanceDetailsList","endDate":"endDate","taskDescription":"taskDescription","dueDate":"dueDate","incidentType":"incidentType","crewMobileAccess":"crewMobileAccess","correctiveTaskRequestReasons":"correctiveTaskRequestReasons","scheduleBreakDown":"scheduleBreakDown","fullTaskScheduleGridData":"fullTaskScheduleGridData","workOrderTaskId":"workOrderTaskId","checkOutCheckBoxForSubmitCapturedTime":"checkOutCheckBoxForSubmitCapturedTime","checkOutCheckBoxForSubmit":"checkOutCheckBoxForSubmit","longitude":"longitude","recordInitialEvidenceTime":"recordInitialEvidenceTime","initialComments":"initialComments","recordInitialEvidenceLocationCoordinates":"recordInitialEvidenceLocationCoordinates","cancellationNotes":"cancellationNotes","modesOfTransport":"modesOfTransport","customerName":"customerName","isCrewTask":"isCrewTask","servicesDataGrid":"servicesDataGrid","statusId":"statusId","enableServices":"enableServices","assetsList":"assetsList","newLocationPhoto":"newLocationPhoto","workOrderId":"workOrderId","taskProgress":"taskProgress","submitProgressEvidenceDataGrid":"submitProgressEvidenceDataGrid","acLoanType":"acLoanType","viewTravelStatus":"viewTravelStatus","submitTypeListOptions":"submitTypeListOptions","fetchTransportModes":"fetchTransportModes","breakDownData":"breakDownData","submitType":"submitType","siteChangeReq":"siteChangeReq","latitude":"latitude","dateArray":"dateArray","contactPerson":"contactPerson","travelIncidentReasonsListOptions":"travelIncidentReasonsListOptions","scheduledDate":"scheduledDate","taskTypeName":"taskTypeName","checkInIncidentReasonsListOptions":"checkInIncidentReasonsListOptions","submitServicesLocationCoordinates":"submitServicesLocationCoordinates","lender":"lender","fetchActivityIncidentListOptions":"fetchActivityIncidentListOptions","reasonOfwrongSite":"reasonOfwrongSite","checkOutCheckBoxForSubmitLocationCoordinates":"checkOutCheckBoxForSubmitLocationCoordinates","workOrderTaskReOpenCount":"workOrderTaskReOpenCount","acReportType":"acReportType","assignedToUserId":"assignedToUserId","address":"address","incorrectAddress":"incorrectAddress","cancellationReason":"cancellationReason","estimatedTaskDuration":"estimatedTaskDuration","taskPriority":"taskPriority","userName":"userName","fetchReportIssue":"fetchReportIssue","initialEvidenceDataGrid":"initialEvidenceDataGrid","travelStatus":"travelStatus","recordSubmitServicesTime":"recordSubmitServicesTime","lenderName":"lenderName","serviceList":"serviceList","siteId":"siteId","incorrectSiteComments":"incorrectSiteComments","crewAttendanceDetailsDataGrid":"crewAttendanceDetailsDataGrid","acAddressTwo":"acAddressTwo","contactPhone":"contactPhone","taskId":"taskId"},"id":"taskDetailsLandingPage","outputVarMap":{"isCrewTask":"isCrewTask","incorrectAddress":"incorrectAddress","statusId":"statusId","crewMobileAccess":"crewMobileAccess","incorrectSiteComments":"incorrectSiteComments","crewAttendanceDetailsDataGrid":"crewAttendanceDetailsDataGrid","newLocationPhoto":"newLocationPhoto","reasonOfwrongSite":"reasonOfwrongSite","startTravelDate":"siteStartTravelDate","startTravelLocationCoordinates":"siteStartTravelLocationCoordinates"},"position":{"x":1930,"y":20},"nodeType":"PAGE","processPage":"acMdtStartTravel"},"acHomeToSiteDistanceCalculateWF":{"connectors":[{"exitPortType":"NextStep","nodeId":"mdtTaskDetailsLandingPage"}],"processId":"acHomeToSiteDistanceCalculate","name":"acHomeToSiteDistanceCalculateWF","description":"acHomeToSiteDistanceCalculateWF","inputVarMap":{"workOrderTaskId":"workOrderTaskId","siteId":"siteId","assignee":"assignee","workOrderId":"workOrderId"},"id":"acHomeToSiteDistanceCalculateWF","outputVarMap":{"techAddress":"techAddress","siteAddress":"siteAddress","insertedId":"insertedId"},"position":{"x":2850,"y":20},"execType":"fork","nodeType":"WORKFLOW"},"mdtPostProcessingSubmitProgress":{"connectors":[{"exitPortType":"NextStep","nodeId":"checkInPage"}],"processId":"mdtNewPostProcessingWF","name":"mdtPostProcessingSubmitProgress","description":"mdtPostProcessingSubmitProgress","inputVarMap":{"workOrderTaskId":"workOrderTaskId","inTransitStatus":"statusId"},"id":"mdtPostProcessingSubmitProgress","outputVarMap":{},"position":{"x":2160,"y":20},"execType":"fork","nodeType":"WORKFLOW"},"submitAndEndTask":{"connectors":[{"exitPortType":"NextStep","nodeId":""}],"processId":"mdtNewPostProcessingWF","name":"submitAndEndTask","description":"submitAndEndTask","inputVarMap":{"submitTaskTime":"submitTaskTime","submitType":"submitType","workOrderTaskCompleted":"statusId","customerSignature":"customerSignature","compsFinalData":"compsFinalData","approvedBy":"approvedBy","crewMobileAccess":"crewMobileAccess","acUploadReport":"acUploadReport","submitServicesLocationCoordinates":"submitServicesLocationCoordinates","finalEvidenceDataGrid":"finalEvidenceDataGrid","submitTaskLocationCoordinates":"submitTaskLocationCoordinates","workOrderTaskId":"workOrderTaskId","reasonOfwrongSite":"reasonOfwrongSite","recordInitialEvidenceTime":"recordInitialEvidenceTime","initialComments":"initialComments","incorrectAddress":"incorrectAddress","recordInitialEvidenceLocationCoordinates":"recordInitialEvidenceLocationCoordinates","checkOutCheckBoxCapturedTime":"checkOutCheckBoxCapturedTime","endTravelLocationCoordinates":"endTravelLocationCoordinates","completedDate":"completedDate","initialEvidenceDataGrid":"initialEvidenceDataGrid","endTravelDate":"endTravelDate","isCrewTask":"isCrewTask","finalComments":"finalComments","servicesDataGrid":"servicesDataGrid","recordSubmitServicesTime":"recordSubmitServicesTime","acDrivingDataGrid":"acDrivingDataGrid","progress":"progress","incorrectSiteComments":"incorrectSiteComments","acCheckList":"acCheckList","newLocationPhoto":"newLocationPhoto","checkOutCheckBox":"checkOutCheckBox"},"id":"submitAndEndTask","outputVarMap":{},"position":{"x":4230,"y":75},"execType":"fork","nodeType":"WORKFLOW"},"processCompsData":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchResultData"}],"contextChangePermitted":true,"name":"processCompsData","description":"Process task data to contextVar","processRule":"{ contextVar.compsFinalData = []; contextVar.acCheckList = []; contextVar.workOrderTaskId = contextVar.taskId; if (contextVar.value1 == 'true') { contextVar.value1 = 'Yes'; } else { contextVar.value1 = 'No'; } if (contextVar.value2 == 'true') { contextVar.value2 = 'Yes'; } else { contextVar.value2 = 'No'; } if (contextVar.value3 == 'true') { contextVar.value3 = 'Yes'; } else { contextVar.value3 = 'No'; } if (contextVar.value4 == 'true') { contextVar.value4 = 'Yes'; } else { contextVar.value4 = 'No'; } if (contextVar.value5 == 'true') { contextVar.value5 = 'Yes'; } else { contextVar.value5 = 'No'; } if (contextVar.value6 == 'true') { contextVar.value6 = 'Yes'; } else { contextVar.value6 = 'No'; } if (contextVar.value7 == 'true') { contextVar.value7 = 'Yes'; } else { contextVar.value7 = 'No'; } if (contextVar.value8 == 'true') { contextVar.value8 = 'Yes'; } else { contextVar.value8 = 'No'; } if (contextVar.value9 == 'true') { contextVar.value9 = 'Yes'; } else { contextVar.value9 = 'No'; } if (contextVar.value10 == 'true') { contextVar.value10 = 'Yes'; } else { contextVar.value10 = 'No'; } if (contextVar.value11 == 'true') { contextVar.value11 = 'Yes'; } else { contextVar.value11 = 'No'; } var checkBoxTitle1 = 'Download Report to your iPad'; var checkBoxTitle2 = 'Arrive at property/greet homeowner'; var checkBoxTitle3 = 'Measure the exterior of the home (including porches,patios, any other building improvements)'; var checkBoxTitle4 = 'Take exterior photos (See attached guide for full list)'; var checkBoxTitle5 = 'Measure other interior spaces, if applicable(2nd, 3rd Floors, Basement, etc)'; var checkBoxTitle6 = 'Take interior photos (See attached guide for full list)'; var checkBoxTitle7 = 'Interview homeowner / Fill out checklist'; var checkBoxTitle8 = 'Drive comps and get photos'; var checkBoxTitle9 = 'Upload Report to cloud'; var checkBoxTitle10 = 'Change status in Anow'; var checkBoxTitle11 = 'Look for moments to provide Unexpected Service'; contextVar.acCheckList.push({ 'item': checkBoxTitle1, 'isChecked': contextVar.value1 }, { 'item': checkBoxTitle2, 'isChecked': contextVar.value2 }, { 'item': checkBoxTitle3, 'isChecked': contextVar.value3 }, { 'item': checkBoxTitle4, 'isChecked': contextVar.value4 }, { 'item': checkBoxTitle5, 'isChecked': contextVar.value5 }, { 'item': checkBoxTitle6, 'isChecked': contextVar.value6 }, { 'item': checkBoxTitle7, 'isChecked': contextVar.value7 }, { 'item': checkBoxTitle8, 'isChecked': contextVar.value8 }, { 'item': checkBoxTitle9, 'isChecked': contextVar.value9 }, { 'item': checkBoxTitle10, 'isChecked': contextVar.value10 }, { 'item': checkBoxTitle11, 'isChecked': contextVar.value11 }); contextVar.acUploadReport = []; contextVar.acUploadReport.push({ 'date': contextVar.submitTaskTime, 'latitude': contextVar.latitude, 'longitude': contextVar.longitude }); contextVar.acDrivingDataGrid = []; var count = 0; if (contextVar.compsDataGrid.length > 0) { contextVar.abc = 'a'; contextVar.compsDataGrid.forEach(function(element) { if (element.value == 'yes') { contextVar.abc = 'b'; if (element.id == contextVar.insertedId) { contextVar.driveType = 'Property'; contextVar.driveFromAddress = contextVar.techAddress; } else { contextVar.driveType = 'Comparable'; if (element.driveFromAddress == '') { contextVar.driveFromAddress = contextVar.siteAddress; } else { contextVar.driveFromAddress = element.driveFromAddress; } } var start = new Date(element.startTravelDate); var end = new Date(element.endTravelDate); var time = (end.getTime() - start.getTime()) / 1000; var obj = { 'driveTime': time, 'propertyType': element.address, 'driveFromAddress': contextVar.driveFromAddress, 'distance': element.distance, 'driveType': contextVar.driveType, 'startLocationCoordinates': element.startTravelLocationCoordinates, 'endLocationCoordinates': element.endTravelLocationCoordinates, 'startTravelDate': element.startTravelDate, 'endTravelDate': element.endTravelDate }; contextVar.acDrivingDataGrid.push(obj); } count = count + 1; }) } if (contextVar.compsDataGrid.length > 0) { contextVar.abc = 'a'; contextVar.compsDataGrid.forEach(function(element) { if (element.value == 'Yes') { contextVar.abc = 'b'; var start = new Date(element.startTravelDate); var end = new Date(element.endTravelDate); var time = (end.getTime() - start.getTime()) / 1000; var obj = { 'driveTime': time, 'propertyType': element.address, 'distance': element.distance, 'startLocationCoordinates': element.startTravelLocationCoordinates, 'endLocationCoordinates': element.endTravelLocationCoordinates, 'startTravelDate': element.startTravelDate, 'endTravelDate': element.endTravelDate }; contextVar.acDrivingDataGrid.push(obj); } }) } }","id":"processCompsData","position":{"x":4000,"y":20},"nodeType":"PROCESS"},"isSubmitProgress":{"connectors":[{"exitPortType":"TrueStep","nodeId":"mdtSubmitProgressPage"},{"exitPortType":"FalseStep","nodeId":"mdtCustomerSignaturePage"}],"name":"isSubmitProgress","description":"isSubmitProgress","processRule":"(typeof contextVar.submitType !='undefined' && contextVar.submitType != '' && contextVar.submitType=='submitTaskProgress')","id":"isSubmitProgress","position":{"x":1700,"y":220},"nodeType":"DECISION"},"updateResultData":{"modelName":"workOrderTask","connectors":[{"condition":"","connectorDisplayType":"CurvedLine","connectorLabel":"","exitPortType":"NextStep","nodeId":"end"}],"name":"updateResultData","description":"updateResultData","inputVarMap":{"result":"result","workOrderTaskId":"id","startTravelDate":"actualStartTime","completedStatus":"statusId","submitTaskDateTime":"completedDate","completedStatus1":"eventType"},"id":"updateResultData","position":{"x":5150,"y":75},"nodeType":"MODEL","operation":2},"mdtServicesPage":{"connectors":[{"exitPortType":"NextStep","nodeId":"isSubmitProgress"}],"name":"mdtServicesPage","inputVarMap":{"incorrectAddress":"incorrectAddress","partsForOthers":"partsForOthers","partsForRemoval":"partsForRemoval","endTravelLocationCoordinates":"endTravelLocationCoordinates","partsForInstallation":"partsForInstallation","endTravelDate":"endTravelDate","assetMaintenanceListOptions":"assetMaintenanceListOptions","partsForService":"partsForService","statusId":"statusId","incorrectSiteComments":"incorrectSiteComments","fetchSuggestedMaterials":"fetchSuggestedMaterials","newLocationPhoto":"newLocationPhoto","reasonOfwrongSite":"reasonOfwrongSite","fetchMaterialsInCatalogNS":"fetchMaterialsInCatalogNS","assetRemovalListOptions":"assetRemovalListOptions"},"id":"mdtServicesPage","outputVarMap":{"incorrectAddress":"incorrectAddress","submitType":"submitType","additionalMaterialsDataGrid":"additionalMaterialsDataGrid","endTravelLocationCoordinates":"endTravelLocationCoordinates","endTravelDate":"endTravelDate","submitServicesLocationCoordinates":"submitServicesLocationCoordinates","finalEvidenceDataGrid":"finalEvidenceDataGrid","finalComments":"finalComments","servicesDataGrid":"servicesDataGrid","statusId":"statusId","recordSubmitServicesTime":"recordSubmitServicesTime","incorrectSiteComments":"incorrectSiteComments","fetchSuggestedMaterials":"fetchSuggestedMaterials","newLocationPhoto":"newLocationPhoto","reasonOfwrongSite":"reasonOfwrongSite"},"position":{"x":1470,"y":220},"nodeType":"PAGE","processPage":"mdtServicesPage"},"workflowContext":{"eventTravel":"workOrderTaskTravelStarted","pendingReviewStatus":"workOrderTaskPendingReview","featureName":"batchScheduler","extraMsg":"BASE CONSTRAINTS: taskSchedulingBatchSchedulerBaseConstraintsWF call","inTransitStatus":"workOrderTaskInTransit","travelStatus1":"In Transit","completedStatus":"workOrderTaskCompleted","inProgressStatus":"workOrderTaskInProgress","progressValue":0.5,"compsDataGrid":[],"checkedOutTravelStatus":"{%checkedOut}","completedStatus1":"workOrderTaskCompleted"},"mdtSubmitProgressPage":{"connectors":[{"exitPortType":"NextStep","nodeId":"mdtPostProcessingSubmitProgress"}],"name":"mdtSubmitProgressPage","description":"Provide some description for your page","inputVarMap":{"submitProgressComments":"submitProgressComments","initialComments":"initialComments","incorrectAddress":"incorrectAddress","submitType":"submitType","recordInitialEvidenceLocationCoordinates":"recordInitialEvidenceLocationCoordinates","inProgressStatus":"statusId","endTravelLocationCoordinates":"endTravelLocationCoordinates","initialEvidenceDataGrid":"initialEvidenceDataGrid","endTravelDate":"endTravelDate","submitServicesLocationCoordinates":"submitServicesLocationCoordinates","servicesDataGrid":"servicesDataGrid","recordSubmitServicesTime":"recordSubmitServicesTime","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","reasonOfwrongSite":"reasonOfwrongSite","submitProgressEvidenceDataGrid":"submitProgressEvidenceDataGrid","recordInitialEvidenceTime":"recordInitialEvidenceTime"},"id":"mdtSubmitProgressPage","outputVarMap":{"submitProgressComments":"submitProgressComments","initialComments":"initialComments","incorrectAddress":"incorrectAddress","recordInitialEvidenceLocationCoordinates":"recordInitialEvidenceLocationCoordinates","submitType":"submitType","endTravelLocationCoordinates":"endTravelLocationCoordinates","initialEvidenceDataGrid":"initialEvidenceDataGrid","endTravelDate":"endTravelDate","submitServicesLocationCoordinates":"submitServicesLocationCoordinates","servicesDataGrid":"servicesDataGrid","statusId":"statusId","recordSubmitServicesTime":"recordSubmitServicesTime","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","checkOutCheckBoxForSubmitCapturedTime":"checkOutCheckBoxForSubmitCapturedTime","reasonOfwrongSite":"reasonOfwrongSite","checkOutCheckBoxForSubmitLocationCoordinates":"checkOutCheckBoxForSubmitLocationCoordinates","submitProgressEvidenceDataGrid":"submitProgressEvidenceDataGrid","checkOutCheckBoxForSubmit":"checkOutCheckBoxForSubmit","recordInitialEvidenceTime":"recordInitialEvidenceTime"},"position":{"x":1930,"y":192.5},"nodeType":"PAGE","processPage":"mdtSubmitProgressPage"},"mdtCustomerSignaturePage":{"connectors":[{"exitPortType":"NextStep","nodeId":"mdtCheckOutPage"}],"name":"mdtCustomerSignaturePage","description":"Provide some description for your page","inputVarMap":{"incorrectAddress":"incorrectAddress","statusId":"statusId","customerSignature":"customerSignature","approvedBy":"approvedBy","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","reasonOfwrongSite":"reasonOfwrongSite","endTravelLocationCoordinates":"endTravelLocationCoordinates","completedDate":"completedDate","endTravelDate":"endTravelDate"},"id":"mdtCustomerSignaturePage","outputVarMap":{"incorrectAddress":"incorrectAddress","statusId":"statusId","customerSignature":"customerSignature","approvedBy":"approvedBy","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","reasonOfwrongSite":"reasonOfwrongSite","endTravelLocationCoordinates":"endTravelLocationCoordinates","endTravelDate":"endTravelDate"},"position":{"x":3540,"y":247.5},"nodeType":"PAGE","processPage":"mdtCustomerSignaturePage"},"workflowacFetchCompAddressData":{"connectors":[{"exitPortType":"NextStep","nodeId":"processCompsDataGrid"}],"processId":"acFetchCompAddressData","name":"workflowacFetchCompAddressData","description":"Provide some description for your workflow node","inputVarMap":{"workOrderTaskId":"workOrderTaskId","needFilter":"needFilter"},"id":"workflowacFetchCompAddressData","outputVarMap":{"comps":"comps1"},"position":{"x":3540,"y":20},"nodeType":"WORKFLOW"},"end":{"name":"End","description":"end","inputVarMap":{"result":"result","zProcessInstanceId":"zProcessInstanceId"},"outputVarMap":{"zProcessInstanceId":"zProcessInstanceId"},"id":"end","position":{"x":5380,"y":182.5},"nodeType":"END"},"mdtTaskDetailsLandingPage":{"connectors":[{"exitPortType":"NextStep","nodeId":"mdtInitialEvidencePage"}],"name":"mdtTaskDetailsLandingPage","description":"Provide some description for your page","inputVarMap":{"crewAttendanceDetailsList":"crewAttendanceDetailsList","endDate":"endDate","taskDescription":"taskDescription","dueDate":"dueDate","incidentType":"incidentType","crewMobileAccess":"crewMobileAccess","correctiveTaskRequestReasons":"correctiveTaskRequestReasons","scheduleBreakDown":"scheduleBreakDown","fullTaskScheduleGridData":"fullTaskScheduleGridData","workOrderTaskId":"workOrderTaskId","travelStatus1":"travelStatus1","longitude":"longitude","cancellationNotes":"cancellationNotes","modesOfTransport":"modesOfTransport","customerName":"customerName","isCrewTask":"isCrewTask","statusId":"statusId","enableServices":"enableServices","assetsList":"assetsList","workOrderId":"workOrderId","taskProgress":"taskProgress","acLoanType":"acLoanType","viewTravelStatus":"viewTravelStatus","submitTypeListOptions":"submitTypeListOptions","fetchTransportModes":"fetchTransportModes","breakDownData":"breakDownData","siteChangeReq":"siteChangeReq","latitude":"latitude","dateArray":"dateArray","contactPerson":"contactPerson","travelIncidentReasonsListOptions":"travelIncidentReasonsListOptions","scheduledDate":"scheduledDate","taskTypeName":"taskTypeName","checkInIncidentReasonsListOptions":"checkInIncidentReasonsListOptions","fetchActivityIncidentListOptions":"fetchActivityIncidentListOptions","workOrderTaskReOpenCount":"workOrderTaskReOpenCount","acReportType":"acReportType","assignedToUserId":"assignedToUserId","address":"address","cancellationReason":"cancellationReason","estimatedTaskDuration":"estimatedTaskDuration","taskPriority":"taskPriority","userName":"userName","fetchReportIssue":"fetchReportIssue","travelStatus":"travelStatus","lenderName":"lenderName","serviceList":"serviceList","siteId":"siteId","crewAttendanceDetailsDataGrid":"crewAttendanceDetailsDataGrid","acAddressTwo":"acAddressTwo","contactPhone":"contactPhone","taskId":"taskId"},"id":"mdtTaskDetailsLandingPage","outputVarMap":{"isCrewTask":"isCrewTask","incorrectAddress":"incorrectAddress","statusId":"statusId","checkInCapturedTime":"endTravelDate","crewMobileAccess":"crewMobileAccess","incorrectSiteComments":"incorrectSiteComments","travelStatus1":"travelStatus1","newLocationPhoto":"newLocationPhoto","crewAttendanceDetailsDataGrid":"crewAttendanceDetailsDataGrid","startTravelDate":"startTravelDate","reasonOfwrongSite":"reasonOfwrongSite","endTravelLocationCoordinates":"endTravelLocationCoordinates"},"position":{"x":3080,"y":20},"nodeType":"PAGE","processPage":"P6EKHR8D2J"},"fetchResultData":{"filter":"{$workOrderTask.id} = {@workOrderTaskId}","models":["workOrderTask"],"connectors":[{"exitPortType":"NextStep","nodeId":"processResultData"}],"columns":{"result":"workOrderTask.result","recver":"workOrderTask.recver"},"name":"fetchResultData","description":"fetchResultData","inputVarMap":{"workOrderTaskId":"workOrderTaskId","acDrivingDataGrid":"acDrivingDataGrid","acCheckList":"acCheckList","initialEvidenceDataGrid":"initialEvidenceDataGrid","acUploadReport":"acUploadReport"},"outputVarMap":{"data":"resultData"},"id":"fetchResultData","position":{"x":4460,"y":75},"nodeType":"QUERY","getCount":true},"fetchCompData":{"models":["workOrder","acCompAddress"],"connectors":[{"exitPortType":"NextStep","nodeId":"processData"}],"columns":{"address":"acCompAddress.address","distance":"acCompAddress.distanceFromSite","latitude":"acCompAddress.latitude","id":"acCompAddress.id","workOrderId":"acCompAddress.workOrderId","longitude":"acCompAddress.longitude"},"orderBy":"distance","description":"fetchCompData","inputVarMap":{"workOrderId":"workOrderId"},"nodeType":"QUERY","filter":"{$workOrderId} = {$workOrder.id} && {$workOrderId} = {@workOrderId} && {$acCompAddress.locationType}='Comparable'","name":"fetchCompData","outputVarMap":{"data":"compsData"},"id":"fetchCompData","position":{"x":1240,"y":137.5},"batchSize":50,"getCount":true,"batchNumber":1},"getProcessInstance":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchDetails"}],"name":"getProcessInstance","description":"getProcessInstance","outputVarMap":{"id":"zProcessInstanceId"},"id":"getProcessInstance","position":{"x":1010,"y":47.5},"nodeType":"INSTANCE","operation":0},"backwardCompatibilityCheck":{"connectors":[{"exitPortType":"NextStep","nodeId":"taskDetailsLandingPage"}],"processId":"mdtBackwardCompatibilityWF","name":"backwardCompatibilityCheck","description":"backwardCompatibilityCheck","inputVarMap":{},"id":"backwardCompatibilityCheck","outputVarMap":{},"position":{"x":1700,"y":20},"nodeType":"WORKFLOW"},"processCompsDataGrid":{"connectors":[{"exitPortType":"NextStep","nodeId":"processCompsData"}],"contextChangePermitted":true,"name":"processCompsDataGrid","description":"Process task data to contextVar","processRule":"{ for (i = 0; i < contextVar.comps1.length; i++) { contextVar.compsDataGrid.forEach(function (element) { if (contextVar.comps1[i].id == element.id) { element.distance = contextVar.comps1[i].distance; } }); } for (j = 0; j < contextVar.comps1.length; j++) { if (contextVar.insertedId == contextVar.comps1[j].id) { contextVar.comps1[j].startTravelDate = contextVar.siteStartTravelDate; contextVar.comps1[j].endTravelDate = contextVar.siteEndTravelDate; contextVar.comps1[j].startTravelLocationCoordinates = contextVar.siteStartTravelLocationCoordinates; contextVar.comps1[j].endTravelLocationCoordinates = contextVar.siteEndTravelLocationCoordinates; contextVar.comps1[j].value = 'yes'; contextVar.compsDataGrid.push(contextVar.comps1[j]); } } }","id":"processCompsDataGrid","position":{"x":3770,"y":20},"nodeType":"PROCESS"},"fetchDetails":{"eventId":"mdtFetchMobileInstanceDetails","connectors":[{"exitPortType":"NextStep","nodeId":"processData"}],"contextChangePermitted":true,"name":"fetchDetails","description":"fetchDetails Event","inputVarMap":{},"outputVarMap":{},"id":"fetchDetails","position":{"x":1240,"y":47.5},"nodeType":"PUBLISH","captureOutput":true},"checkInPage":{"connectors":[{"exitPortType":"NextStep","nodeId":"mdtPostProcessingSubmitProgress1"}],"name":"checkInPage","description":"Provide some description for your page","inputVarMap":{"submitProgressComments":"submitProgressComments","crewAttendanceDetailsList":"crewAttendanceDetailsList","endDate":"endDate","taskDescription":"taskDescription","dueDate":"dueDate","incidentType":"incidentType","crewMobileAccess":"crewMobileAccess","correctiveTaskRequestReasons":"correctiveTaskRequestReasons","scheduleBreakDown":"scheduleBreakDown","fullTaskScheduleGridData":"fullTaskScheduleGridData","workOrderTaskId":"workOrderTaskId","travelStatus1":"travelStatus1","checkOutCheckBoxForSubmitCapturedTime":"checkOutCheckBoxForSubmitCapturedTime","checkOutCheckBoxForSubmit":"checkOutCheckBoxForSubmit","longitude":"longitude","recordInitialEvidenceTime":"recordInitialEvidenceTime","initialComments":"initialComments","recordInitialEvidenceLocationCoordinates":"recordInitialEvidenceLocationCoordinates","cancellationNotes":"cancellationNotes","modesOfTransport":"modesOfTransport","customerName":"customerName","isCrewTask":"isCrewTask","servicesDataGrid":"servicesDataGrid","statusId":"statusId","enableServices":"enableServices","assetsList":"assetsList","newLocationPhoto":"newLocationPhoto","workOrderId":"workOrderId","taskProgress":"taskProgress","submitProgressEvidenceDataGrid":"submitProgressEvidenceDataGrid","acLoanType":"acLoanType","viewTravelStatus":"viewTravelStatus","submitTypeListOptions":"submitTypeListOptions","fetchTransportModes":"fetchTransportModes","breakDownData":"breakDownData","submitType":"submitType","siteChangeReq":"siteChangeReq","latitude":"latitude","dateArray":"dateArray","contactPerson":"contactPerson","travelIncidentReasonsListOptions":"travelIncidentReasonsListOptions","scheduledDate":"scheduledDate","taskTypeName":"taskTypeName","checkInIncidentReasonsListOptions":"checkInIncidentReasonsListOptions","submitServicesLocationCoordinates":"submitServicesLocationCoordinates","lender":"lender","fetchActivityIncidentListOptions":"fetchActivityIncidentListOptions","reasonOfwrongSite":"reasonOfwrongSite","checkOutCheckBoxForSubmitLocationCoordinates":"checkOutCheckBoxForSubmitLocationCoordinates","workOrderTaskReOpenCount":"workOrderTaskReOpenCount","acReportType":"acReportType","assignedToUserId":"assignedToUserId","address":"address","incorrectAddress":"incorrectAddress","cancellationReason":"cancellationReason","estimatedTaskDuration":"estimatedTaskDuration","taskPriority":"taskPriority","userName":"userName","fetchReportIssue":"fetchReportIssue","initialEvidenceDataGrid":"initialEvidenceDataGrid","travelStatus":"travelStatus","recordSubmitServicesTime":"recordSubmitServicesTime","lenderName":"lenderName","serviceList":"serviceList","siteId":"siteId","incorrectSiteComments":"incorrectSiteComments","crewAttendanceDetailsDataGrid":"crewAttendanceDetailsDataGrid","acAddressTwo":"acAddressTwo","contactPhone":"contactPhone","taskId":"taskId"},"id":"checkInPage","outputVarMap":{"isCrewTask":"isCrewTask","incorrectAddress":"incorrectAddress","statusId":"statusId","submitCheckInTime":"siteEndTravelDate","crewMobileAccess":"crewMobileAccess","incorrectSiteComments":"incorrectSiteComments","travelStatus1":"travelStatus1","crewAttendanceDetailsDataGrid":"crewAttendanceDetailsDataGrid","newLocationPhoto":"newLocationPhoto","reasonOfwrongSite":"reasonOfwrongSite","endTravelLocationCoordinates":"siteEndTravelLocationCoordinates"},"position":{"x":2390,"y":20},"nodeType":"PAGE","processPage":"acMdtCheckInWFAPage"},"updateResultData1":{"modelName":"workOrderTask","connectors":[{"condition":"","connectorDisplayType":"CurvedLine","connectorLabel":"","exitPortType":"NextStep","nodeId":"checkInPage"}],"name":"updateResultData1","description":"updateResultData1","inputVarMap":{"eventTravel":"eventType","workOrderTaskId":"id","inTransitStatus":"statusId"},"id":"updateResultData","position":{"x":5150,"y":75},"nodeType":"MODEL","operation":2},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"getProcessInstance"}],"name":"start","description":" Start","id":"start","position":{"x":90,"y":175},"nodeType":"START"},"logContextVar":{"connectors":[{"exitPortType":"NextStep","nodeId":"updateResultData"}],"processId":"featureLoggerWF","name":"logContextVar","description":"logContextVar","inputVarMap":{"featureName":"featureName","extraMsg":"extraMsg"},"id":"logContextVar","outputVarMap":{},"position":{"x":4920,"y":75},"nodeType":"WORKFLOW"},"processResultData":{"connectors":[{"exitPortType":"NextStep","nodeId":"logContextVar"}],"contextChangePermitted":true,"name":"processResultData","description":"Process task data to contextVar","processRule":"{ if (contextVar.resultData.length > 0) { contextVar.recver = contextVar.resultData[0].recver; if (contextVar.resultData[0].result !== '' && typeof contextVar.resultData[0].result !== 'undefined') { contextVar.result = contextVar.resultData[0].result; } else { contextVar.result = []; } } var assetOthers = 'assetOthers'; contextVar.serviceGridWrapper = []; contextVar.userPhoneNumber = ''; if (typeof contextVar.servicesDataGrid !== 'undefined' && contextVar.servicesDataGrid !== '') { contextVar.servicesDataGrid.forEach(function(element) { if (typeof contextVar.taskDetail[0].userPhoneNumber !== 'undefined' && contextVar.taskDetail[0].userPhoneNumber !== '') { contextVar.userPhoneNumber = contextVar.taskDetail[0].userPhoneNumber; } contextVar.serviceGridWrapper.push({ 'selectedService': element.selectedService, 'serviceMode': assetOthers, 'addedBy': contextVar.taskDetail[0].userName, 'addedByUserId': contextVar.taskDetail[0].assignedToUserId, 'userContact': contextVar.taskDetail[0].userPhoneNumber, 'addedOn': element.addOthersServicesTime }); }); } if (contextVar.submitType == '' || typeof contextVar.submitType == 'undefined') { contextVar.submitType = 'endTask'; } if (contextVar.acCheckList.length > 0) { contextVar.result.push({ 'acCheckList': contextVar.acCheckList, 'initialEvidenceDataGrid': contextVar.initialEvidenceDataGrid, 'acDrivingDataGrid': contextVar.acDrivingDataGrid, 'comps': contextVar.comps, 'compsDataGrid': contextVar.compsDataGrid, 'servicesDataGrid': contextVar.servicesDataGrid, 'acUploadReport': contextVar.acUploadReport, 'initialComments': contextVar.initialComments, 'incorrectAddress': contextVar.incorrectAddress, 'submitType': contextVar.submitType, 'userPhoneNumber': contextVar.taskDetail[0].userPhoneNumber, 'approvedBy': contextVar.approvedBy, 'SubmittedDate': contextVar.submitTaskTime, 'userName': contextVar.taskDetail[0].userName, 'endTravelDate': contextVar.checkInTime, 'submitServicesLocationCoordinates': contextVar.submitServicesLocationCoordinates, 'finalComments': contextVar.finalComments, 'additionalMaterials': contextVar.additionalMaterialsDataGrid, 'submitTaskLocationCoordinates': contextVar.submitTaskLocationCoordinates, 'userEmail': contextVar.taskDetail[0].userEmail, 'serviceGridWrapper': contextVar.serviceGridWrapper }); } }","id":"processResultData","position":{"x":4690,"y":75},"nodeType":"PROCESS"},"mdtCheckOutPage":{"connectors":[{"exitPortType":"NextStep","nodeId":"mdtEndTaskSubmitPage"}],"name":"mdtCheckOutPage","description":"Provide some description for your page","inputVarMap":{"incorrectAddress":"incorrectAddress","statusId":"statusId","customerSignature":"customerSignature","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","reasonOfwrongSite":"reasonOfwrongSite","endTravelLocationCoordinates":"endTravelLocationCoordinates","endTravelDate":"endTravelDate"},"id":"mdtCheckOutPage","outputVarMap":{"incorrectAddress":"incorrectAddress","statusId":"statusId","customerSignature":"customerSignature","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","checkOutCheckBox":"checkOutCheckBox","reasonOfwrongSite":"reasonOfwrongSite","endTravelLocationCoordinates":"endTravelLocationCoordinates","completedDate":"completedDate","endTravelDate":"endTravelDate"},"position":{"x":3770,"y":247.5},"nodeType":"PAGE","processPage":"mdtCheckOutPage"},"workflowNodes":["start","getProcessInstance","fetchDetails","fetchCompData","processData","backwardCompatibilityCheck","taskDetailsLandingPage","updateResultData1","checkInPage","mdtPostProcessingSubmitProgress1","acHomeToSiteDistanceCalculateWF","mdtTaskDetailsLandingPage","mdtInitialEvidencePage","workflowacFetchCompAddressData","processCompsDataGrid","mdtServicesPage","isSubmitProgress","mdtSubmitProgressPage","mdtPostProcessingSubmitProgress","mdtCustomerSignaturePage","mdtCheckOutPage","mdtEndTaskSubmitPage","processCompsData","submitAndEndTask","fetchResultData","processResultData","logContextVar","updateResultData","end"],"processData":{"connectors":[{"exitPortType":"NextStep","nodeId":"backwardCompatibilityCheck"}],"contextChangePermitted":true,"name":"processData","description":"processData","processRule":" contextVar.needFilter = 'yes'; contextVar.addressStatus = 'No'; contextVar.endTime = contextVar.fullTaskScheduleGridData[0].endTime; let suggestedParts = Array.isArray(contextVar.fetchSuggestedPartsForServ) ? contextVar.fetchSuggestedPartsForServ : []; let suggestedPartsForInst = Array.isArray(contextVar.fetchSuggestedPartsData) ? JSON.parse(JSON.stringify(contextVar.fetchSuggestedPartsData)) : []; let catalogIdList = []; suggestedPartsForInst = suggestedPartsForInst.filter((obj, i) => { if (catalogIdList.indexOf(obj.catalogId) === -1) { catalogIdList.push(obj.catalogId); return true; } else { return false; } }); suggestedPartsForInst.forEach(obj => { delete obj.displayNameWtSerialNo; delete obj.installedBaseId; delete obj.serialNumber; }); let partsInSite = Array.isArray(contextVar.fetchPartsInCustomerSite) ? contextVar.fetchPartsInCustomerSite : []; let partsInCatalogNS = Array.isArray(contextVar.fetchNotSuggestedParts) ? contextVar.fetchNotSuggestedParts : []; contextVar.partsForRemoval = suggestedParts.concat(partsInSite); contextVar.partsForInstallation = suggestedPartsForInst.concat(partsInCatalogNS); contextVar.partsForService = suggestedParts.concat(partsInSite); contextVar.partsForOthers = suggestedParts.concat(partsInSite); let taskDetails = contextVar.taskDetail; if (Array.isArray(taskDetails) && taskDetails.length > 0) { let currStatus = taskDetails[0].currentStatus; if (currStatus === 'workOrderTaskInProgress') { contextVar.travelStatus = '{%checkedOut}'; contextVar.viewTravelStatus = contextVar.viewTravelStatus || true; } } if (contextVar.acLoanType == '' || typeof contextVar.acLoanType == 'undefined') { contextVar.acLoanType = contextVar.acTsNts; }","id":"processData","position":{"x":1470,"y":92.5},"nodeType":"PROCESS","jsEngine":"es6"},"mdtEndTaskSubmitPage":{"connectors":[{"exitPortType":"NextStep","nodeId":"submitAndEndTask"}],"name":"mdtEndTaskSubmitPage","description":"Provide some description for your page","inputVarMap":{"incorrectAddress":"incorrectAddress","statusId":"statusId","customerSignature":"customerSignature","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","checkOutCheckBox":"checkOutCheckBox","reasonOfwrongSite":"reasonOfwrongSite","endTravelLocationCoordinates":"endTravelLocationCoordinates","endTravelDate":"endTravelDate"},"id":"mdtEndTaskSubmitPage","outputVarMap":{"incorrectAddress":"incorrectAddress","statusId":"statusId","submitTaskTime":"submitTaskTime","submitTaskLocationCoordinates":"submitTaskLocationCoordinates","incorrectSiteComments":"incorrectSiteComments","newLocationPhoto":"newLocationPhoto","checkOutCheckBox":"checkOutCheckBox","reasonOfwrongSite":"reasonOfwrongSite","endTravelLocationCoordinates":"endTravelLocationCoordinates","endTravelDate":"endTravelDate"},"position":{"x":4000,"y":247.5},"nodeType":"PAGE","processPage":"mdtEndTaskSubmitPage"},"mdtPostProcessingSubmitProgress1":{"connectors":[{"exitPortType":"NextStep","nodeId":"acHomeToSiteDistanceCalculateWF"}],"processId":"mdtNewPostProcessingWF","name":"mdtPostProcessingSubmitProgress1","description":"mdtPostProcessingSubmitProgress1","inputVarMap":{"workOrderTaskId":"workOrderTaskId","inProgressStatus":"statusId"},"id":"mdtPostProcessingSubmitProgress1","outputVarMap":{},"position":{"x":2620,"y":20},"execType":"fork","nodeType":"WORKFLOW"}}