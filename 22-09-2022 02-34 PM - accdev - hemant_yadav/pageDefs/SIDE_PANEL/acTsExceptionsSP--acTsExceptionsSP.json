{"pageContext":{},"actionOnLoad":["@actions.titleFormation"],"children":[],"jslib":{"showErrMsgForThresholdForTS":"function (pageContext) {if(pageContext.thresholdForTS <= 0 && pageContext.tsThreshold == 'true' ){pageContext.errTxt='TS Threshold must be greater than 0 if Threshold is Yes';return true;}else {return false;} }","isSaveDisabled":"function(pageContext) {if (pageContext.exceptionAction == 'add') { if ((pageContext.clientId !== '' && typeof pageContext.clientId !== 'undefined') && (pageContext.lenderId !== '' && typeof pageContext.lenderId !== 'undefined') && (pageContext.tsThreshold !== '' && typeof pageContext.tsThreshold !== 'undefined') && (pageContext.thresholdForTS !== '' && typeof pageContext.thresholdForTS !== 'undefined')) { if (pageContext.tsThreshold == 'true' && pageContext.thresholdForTS > 0) { return false; } else if (pageContext.tsThreshold == 'false') { return false; } else { return true; } } else { return true; } } else if (pageContext.exceptionAction == 'edit') { if ((pageContext.initialClientName == pageContext.clientName || pageContext.clientId == '') && (pageContext.initialLenderName == pageContext.lenderName || pageContext.lenderId == '') && (pageContext.initialtsThreshold == pageContext.tsThreshold || pageContext.tsThreshold == '') && (pageContext.initialthresholdForTS == pageContext.thresholdForTS || pageContext.thresholdForTS == '')) { if (pageContext.tsThreshold == 'true' && pageContext.thresholdForTS == 0) { console.log('a'); return true; } else if (pageContext.tsThreshold == 'false') { console.log('b'); return true; } else { console.log('c'); return true; } } else { if (pageContext.tsThreshold == 'true' && pageContext.thresholdForTS == 0) { console.log('a'); return true; } else { return false; } } }}","thresholdDisabled":"function(pageContext){ if(pageContext.tsThreshold == 'false'){ return true; } else{ return false; } }"},"header":{"children":[{"buttonType":"primary","actionOnClick":["@actions.validatePanel","@actions.onSubmit","@actions.closePanel1","@actions.refreshDataGrid1"],"disabled":"@jslib.isSaveDisabled","id":"submit","type":"button","title":"Save"},{"icon":"@iconlib.Close","actionOnClick":["@actions.closePanel1"],"id":"close","type":"buttonIcon"}],"title":"@pageContext.exceptionTitle"},"body":{"children":[{"children":[{"actionOnLoad":[],"children":[{"children":[{"actionOnChange":["@actions.setClientId"],"optLabelMap":"companyName","optValueMap":"id","isMultiSelect":false,"searchByOptions":{"dataSourceId":"query/read","sourceType":"query","dataToBeSent":{"filter":"","models":["customer"],"columns":{"companyName":"customer.companyName","id":"customer.id"},"inputs":{},"distinct":true}},"hidden":false,"isMainPage":false,"id":"clientName","label":"@lang.['c01','Client']","type":"selectDropdown","value":"@pageContext.clientName"},{"actionOnChange":["@actions.setLenderId"],"optLabelMap":"lenderName","optValueMap":"id","isMultiSelect":false,"searchByOptions":{"dataSourceId":"query/read","sourceType":"query","dataToBeSent":{"filter":"","models":["accLender"],"columns":{"lenderName":"accLender.lenderName","id":"accLender.id"},"inputs":{},"distinct":true}},"hidden":false,"isMainPage":false,"id":"lenderName","label":"@lang.['l8','Lender']","type":"selectDropdown","value":"@pageContext.lenderName"},{"actionOnChange":["@actions.setThresholdData"],"options":[{"label":"@lang.['y01','Yes']","value":"true"},{"label":"@lang.['n01','No']","value":"false"}],"disabled":false,"id":"dropdown1","label":"@lang.['tst1','TS Threshold?']","optTitleKey":"label","optValueKey":"value","title":"@lang.['tst1','TS Threshold?']","type":"dropdown","value":"@pageContext.tsThreshold","placeHolder":"@lang.['so','Select option']"},{"hidden":false,"validator":"@jslib.showErrMsgForThresholdForTS","label":"@lang.['tfts1','Threshold for TS']","type":"input","title":"@lang.['tst1','TS Threshold?']","helperText":"","required":false,"errorText":"@pageContext.errTxt","disabled":"@jslib.thresholdDisabled","inputType":"number","id":"input_5305","placeholder":"@lang.['tfts1','Threshold for TS']","value":"@pageContext.thresholdForTS"}],"id":"genericSection","label":"@lang.['gi','General Information']","type":"section"}],"label":"@lang.['tse01','TS Exceptions']","id":"tab_9157","type":"tab"}],"id":"tabs","label":"tab_564","type":"tab"}]},"actions":[{"name":"titleFormation","type":"script","actionDef":"function(pageContext) {if (pageContext.exceptionAction == 'add') { pageContext.exceptionTitle = 'Add Client Lender TS Exception' } else if (pageContext.exceptionAction == 'edit') { pageContext.exceptionTitle = 'Edit Client Lender TS Exception' } if (pageContext.exceptionAction == 'add') { pageContext.tsThreshold = 'false'; pageContext.thresholdForTS = 0; } if (pageContext.exceptionAction == 'edit') { pageContext.clientName = [{ 'value': pageContext.clientId, 'label': pageContext.clientName }]; pageContext.lenderName = [{ 'value': pageContext.lenderId, 'label': pageContext.lenderName }]; if (pageContext.tsThreshold == true) { pageContext.tsThreshold = 'true'; } if (pageContext.tsThreshold == false) { pageContext.tsThreshold = 'false'; } pageContext.initialClientName = pageContext.clientName; pageContext.initialLenderName = pageContext.lenderName; pageContext.initialtsThreshold = pageContext.tsThreshold; pageContext.initialthresholdForTS = pageContext.thresholdForTS; }}"},{"name":"setClientId","type":"script","actionDef":"function(pageContext) { if (pageContext.clientName !== '' && pageContext.clientName[0] !== null) { pageContext.clientId = pageContext.clientName[0].value; } else if (pageContext.clientName[0] == null) { pageContext.clientId = ''; } }"},{"name":"setLenderId","type":"script","actionDef":"function(pageContext) { if (pageContext.lenderName !== '' && pageContext.lenderName[0] !== null) { pageContext.lenderId = pageContext.lenderName[0].value; } else if (pageContext.lenderName[0] == null) { pageContext.lenderId = ''; } }"},{"name":"setThresholdData","type":"script","actionDef":"function(pageContext) { if (pageContext.tsThreshold == 'false') { pageContext.thresholdForTS = 0}}"},{"name":"closeModal1","type":"closeModal"},{"name":"closePanel1","type":"closePanel"},{"endPoint":"/model/upsert","name":"onSubmit","type":"api","actionDef":{"data":[{"TsThreshold":"@pageContext.thresholdForTS","modelName":"acClientLenderException","clientId":"@pageContext.clientId","recver":"@pageContext.recver","isTS":"@pageContext.tsThreshold","id":"@pageContext.exceptionId","lenderId":"@pageContext.lenderId"}],"columns":[]}},{"name":"refreshDataGrid1","type":"refreshDataGrid"},{"name":"validatePanel","type":"validatePanel"}]}