{"pageContext":{},"actionOnLoad":["@actions.initialData","@actions.getTimeZone","@actions.getWeeklyScheduleData","@actions.enableDataGridAndSetWeeklyScheduleData","@actions.refreshDataGrid"],"localPageContext":true,"jslib":{"isHiddenEdit":"function(pageContext){if(pageContext.calendarAction==='edit'){return false;}else{return true;}}","isHiddenAddNew":"function(pageContext){if(pageContext.calendarAction==='add'){return false;}else{return true;}}","isSave&ContinueDisabled":"function(pageContext){ return (pageContext.calendarName === undefined || pageContext.calendarName === '')}","dynamicHeaderText":"function(pageContext){ if(pageContext.calendarAction === 'add'){return '@lang.[\"answ\",\"Add New Service Window\"]'}else if(pageContext.calendarAction === 'edit'){return '@lang.[\"esw\",\"Edit Service Window\"]'}}","isSaveDisabled":"function(pageContext){ return ((pageContext.calendarName === pageContext.initialCalendarName && pageContext.calendarDescription=== pageContext.initialCalendarDescription)||(pageContext.calendarName === undefined || pageContext.calendarName === ''))}"},"header":{"children":[{"buttonType":"primary","hidden":"@jslib.isHiddenAddNew","actionOnClick":["@actions.setSubActionInsertCalendar","@actions.fetchAllCalendar","@actions.checkForCalendarList","@actions.getTimeZone","@actions.fireProcessEvent","@actions.setEditPageData","@actions.initialData","@actions.getWeeklyScheduleData","@actions.enableDataGridAndSetWeeklyScheduleData","@actions.refreshDataGrid"],"disabled":"@jslib.isSave&ContinueDisabled","id":"submit","type":"button","title":"@lang.['sc1','Save & Continue']"},{"buttonType":"primary","hidden":"@jslib.isHiddenEdit","actionOnClick":["@actions.setSubActionUpdateCalendar","@actions.fireProcessEvent","@actions.refreshDataGrid","@actions.closePanel"],"disabled":"@jslib.isSaveDisabled","id":"submit1","type":"button","title":"@lang.['s12','Save']"},{"icon":"@iconlib.NavigationCloseGrey","actionOnClick":["@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"id":"close","type":"buttonIcon"}],"title":"@jslib.dynamicHeaderText"},"body":{"children":[{"hidden":"@jslib.isHiddenAddNew","children":[{"isRequired":true,"id":"enterName","label":"@lang.['n','Name']","placeholder":"@lang.['en1','Enter name']","type":"input","value":"@pageContext.calendarName"},{"id":"description","label":"@lang.['d7','Description (Optional)']","type":"textarea","value":"@pageContext.calendarDescription","placeHolder":"@lang.['ed1','Enter description']"}],"label":"@lang.['gi','General Information']","id":"calendarAddNewSection","type":"section"},{"hidden":"@jslib.isHiddenEdit","children":[{"isRequired":true,"id":"enterName","label":"@lang.['n','Name']","placeholder":"@lang.['en1','Enter name']","type":"input","value":"@pageContext.calendarName"},{"id":"description","label":"@lang.['d7','Description (Optional)']","type":"textarea","value":"@pageContext.calendarDescription","placeHolder":"@lang.['ed1','Enter description']"}],"label":"@lang.['gi','General Information']","id":"addNewBusinessHoursSection","type":"section"},{"hidden":"@jslib.isHiddenEdit","children":[{"label":"","id":"weeklyScheduleDatagrid","type":"datagrid","jsonDef":{"pageContextConfig":{"enable":true,"isPaginationReqd":false,"tableData":{"source":"@pageContext.calendarData"}},"isScrollAble":false,"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsEditPurple","name":"@lang.['e','edit']","icon":"@iconlib.ActionsEditGrey","tooltip":"@lang.['e1','Edit']","actionOnClick":"openWeeklyScheduleNestedSidePanel","type":"buttonIcon"}]},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['ws','Weekly Schedule']"},"isSelectable":false,"actions":[{"name":"openWeeklyScheduleNestedSidePanel","type":"openPanel","pageId":"59EQJV627K"}],"tableHeader":[{"name":"@lang.['d12','Day']","options":{"sortable":true,"showLabel":true},"key":"weeklyScheduleDay"},{"name":"@lang.['s','Status']","options":{"showLabel":true},"key":"serviceWindowWeeklyScheduleIsOpen"},{"name":"@lang.['t11','Timings']","options":{"flex":3,"dateRangeType":"absoluteTime","sortable":true,"type":"dateRange","showLabel":true},"key":"weeklyScheduleTimings"},{"name":"@lang.['h','Hours']","options":{"sortable":true,"showLabel":true},"key":"weeklyScheduleTotalHours"}],"searchKeys":[]}}],"label":"@lang.['ws','Weekly Schedule']","id":"dataGridWeeklySchedule","type":"section","transparent":true},{"hidden":"@jslib.isHiddenEdit","children":[{"label":"@lang.['navPH','Public Holidays']","id":"publicHolidaysDatagrid","type":"datagrid","jsonDef":{"isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[]},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['n','Name']","options":{"sortable":true,"showLabel":true},"key":"holidayName"},{"name":"@lang.['d3','Date']","options":{"sortable":true,"type":"date","showLabel":true},"key":"holidayDate"}],"dataToBeSent":{"filter":"{$calendarHolidayId} = {@idFilter}","models":["calendarHoliday","holiday"],"inputs":{"idFilter":"@pageContext.calendarId"},"columns":{"calendarHolidayId":"calendarHoliday.calendarId","holidayRecver":"holiday.recver","holidayName":"holiday.name","holidayDate":"holiday.date","holidayId":"holiday.id"},"orderBy":"holidayDate ASC"},"dataSourceId":"query/read","header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['navPH','Public Holidays']","children":[{"buttonType":"primary","actionOnClick":["@actions.openPublicHolidayNestedSidePanel"],"id":"addNew","type":"button","title":"@lang.['addNew','Add New']"}]},"isSelectable":false,"dataSource":[],"actions":[{"name":"openPublicHolidayNestedSidePanel","type":"openPanel","pageId":"U08RJV667G"}],"searchKeys":["holidayName"]}}],"id":"datagridPublicHolidays","type":"section","transparent":true}]},"actions":[{"name":"getTimeZone","type":"script","actionDef":"function(pageContext) {pageContext.timezoneOffset=new Date().getTimezoneOffset();}"},{"name":"enableDataGridAndSetWeeklyScheduleData","type":"script","actionDef":"function(pageContext){pageContext.enable=true;pageContext.calendarData=pageContext.weeklyScheduleData[0].outputVar.calendarData;}"},{"endPoint":"process/start","name":"getWeeklyScheduleData","outputVarMap":{"data":"@pageContext.weeklyScheduleData"},"type":"api","actionDef":{"data":[{"processId":"settingsGeneralCalendarWeeklyScheduleFetchDataWF","contextVar":{"timezoneOffset":"@pageContext.timezoneOffset","id":"@pageContext.calendarId"}}]}},{"isAsync":true,"name":"initialData","type":"script","actionDef":"function(pageContext){pageContext.initialCalendarName = pageContext.calendarName; pageContext.initialCalendarDescription = pageContext.calendarDescription;pageContext.initialHolidayName = pageContext.holidayName;}"},{"name":"setSubActionInsertCalendar","type":"script","actionDef":"function(pageContext){pageContext.subAction='insertCalendar';}"},{"name":"setSubActionUpdateCalendar","type":"script","actionDef":"function(pageContext){pageContext.subAction='updateCalendar';}"},{"name":"setEditPageData","type":"script","actionDef":"function(pageContext){pageContext.calendarId=pageContext.workFlowResult[0].data[0].calId;pageContext.calendarAction='edit';}"},{"endPoint":"event/start","name":"fireProcessEvent","outputVarMap":{"data":"@pageContext.workFlowResult"},"type":"api","actionDef":{"data":[{"eventId":"settingsGeneralCalendarProcessEvent","contextVar":{"calendar":{"calendarType":"serviceWindow","recver":"@pageContext.calendarRecver","name":"@pageContext.calendarName","defaultCalendar":"@pageContext.calendarDefaultCalendar","description":"@pageContext.calendarDescription","id":"@pageContext.calendarId"},"timezoneOffset":"@pageContext.timezoneOffset","subAction":"@pageContext.subAction"}}]}},{"name":"fetchAllCalendar","outputVarMap":{"data":"@pageContext.calendarAllList"},"type":"query","actionDef":{"filter":"{$calendarCalendarType}='serviceWindow'","models":["calendar"],"columns":{"calendarName":"calendar.name","calendarId":"calendar.id","calendarDescription":"calendar.description","calendarCalendarType":"calendar.calendarType"}}},{"name":"checkForCalendarList","type":"script","actionDef":"function(pageContext){if(pageContext.calendarAllList.length === 0){pageContext.calendarDefaultCalendar=true;}}"},{"name":"clearPageContext","type":"clearPageContext"},{"name":"closePanel","type":"closePanel"},{"name":"refreshDataGrid","type":"refreshDataGrid"}]}