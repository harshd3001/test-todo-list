{"fetchMoreTechsTasks":{"connectors":[{"exitPortType":"TrueStep","nodeId":"getMoreTechniciansTasks"},{"exitPortType":"FalseStep","nodeId":"end"}],"data":"appendTechnicianTaskData","name":"fetchMoreTechsTasks","description":"fetchMoreTechsTasks","inputVarMap":{},"processRule":"contextVar.noOfTasksBatches >= contextVar.newTasksBatchNumber","id":"fetchMoreTechsTasks","outputVarMap":{},"nodeType":"WHILELOOP"},"workflowContext":{"newTasksBatchNumber":0,"noOfTasksBatches":0},"areMoreTechTasksPresent":{"connectors":[{"exitPortType":"TrueStep","nodeId":"fetchMoreTechsTasks"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"areMoreTechTasksPresent","description":"areMoreTechTasksPresent","processRule":"contextVar.noOfTasksBatches >= 2","id":"areMoreTechTasksPresent","nodeType":"DECISION"},"appendTasks":{"connectors":[{"exitPortType":"NextStep","nodeId":"areMoreTechTasksPresent"}],"contextChangePermitted":true,"name":"appendTasks","description":"appendTasks","processRule":"if (Array.isArray(contextVar.appendTechnicianTasks)) { contextVar.appendTechnicianTasks.forEach(function(obj){contextVar.appendTechnicianTaskData.push(obj);}); } contextVar.newTasksBatchNumber = contextVar.newTasksBatchNumber + 1;","id":"appendTasks","nodeType":"PROCESS"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"getTechniciansTaskDetails"}],"name":"start","description":"Start","nodeType":"START"},"findNumberOfTasksBatches":{"connectors":[{"exitPortType":"NextStep","nodeId":"areMoreTechTasksPresent"}],"contextChangePermitted":true,"name":"findNumberOfTasksBatches","description":"findNumberOfTasksBatches","processRule":"contextVar.noOfTasksBatches = Math.ceil(contextVar.tasksCount / contextVar.customBatchSize);contextVar.newTasksBatchNumber = contextVar.techTasksBatchNumber + 1;","nodeType":"PROCESS"},"end":{"name":"end","description":"End","inputVarMap":{"appendTechnicianTaskData":"appendTechnicianTaskData"},"outputVarMap":{"appendTechnicianTaskData":"appendTechnicianTaskData"},"nodeType":"END"},"getTechniciansTaskDetails":{"models":["techCalendarV2","workOrderTask","site","workOrder"],"connectors":[{"exitPortType":"NextStep","nodeId":"findNumberOfTasksBatches"}],"columns":{"workOrderTaskStatusId":"workOrderTask.statusId","latitude":"site.latitude","workOrderTaskId":"techCalendarV2.workOrderTaskId","startTime":"techCalendarV2.startTime","endTime":"techCalendarV2.endTime","id":"techCalendarV2.workOrderTaskId","workforceUserId":"techCalendarV2.userId","userId":"workOrderTask.assignedToUserId","taskId":"techCalendarV2.workOrderTaskId","longitude":"site.longitude"},"description":"getTechniciansTaskDetails","distinct":true,"inputVarMap":{"customBatchSize":"batchSize","taskStartedStatuses":"taskStartedStatuses","startDateFilter":"startDateFilter","endDateFilter":"endDateFilter","loopArray":"loopArray","workOrderTaskId":"workOrderTaskId","workOrderTaskStatusesNotRequired":"workOrderTaskStatusesNotRequired","tasksFilter":"filter"},"nodeType":"QUERY","filter":"filter","name":"getTechniciansTaskDetails","links":{"workOrder":"workOrderTask","workOrderTask":"techCalendarV2","site":"workOrderTask"},"outputVarMap":{"data":"appendTechnicianTaskData","count":"tasksCount","batchSize":"techTasksbatchSize","batchNumber":"techTasksBatchNumber"},"batchSize":"batchSize","getCount":true},"getMoreTechniciansTasks":{"models":["techCalendarV2","workOrderTask","site","workOrder"],"connectors":[{"exitPortType":"NextStep","nodeId":"appendTasks"}],"columns":{"workOrderTaskStatusId":"workOrderTask.statusId","latitude":"site.latitude","workOrderTaskId":"techCalendarV2.workOrderTaskId","startTime":"techCalendarV2.startTime","endTime":"techCalendarV2.endTime","id":"techCalendarV2.workOrderTaskId","workforceUserId":"techCalendarV2.userId","userId":"workOrderTask.assignedToUserId","taskId":"techCalendarV2.workOrderTaskId","longitude":"site.longitude"},"description":"getMoreTechniciansTasks","distinct":true,"inputVarMap":{"customBatchSize":"batchSize","taskStartedStatuses":"taskStartedStatuses","startDateFilter":"startDateFilter","endDateFilter":"endDateFilter","newTasksBatchNumber":"batchNumber","workOrderTaskId":"workOrderTaskId","loopArray":"loopArray","workOrderTaskStatusesNotRequired":"workOrderTaskStatusesNotRequired","tasksFilter":"filter"},"nodeType":"QUERY","filter":"filter","name":"getMoreTechniciansTasks","links":{"workOrder":"workOrderTask","workOrderTask":"techCalendarV2","site":"workOrderTask"},"outputVarMap":{"data":"appendTechnicianTasks"},"batchSize":"batchSize","getCount":true,"batchNumber":"batchNumber"},"workflowNodes":["start","getTechniciansTaskDetails","findNumberOfTasksBatches","areMoreTechTasksPresent","fetchMoreTechsTasks","getMoreTechniciansTasks","appendTasks","end"]}