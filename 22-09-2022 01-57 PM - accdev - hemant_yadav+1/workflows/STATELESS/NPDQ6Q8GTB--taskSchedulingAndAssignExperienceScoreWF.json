{"workflowContext":{},"processExperienceScorePublishEventData":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"contextChangePermitted":true,"name":"processExperienceScorePublishEventData","description":"processExperienceScorePublishEventData ","processRule":"{ if (typeof contextVar.firstTimeFixRateFinalData === 'undefined' || contextVar.firstTimeFixRateFinalData === '') { contextVar.firstTimeFixRateFinalData = {}; } if (typeof contextVar.customerSiteHistoryFinalData === 'undefined' || contextVar.customerSiteHistoryFinalData === '') { contextVar.customerSiteHistoryFinalData = {}; } if (typeof contextVar.taskTypeHistoryFinalData === 'undefined' || contextVar.taskTypeHistoryFinalData === '') { contextVar.taskTypeHistoryFinalData = {}; } var jsonData = {}; contextVar.techArray.forEach(function (id) { if (isNaN(contextVar.firstTimeFixRateFinalData[id])) { contextVar.firstTimeFixRateFinalData[id] = 0; } if (isNaN(contextVar.customerSiteHistoryFinalData[id])) { contextVar.customerSiteHistoryFinalData[id] = 0; } if (isNaN(contextVar.taskTypeHistoryFinalData[id])) { contextVar.taskTypeHistoryFinalData[id] = 0; } jsonData[id] = contextVar.firstTimeFixRateFinalData[id] + contextVar.customerSiteHistoryFinalData[id] + contextVar.taskTypeHistoryFinalData[id]; }); var sortable = []; var high; for (var value in jsonData) { var obj = { userId: value, score: jsonData[value], }; sortable.push(obj); } sortable.sort(function (a, b) { return b.score - a.score; }); contextVar.experienceScoreData = {}; high = sortable[0].score; sortable.forEach(function (element) { if (element.score === high) { contextVar.experienceScoreData[element.userId] = (element.score === 0) ? 0 : 100; } else { contextVar.experienceScoreData[element.userId] = Math.ceil((element.score / high) * 100); } }); }","nodeType":"PROCESS"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"experienceScoreProcessEventCall"}],"name":"Start","description":"Start","nodeType":"START"},"end":{"name":"End","description":"End","inputVarMap":{"experienceScoreData":"experienceScoreData"},"outputVarMap":{"experienceScoreData":"experienceScoreData"},"nodeType":"END"},"workflowNodes":["start","experienceScoreProcessEventCall","processExperienceScorePublishEventData","end"],"experienceScoreProcessEventCall":{"eventId":"experienceScoreProcessEvent","connectors":[{"exitPortType":"NextStep","nodeId":"processExperienceScorePublishEventData"}],"contextChangePermitted":true,"name":"experienceScoreProcessEventCall","description":"experienceScoreProcessEventCall","inputVarMap":{"techArray":"techArray","workOrderTaskSiteId":"workOrderTaskSiteId","workOrderTaskTaskTypeId":"workOrderTaskTaskTypeId","taskStartTime":"taskStartTime"},"outputVarMap":{},"nodeType":"PUBLISH","captureOutput":true}}