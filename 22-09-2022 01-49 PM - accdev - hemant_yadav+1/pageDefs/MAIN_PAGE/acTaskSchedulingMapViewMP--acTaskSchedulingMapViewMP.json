{"actionOnLoad":["@actions.setTimezoneOffset"],"children":[{"defaultZoom":12,"preserveViewport":false,"label":"@lang.['aa2','Appraiser / Analyst']","type":"map","navigation":["Work Orders"],"containerElementHeight":"18rem","dataSourceId":{"endPoint":"process/start","inputVar":{},"sourceType":"api","processId":"fetchTasksAndTechnicianData","apiResponseFormat":true,"contextVar":{"statusFilter":["workOrderTaskOpen","workOrderTaskScheduled","workOrderTaskReopened","workOrderTaskDispatched","workOrderTaskInProgress","workOrderTaskInTransit","workOrderTaskDelayed","workOrderTaskIncident","workOrderTaskDiscontinued","workOrderTaskPendingReview"],"timezoneOffset":"@pageContext.timezoneOffset"},"apiResponseObject":"arrayResult"},"dataMap":{"latitude":"latitude","longitude":"longitude"},"fieldsToShow":{"Task":[{"labelName":"@lang.['cn2','Customer Name']","key":"customerCompanyName"},{"labelName":"@lang.['sn1','Site Name']","key":"siteName"},{"labelName":"@lang.['m12','Market']","key":"regionName"},{"labelName":"@lang.['ti02','Task Id']","key":"taskIdTaskTypeName"},{"labelName":"@lang.['ssd1','Scheduled Start Date']","key":"workOrderTaskScheduledDateMapView"},{"labelName":"@lang.['ts2','Task Status']","key":"statusName"}],"Technician":[{"labelName":"@lang.['aan1','Appraiser / Analyst Name']","key":"techName"},{"labelName":"@lang.['c7','Contractor']","key":"contractor"},{"labelName":"@lang.['M12','Market']","key":"regionName"},{"labelName":"@lang.['ls','Last Seen']","key":"lastSeenTimeInLocal"}]},"id":"map","renderType":"location","mapElementHeight":"100%","mapJson":{}},{"size":"T","rowTextLength":20,"id":"workOrderTaskGrid","type":"dataGrid","jsonDef":{"isScrollAble":true,"deleteAllowed":false,"searchAllowed":true,"tableWidth":"200rem","searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['fseSorryYourSearchResultsCameUpEmpty','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.MenuWorkOrdersSolidPurple","name":"@lang.['v','viewWorkOrder']","tooltip":"@lang.['vwo','View Work Order']","icon":"@iconlib.MenuWorkOrdersSolidGrey","actionOnClick":["@actions.setWorkOrderActionView","@actions.openViewWorkOrderSidePanel"],"type":"buttonIcon"},{"activeIcon":"@iconlib.ActionsScheduleAssignPurple","hidden":{"status":["workOrderTaskInTransit","workOrderTaskDelayed","workOrderTaskIncident","workOrderTaskDiscontinued","workOrderTaskDispatched","workOrderTaskInProgress","workOrderTaskPendingReview","workOrderTaskRejected","workOrderTaskCompleted","workOrderTaskSiteChangeRequest","workOrderTaskCancelled","workOrderTaskAutoScheduling"]},"name":"@lang.['s8','schedulingAssign']","icon":"@iconlib.ActionsScheduleAssignGrey","tooltip":"@lang.['sa','Schedule & Assign']","actionOnClick":["@actions.setInitialLoad","@actions.setActionSchedule","@actions.openEditScheduleSidePanel"],"type":"buttonIcon"},{"activeIcon":"@iconlib.ActionsTaskReviewPurple","hidden":{"status":["workOrderTaskDiscontinued","workOrderTaskOpen","workOrderTaskScheduled","workOrderTaskReopened","workOrderTaskDispatched","workOrderTaskInProgress","workOrderTaskInTransit","workOrderTaskDelayed","workOrderTaskIncident","workOrderTaskAutoScheduling"]},"name":"@lang.['t4','taskReviewForPendingReview']","icon":"@iconlib.ActionsTaskReviewGrey","tooltip":"@lang.['tr1','Task Review']","actionOnClick":["@actions.setActionReviewView","@actions.openSidePanelForTaskReview"],"type":"buttonIcon"},{"activeIcon":"https://d122pusslfmuhu.cloudfront.net/field-service-elements/icons/incident-review-purple.svg","hidden":{"status":["workOrderTaskPendingReview","workOrderTaskSiteChangeRequest","workOrderTaskOpen","workOrderTaskScheduled","workOrderTaskReopened","workOrderTaskDispatched","workOrderTaskInProgress","workOrderTaskInTransit","workOrderTaskDelayed","workOrderTaskAutoScheduling"]},"name":"@lang.['ir','Incident Review']","icon":"https://d122pusslfmuhu.cloudfront.net/field-service-elements/icons/incident-review-grey.svg","tooltip":"@lang.['ir','Incident Review']","actionOnClick":["@actions.setActionReviewView","@actions.openSidePanelForIncidentReport"],"type":"buttonIcon"},{"activeIcon":"@iconlib.ActionsTechnicianEditPurple","hidden":{"status":["workOrderTaskOpen","workOrderTaskScheduled","workOrderTaskReopened","workOrderTaskInProgress","workOrderTaskInTransit","workOrderTaskDelayed","workOrderTaskIncident","workOrderTaskDiscontinued","workOrderTaskPendingReview","workOrderTaskSiteChangeRequest","workOrderTaskCompleted","workOrderTaskCancelled","workOrderTaskAutoScheduling"]},"name":"@lang.['s5','schedulingEdit']","icon":"@iconlib.ActionsTechnicianEditGrey","tooltip":"@lang.['e1','Edit']","actionOnClick":["@actions.setInitialLoad","@actions.setActionDispatchedSchedule","@actions.openScheduleSidePanel"],"type":"buttonIcon"},{"activeIcon":"@iconlib.ActionsVisiblePurple","hidden":{"status":["workOrderTaskDispatched","workOrderTaskOpen","workOrderTaskScheduled","workOrderTaskReopened","workOrderTaskDiscontinued","workOrderTaskPendingReview","workOrderTaskSiteChangeRequest"]},"name":"@lang.['s6','schedulingViewTask']","icon":"@iconlib.ActionsVisibleGrey","tooltip":"@lang.['vt','View Task']","actionOnClick":["@actions.setInitialLoad","@actions.setActionView","@actions.openScheduleSidePanel"],"type":"buttonIcon"},{"activeIcon":"https://d122pusslfmuhu.cloudfront.net/field-service-elements/icons/dispatch-truck-purple.svg","hidden":{"status":["workOrderTaskOpen","workOrderTaskReopened","workOrderTaskDispatched","workOrderTaskInProgress","workOrderTaskInTransit","workOrderTaskDelayed","workOrderTaskIncident","workOrderTaskDiscontinued","workOrderTaskPendingReview","workOrderTaskSiteChangeRequest","workOrderTaskAutoScheduling"]},"name":"@lang.['d26','Dispatch']","icon":"https://d122pusslfmuhu.cloudfront.net/field-service-elements/icons/dispatch-truck-grey.svg","tooltip":"@lang.['d26','Dispatch']","actionOnClick":["@actions.setTaskStatusToDispatch","@actions.decisionActionCheckCrewTask","@actions.fetchValidationCheckData","@actions.processValidationCheckData","@actions.decisionActionForScheduledStartDate"],"type":"buttonIcon"}]},"modifyRowActions":[],"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['fseYouDoNotHaveAnyRecordsAvailableAtThisTime','YOU DO NOT HAVE ANY RECORDS AVAILABLE AT THIS TIME']","type":"noData"},"transparent":true,"actionOnLoad":["@actions.parseData"],"dataSourceId":"process/start","updateAllowed":true,"isSelectable":false,"searchKeys":["statusName","workOrderId","workOrderTaskId","taskTypeName","userName"],"dynamicFilter":{"workOrderTaskDueDate":"Date","workOrderDeadline":"Date","customerCompanyName":"string","regionName":"string","statusName":"string","workOrderTaskId":"string","siteName":"string","crewName":"string","workOrderId":"string","taskTypeName":"string","userName":"string"},"gridRefreshId":"tasksGrid","tableHeader":[{"name":"@lang.['s','Status']","options":{"flex":1.8,"sortOrder":"ASC","currentSorted":false,"colorCode":"statusNameColor","sortable":true,"showLabel":true},"key":"statusName"},{"name":"@lang.['as01','Anow Status']","options":{"hidden":true,"flex":1.9,"sortOrder":"ASC","currentSorted":false,"sortable":true,"showLabel":true},"key":"anowStatus"},{"name":"@lang.['p03','Priority']","options":{"isSlaPauseDisplayed":"false","flex":2.1,"slaTextColor":"slaTextColor","slaColor":"priorityColor","sortable":false,"zTimer":true,"iconUrl":"iconUrl","showLabel":true},"key":"priorityName"},{"name":"@lang.['a05','Address']","options":{"flex":3,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"address"},{"name":"@lang.['pa3','Primary Appraiser']","options":{"flex":3,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"workOrderPrimaryAppraiser"},{"name":"@lang.['aa2','Appraiser / Analyst']","options":{"flex":3,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"userName"},{"name":"@lang.['rt01','Report Type']","options":{"flex":2.3,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"reportType"},{"name":"@lang.['ti02','Task ID']","options":{"flex":2.2,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"workOrderTaskId"},{"name":"@lang.['woi3','Work Order ID']","options":{"flex":2.7,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"workOrderId"},{"name":"@lang.['dd1','Due Date']","options":{"flex":3,"sortOrder":"ASC","sortable":true,"type":"dateTime","showLabel":true},"key":"workOrderDeadline"},{"name":"@lang.['aw01','Appointment Window']","options":{"flex":3.2,"sortOrder":"ASC","dateRangeType":"datetime","type":"dateRange","showLabel":true},"key":"workOrderTaskAppointmentWindow"},{"name":"@lang.['sd02','Scheduled Date']","options":{"flex":3.6,"sortOrder":"ASC","dateRangeType":"datetime","type":"dateRange","showLabel":true},"key":"workOrderTaskScheduledTime"},{"name":"@lang.['tt03','Task Type']","options":{"flex":2.9,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"taskTypeName"},{"name":"@lang.['ob02','Order By']","options":{"flex":2.6,"showLabel":true},"key":"customerCompanyName"},{"name":"@lang.['l8','Lender']","options":{"flex":2.1,"showLabel":true},"key":"lenderName"},{"name":"@lang.['c04','Created']","options":{"flex":2.8,"showLabel":true},"key":"created"},{"name":"@lang.['m12','Market']","options":{"flex":2,"showLabel":true},"key":"regionName"},{"name":"@lang.['c05','Contact']","options":{"flex":1.8,"showLabel":true},"key":"contactName"},{"name":"@lang.['ci01','Contact Information']","options":{"flex":3,"showLabel":true},"key":"contactInformation"},{"name":"@lang.['t01','Tags']","options":{"flex":2.3,"showLabel":true},"key":"tags"}],"dataToBeSent":{"apiResponseParams":["count"],"processId":"acTaskSchedulingAndDispatchDataWF","apiResponseFormat":true,"contextVar":{"statusFilter":["workOrderTaskOpen","workOrderTaskReopened","workOrderTaskScheduled","workOrderTaskDispatched","workOrderTaskInTransit","workOrderTaskIncident","workOrderTaskInProgress","workOrderTaskDelayed","workOrderTaskPendingReview","workOrderTaskDiscontinued","workOrderTaskAutoScheduling"]},"apiResponseObject":"schedulingAndDispatchData"},"sourceType":"api","rowTextLength":50,"header":{"filterAllowed":true,"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['ot01','Open Tasks']","children":[{"data":[{"buttonType":"secondary","actionOnClick":["@actions.setTodayTimeFilter","@actions.openModalForDispatchTasks"],"id":"today","type":"button","title":"@lang.['t15','Today']"},{"buttonType":"secondary","actionOnClick":["@actions.setTomorrowTimeFilter","@actions.openModalForDispatchTasks"],"id":"tomorrow","type":"button","title":"@lang.['t16','Tomorrow']"},{"buttonType":"secondary","actionOnClick":["@actions.setNext3DaysTimeFilter","@actions.openModalForDispatchTasks"],"id":"next3days","type":"button","title":"@lang.['n3d','Next 3 Days']"},{"buttonType":"secondary","actionOnClick":["@actions.setNext7DaysTimeFilter","@actions.openModalForDispatchTasks"],"id":"next7days","type":"button","title":"@lang.['n7d','Next 7 Days']"}],"type":"actionDropdown","title":"@lang.['dt7','Dispatch Tasks']"},{"buttonType":"primary","hidden":true,"actionOnClick":["@actions.openAutoScheduleSidePanel"],"id":"autoSchedule","type":"button","title":"@lang.['as2','Auto Schedule']"}]},"enableSidePanelFilter":true,"isMultiColumn":true,"dataSource":[],"actions":[{"name":"setActionDispatchedSchedule","type":"script","actionDef":"function(pageContext){pageContext.action='dispatch';}"},{"name":"setActionReviewView","type":"script","actionDef":"function(pageContext){pageContext.workOrderTaskAction='pendingReview';}"},{"name":"setActionView","type":"script","actionDef":"function (pageContext) { if (pageContext.status === 'workOrderTaskAutoScheduling') { pageContext.action = 'view';} else { pageContext.workOrderTaskAction = 'view'; } }"},{"name":"setInitialLoad","type":"script","actionDef":"function(pageContext){pageContext.initialLoad=true;}"},{"name":"openAutoScheduleSidePanel","type":"openPanel","pageId":"F9Y5EC974I"},{"name":"setTaskStatusToDispatch","type":"script","actionDef":"function(pageContext) { pageContext.directDispatch = true; pageContext.workOrderTaskStatusId = 'workOrderTaskDispatched'; pageContext.eventType = 'workOrderTaskDispatched'; pageContext.subAction = 'upsertWorkOrderTask'; }"},{"falseStep":[],"trueStep":["@actions.fetchCrewLeadUserId","@actions.setCrewLeadId"],"name":"decisionActionCheckCrewTask","type":"decision","actionDef":"function(pageContext){return pageContext.taskTypeCrewTask}"},{"name":"fetchCrewLeadUserId","outputVarMap":{"data":"@pageContext.crewData"},"type":"query","actionDef":{"filter":"{$crew.id} = {@crewId}","models":["crew"],"inputs":{"crewId":"@pageContext.workOrderTaskAssignedToCrewId"},"columns":{"crewLeadUserId":"crew.leadUserId","crewStatusId":"crew.statusId"}}},{"name":"setCrewLeadId","type":"script","actionDef":"function (pageContext) { if(Array.isArray(pageContext.crewData) && pageContext.crewData.length > 0){ pageContext.workOrderTaskAssignedToUserId = pageContext.crewData[0].crewLeadUserId; pageContext.crewStatusId  = pageContext.crewData[0].crewStatusId;} }"},{"endPoint":"event/start","name":"fetchValidationCheckData","outputVarMap":{"data":"@pageContext.validationCheckData"},"type":"api","actionDef":{"data":[{"eventId":"taskSchedulingDispatchValidationCheckProcessEvent","inputVar":{},"apiResponseFormat":true,"contextVar":{"dependentTaskStatusId":"@pageContext.workOrderTaskStatusId","workOrderTaskId":"@pageContext.workOrderTaskId","workOrderId":"@pageContext.workOrderId"}}]}},{"async":true,"name":"processValidationCheckData","type":"script","actionDef":"function (pageContext) {pageContext.enable = true; if (Array.isArray(pageContext.validationCheckData) && pageContext.validationCheckData.length > 0) { pageContext.crewIssue = pageContext.validationCheckData[0].data[0].crewIssue; pageContext.dependencyIssue = pageContext.validationCheckData[0].data[0].dependencyIssue; pageContext.scheduledDateIssue = pageContext.validationCheckData[0].data[0].scheduledDateIssue; } }"},{"falseStep":["@actions.decisionActionForTechnicianOnCrew"],"trueStep":["@actions.openModalUnableToDispatchTechnician"],"name":"decisionActionForScheduledStartDate","type":"decision","actionDef":"function(pageContext){return pageContext.scheduledDateIssue}"},{"falseStep":["@actions.taskDependencyDecision"],"trueStep":["@actions.openModalOverrideTechnicianOnCrew"],"name":"decisionActionForTechnicianOnCrew","type":"decision","actionDef":"function(pageContext){return pageContext.crewIssue}"},{"falseStep":["@actions.openModalDispatchToTechnician"],"trueStep":["@actions.openModalOverrideDependency"],"name":"taskDependencyDecision","type":"decision","actionDef":"function(pageContext){return pageContext.dependencyIssue}"},{"subTitle":"@lang.['tthapddywtotdadtt','This task has a pending dependency. Do you want to override the dependency and dispatch this task?']","name":"openModalOverrideDependency","options":[{"buttonType":"secondary","name":"no","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.closeModal","@actions.setDependencyOverrideSourceDispatch","@actions.openOverrideNSP"],"type":"button","title":"@lang.['c13','Continue']"}],"type":"openModal","title":"@lang.['dt3','Dispatch Task']"},{"subTitle":"@lang.['aysywtdtt','Are you sure you want to dispatch this task?']","name":"openModalDispatchToTechnician","options":[{"buttonType":"secondary","name":"no","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes ","actionOnClick":["@actions.fireProcessEventForWorkOrderTask","@actions.closeModal","@actions.refreshDataGrid"],"type":"button","title":"@lang.['yp1','Yes Proceed']"}],"type":"openModal","title":"@lang.['dt3','Dispatch Task']"},{"name":"setDependencyOverrideSourceDispatch","type":"script","actionDef":"function(pageContext){pageContext.dependencyOverrideSource = 'dispatch';pageContext.directDispatch = true;}"},{"name":"openOverrideNSP","type":"openPanel","pageId":"7EXQWZDPS8"},{"subTitle":"@lang.['taaaabtacambatotaysywtatttt','The assigned Appraiser / Analyst already belongs to a crew and may be assigned to other tasks. Are you sure you want to assign this task to them?']","name":"openModalOverrideTechnicianOnCrew","options":[{"buttonType":"secondary","name":"no","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.closeModal","@actions.taskDependencyDecision"],"type":"button","title":"@lang.['c13','Continue']"}],"type":"openModal","title":"@lang.['aaoc','Appraiser / Analyst on Crew']"},{"subTitle":"@lang.['ssdotthepeandtc','Scheduled start date of the task has expired. Please enter a new date to continue']","name":"openModalUnableToDispatchTechnician","options":[{"buttonType":"secondary","name":"no","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.closeModal","@actions.openTaskSP"],"type":"button","title":"@lang.['vd','View Details']"}],"type":"openModal","title":"@lang.['utd1','Unable to dispatch']"},{"name":"openTaskSP","type":"openPanel","pageId":"acTaskSchedulingAndAssignSP"},{"name":"closeModal","type":"closeModal"},{"endPoint":"event/start","name":"fireProcessEventForWorkOrderTask","type":"api","actionDef":{"data":[{"eventId":"BM58GU7UNT","contextVar":{"workOrderTask":{"assignedToUserId":"@pageContext.workOrderTaskAssignedToUserId","statusId":"@pageContext.workOrderTaskStatusId","statusTargetModel":"workOrderTask","eventType":"@pageContext.eventType","id":"@pageContext.workOrderTaskId","assignedToCrewId":"@pageContext.workOrderTaskAssignedToCrewId"},"subAction":"upsertWorkOrderTask"}}]}},{"name":"setActionSchedule","type":"script","actionDef":"function(pageContext){pageContext.action='openTask';}"},{"name":"openViewWorkOrderSidePanel","type":"openPanel","pageId":"acWorkOrderSP"},{"name":"openEditScheduleSidePanel","type":"openPanel","pageId":"acTaskSchedulingAndAssignSP"},{"name":"openScheduleSidePanel","type":"openPanel","pageId":"acTaskSchedulingAndAssignSP"},{"name":"refreshDataGrid","type":"refreshDataGrid"},{"name":"openSidePanelForIncidentReport","type":"openPanel","pageId":"FLHOCXCBSP"},{"name":"setActionReviewView","type":"script","actionDef":"function(pageContext){pageContext.workOrderTaskAction='pendingReview';}"},{"name":"openSidePanelForTaskReview","type":"openPanel","pageId":"@rowData.resultWebPageId"},{"name":"setWorkOrderActionView","type":"script","actionDef":"function(pageContext){pageContext.workOrderAction='showWorkOrder';pageContext.subAction='viewWorkOrder';}"},{"name":"setTodayTimeFilter","type":"script","actionDef":"function(pageContext){pageContext.timeFrameFilter='today'; }"},{"subTitle":"@jslib.popUpText","name":"openModalForDispatchTasks","options":[{"buttonType":"secondary","name":"no","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.closeModal","@actions.fetchTasksAndDispatch","@actions.ifTasksNotAvailableForDispatch"],"type":"button","title":"@lang.['yp','Yes, Proceed']"}],"type":"openModal","title":"@lang.['dt7','Dispatch Tasks']"},{"name":"setTomorrowTimeFilter","type":"script","actionDef":"function(pageContext){pageContext.timeFrameFilter='tomorrow'; }"},{"name":"setNext3DaysTimeFilter","type":"script","actionDef":"function(pageContext){pageContext.timeFrameFilter='next3Days'; }"},{"name":"setNext7DaysTimeFilter","type":"script","actionDef":"function(pageContext){pageContext.timeFrameFilter='next7Days'; }"},{"endPoint":"process/start","name":"fetchTasksAndDispatch","outputVarMap":{"data":"@pageContext.queryData"},"type":"api","actionDef":{"data":[{"inputVar":{},"processId":"taskSchedulingBulkDispatchTasksFilterWF","contextVar":{"timezoneOffset":"@pageContext.timezoneOffset","timeFrameFilter":"@pageContext.timeFrameFilter"}}]}},{"falseStep":["@actions.refreshDataGrid"],"trueStep":["@actions.openModalNoTasksAvailable"],"name":"ifTasksNotAvailableForDispatch","type":"decision","actionDef":"function (pageContext) {return(typeof pageContext.queryData[0].outputVar.tasksData === 'undefined' || pageContext.queryData[0].outputVar.tasksData.length === 0)}"},{"subTitle":"@lang.['nstrtbd','No scheduled tasks remained to be dispatched.']","name":"openModalNoTasksAvailable","options":[{"buttonType":"primary","name":"ok","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['o2','OK']"}],"type":"openModal","title":"@lang.['dt7','Dispatch Tasks']"}]},"widgetType":"compWidget"}],"localPageContext":true,"jslib":{"popUpText":"function (pageContext) { if (pageContext.timeFrameFilter === 'today') { return('@lang.[\"aysywtdatsfttaaawbni1\",\"Are you sure you want to dispatch all tasks scheduled for today? The assigned Appraiser / Analyst will be notified immediately.\"]'); } else if (pageContext.timeFrameFilter === 'tomorrow') { return('@lang.[\"aysywtdatsfttaaawbni2\",\"Are you sure you want to dispatch all tasks scheduled for tomorrow? The assigned Appraiser / Analyst will be notified immediately.\"]'); } else if (pageContext.timeFrameFilter === 'next3Days') { return('@lang.[\"aysywtdatfn3dtaaawbni\",\"Are you sure you want to dispatch all tasks scheduled for next 3 days? The assigned Appraiser / Analyst will be notified immediately.\"]'); } else if (pageContext.timeFrameFilter === 'next7Days') { return('@lang.[\"arsywtdatfn7dtaaawbni\",\"Are you sure you want to dispatch all tasks scheduled for next 7 days? The assigned Appraiser / Analyst will be notified immediately.\"]'); } }"},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"actions":[{"name":"setTimezoneOffset","type":"script","actionDef":"function(pageContext) {pageContext.timezoneOffset=new Date().getTimezoneOffset();}"},{"name":"setActionDispatchedSchedule","type":"script","actionDef":"function(pageContext){pageContext.action='dispatch';}"},{"name":"setInitialLoad","type":"script","actionDef":"function(pageContext){pageContext.initialLoad=true;}"},{"name":"openAutoScheduleSidePanel","type":"openPanel","pageId":"F9Y5EC974I"},{"name":"setTaskStatusToDispatch","type":"script","actionDef":"function(pageContext) { pageContext.directDispatch = true; pageContext.workOrderTaskStatusId = 'workOrderTaskDispatched'; pageContext.eventType = 'workOrderTaskDispatched'; pageContext.subAction = 'upsertWorkOrderTask'; }"},{"falseStep":[],"trueStep":["@actions.fetchCrewLeadUserId","@actions.setCrewLeadId"],"name":"decisionActionCheckCrewTask","type":"decision","actionDef":"function(pageContext){return pageContext.taskTypeCrewTask}"},{"name":"fetchCrewLeadUserId","outputVarMap":{"data":"@pageContext.crewData"},"type":"query","actionDef":{"filter":"{$crew.id} = {@crewId}","models":["crew"],"inputs":{"crewId":"@pageContext.workOrderTaskAssignedToCrewId"},"columns":{"crewLeadUserId":"crew.leadUserId","crewStatusId":"crew.statusId"}}},{"name":"setCrewLeadId","type":"script","actionDef":"function (pageContext) { if(Array.isArray(pageContext.crewData) && pageContext.crewData.length > 0){ pageContext.workOrderTaskAssignedToUserId = pageContext.crewData[0].crewLeadUserId; pageContext.crewStatusId  = pageContext.crewData[0].crewStatusId;} }"},{"endPoint":"event/start","name":"fetchValidationCheckData","outputVarMap":{"data":"@pageContext.validationCheckData"},"type":"api","actionDef":{"data":[{"eventId":"taskSchedulingDispatchValidationCheckProcessEvent","inputVar":{},"apiResponseFormat":true,"contextVar":{"dependentTaskStatusId":"@pageContext.workOrderTaskStatusId","workOrderTaskId":"@pageContext.workOrderTaskId","workOrderId":"@pageContext.workOrderId"}}]}},{"async":true,"name":"processValidationCheckData","type":"script","actionDef":"function (pageContext) {pageContext.enable = true; if (Array.isArray(pageContext.validationCheckData) && pageContext.validationCheckData.length > 0) { pageContext.crewIssue = pageContext.validationCheckData[0].data[0].crewIssue; pageContext.dependencyIssue = pageContext.validationCheckData[0].data[0].dependencyIssue; pageContext.scheduledDateIssue = pageContext.validationCheckData[0].data[0].scheduledDateIssue; } }"},{"falseStep":["@actions.decisionActionForTechnicianOnCrew"],"trueStep":["@actions.openModalUnableToDispatchTechnician"],"name":"decisionActionForScheduledStartDate","type":"decision","actionDef":"function(pageContext){return pageContext.scheduledDateIssue}"},{"falseStep":["@actions.taskDependencyDecision"],"trueStep":["@actions.openModalOverrideTechnicianOnCrew"],"name":"decisionActionForTechnicianOnCrew","type":"decision","actionDef":"function(pageContext){return pageContext.crewIssue}"},{"falseStep":["@actions.openModalDispatchToTechnician"],"trueStep":["@actions.openModalOverrideDependency"],"name":"taskDependencyDecision","type":"decision","actionDef":"function(pageContext){return pageContext.dependencyIssue}"},{"subTitle":"@lang.['tthapddywtotdadtt','This task has a pending dependency. Do you want to override the dependency and dispatch this task?']","name":"openModalOverrideDependency","options":[{"buttonType":"secondary","name":"no","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.closeModal","@actions.setDependencyOverrideSourceDispatch","@actions.openOverrideNSP"],"type":"button","title":"@lang.['c13','Continue']"}],"type":"openModal","title":"@lang.['dt3','Dispatch Task']"},{"subTitle":"@lang.['aysywtdtt','Are you sure you want to dispatch this task?']","name":"openModalDispatchToTechnician","options":[{"buttonType":"secondary","name":"no","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes ","actionOnClick":["@actions.fireProcessEventForWorkOrderTask","@actions.closeModal","@actions.refreshDataGrid"],"type":"button","title":"@lang.['yp1','Yes Proceed']"}],"type":"openModal","title":"@lang.['dt3','Dispatch Task']"},{"name":"setDependencyOverrideSourceDispatch","type":"script","actionDef":"function(pageContext){pageContext.dependencyOverrideSource = 'dispatch';pageContext.directDispatch = true;}"},{"name":"openOverrideNSP","type":"openPanel","pageId":"7EXQWZDPS8"},{"subTitle":"@lang.['taaaabtacambatotaysywtatttt','The assigned Appraiser / Analyst already belongs to a crew and may be assigned to other tasks. Are you sure you want to assign this task to them?']","name":"openModalOverrideTechnicianOnCrew","options":[{"buttonType":"secondary","name":"no","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.closeModal","@actions.taskDependencyDecision"],"type":"button","title":"@lang.['c13','Continue']"}],"type":"openModal","title":"@lang.['aaoc','Appraiser / Analyst on Crew']"},{"subTitle":"@lang.['ssdotthepeandtc','Scheduled start date of the task has expired. Please enter a new date to continue']","name":"openModalUnableToDispatchTechnician","options":[{"buttonType":"secondary","name":"no","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.closeModal","@actions.openTaskSP"],"type":"button","title":"@lang.['vd','View Details']"}],"type":"openModal","title":"@lang.['utd1','Unable to dispatch']"},{"name":"openTaskSP","type":"openPanel","pageId":"acTaskSchedulingAndAssignSP"},{"name":"closeModal","type":"closeModal"},{"endPoint":"event/start","name":"fireProcessEventForWorkOrderTask","type":"api","actionDef":{"data":[{"eventId":"BM58GU7UNT","contextVar":{"workOrderTask":{"assignedToUserId":"@pageContext.workOrderTaskAssignedToUserId","statusId":"@pageContext.workOrderTaskStatusId","statusTargetModel":"workOrderTask","eventType":"@pageContext.eventType","id":"@pageContext.workOrderTaskId","assignedToCrewId":"@pageContext.workOrderTaskAssignedToCrewId"},"subAction":"upsertWorkOrderTask"}}]}},{"subTitle":"@jslib.popUpText","name":"openModalForDispatchTasks","options":[{"buttonType":"secondary","name":"no","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.closeModal","@actions.fetchTasksAndDispatch","@actions.ifTasksNotAvailableForDispatch"],"type":"button","title":"@lang.['yp','Yes, Proceed']"}],"type":"openModal","title":"@lang.['dt7','Dispatch Tasks']"},{"falseStep":["@actions.refreshDataGrid"],"trueStep":["@actions.openModalNoTasksAvailable"],"name":"ifTasksNotAvailableForDispatch","type":"decision","actionDef":"function (pageContext) {return(typeof pageContext.queryData[0].outputVar.tasksData === 'undefined' || pageContext.queryData[0].outputVar.tasksData.length === 0)}"},{"endPoint":"process/start","name":"fetchTasksAndDispatch","outputVarMap":{"data":"@pageContext.queryData"},"type":"api","actionDef":{"data":[{"inputVar":{},"processId":"taskSchedulingBulkDispatchTasksFilterWF","contextVar":{"timezoneOffset":"@pageContext.timezoneOffset","timeFrameFilter":"@pageContext.timeFrameFilter"}}]}},{"subTitle":"@lang.['nstrtbd','No scheduled tasks remained to be dispatched.']","name":"openModalNoTasksAvailable","options":[{"buttonType":"primary","name":"ok","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['o2','OK']"}],"type":"openModal","title":"@lang.['dt7','Dispatch Tasks']"},{"name":"setTomorrowTimeFilter","type":"script","actionDef":"function(pageContext){pageContext.timeFrameFilter='tomorrow'; }"},{"name":"setNext3DaysTimeFilter","type":"script","actionDef":"function(pageContext){pageContext.timeFrameFilter='next3Days'; }"},{"name":"setNext7DaysTimeFilter","type":"script","actionDef":"function(pageContext){pageContext.timeFrameFilter='next7Days'; }"},{"name":"setTodayTimeFilter","type":"script","actionDef":"function(pageContext){pageContext.timeFrameFilter='today'; }"},{"name":"openEditScheduleSidePanel","type":"openPanel","pageId":"acTaskSchedulingAndAssignSP"},{"name":"openScheduleSidePanel","type":"openPanel","pageId":"acTaskSchedulingAndAssignSP"},{"name":"refreshDataGrid","type":"refreshDataGrid"},{"name":"openSidePanelForIncidentReport","type":"openPanel","pageId":"FLHOCXCBSP"},{"name":"setActionReviewView","type":"script","actionDef":"function(pageContext){pageContext.workOrderTaskAction='pendingReview';}"},{"name":"openSidePanelForTaskReview","type":"openPanel","pageId":"@rowData.resultWebPageId"}]}