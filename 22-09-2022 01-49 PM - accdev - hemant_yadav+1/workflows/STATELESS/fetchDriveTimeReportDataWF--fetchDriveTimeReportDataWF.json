{"processData":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"contextChangePermitted":true,"name":"processData","description":"process report data","processRule":"{ contextVar.driveData = []; var userName = ''; var propertyType = ''; var driveFromAddress = ''; var startTravelDate = ''; var endTravelDate = ''; var driveTime = ''; var driveDistance = ''; contextVar.driveTime.forEach(function(element) { if (element.result !== '' && typeof element.result !== 'undefined') { if (element.result[0].acDrivingDataGrid !== '' && typeof element.result[0].acDrivingDataGrid !== 'undefined' && element.result[0].acDrivingDataGrid.length > 0) { for (i = 0; i < element.result[0].acDrivingDataGrid.length; i++) { var userName = ''; var propertyType = ''; var driveFromAddress = ''; var startTravelDate = ''; var endTravelDate = ''; var driveTime = ''; var driveDistance = ''; var driveType = ''; if (element.result[0].acDrivingDataGrid[i].propertyType !== '' && typeof element.result[0].acDrivingDataGrid[i].propertyType !== 'undefined') { propertyType = element.result[0].acDrivingDataGrid[i].propertyType; } if (element.result[0].acDrivingDataGrid[i].driveFromAddress !== '' && typeof element.result[0].acDrivingDataGrid[i].driveFromAddress !== 'undefined') { driveFromAddress = element.result[0].acDrivingDataGrid[i].driveFromAddress; } if (element.result[0].acDrivingDataGrid[i].endTravelDate !== '' && typeof element.result[0].acDrivingDataGrid[i].endTravelDate !== 'undefined') { endTravelDate = element.result[0].acDrivingDataGrid[i].endTravelDate; } if (element.result[0].acDrivingDataGrid[i].startTravelDate !== '' && typeof element.result[0].acDrivingDataGrid[i].startTravelDate !== 'undefined') { startTravelDate = element.result[0].acDrivingDataGrid[i].startTravelDate; } if (element.result[0].acDrivingDataGrid[i].driveTime !== '' && typeof element.result[0].acDrivingDataGrid[i].driveTime !== 'undefined') { driveTime = element.result[0].acDrivingDataGrid[i].driveTime; } if (element.result[0].acDrivingDataGrid[i].distance !== '' && typeof element.result[0].acDrivingDataGrid[i].distance !== 'undefined') { driveDistance = element.result[0].acDrivingDataGrid[i].distance; } if (element.result[0].acDrivingDataGrid[i].driveType !== '' && typeof element.result[0].acDrivingDataGrid[i].driveType !== 'undefined') { driveType = element.result[0].acDrivingDataGrid[i].driveType; } var obj = { 'acPrimaryAppraiserId': element.appraiser, 'acFileNumber': element.acFileNumber, 'acTags': element.acTags, 'state': element.state, 'postalCode': element.postalCode, 'addressTwo': element.addressTwo, 'city': element.city, 'acReason': element.acReason, 'address': element.address, 'userName': element.userName, 'driveFromAddress': driveFromAddress, 'propertyType': propertyType, 'startTravelDate': startTravelDate, 'endTravelDate': endTravelDate, 'driveDistance': driveDistance, 'driveType': driveType, 'driveTime': driveTime }; contextVar.driveData.push(obj); } } } }); contextVar.count = contextVar.driveData.length; }","id":"processData","nodeType":"PROCESS"},"fetchDriveTimeData":{"models":{"s":"site","u":"User","wo":"workOrder","u1":"User","wot":"workOrderTask"},"connectors":[{"exitPortType":"NextStep","nodeId":"processData"}],"inputs":{"id":""},"columns":{"acPrimaryAppraiserId":"wo.acPrimaryAppraiserId","address":"s.address","acReason":"wo.acReportType","city":"s.city","postalCode":"s.postalCode","userName":"u.name","result":"wot.result","addressTwo":"s.acAddressTwo","state":"s.state","acTags":"wo.acTags","appraiser":"u1.name","taskId":"wot.id","acFileNumber":"s.acFileNumber"},"description":"Fetch Billing Data","orderBy":"taskId DESC","outerJoinOnModel":"workOrderTask","inputVarMap":{},"nodeType":"QUERY","joinCondition":[{"wo":"wo.z2id= wot.z2work_order_id"},{"u":"u.id= wot.z2assigned_to_user_id"},{"s":"s.z2id= wot.z2site_id"},{"u1":"u1.id= wo.z2ac_primary_appraiser_id"}],"filter":"{$workOrderTask.statusId} = 'workOrderTaskCompleted' && {$workOrderTask.assignedToUserId} = {$User.id}","name":"fetchDriveTimeData","id":"queryiTvxv","outputVarMap":{"data":"driveTime"},"subFilters":[],"selectColumns":[],"getCount":true,"distinctFilter":false},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchDriveTimeData"}],"name":"start","description":"Start","id":"start","nodeType":"START"},"end":{"name":"end","description":"End","inputVarMap":{"count":"count","driveData":"driveData"},"outputVarMap":{"count":"count","driveData":"driveData"},"id":"end","nodeType":"END"},"workflowNodes":["start","end","fetchDriveTimeData","processData"]}