{"areMoreBatchesPresent":{"connectors":[{"exitPortType":"TrueStep","nodeId":"fetchMoreCatalogData"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"areMoreBatchesPresent","description":"areMoreBatchesPresent","processRule":"(contextVar.noOfCatalogBatches >= 2 && contextVar.noOfCatalogBatches >= contextVar.catalogBatchNumber)","nodeType":"DECISION"},"appendCatalogData":{"connectors":[{"exitPortType":"NextStep","nodeId":"areMoreBatchesPresent"}],"contextChangePermitted":true,"name":"appendCatalogData","description":"appendCatalogData","processRule":"{ if (Array.isArray(contextVar.appendCatalogData)) { contextVar.catalogData.push(...contextVar.appendCatalogData); } contextVar.catalogBatchNumber++; }","nodeType":"PROCESS","jsEngine":"es6"},"processData":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"contextChangePermitted":true,"name":"processData","description":"processData","processRule":"{if (contextVar.catalogData != 'undefined' && (!Array.isArray(contextVar.catalogData) || contextVar.catalogData == '')) { contextVar.catalogData = []; }}","id":"processData","nodeType":"PROCESS"},"workflowContext":{"catalogBatchSize":1000,"defaultOrderBy":"catalogName ASC","fetchMoreData":true,"catalogBatchNumber":1},"areCatalogDataPresent":{"connectors":[{"exitPortType":"TrueStep","nodeId":"findNumberOfBatches"},{"exitPortType":"FalseStep","nodeId":"processData"}],"name":"areCatalogDataPresent","description":"areCatalogDataPresent","processRule":"Array.isArray(contextVar.catalogData) && contextVar.fetchMoreData","nodeType":"DECISION"},"findNumberOfBatches":{"connectors":[{"exitPortType":"NextStep","nodeId":"areMoreBatchesPresent"}],"contextChangePermitted":true,"name":"findNumberOfBatches","description":"findNumberOfBatches","processRule":"{ contextVar.noOfCatalogBatches = Math.ceil(contextVar.catalogCount/contextVar.catalogBatchSize); contextVar.catalogBatchNumber++; }","nodeType":"PROCESS"},"fetchMoreCatalogData":{"models":["catalog","manufacturer","assetCategory","stockUnit","catalogType","category"],"connectors":[{"exitPortType":"NextStep","nodeId":"appendCatalogData"}],"columns":{"manufacturerName":"manufacturer.name","catalogAssetCategoryId":"catalog.assetCategoryId","catalogModelNumber":"catalog.modelNumber","catalogStockUnitId":"catalog.stockUnitId","categoryName":"category.name","manufacturerDescription":"manufacturer.description","stockUnitName":"stockUnit.name","categoryDescription":"category.description","catalogId":"catalog.id","catalogManufacturerId":"catalog.manufacturerId","catalogUnitPrice":"catalog.unitPrice","categoryCategoryTypeId":"category.categoryTypeId","catalogDescription":"catalog.description","catalogPDFUrl":"catalog.pdfUrl","categoryTaxRate":"category.taxRate","catalogCategoryId":"catalog.categoryId","manufacturerId":"manufacturer.id","catalogTypeId":"catalogType.id","assetCategoryDescription":"assetCategory.description","catalogTypeName":"catalogType.name","catalogName":"catalog.name","stockUnitDescription":"stockUnit.description","catalogCustomerPrice":"catalog.customerPrice","assetCategoryId":"assetCategory.id","catalogCatalogTypeId":"catalog.catalogTypeId","assetCategoryName":"assetCategory.name","categoryId":"category.id","stockUnitId":"stockUnit.id"},"description":"fetchMoreCatalogData","outerJoinOnModel":"catalog","distinct":true,"orderBy":"orderBy","inputVarMap":{"catalogBatchSize":"batchSize","searchText":"searchText","catalogQueryFilter":"filter","catalogIdList":"catalogIdList","orderBy":"orderBy","catalogBatchNumber":"batchNumber"},"nodeType":"QUERY","translate":true,"filter":"filter","name":"fetchMoreCatalogData","links":{"catalogType":"catalog","assetCategory":"catalog","category":"catalog","manufacturer":"catalog","stockUnit":"catalog"},"outputVarMap":{"data":"appendCatalogData"},"getCount":true},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"processInitialData"}],"name":"start","description":"Start","id":"start","nodeType":"START"},"end":{"name":"end","description":"End","inputVarMap":{"catalogData":"catalogData","catalogCount":"count"},"outputVarMap":{"catalogData":"catalogData","count":"count"},"id":"end","nodeType":"END"},"workflowNodes":["start","processInitialData","queryCatalogData","areCatalogDataPresent","findNumberOfBatches","areMoreBatchesPresent","fetchMoreCatalogData","appendCatalogData","processData","end"],"processInitialData":{"connectors":[{"exitPortType":"NextStep","nodeId":"queryCatalogData"}],"contextChangePermitted":true,"name":"processInitialData","description":"processInitialData","processRule":"{ if (typeof contextVar.catalogFilter !== 'undefined' && contextVar.catalogFilter !== '') { contextVar.catalogQueryFilter = contextVar.catalogFilter; } else if (Array.isArray(contextVar.catalogIdList) && contextVar.catalogIdList.length > 0) { contextVar.catalogQueryFilter = '{$catalog.id} IN {@catalogIdList}'; } else { contextVar.catalogQueryFilter = ''; } if (typeof contextVar.filter !== 'undefined' && contextVar.filter !== '') { contextVar.catalogQueryFilter = contextVar.filter; } if (typeof contextVar.batchSize !== 'undefined' && contextVar.batchSize !== '') { contextVar.catalogBatchSize = contextVar.batchSize; contextVar.fetchMoreData = false; } if (typeof contextVar.batchNumber !== 'undefined' && contextVar.batchNumber !== '') { contextVar.catalogBatchNumber = contextVar.batchNumber; } }","id":"processInitialData","nodeType":"PROCESS"},"queryCatalogData":{"models":["catalog","manufacturer","assetCategory","stockUnit","catalogType","category"],"connectors":[{"exitPortType":"NextStep","nodeId":"areCatalogDataPresent"}],"columns":{"manufacturerName":"manufacturer.name","catalogAssetCategoryId":"catalog.assetCategoryId","catalogModelNumber":"catalog.modelNumber","catalogStockUnitId":"catalog.stockUnitId","categoryName":"category.name","manufacturerDescription":"manufacturer.description","stockUnitName":"stockUnit.name","categoryDescription":"category.description","catalogId":"catalog.id","catalogManufacturerId":"catalog.manufacturerId","catalogUnitPrice":"catalog.unitPrice","categoryCategoryTypeId":"category.categoryTypeId","catalogDescription":"catalog.description","catalogPDFUrl":"catalog.pdfUrl","categoryTaxRate":"category.taxRate","catalogCategoryId":"catalog.categoryId","manufacturerId":"manufacturer.id","catalogTypeId":"catalogType.id","assetCategoryDescription":"assetCategory.description","catalogTypeName":"catalogType.name","catalogName":"catalog.name","stockUnitDescription":"stockUnit.description","catalogCustomerPrice":"catalog.customerPrice","assetCategoryId":"assetCategory.id","catalogCatalogTypeId":"catalog.catalogTypeId","assetCategoryName":"assetCategory.name","categoryId":"category.id","stockUnitId":"stockUnit.id"},"distinct":true,"description":"queryCatalogData","outerJoinOnModel":"catalog","orderBy":"orderBy","inputVarMap":{"catalogBatchSize":"batchSize","searchText":"searchText","catalogQueryFilter":"filter","catalogIdList":"catalogIdList","orderBy":"orderBy","catalogBatchNumber":"batchNumber"},"nodeType":"QUERY","translate":true,"filter":"filter","name":"queryCatalogData","links":{"catalogType":"catalog","assetCategory":"catalog","category":"catalog","manufacturer":"catalog","stockUnit":"catalog"},"outputVarMap":{"data":"catalogData","count":"catalogCount"},"batchSize":"batchSize","getCount":true,"batchNumber":"batchNumber"}}