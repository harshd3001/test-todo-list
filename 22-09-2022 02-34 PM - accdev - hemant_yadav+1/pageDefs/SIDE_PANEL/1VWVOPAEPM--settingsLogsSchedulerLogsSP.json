{"pageContext":{},"actionOnLoad":["@actions.enableRecordGrid","@actions.fetchUserName","@actions.setInitialData"],"localPageContext":true,"jslib":{"isSchedulingContinue":"function(pageContext){return !(pageContext.statusId === 'schedulerLogInProgress' || pageContext.statusId === 'schedulerLogQueued');}","isSchedulingOver":"function(pageContext){return !(pageContext.statusId === 'schedulerLogCompleted' || pageContext.statusId === 'schedulerLogFailed');}"},"header":{"children":[{"statusColor":"@pageContext.statusNameColor","id":"status","type":"status","value":"@pageContext.statusName"},{"icon":"@iconlib.NavigationCloseGrey","actionOnClick":["@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"id":"close","type":"buttonIcon"}],"title":"@lang.['se','Scheduler Events']"},"body":{"children":[{"children":[{"minDate":"1970-01-01 00:00","readOnly":true,"id":"time","title":"@lang.['t8','Time']","type":"datetime","value":"@pageContext.schedulerLogCreatedDate"},{"readOnly":true,"id":"initiator","label":"@lang.['i2','Initiator']","type":"input","value":"@pageContext.schedulerLogCreatedByUser"}],"id":"schedulerEventInfo","type":"section"},{"hidden":"@jslib.isSchedulingOver","children":[{"id":"successDataGrid","label":"@lang.['s16','Search']","type":"datagrid","jsonDef":{"pageContextConfig":{"infiniteScroll":false,"enable":true,"tableData":{"source":"@pageContext.schedulerLogResult"}},"isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsVisiblePurple","name":"@lang.['v1','View ']","icon":"@iconlib.ActionsVisibleGrey","tooltip":"@lang.['v1','View']","actionOnClick":["@actions.setAction","@actions.openNestedSidePanel"],"type":"buttonIcon"}]},"tableWidth":"70rem","header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['as3','Auto Scheduled']"},"isSelectable":false,"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"actions":[{"name":"openNestedSidePanel","type":"openPanel","pageId":"NTX9P88A3P"},{"name":"setAction","type":"script","actionDef":"function(pageContext){pageContext.action='view'; pageContext.workOrderTaskId=pageContext.id;pageContext.initialLoad=true;pageContext.workOrderTaskScheduledDate='';}"}],"tableHeader":[{"name":"@lang.['s','Status']","options":{"flex":1,"sortOrder":"ASC","colorCode":"statusNameColor","sortable":true,"showLabel":true},"key":"statusName"},{"name":"@lang.['taskId','Task ID']","options":{"flex":1,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"id","primaryKey":true},{"name":"@lang.['taskType','Task Type']","options":{"flex":2.2,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"taskTypeName"},{"name":"@lang.['cs','Customer Site']","options":{"flex":1.5,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"siteName"},{"name":"@lang.['ssd1','Scheduled Start Date']","options":{"flex":1.5,"sortOrder":"ASC","sortable":true,"type":"dateTime","showLabel":true},"key":"scheduledDate"},{"name":"@lang.['a4','Assignee']","options":{"flex":1.5,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"userName"}],"searchKeys":["id","statusName","assignedToUserId"]}}],"label":"","id":"autoSchedulerSuccessData","type":"section","transparent":true},{"hidden":"@jslib.isSchedulingOver","children":[{"id":"failedDataGrid","label":"@lang.['s16','Search']","type":"datagrid","jsonDef":{"pageContextConfig":{"infiniteScroll":false,"enable":true,"tableData":{"source":"@pageContext.schedulerLogUnassignedJobs"}},"isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"tableWidth":"70rem","header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['fts','Failed To Schedule']"},"isSelectable":false,"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"actions":[],"tableHeader":[{"name":"@lang.['s','Status']","options":{"flex":1,"sortOrder":"ASC","colorCode":"statusNameColor","sortable":true,"showLabel":true},"key":"statusName"},{"name":"@lang.['taskId','Task ID']","options":{"flex":1,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"id","primaryKey":true},{"name":"@lang.['taskType','Task Type']","options":{"flex":2.2,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"taskTypeName"},{"name":"@lang.['cs','Customer Site']","options":{"flex":1.5,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"siteName"},{"name":"@lang.['ssd1','Scheduled Start Date']","options":{"flex":1.5,"sortOrder":"ASC","sortable":true,"type":"dateTime","showLabel":true},"key":"scheduledDate"},{"name":"@lang.['a4','Assignee']","options":{"flex":1.5,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"userName"}],"searchKeys":["id","statusName","assignedToUserId"]}}],"label":"","id":"autoSchedulerFailedData","type":"section","transparent":true},{"hidden":"@jslib.isSchedulingContinue","children":[{"id":"autoSchedulingGrid","label":"@lang.['s16','Search']","type":"datagrid","jsonDef":{"isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"tableWidth":"70rem","gridRefreshId":"autoSchedulingGrid","emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['s','Status']","options":{"flex":1.2,"sortOrder":"ASC","colorCode":"statusNameColor","sortable":true,"showLabel":true},"key":"statusName"},{"name":"@lang.['taskId','Task ID']","options":{"flex":1,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"workOrderTaskId","primaryKey":true},{"name":"@lang.['taskType','Task Type']","options":{"flex":2.2,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"taskTypeName"},{"name":"@lang.['cs','Customer Site']","options":{"flex":1.5,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"siteName"},{"name":"@lang.['ssd1','Scheduled Start Date']","options":{"flex":1.5,"sortOrder":"ASC","sortable":true,"type":"dateTime","showLabel":true},"key":"scheduledDate"},{"name":"@lang.['a4','Assignee']","options":{"flex":1.5,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"userName"}],"dataToBeSent":{"filter":"{$workOrderTaskId} IN {@taskIds}","models":["workOrderTask","ZStatus","User","site","taskType"],"columns":{"workOrderTaskId":"workOrderTask.id","statusName":"ZStatus.name","siteName":"site.name","scheduledDate":"workOrderTask.scheduledDate","userName":"User.name","taskTypeName":"taskType.name","statusNameColor":"ZStatus.colorCode"},"inputs":{"taskIds":"@pageContext.schedulerLogContext.taskIdList"},"outerJoinOnModel":"workOrderTask","links":{"workOrderTask":"ZStatus","site":"workOrderTask","taskType":"workOrderTask","User":"workOrderTask"}},"dataSourceId":"query/read","jslib":{"isSchedulerQueued":"function(pageContext){return !(pageContext.statusId === 'schedulerLogQueued');}"},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['workOrderTaskAutoScheduling','Auto Scheduling']","children":[{"name":"@lang.['r13','Refresh']","icon":"@iconlib.NavigationRefreshGrey","actionOnClick":["@actions.refreshSidePanelDataGrid"],"type":"buttonIcon"},{"buttonType":"secondary","hidden":"@jslib.isSchedulerQueued","actionOnClick":["@actions.openPopUp"],"id":"cancel","type":"button","title":"@lang.['can','Cancel Auto Scheduling']"}]},"isSelectable":false,"actions":[{"subTitle":"@lang.['aysywtctasracattwbmtosaatpwbl','Are you sure you want to cancel the auto scheduler run? After cancellation, all the tasks will be moved to Open status, and all the progress will be lost.']","name":"openPopUp","options":[{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.fireProcessEvent","@actions.closeModal","@actions.closePanel","@actions.refreshDataGrid"],"type":"button","title":"@lang.['c13','Continue']"}],"type":"openModal","title":"@lang.['can','Cancel Auto Scheduling']"},{"name":"refreshSidePanelDataGrid","gridId":["autoSchedulingGrid"],"type":"RefreshGridOnSidePanel"}],"searchKeys":["workOrderTaskId","statusName","userName"]}}],"label":"","id":"autoSchedulingData","type":"section","transparent":true}]},"actions":[{"endPoint":"process/start","name":"fireProcessEvent","outputVarMap":{},"type":"api","actionDef":{"data":[{"processId":"schedulerLogModelWF","contextVar":{"schedulerLog":[{"id":"@pageContext.schedulerLogId","status":"schedulerLogCancelled"}]}}]}},{"name":"closeModal","type":"closeModal"},{"name":"closePanel","type":"closePanel"},{"name":"setInitialData","type":"script","actionDef":"function(pageContext) {if(pageContext.userData != undefined && pageContext.userData.length>0) {pageContext.initiatorName= pageContext.userData[0].userName;}}"},{"name":"clearPageContext","type":"clearPageContext"},{"name":"enableRecordGrid","type":"script","actionDef":"function(pageContext){pageContext.enable=true;}"},{"name":"fetchUserName","outputVarMap":{"data":"@pageContext.userData"},"type":"query","actionDef":{"filter":"{$userId} = {@schedulerLogCreatedByUser}","models":["User"],"inputs":{"schedulerLogCreatedByUser":"@pageContext.schedulerLogCreatedByUser"},"columns":{"userName":"User.name","userId":"User.id"}}},{"name":"refreshDataGrid","type":"refreshDataGrid"}]}