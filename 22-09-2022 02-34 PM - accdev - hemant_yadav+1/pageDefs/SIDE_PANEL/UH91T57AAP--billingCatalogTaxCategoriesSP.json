{"pageContext":{},"actionOnLoad":["@actions.initialData"],"jslib":{"dynamicHeaderText":"function(pageContext){if(pageContext.taxCategoriesAction === 'add'){return '@lang.[\"antc\",\"Add New Tax Category\"]'}else if(pageContext.taxCategoriesAction === 'edit'){return '@lang.[\"etc\",\"Edit Tax Category\"]'}}","isSaveDisabled":"function(pageContext){if(pageContext.taxCategoriesAction==='add'){return((typeof pageContext.categoryName==='undefined')||(pageContext.categoryName==='')||(typeof pageContext.categoryTaxRate==='undefined')||(pageContext.categoryTaxRate===''))}else if(pageContext.taxCategoriesAction==='edit'){return(((pageContext.categoryName===pageContext.initialName)&&(pageContext.categoryDescription===pageContext.initialDescription)&&(pageContext.categoryTaxRate==pageContext.initialTaxRate))||(pageContext.categoryName==='')||(pageContext.categoryTaxRate===''));}}","setNumber":"function(pageContext){if(typeof pageContext.categoryTaxRate!=='undefined'&&pageContext.categoryTaxRate!==undefined){return((Number(pageContext.categoryTaxRate)<0)&&(Number(pageContext.categoryTaxRate)>101));}return false;}"},"header":{"children":[{"hidden":true,"icon":"@iconlib.ActionsBinGrey","actionOnClick":["@actions.openModal"],"id":"deleteCategory","type":"buttonIcon"},{"buttonType":"primary","actionOnClick":["@actions.setTax","@actions.setSubActionUpsert","@actions.setCategoryId","@actions.fireProcessEvent","@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"disabled":"@jslib.isSaveDisabled","id":"submit","type":"button","title":"@lang.['s12','Save']"},{"icon":"@iconlib.NavigationCloseGrey","actionOnClick":["@actions.clearPageContext","@actions.closePanel","@actions.refreshDataGrid"],"id":"close","type":"buttonIcon"}],"title":"@jslib.dynamicHeaderText"},"body":{"children":[{"children":[{"isRequired":true,"inputType":"text","id":"addName","label":"@lang.['n','Name']","placeholder":"@lang.['en1','Enter name']","type":"input","value":"@pageContext.categoryName"},{"isRequired":false,"id":"description","label":"@lang.['d7','Description (Optional)']","type":"textarea","value":"@pageContext.categoryDescription","placeHolder":"@lang.['ed1','Enter description']"}],"label":"@lang.['gi','General Information']","id":"categoryInfo","type":"section"},{"children":[{"isRequired":true,"errorText":"@lang.['epevtr','Error! Please enter valid tax rate']","validator":"@jslib.setNumber","inputType":"number","id":"taxRate","label":"@lang.['tr','Tax Rate (%)']","placeholder":"@lang.['etr','Enter tax rate']","type":"input","value":"@pageContext.categoryTaxRate"}],"label":"@lang.['tci','Tax Category Information']","id":"categoryInfo","type":"section"}]},"actions":[{"name":"setTax","type":"script","continueOnError":true,"actionDef":"function(pageContext){var roundoff=pageContext.categoryTaxRate;roundoff=roundoff.toFixed(2);pageContext.categoryTaxRate=roundoff;}"},{"name":"setSubActionUpsert","type":"script","actionDef":"function(pageContext){ pageContext.subAction = 'upsertCategory';}"},{"name":"setSubActionDelete","type":"script","actionDef":"function(pageContext){pageContext.subAction == 'deleteCategory'}"},{"name":"initialData","type":"script","actionDef":"function(pageContext){if (pageContext.taxCategoriesAction == 'edit') {pageContext.initialName = pageContext.categoryName;pageContext.initialDescription = pageContext.categoryDescription;pageContext.initialTaxRate = pageContext.categoryTaxRate;}else if (pageContext.taxCategoriesAction == 'add') {pageContext.initialName = '';pageContext.initialDescription = '';pageContext.initialTaxRate = '';}}"},{"name":"setCategoryId","type":"script","actionDef":"function(pageContext){pageContext.categoryCategoryTypeId = 'tax'}"},{"endPoint":"event/start","name":"fireProcessEvent","outputVarMap":{"data":"@pageContext.workFlowData"},"type":"api","actionDef":{"data":[{"eventId":"billingCatalogTaxCategoryProcessEvent","contextVar":{"subAction":"@pageContext.subAction","category":{"taxRate":"@pageContext.categoryTaxRate","recver":"@pageContext.categoryRecver","name":"@pageContext.categoryName","description":"@pageContext.categoryDescription","categoryTypeId":"@pageContext.categoryCategoryTypeId","id":"@pageContext.categoryId"}}}]}},{"subTitle":"@lang.['aysywtdtctcbu','Are you sure you want to delete the category? This cannot be undone.']","name":"openModal","options":[{"buttonType":"primary","name":"yes","actionOnClick":["@actions.setSubActionDelete","@actions.fireProcessEvent","@actions.closeModal","@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"type":"button","title":"@lang.['yc','Yes, Continue']"},{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"}],"type":"openModal","title":"@lang.['cd','Confirm Delete']"},{"name":"clearPageContext","type":"clearPageContext"},{"name":"refreshDataGrid","type":"refreshDataGrid"},{"name":"closePanel","type":"closePanel"},{"name":"closeModal","type":"closeModal"}]}