{"pageContext":{},"actionOnLoad":["@actions.listOptionCategoryQuery","@actions.initialData"],"localPageContext":true,"jslib":{"dynamicHeaderText":"function(pageContext){ if(pageContext.listOptionAction === 'add'){return '@lang.[\"anlo\",\"Add New List Option\"]'}else if(pageContext.listOptionAction === 'edit'){return '@lang.[\"elo\",\"Edit List Option\"]'}}","isSaveDisabled":"function(pageContext){if (pageContext.listOptionAction === 'add' && pageContext.listOptionName != '' && pageContext.listOptionName != '-' && pageContext.setListOptionCategoryId[0] != null) { return false; } else if (pageContext.listOptionAction === 'edit' && pageContext.listOptionName != '' && pageContext.listOptionName != '-' && pageContext.setListOptionCategoryId[0] != null && (pageContext.listOptionName != pageContext.initialName || pageContext.listOptionDescription != pageContext.initialDescription || pageContext.listOptionCategoryId != pageContext.initialListOptionCategoryId)) { return false; } else { return true; }}","isActionAdd":"function(pageContext) {return pageContext.listOptionAction === 'add';}","isActionEdit":"function(pageContext) {return pageContext.listOptionAction === 'edit';}"},"header":{"children":[{"hidden":true,"icon":"@iconlib.ActionsBinGrey","actionOnClick":["@actions.openListOptionModal"],"id":"deleteAnswerOption","type":"buttonIcon"},{"buttonType":"primary","hidden":"@jslib.isActionEdit","actionOnClick":["@actions.fireProcessEvent","@actions.processApiOutput","@actions.setListOptionActionEdit","@actions.initialData","@actions.refreshDataGrid"],"disabled":"@jslib.isSaveDisabled","id":"saveContinue","type":"button","title":"@lang.['sc1','Save & Continue']"},{"buttonType":"primary","hidden":"@jslib.isActionAdd","actionOnClick":["@actions.fireProcessEvent","@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"disabled":"@jslib.isSaveDisabled","id":"submit","type":"button","title":"@lang.['s12','Save']"},{"icon":"@iconlib.NavigationCloseGrey","actionOnClick":["@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"id":"close","type":"buttonIcon"}],"title":"@jslib.dynamicHeaderText"},"body":{"children":[{"children":[{"isRequired":true,"id":"addName","label":"@lang.['ln','List Name']","placeholder":"@lang.['en1','Enter name']","type":"input","value":"@pageContext.listOptionName"},{"id":"listOptionDescription","label":"@lang.['d7','Description (Optional)']","type":"textarea","value":"@pageContext.listOptionDescription","placeHolder":"@lang.['ed1','Enter description']"},{"actionOnChange":["@actions.setCategoryId","@actions.listOptionCategoryQuery"],"isMultiSelect":false,"searchByOptions":{"dataSourceId":"query/read","sourceType":"query","dataToBeSent":{"filter":"{$categoryTypeId} in {@categoryFilter} AND {$name} like {@filter}","models":["category"],"columns":{"name":"category.name","categoryTypeId":"category.categoryTypeId","categoryId":"category.id"},"inputs":{"categoryFilter":["listOption"]}}},"optLabelMap":"name","optValueMap":"categoryId","id":"selectedCategory","label":"@lang.['lc','List Category']","type":"selectDropdown","value":"@pageContext.setListOptionCategoryId","placeHolder":"@lang.['sac','Select a category']"}],"label":"@lang.['gi','General Information']","id":"taskTypeSection","type":"section"},{"hidden":"@jslib.isActionAdd","children":[{"label":"","id":"Datagrid","type":"datagrid","jsonDef":{"dataSourceId":"query/read","isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsEditPurple","name":"@lang.['e','edit']","icon":"@iconlib.ActionsEditGrey","tooltip":"@lang.['e1','Edit']","actionOnClick":["@actions.setListOptionAnswerActionEdit","@actions.openNestedSidePanel"],"type":"buttonIcon"},{"activeIcon":"@iconlib.ActionsBinPurple","hidden":true,"name":"@lang.['d2','delete']","icon":"@iconlib.ActionsBinGrey","tooltip":"@lang.['d1','Delete']","actionOnClick":["@actions.deleteAnswerModal"],"type":"buttonIcon"}]},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['ao2','Answer Options']","children":[{"buttonType":"primary","actionOnClick":["@actions.setListOptionAnswerActionAdd","@actions.openNestedSidePanel"],"id":"addNew","type":"button","title":"@lang.['addNew','Add New']"}]},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSelectable":false,"actions":[{"name":"openNestedSidePanel","type":"openPanel","pageId":"NFTUYV69TA"},{"name":"clearPageContext","type":"clearPageContext"},{"name":"setSubActionUpsertListOptionAnswer","type":"script","actionDef":"function(pageContext){pageContext.subAction='upsertListOptionAnswer';}"},{"subTitle":"@lang.['aysywdtaotcbu','Are you sure you want delete the answer option? This cannot be undone.']","name":"deleteAnswerModal","options":[{"buttonType":"primary","name":"yes","actionOnClick":["@actions.setSubActionDeleteListOptionAnswer","@actions.fireProcessEvent","@actions.closeModal","@actions.refreshDataGrid"],"type":"button","title":"@lang.['d1','Delete']"},{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"}],"type":"openModal","title":"@lang.['cd','Confirm Delete']"},{"name":"setListOptionAnswerActionAdd","type":"script","actionDef":"function(pageContext){pageContext.listOptionAnswerAction='add';}"},{"name":"setListOptionAnswerActionEdit","type":"script","actionDef":"function(pageContext){pageContext.listOptionAnswerAction='edit';}"},{"name":"setSubActionDeleteListOptionAnswer","type":"script","actionDef":"function(pageContext){pageContext.subAction='deleteListOptionAnswer';}"},{"name":"setSubActionUpsert","type":"script","actionDef":"function(pageContext){pageContext.subAction='upsertListOptionAnswer';}"},{"endPoint":"event/start","name":"fireProcessEvent","outputVarMap":{"data":"@pageContext.data"},"type":"api","actionDef":{"data":[{"eventId":"settingsGeneralListOptionProcessEvent","contextVar":{"listOptionAnswer":{"answerOptionText":"@pageContext.listOptionAnswerOptionText","recver":"@pageContext.listOptionAnswerRecver","rank":"@pageContext.listOptionAnswerRank","id":"@pageContext.listOptionAnswerOptionId","listOptionId":"@pageContext.listOptionId"},"subAction":"@pageContext.subAction"}}]}},{"name":"closeModal","type":"closeModal"},{"name":"closePanel","type":"closePanel"}],"tableHeader":[{"name":"@lang.['n','Name']","options":{"sortable":true,"showLabel":true},"key":"listOptionAnswerOptionText"},{"name":"@lang.['do1','Display Order']","options":{"sortable":true,"showLabel":true},"key":"listOptionAnswerRank"}],"dataToBeSent":{"filter":"{$listOptionId} = {@idFilter}","models":["listOption","listOptionAnswer"],"inputs":{"idFilter":"@pageContext.listOptionId"},"columns":{"listOptionAnswerRank":"listOptionAnswer.rank","listOptionAnswerOptionText":"listOptionAnswer.answerOptionText","listOptionAnswerRecver":"listOptionAnswer.recver","listOptionAnswerOptionId":"listOptionAnswer.id","listOptionId":"listOption.id"},"orderBy":"listOptionAnswerOptionText ASC"},"searchKeys":["listOptionAnswerOptionText","listOptionAnswerRank"]}}],"label":"@lang.['ao2','Answer Options']","id":"datagridSkills","type":"section","transparent":true}]},"actions":[{"name":"initialData","type":"script","actionDef":"function (pageContext) { if (pageContext.listOptionAction === 'add') { pageContext.listOptionName = ''; pageContext.listOptionDescription = ''; pageContext.listOptionCategoryId = ''; } else if (pageContext.listOptionAction === 'edit') { pageContext.initialListOptionCategoryId = pageContext.listOptionCategoryId; pageContext.initialName = pageContext.listOptionName; pageContext.initialDescription = pageContext.listOptionDescription; pageContext.setListOptionCategoryId = []; pageContext.categoryList.forEach(function (val) { if (val.categoryId === pageContext.listOptionCategoryId) { pageContext.name = val.name } }); pageContext.setListOptionCategoryId.push({ label: pageContext.name, value: pageContext.listOptionCategoryId }) } }"},{"subTitle":"@lang.['aysywtdtlotcbu','Are you sure you want to delete the list option? This cannot be undone.']","name":"openListOptionModal","options":[{"buttonType":"primary","name":"yes","actionOnClick":["@actions.setSubActionDeleteListOption","@actions.fireProcessEvent","@actions.closeModal","@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"type":"button","title":"@lang.['d1','Delete']"},{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"}],"type":"openModal","title":"@lang.['dlo','Delete List Option ']"},{"endPoint":"event/start","name":"fireProcessEvent","outputVarMap":{"data":"@pageContext.data"},"type":"api","actionDef":{"data":[{"eventId":"settingsGeneralListOptionProcessEvent","contextVar":{"listOptionAnswer":{"recver":"@pageContext.listOptionAnswerRecver","id":"@pageContext.listOptionAnswerOptionId"},"listOption":{"recver":"@pageContext.listOptionRecver","name":"@pageContext.listOptionName","description":"@pageContext.listOptionDescription","id":"@pageContext.listOptionId","categoryId":"@pageContext.listOptionCategoryId"},"subAction":"@pageContext.subAction"}}]}},{"name":"listOptionCategoryQuery","outputVarMap":{"data":"@pageContext.categoryList"},"type":"query","actionDef":{"filter":"{$categoryTypeId} in {@categoryFilter}","models":["category"],"columns":{"name":"category.name","categoryTypeId":"category.categoryTypeId","categoryId":"category.id"},"inputs":{"categoryFilter":["listOption"]}}},{"name":"setCategoryId","type":"script","actionDef":"function (pageContext) { if(typeof pageContext.setListOptionCategoryId !== 'undefined' &&  pageContext.setListOptionCategoryId.length >0  &&  pageContext.setListOptionCategoryId[0].value!==''){ pageContext.listOptionCategoryId = pageContext.setListOptionCategoryId[0].value } }"},{"name":"processApiOutput","type":"script","actionDef":"function(pageContext){pageContext.listOptionId=pageContext.data[0].data[0].listOptionId;}"},{"name":"setListOptionActionEdit","type":"script","actionDef":"function(pageContext){pageContext.listOptionAction='edit';}"},{"name":"setSubActionUpsertListOption","type":"script","actionDef":"function(pageContext){pageContext.subAction='upsertListOption';}"},{"name":"setSubActionDeleteListOption","type":"script","actionDef":"function(pageContext){pageContext.subAction='deleteListOption';}"},{"name":"setSubActionDeleteListOptionAnswer","type":"script","actionDef":"function(pageContext){pageContext.subAction='deleteListOptionAnswer';}"},{"name":"closeModal","type":"closeModal"},{"name":"closePanel","type":"closePanel"},{"name":"refreshDataGrid","type":"refreshDataGrid"},{"name":"clearPageContext","type":"clearPageContext"}]}