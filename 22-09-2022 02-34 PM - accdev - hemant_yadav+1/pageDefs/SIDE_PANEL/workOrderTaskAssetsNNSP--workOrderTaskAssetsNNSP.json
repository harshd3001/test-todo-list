{"pageContext":{},"actionOnLoad":[],"localPageContext":true,"jslib":{"isSaveDisabled":"function(pageContext) { return (typeof pageContext.selectedRowIds === 'undefined' || !Array.isArray(pageContext.selectedRowIds) || pageContext.selectedRowIds.length <1) ; }"},"header":{"leftData":{"children":[{"name":"back","icon":"@iconlib.NavigationArrowBackGrey","actionOnClick":["@actions.openPreviousPanel"],"type":"buttonIcon"}]},"children":[{"buttonType":"primary","actionOnClick":["@actions.setSubAction","@actions.fireProcessEvent","@actions.openPreviousPanel","@actions.refreshDataGrid"],"disabled":"@jslib.isSaveDisabled","id":"submit","type":"button","title":"@lang.['s12','Save']"}],"title":"@lang.['assets','Assets']"},"body":{"children":[{"label":"@lang.['assets','Assets']","id":"assetsDataGrid","type":"datagrid","jsonDef":{"isScrollAble":false,"tableWidth":"60rem","searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY']","type":"noData"},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['ibi','Installed Base Id']","options":{"hidden":true,"showLabel":false},"key":"installedBaseId","primaryKey":true},{"name":"@lang.['ci10','Catalog Id']","options":{"hidden":true,"showLabel":false},"key":"catalogId","primaryKey":true},{"name":"@lang.['m','Manufacturer']","options":{"flex":1,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"manufacturerName"},{"name":"@lang.['mn','Model Name']","options":{"flex":1,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"catalogName"},{"name":"@lang.['mn1','Model Number']","options":{"flex":1,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"catalogModelNumber"},{"name":"@lang.['sn','Serial Number']","options":{"flex":1,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"installedBaseSerialNo"},{"name":"@lang.['lv','Last Visited']","options":{"flex":1,"sortOrder":"ASC","sortable":true,"type":"dateTime","showLabel":true},"key":"installedBaseLastVisitedDate"}],"dataToBeSent":{"filter":"{$installedBaseId} not in ({@selectedWorkOrderTaskAssets}) && {$installedBase.statusId} = 'installedBaseActive' && {$installedBase.siteId} ={@siteId}","models":["catalog","manufacturer","installedBase"],"columns":{"catalogName":"catalog.name","installedBaseLastVisitedDate":"installedBase.lastVisitedDate","catalogId":"catalog.id","manufacturerName":"manufacturer.name","installedBaseSerialNo":"installedBase.serialNo","catalogModelNumber":"catalog.modelNumber","installedBaseId":"installedBase.id"},"inputs":{"siteId":"@pageContext.siteId","selectedWorkOrderTaskAssets":{"filter":"{$workOrderTask.id} = {@selectedWorkOrderTaskId}","models":["workOrderTaskInstalledBase","workOrderTask"],"columns":{"workOrderTaskInstalledBaseInstalledBaseId":"workOrderTaskInstalledBase.installedBaseId"},"inputs":{"selectedWorkOrderTaskId":"@pageContext.workOrderTaskId"},"links":{"workOrderTaskInstalledBase":"workOrderTask"},"selectColumns":["workOrderTaskInstalledBaseInstalledBaseId"]}},"distinct":true,"links":{"catalog":"installedBase","manufacturer":"catalog"}},"rowsToSelect":{},"dataSourceId":"query/read","rowTextLength":50,"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['assets','Assets']"},"isSelectable":true,"updateAllowed":true,"actions":[],"searchKeys":["catalogName","manufacturerName","catalogModelNumber","installedBaseSerialNo"]}}],"label":"Assets","id":"workOrderTaskAssetsDataGrid","type":"section","transparent":true},"updateAllowed":true,"isSelectable":true,"actions":[{"name":"openPreviousPanel","type":"backPanel"},{"name":"setSubAction","type":"script","actionDef":"function(pageContext){pageContext.subAction='upsertWorkOrderTaskInstalledBase';}"},{"endPoint":"process/start","name":"fireProcessEvent","outputVarMap":{"data":"@pageContext.workOrderTaskInstalledBaseList"},"type":"api","actionDef":{"data":[{"processId":"workOrderTaskInstalledBaseWF","contextVar":{"subAction":"@pageContext.subAction","workOrderTaskInstalledBase":[{"workOrderTaskId":"@pageContext.workOrderTaskId","eventType":"serviceRequested","assetList":"@pageContext.selectedRowIds"}]}}]}},{"name":"refreshDataGrid","type":"refreshDataGrid"}]}