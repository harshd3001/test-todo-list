{"processInputData":{"connectors":[{"exitPortType":"NextStep","nodeId":"getLoggedInUser"}],"contextChangePermitted":true,"name":"processInputData","description":"processInputData","processRule":"{for (const key in contextVar.data) { contextVar[key] = contextVar.data[key]; } }","nodeType":"PROCESS","jsEngine":"es6"},"fetchWorkOrderTaskDetails":{"filter":"{$workOrderTask.id}={@workOrderTaskId}","models":["workOrderTask"],"connectors":[{"exitPortType":"NextStep","nodeId":"fetchRemovalLocalizedKey"}],"columns":{"workOrderTaskTaskTypeId":"workOrderTask.taskTypeId"},"name":"fetchWorkOrderTaskDetails","description":"fetchWorkOrderTaskDetails","inputVarMap":{"workOrderTaskId":"workOrderTaskId"},"outputVarMap":{"data":"workOrderTaskType"},"nodeType":"QUERY"},"insertIntoAssetLogs":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"processId":"installedBaseLogModelWF","name":"insertIntoAssetLog","description":"insertIntoAssetLog","inputVarMap":{"installedBaseLog":"installedBaseLog","subAction":"subAction"},"outputVarMap":{},"nodeType":"WORKFLOW"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"processInputData"}],"name":"start","description":"start","nodeType":"START"},"getLoggedInUser":{"filter":"{$userId}={@userId}","models":["User"],"connectors":[{"exitPortType":"NextStep","nodeId":"fetchWorkOrderTaskDetails"}],"columns":{"userName":"User.name","userId":"User.id"},"name":"getLoggedInUser","description":"getLoggedInUser","inputVarMap":{"{@userId}":"userId"},"outputVarMap":{"data":"currentUserDetail"},"nodeType":"QUERY"},"processLogData":{"connectors":[{"exitPortType":"NextStep","nodeId":"insertIntoAssetLogs"}],"contextChangePermitted":true,"name":"processLogData","description":"processLogData","processRule":"{contextVar.currentDate = new Date().toISOString().replace('T', ' ').replace('Z', ''); var localizedKeys = {}; if (Array.isArray(contextVar.localizedData) && contextVar.localizedData.length > 0) { contextVar.localizedData.forEach(function (element) { contextVar.eventType = element.listOptionAnswerId; contextVar.event = element.listOptionAnswerAnswerOptionText; }); } if (Array.isArray(contextVar.currentUserDetail) && contextVar.currentUserDetail.length > 0) { contextVar.loggedInUser = contextVar.currentUserDetail[0].userId; }; if (Array.isArray(contextVar.workOrderTaskType) && contextVar.workOrderTaskType.length > 0) { contextVar.workOrderTaskTaskTypeId = contextVar.workOrderTaskType[0].workOrderTaskTaskTypeId; }; contextVar.installedBaseLog = [{ loggedByUserId: contextVar.loggedInUser, logDate: contextVar.currentDate, installedBaseId: contextVar.installedBaseId, workOrderTaskId: contextVar.workOrderTaskId, eventType: contextVar.eventType, event: contextVar.event, taskTypeId: contextVar.workOrderTaskTaskTypeId }]; contextVar.subAction = 'upsertInstalledBaseLog';}","nodeType":"PROCESS","jsEngine":"es6"},"fetchRemovalLocalizedKey":{"filter":"{$listOptionAnswer.listOptionId}='assetLogEvents' AND {$listOptionAnswer.id}='assetRemoved' ","models":["listOptionAnswer"],"connectors":[{"exitPortType":"NextStep","nodeId":"processLogData"}],"columns":{"listOptionAnswerId":"listOptionAnswer.id","listOptionAnswerAnswerOptionText":"listOptionAnswer.answerOptionText"},"name":"fetchRemovalLocalizedKey","description":"fetchRemovalLocalizedKey","outputVarMap":{"data":"localizedData"},"nodeType":"QUERY"},"end":{"name":"end","description":"end","inputVarMap":{},"outputVarMap":{},"nodeType":"END"},"workflowNodes":["start","processInputData","getLoggedInUser","fetchWorkOrderTaskDetails","fetchRemovalLocalizedKey","processLogData","insertIntoAssetLogs","end"]}