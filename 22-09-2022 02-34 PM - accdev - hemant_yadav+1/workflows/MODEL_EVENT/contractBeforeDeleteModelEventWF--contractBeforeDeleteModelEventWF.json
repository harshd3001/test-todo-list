{"processInputData":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchMaintenancePlanData"}],"contextChangePermitted":true,"name":"processInputData","description":"processInputData","processRule":"contextVar.contractId = contextVar.data.id","nodeType":"PROCESS"},"callAssetMaintenancePlanWF":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"processId":"assetMaintenancePlanWF","name":"callAssetMaintenancePlanWF","description":"callAssetMaintenancePlanWF","inputVarMap":{"assetMaintenancePlanData":"assetMaintenancePlan","subAction":"subActionForPlan"},"nodeType":"WORKFLOW"},"formatDataForUpsert":{"connectors":[{"exitPortType":"NextStep","nodeId":"callAssetMaintenancePlanWF"}],"contextChangePermitted":true,"name":"formatDataForUpsert","description":"formatDataForUpsert","processRule":"contextVar.assetMaintenancePlanData.forEach(element => { element.statusId = 'assetMaintenancePlanExpired'; element.slaId = ''; element.calendarId = ''; element.contractId = '';});","nodeType":"PROCESS","jsEngine":"es6"},"workflowContext":{"subAction":"upsertAssetMaintenancePlan"},"areMaintenancePlansExist":{"connectors":[{"exitPortType":"TrueStep","nodeId":"formatDataForUpsert"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"areMaintenancePlansExist","description":"areMaintenancePlansExist","processRule":"{Array.isArray(contextVar.assetMaintenancePlanData)  && contextVar.assetMaintenancePlanData.length > 0}","nodeType":"DECISION"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"processInputData"}],"name":"start","description":"start","nodeType":"START"},"fetchMaintenancePlanData":{"filter":"{$assetMaintenancePlan.contractId} = {@id} AND {$assetMaintenancePlan.statusId} = 'assetMaintenancePlanActive' ","models":["assetMaintenancePlan"],"connectors":[{"exitPortType":"NextStep","nodeId":"areMaintenancePlansExist"}],"columns":{"id":"assetMaintenancePlan.id"},"name":"fetchMaintenancePlanData","description":"fetchMaintenancePlanData","inputVarMap":{"contractId":"id"},"outputVarMap":{"data":"assetMaintenancePlanData"},"nodeType":"QUERY"},"end":{"name":"end","description":"end","inputVarMap":{},"outputVarMap":{},"nodeType":"END"},"workflowNodes":["start","processInputData","fetchMaintenancePlanData","areMaintenancePlansExist","formatDataForUpsert","callAssetMaintenancePlanWF","end"]}