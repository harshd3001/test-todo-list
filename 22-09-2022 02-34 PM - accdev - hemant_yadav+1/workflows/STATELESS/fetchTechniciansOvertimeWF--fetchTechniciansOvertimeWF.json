{"appendOvertime":{"connectors":[{"exitPortType":"NextStep","nodeId":"areMoreTechOvertimePresent"}],"contextChangePermitted":true,"name":"appendTasks","description":"appendTasks","processRule":"if (Array.isArray(contextVar.appendTechnicianOvertime)) { contextVar.appendTechnicianOvertime.forEach(function(obj){contextVar.appendTechnicianOvertimeData.push(obj);}); } contextVar.newOvertimeBatchNumber = contextVar.newOvertimeBatchNumber + 1;","id":"appendTasks","nodeType":"PROCESS"},"workflowContext":{"noOfOvertimeBatches":0,"newOvertimeBatchNumber":0},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"getTechniciansOvertime"}],"name":"start","description":"Start","nodeType":"START"},"getTechniciansOvertime":{"models":["workforce","workforceOvertime"],"connectors":[{"exitPortType":"NextStep","nodeId":"findNumberOfOvertimeBatches"}],"columns":{"workforceOvertimeStartDate":"workforceOvertime.startDate","closingTime":"workforceOvertime.endDate","openingTime":"workforceOvertime.startDate","workforceUserId":"workforce.userId","workforceOvertimeEndDate":"workforceOvertime.endDate"},"description":"getTechniciansOvertime","distinct":true,"orderBy":"workforceOvertimeStartDate ASC","inputVarMap":{"customBatchSize":"batchSize","overtimeFilter":"filter","startDateFilter":"startDateFilter","endDateFilter":"endDateFilter","loopArray":"loopArray"},"nodeType":"QUERY","filter":"filter","name":"getTechniciansOvertime","links":{"workforce":"workforceOvertime"},"outputVarMap":{"data":"appendTechnicianOvertimeData","count":"overtimeCount","batchSize":"techOvertimebatchSize","batchNumber":"techOvertimeBatchNumber"},"batchSize":"batchSize","getCount":true},"fetchMoreTechsOvertime":{"connectors":[{"exitPortType":"TrueStep","nodeId":"getMoreTechniciansOvertime"},{"exitPortType":"FalseStep","nodeId":"end"}],"data":"appendTechnicianOvertimeData","name":"fetchMoreTechsOvertime","description":"fetchMoreTechsOvertime","inputVarMap":{},"processRule":"contextVar.noOfOvertimeBatches >= contextVar.newOvertimeBatchNumber","id":"fetchMoreTechsOvertime","outputVarMap":{},"nodeType":"WHILELOOP"},"end":{"name":"end","description":"End","inputVarMap":{"appendTechnicianOvertimeData":"appendTechnicianOvertimeData"},"outputVarMap":{"appendTechnicianOvertimeData":"appendTechnicianOvertimeData"},"nodeType":"END"},"areMoreTechOvertimePresent":{"connectors":[{"exitPortType":"TrueStep","nodeId":"fetchMoreTechsOvertime"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"areMoreTechOvertimePresent","description":"areMoreTechOvertimePresent","processRule":"contextVar.noOfOvertimeBatches >= 2","id":"areMoreTechOvertimePresent","nodeType":"DECISION"},"getMoreTechniciansOvertime":{"models":["workforce","workforceOvertime"],"connectors":[{"exitPortType":"NextStep","nodeId":"appendOvertime"}],"columns":{"workforceOvertimeStartDate":"workforceOvertime.startDate","closingTime":"workforceOvertime.endDate","openingTime":"workforceOvertime.startDate","workforceUserId":"workforce.userId","workforceOvertimeEndDate":"workforceOvertime.endDate"},"orderBy":"workforceOvertimeStartDate ASC","description":"getMoreTechniciansOvertime","distinct":true,"inputVarMap":{"overtimeFilter":"filter","customBatchSize":"batchSize","startDateFilter":"startDateFilter","endDateFilter":"endDateFilter","loopArray":"loopArray","newOvertimeBatchNumber":"batchNumber"},"nodeType":"QUERY","filter":"filter","name":"getMoreTechniciansOvertime","links":{"workforce":"workforceOvertime"},"outputVarMap":{"data":"appendTechnicianOvertime"},"batchSize":"batchSize","getCount":true,"batchNumber":"batchNumber"},"workflowNodes":["start","getTechniciansOvertime","findNumberOfOvertimeBatches","areMoreTechOvertimePresent","fetchMoreTechsOvertime","getMoreTechniciansOvertime","appendOvertime","end"],"findNumberOfOvertimeBatches":{"connectors":[{"exitPortType":"NextStep","nodeId":"areMoreTechOvertimePresent"}],"contextChangePermitted":true,"name":"findNumberOfOvertimeBatches","description":"findNumberOfOvertimeBatches","processRule":"contextVar.noOfOvertimeBatches = Math.ceil(contextVar.overtimeCount / contextVar.customBatchSize);contextVar.newOvertimeBatchNumber = contextVar.techOvertimeBatchNumber + 1;","nodeType":"PROCESS"}}