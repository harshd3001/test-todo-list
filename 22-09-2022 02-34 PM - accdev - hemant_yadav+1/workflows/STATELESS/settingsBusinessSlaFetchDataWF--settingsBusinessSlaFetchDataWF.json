{"checkSlaId":{"connectors":[{"exitPortType":"TrueStep","nodeId":"getSlaTimeFrameData"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"checkSlaId","description":"checkSlaId","processRule":"{typeof contextVar.slaAction !== 'undefined' && contextVar.slaAction !== 'add'}","nodeType":"DECISION"},"fetchLocalizedKeys":{"filter":"{$listOptionAnswer.listOptionId}='timeDuration'","models":["listOptionAnswer"],"connectors":[{"exitPortType":"NextStep","nodeId":"processSlaTimeFrameData"}],"columns":{"listOptionAnswerId":"listOptionAnswer.id","listOptionAnswerAnswerOptionText":"listOptionAnswer.answerOptionText"},"name":"fetchLocalizedKeys","description":"fetchLocalizedKeys","outputVarMap":{"data":"localizedData"},"nodeType":"QUERY","translate":true},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"checkSlaId"}],"name":"start","description":"Start","nodeType":"START"},"end":{"name":"end","description":"end","inputVarMap":{"unselectedSlaTimeFrameData":"unselectedSlaTimeFrameData","slaTimeFrameData":"slaTimeFrameData"},"outputVarMap":{"unselectedSlaTimeFrameData":"unselectedSlaTimeFrameData","slaTimeFrameData":"slaTimeFrameData"},"nodeType":"END"},"processSlaTimeFrameData":{"connectors":[{"exitPortType":"NextStep","nodeId":"getUnselectedSlaTimeFrameData"}],"contextChangePermitted":true,"name":"processSlaTimeFrameData","description":"processSlaTimeFrameData","processRule":"{contextVar.selectedSlaTimeFrame = []; var localizedKeys = {}; var timeUnit = '', slaTimeFrameResolutionTimeUnit = ''; if (typeof contextVar.localizedData !== 'undefined' && contextVar.localizedData !== '') { contextVar.localizedData.forEach(function (element) { localizedKeys[element.listOptionAnswerId] = element.listOptionAnswerAnswerOptionText; }); } for (var i in contextVar.slaTimeFrameData) { contextVar.selectedSlaTimeFrame.push(contextVar.slaTimeFrameData[i].zPriorityPriority); slaTimeFrameResolutionTimeUnit = contextVar.slaTimeFrameData[i].slaTimeFrameResolutionTimeUnit; if (slaTimeFrameResolutionTimeUnit !== 'months') { timeUnit = typeof localizedKeys[slaTimeFrameResolutionTimeUnit + 'TD'] !== 'undefined' ? localizedKeys[slaTimeFrameResolutionTimeUnit + 'TD'] : slaTimeFrameResolutionTimeUnit[0] } else if (slaTimeFrameResolutionTimeUnit === 'months') timeUnit = typeof localizedKeys.monthsTD !== 'undefined' ? localizedKeys.monthsTD : 'mo'; contextVar.slaTimeFrameData[i].time = contextVar.slaTimeFrameData[i].time.split(' ')[0] + timeUnit; }contextVar.filterString='workOrder'; if (contextVar.selectedSlaTimeFrame.length === 0) { contextVar.filter = ' {$zPriorityTargetModel} = {@workOrder} '; } else { contextVar.filter = '{$zPriorityPriority} not in {@selectedSlaTimeFrame} AND {$zPriorityTargetModel} = {@workOrder} ' }}","nodeType":"PROCESS"},"getUnselectedSlaTimeFrameData":{"filter":"{@filter}","models":["ZPriority"],"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"columns":{"zPriorityPriority":"ZPriority.priority","zPriorityName":"ZPriority.name","zPriorityTargetModel":"ZPriority.targetModel"},"name":"getUnselectedSlaTimeFrameData","description":"getUnselectedSlaTimeFrameData","inputVarMap":{"filter":"filter","filterString":"workOrder","selectedSlaTimeFrame":"selectedSlaTimeFrame"},"outputVarMap":{"data":"unselectedSlaTimeFrameData"},"nodeType":"QUERY"},"workflowNodes":["start","checkSlaId","getSlaTimeFrameData","fetchLocalizedKeys","processSlaTimeFrameData","getUnselectedSlaTimeFrameData","end"],"getSlaTimeFrameData":{"filter":"{$slaTimeFrameSlaId} = {@slaId} AND {$slaTimeFramePriorityPriority}={$zPriorityPriority}","models":["slaTimeFrame","ZPriority"],"connectors":[{"exitPortType":"NextStep","nodeId":"fetchLocalizedKeys"}],"columns":{"slaTimeFrameRecver":"slaTimeFrame.recver","slaTimeFramePriorityPriority":"slaTimeFrame.priorityPriority","slaTimeFrameResolutionTimeUnit":"slaTimeFrame.resolutionTimeUnit","zPriorityPriority":"ZPriority.priority","zPriorityName":"ZPriority.name","zPriorityTargetModel":"ZPriority.targetModel","slaTimeFrameSlaId":"slaTimeFrame.slaId","time":"CONCAT({$slaTimeFrame.resolutionTimeAmount},' ',{$slaTimeFrame.resolutionTimeUnit})","slaTimeFrameResolutionTimeAmount":"slaTimeFrame.resolutionTimeAmount"},"name":"getSlaTimeFrameData","description":"getSlaTimeFrameData","links":{"slaTimeFrame":"ZPriority"},"inputVarMap":{"slaId":"slaId"},"outputVarMap":{"data":"slaTimeFrameData"},"nodeType":"QUERY"}}