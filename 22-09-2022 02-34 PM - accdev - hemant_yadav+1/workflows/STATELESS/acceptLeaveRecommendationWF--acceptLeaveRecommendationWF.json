{"processLoopData":{"connectors":[{"exitPortType":"NextStep","nodeId":"callReassignAndRescheduleTasksBasedOnPriorityWF"}],"contextChangePermitted":true,"name":"processLoopData","description":"processLoopData","processRule":"{ contextVar.mainTaskIdToSchedule = contextVar.workOrderTaskDataLoop_currentElement.id; }","nodeType":"PROCESS"},"workforceLeaveDetails":{"filter":"{$workforceLeave.id} = {@workforceLeaveId}","models":["workforceLeave"],"connectors":[{"exitPortType":"NextStep","nodeId":"checkForRecommendation"}],"columns":{"workforceLeaveEndDate":"workforceLeave.endDate","unassignTasks":"workforceLeave.unassignTasks","workforceUserId":"workforceLeave.workforceUserId","workforceLeaveStartDate":"workforceLeave.startDate"},"name":"workforceLeaveDetails","description":"workforceLeaveDetails","inputVarMap":{"workforceLeaveId":"workforceLeaveId"},"links":{},"outputVarMap":{"data":"workforceLeaveData"},"nodeType":"QUERY"},"workOrderTaskDataLoop":{"connectors":[{"exitPortType":"TrueStep","nodeId":"processLoopData"},{"exitPortType":"FalseStep","nodeId":"end"}],"data":"workOrderTaskData","name":"workOrderTaskDataLoop","description":"workOrderTaskDataLoop","inputVarMap":{},"outputVarMap":{},"nodeType":"FOREACHLOOP"},"processData":{"connectors":[{"exitPortType":"NextStep","nodeId":"getTasksOnLeaveDates"}],"contextChangePermitted":true,"name":"processData","description":"processData","processRule":"{ if (Array.isArray(contextVar.workforceLeaveData)) { for (var key in contextVar.workforceLeaveData[0]) { contextVar[key] = contextVar.workforceLeaveData[0][key]; } } contextVar.upsertData = [{ 'id': contextVar.workforceLeaveId, 'unassignTasks': false}]; }","nodeType":"PROCESS"},"workflowContext":{"leaveRecommendation":true,"workOrderTaskStatuses":["workOrderTaskScheduled","workOrderTaskDispatched"]},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"workforceLeaveDetails"}],"name":"start","description":"start","nodeType":"START"},"getTasksOnLeaveDates":{"filter":"{$workOrderTask.assignedToUserId} = {@workforceUserId} AND (({$scheduledDate} <= {@workforceLeaveStartDate} AND {$dueDate} >= {@workforceLeaveStartDate}) OR ({$scheduledDate} <= {@workforceLeaveEndDate} AND {$dueDate} >= {@workforceLeaveEndDate}) OR ( {@workforceLeaveStartDate} <= {$scheduledDate} AND {$scheduledDate} <= {@workforceLeaveEndDate}) OR ({@workforceLeaveStartDate} <= {$dueDate} AND {$dueDate} <= {@workforceLeaveEndDate})) && {$workOrderTask.statusId} IN {@workOrderTaskStatuses}","models":["workOrderTask"],"connectors":[{"exitPortType":"NextStep","nodeId":"areTasksPresent"}],"columns":{"id":"workOrderTask.id"},"name":"getTasksOnLeaveDates","description":"getTasksOnLeaveDates","inputVarMap":{"workforceLeaveEndDate":"workforceLeaveEndDate","workforceUserId":"workforceUserId","workOrderTaskStatuses":"workOrderTaskStatuses","workforceLeaveStartDate":"workforceLeaveStartDate"},"outputVarMap":{"data":"workOrderTaskData"},"nodeType":"QUERY"},"callReassignAndRescheduleTasksBasedOnPriorityWF":{"connectors":[{"exitPortType":"NextStep","nodeId":"workOrderTaskDataLoop"}],"processId":"reassignAndRescheduleTasksBasedOnPriorityWF","ignoreSubContext":true,"name":"callReassignAndRescheduleTasksBasedOnPriorityWF","description":"callReassignAndRescheduleTasksBasedOnPriorityWF","inputVarMap":{"leaveRecommendation":"leaveRecommendation","mainTaskIdToSchedule":"mainTaskIdToSchedule"},"outputVarMap":{},"nodeType":"WORKFLOW"},"checkForRecommendation":{"connectors":[{"exitPortType":"TrueStep","nodeId":"processData"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"checkForRecommendation","description":"checkForRecommendation","processRule":"Array.isArray(contextVar.workforceLeaveData) && contextVar.workforceLeaveData[0].unassignTasks","nodeType":"DECISION"},"end":{"name":"end","description":"End","inputVarMap":{},"outputVarMap":{},"nodeType":"END"},"areTasksPresent":{"connectors":[{"exitPortType":"TrueStep","nodeId":"workOrderTaskDataLoop"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"areTasksPresent","description":"areTasksPresent","processRule":"Array.isArray(contextVar.workOrderTaskData) && contextVar.workOrderTaskData.length > 0","nodeType":"DECISION"},"workflowNodes":["start","workforceLeaveDetails","checkForRecommendation","processData","getTasksOnLeaveDates","areTasksPresent","workOrderTaskDataLoop","processLoopData","callReassignAndRescheduleTasksBasedOnPriorityWF","end"]}