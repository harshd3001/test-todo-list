{"assignLocationData":{"connectors":[{"exitPortType":"NextStep","nodeId":"areFieldsNull"}],"contextChangePermitted":true,"name":"assignLocationData","description":"assignLocationData","processRule":"{contextVar.myLocation=[];contextVar.myLocation=contextVar.startTravelLocationCoordinates.split(',');contextVar.technicianLatitude=contextVar.myLocation[0];contextVar.technicianLongitude=contextVar.myLocation[1];contextVar.mobileSubmit=new Date();contextVar.mobileSubmit=contextVar.mobileSubmit.toISOString().replace('T',' ').replace('Z','');}","nodeType":"PROCESS"},"processLatLong":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchTransportModesListOptionValues"}],"contextChangePermitted":true,"name":"processLatLong","description":"processLatLong","processRule":"{if ((typeof contextVar.technicianLatitude!=='undefined' || contextVar.technicianLatitude!=='') && (typeof contextVar.technicianLongitude!=='undefined' || contextVar.technicianLongitude!=='')){contextVar.technicianLatitude=contextVar.technicianLatitude.toString(); contextVar.technicianLongitude=contextVar.technicianLongitude.toString(); contextVar.origin=contextVar.technicianLatitude.concat(',', contextVar.technicianLongitude);}}","nodeType":"PROCESS"},"workflowContext":{"statusTargetModel":"workOrderTask","eventType":"workOrderTaskTravelStarted","inTransit":"workOrderTaskInTransit"},"processMobileSubmit":{"connectors":[{"exitPortType":"NextStep","nodeId":"reAssignStatusToTravel"}],"contextChangePermitted":true,"name":"processMobileSubmit","description":"processMobileSubmit","processRule":"{contextVar.travelDetails=[];contextVar.travelDetailValues={};if (typeof contextVar.mobileSubmit==='undefined' || contextVar.mobileSubmit===''){contextVar.mobileSubmit='';}else{var mobileSubmitTimeStamp=parseInt(new Date(contextVar.mobileSubmit).getTime().toString().slice(0,-1)); contextVar.timestamp=mobileSubmitTimeStamp; contextVar.location=contextVar.origin;contextVar.travelDetailValues.transportMode = contextVar.modesOfTransport[0].listOptionAnswerOptionText;contextVar.travelDetailValues.startTravelLocation = contextVar.location;contextVar.travelDetails.push(contextVar.travelDetailValues);}}","nodeType":"PROCESS"},"reAssignStatusToTravel":{"modelName":"workOrderTask","connectors":[{"condition":"","connectorDisplayType":"CurvedLine","connectorLabel":"","exitPortType":"NextStep","nodeId":"end"}],"name":"reAssignStatusToTravel","description":"reAssignStatusToTravel","inputVarMap":{"statusTargetModel":"statusTargetModel","travelDetails":"travelDetails","workOrderTaskId":"id","startTravelDate":"startTravelDate","eventType":"eventType","inTransit":"statusId"},"nodeType":"MODEL","displayPositionX":225,"operation":2,"displayPositionY":34},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"assignLocationData"}],"name":"start","description":"start","nodeType":"START"},"fetchTransportModesListOptionValues":{"filter":"{$listOptionAnswerId} = {@modesOfTransport}","models":["listOptionAnswer"],"connectors":[{"exitPortType":"NextStep","nodeId":"processMobileSubmit"}],"columns":{"listOptionAnswerId":"listOptionAnswer.id","listOptionAnswerOptionText":"listOptionAnswer.answerOptionText"},"name":"fetchTransportModesListOptionValues","description":"List option asnwer for mode of transport","inputVarMap":{"modesOfTransport":"modesOfTransport"},"id":"fetchTransportModesListOptionValues","outputVarMap":{"data":"modesOfTransport"},"nodeType":"QUERY","translate":false},"end":{"name":"end","description":"end","processRule":"{}","nodeType":"END"},"areFieldsNull":{"connectors":[{"exitPortType":"TrueStep","nodeId":"end"},{"exitPortType":"FalseStep","nodeId":"processLatLong"}],"name":"areFieldsNull","description":"areFieldsNull","processRule":"(typeof contextVar.mobileSubmit==='undefined' || contextVar.mobileSubmit=='')&&(typeof contextVar.technicianLongitude==='undefined' || contextVar.technicianLongitude=='')&&(typeof contextVar.technicianLatitude==='undefined' || contextVar.technicianLatitude=='')","nodeType":"DECISION"},"workflowNodes":["start","assignLocationData","areFieldsNull","processLatLong","fetchTransportModesListOptionValues","processMobileSubmit","reAssignStatusToTravel","end"]}