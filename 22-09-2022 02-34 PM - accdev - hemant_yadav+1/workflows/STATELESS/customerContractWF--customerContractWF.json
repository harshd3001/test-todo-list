{"getContracts":{"filter":"{$customerId} = {@customerId} AND {$statusId}!='contractExpired' AND {$statusId}!='contractDeactivated'","models":["contract"],"connectors":[{"exitPortType":"NextStep","nodeId":"areContractsPresent"}],"columns":{"statusId":"contract.statusId","customerId":"contract.customerId","id":"contract.id"},"name":"getContracts","description":"getContracts","inputVarMap":{"customerId":"customerId"},"outputVarMap":{"data":"contract"},"nodeType":"QUERY"},"contractMultiDecisionNode":{"connectors":[{"condition":"contextVar.subAction==='upsertContract' || contextVar.subAction==='deactivateContract'","exitPortType":"NextStep","nodeId":"upsertContract"},{"condition":"contextVar.subAction==='deleteContract' ","exitPortType":"NextStep","nodeId":"deleteContract"},{"DefaultStep":true,"condition":"contextVar.subAction===''","exitPortType":"NextStep","nodeId":"end"}],"name":"contractMultiDecisionNode","description":"contractMultiDecisionNode","nodeType":"MULTIDECISION"},"processContractData":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"contextChangePermitted":true,"name":"processContractData","description":"processContractData","processRule":"{contextVar.contractId = contextVar.data[0].id}","nodeType":"PROCESS"},"areContractsPresent":{"connectors":[{"exitPortType":"TrueStep","nodeId":"setContractsDeactivated"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"isAssets","description":"isAssets","processRule":"(typeof contextVar.contract !== 'undefined' &&  contextVar.contract !=='')","nodeType":"DECISION"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"multiDecisionNodeUpsertOrDeactivate"}],"name":"start","description":"Start","nodeType":"START"},"deleteContract":{"modelName":"contract","connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"multirecord":true,"name":"deleteContract","description":"delete Contract","inputVarMap":{"jsonObj":"data"},"outputVarMap":{"data":"data"},"nodeType":"MODEL","operation":3},"end":{"name":"end","description":"end","inputVarMap":{"contractId":"contractId"},"outputVarMap":{"contractId":"contractId"},"nodeType":"END"},"upsertContract":{"modelName":"contract","connectors":[{"exitPortType":"NextStep","nodeId":"processContractData"}],"multirecord":true,"name":"upsertContract","description":"upsert contract","inputVarMap":{"jsonObj":"data"},"outputVarMap":{"data":"data"},"nodeType":"MODEL","operation":4},"processZRule":{"connectors":[{"exitPortType":"NextStep","nodeId":"contractMultiDecisionNode"}],"contextChangePermitted":true,"name":"processZRule ","description":"processZRule","processRule":"@YIJ3KE85QK","nodeType":"PROCESS"},"workflowNodes":["start","multiDecisionNodeUpsertOrDeactivate","getContracts","areContractsPresent","setContractsDeactivated","processZRule","contractMultiDecisionNode","upsertContract","processContractData","deleteContract","end"],"multiDecisionNodeUpsertOrDeactivate":{"connectors":[{"condition":"contextVar.subAction==='upsertContract' || contextVar.subAction==='deleteContract' ","exitPortType":"NextStep","nodeId":"processZRule"},{"condition":"contextVar.subAction==='deactivateCustomer' ","exitPortType":"NextStep","nodeId":"getContracts"},{"DefaultStep":true,"condition":"contextVar.subAction===''","exitPortType":"NextStep","nodeId":"end"}],"name":"multiDecisionNodeUpsertOrDeactivate","description":"multiDecisionNodeUpsertOrDeactivate","nodeType":"MULTIDECISION"},"setContractsDeactivated":{"connectors":[{"exitPortType":"NextStep","nodeId":"processZRule"}],"contextChangePermitted":true,"name":"setContractsDeactivated","description":"setContractsDeactivated","processRule":"{contextVar.subAction='deactivateContract';for(var index in contextVar.contract){contextVar.contract[index].statusId='contractDeactivated';}}","nodeType":"PROCESS"}}