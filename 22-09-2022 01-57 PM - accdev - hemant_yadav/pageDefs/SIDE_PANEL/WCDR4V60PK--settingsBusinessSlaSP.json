{"pageContext":{},"actionOnLoad":["@actions.fetchSlaData","@actions.processSlaData","@actions.initialData","@actions.setEnable","@actions.refreshDataGrid"],"jslib":{"isPriorityListMinLengthOne":"function(pageContext){if(typeof pageContext.priorityFinalList !== 'undefined' && pageContext.priorityFinalList.length === 0){return false;}else{return true;}}","isSaveDisabledForAddBtn":"function(pageContext){if(pageContext.slaName==undefined || pageContext.slaName=='' ){return true;}}","isEditSectionHiddenForAddBtn":"function(pageContext){if(pageContext.slaAction==='add'){return false;}else{return true;}}","dynamicHeaderText":"function(pageContext){ if(pageContext.slaAction === 'add'){return '@lang.[\"ans2\",\"Add New SLA\"]'}else if(pageContext.slaAction === 'edit'){return '@lang.[\"esla\",\"Edit SLA\"]'}}","isAddSectionHidden":"function(pageContext){if(pageContext.slaAction==='edit' || pageContext.subAction=='deleteSlaTimeFrame' ||  pageContext.subAction=='deleteSla'){return false;}else{return true;}}","slaChildDelete":"function(pageContext){return (typeof pageContext.priorityFinalList !== 'undefined' &&pageContext.priorityFinalList.length > 0) ? false : true}","isSaveDisabled":"function(pageContext){if (pageContext.slaAction === 'edit' ||pageContext.action === 'deleteSlaTimeFrame' ) {return ((pageContext.initialName === pageContext.slaName && pageContext.initialDescription===pageContext.slaDescription) || (pageContext.slaName ===''))}}"},"header":{"children":[{"hidden":true,"icon":"@iconlib.ActionsBinGrey","actionOnClick":["@actions.deleteModal"],"id":"deleteSLA","type":"buttonIcon"},{"buttonType":"primary","hidden":"@jslib.isEditSectionHiddenForAddBtn","actionOnClick":["@actions.setSubActionUpsertSla","@actions.fireProcessEvent","@actions.SetActionEditSla","@actions.fetchSlaData","@actions.processSlaData","@actions.initialData","@actions.setEnable","@actions.refreshDataGrid"],"disabled":"@jslib.isSaveDisabledForAddBtn","id":"saveAndContinue","type":"button","title":"@lang.['sc1','Save & Continue']"},{"buttonType":"primary","hidden":"@jslib.isAddSectionHidden","actionOnClick":["@actions.setSubActionUpsertSla","@actions.fireProcessEvent","@actions.closePanel","@actions.refreshDataGrid"],"disabled":"@jslib.isSaveDisabled","id":"submit","type":"button","title":"@lang.['s12','Save']"},{"icon":"@iconlib.NavigationCloseGrey","actionOnClick":["@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"id":"Close","type":"buttonIcon"}],"title":"@jslib.dynamicHeaderText"},"body":{"children":[{"alertMessage":"@lang.['ctrtftsutgbtwbutdtdfwoat','Configure the response times for this SLA using the grid below. These will be used to determine the deadline for work orders and tasks.']","alertType":"warning","rightIconVisible":false,"hidden":"@jslib.isPriorityListMinLengthOne","id":"errTxt","type":"alert"},{"children":[{"isRequired":true,"id":"slaName","label":"@lang.['n','Name']","placeholder":"@lang.['en1','Enter name']","type":"input","value":"@pageContext.slaName"},{"id":"description","label":"@lang.['d7','Description (Optional) ']","type":"textarea","value":"@pageContext.slaDescription","placeHolder":"@lang.['ed1','Enter description']"}],"label":"@lang.['gi','General Information']","id":"taskTypeSection","type":"section"},{"hidden":"@jslib.isAddSectionHidden","children":[{"label":"","id":"skillsDatagrid","type":"datagrid","jsonDef":{"pageContextConfig":{"enable":true,"isPaginationReqd":true,"tableData":{"source":"@pageContext.priorityFinalList"}},"isScrollAble":false,"searchAllowed":true,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsEditPurple","name":"@lang.['e6','editTask']","icon":"@iconlib.ActionsEditGrey","tooltip":"@lang.['e1','Edit']","actionOnClick":["@actions.setActionSlaTimeFrameEdit","@actions.openNestedSidePanel"],"type":"buttonIcon"},{"activeIcon":"@iconlib.ActionsBinPurple","hidden":true,"name":"@lang.['d9','deleteTask']","icon":"@iconlib.ActionsBinGrey","tooltip":"@lang.['d1','Delete']","actionOnClick":["@actions.setSubActionDeleteSlaTimeFrame","@actions.deleteSlaPrioritydata"],"type":"buttonIcon"}]},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['priority','Priority']","options":{"currentSorted":true,"sortable":true,"showLabel":true},"key":"zPriorityName"},{"name":"@lang.['rt','Resolution Time']","options":{"currentSorted":true,"sortable":true,"showLabel":true},"key":"time"}],"actionOnLoad":[],"dataSourceId":"query/read","jslib":{"isAddDisabled":"function(pageContext){ return (pageContext.unselectedPriorityList === '' && pageContext.unselectedPriorityList.length === 0);}"},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['stf','SLA Time Frames']","children":[{"buttonType":"primary","actionOnClick":["@actions.setActionSlaTimeFrameAdd","@actions.openNestedSidePanel"],"disabled":"@jslib.isAddDisabled","id":"addNew","type":"button","title":"@lang.['addNew','Add New']"}]},"isSelectable":false,"actions":[{"name":"setActionSlaTimeFrameEdit","type":"script","actionDef":"function(pageContext){pageContext.slaTimeFrameAction='edit';}"},{"name":"setActionSlaTimeFrameAdd","type":"script","actionDef":"function(pageContext){pageContext.slaTimeFrameAction='add';}"},{"name":"setSubActionDeleteSlaTimeFrame","type":"script","actionDef":"function(pageContext){pageContext.subAction='deleteSlaTimeFrame'; }"},{"name":"setSubActionUpsertSlaTimeFrame","type":"script","actionDef":"function(pageContext){pageContext.subAction='upsertSlaTimeFrame';}"},{"name":"priorityFinalQuery","outputVarMap":{"data":"@pageContext.priorityFinalList"},"type":"query","continueOnError":true,"actionDef":{"filter":"{$slaTimeFrameSlaId} = {@idFilter} AND {$slaTimeFramePriorityPriority}={$zPriorityPriority}","models":["slaTimeFrame","ZPriority"],"inputs":{"idFilter":"@pageContext.slaId"},"columns":{"slaTimeFrameRecver":"slaTimeFrame.recver","slaTimeFrameResolutionTimeUnit":"slaTimeFrame.resolutionTimeUnit","slaTimeFramePriorityPriority":"slaTimeFrame.priorityPriority","zPriorityPriority":"ZPriority.priority","zPriorityName":"ZPriority.name","zPriorityTargetModel":"ZPriority.targetModel","slaTimeFrameSlaId":"slaTimeFrame.slaId","time":"CONCAT({$slaTimeFrame.resolutionTimeAmount},' ',{$slaTimeFrame.resolutionTimeUnit})","slaTimeFrameResolutionTimeAmount":"slaTimeFrame.resolutionTimeAmount"},"orderBy":"slaTimeFramePriorityPriority DESC"}},{"name":"openNestedSidePanel","type":"openPanel","pageId":"ET4U4V6N3P"},{"subTitle":"@lang.['aysywtdtstftcbu','Are you sure you want to delete the SLA time frame? This cannot be undone.']","name":"deleteSlaPrioritydata","options":[{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.fireProcessEvent","@actions.closeModal","@actions.priorityFinalQuery","@actions.clearSlaTimeFramePriorityPriority","@actions.refreshDataGrid"],"type":"button","title":"@lang.['d1','Delete']"}],"type":"openModal","title":"@lang.['cd','Confirm Delete']"},{"endPoint":"event/start","name":"fireProcessEvent","outputVarMap":{"data":"@pageContext.data"},"type":"api","actionDef":{"data":[{"eventId":"settingsBusinessSlaProcessEvent","contextVar":{"slaTimeFrame":{"priorityPriority":"@pageContext.slaTimeFramePriorityPriority","slaId":"@pageContext.slaId","recver":"@pageContext.slaTimeFrameRecver"},"subAction":"@pageContext.subAction","sla":{"recver":"@pageContext.slaRecver","name":"@pageContext.slaName","description":"@pageContext.slaDescription","id":"@pageContext.slaId"}}}]}},{"name":"refreshDataGrid","type":"refreshDataGrid"}],"searchKeys":["zPriorityName","time"]}}],"label":"@lang.['stf','SLA Time Frames']","id":"datagridSkills","type":"section","transparent":true}]},"actions":[{"name":"processSlaData","type":"script","actionDef":"function(pageContext) { if (typeof pageContext.slaAction !== 'undefined' && pageContext.slaAction !== 'add') {pageContext.priorityFinalList = pageContext.queryData[0].outputVar.slaTimeFrameData; pageContext.unselectedPriorityList = pageContext.queryData[0].outputVar.unselectedSlaTimeFrameData;}}"},{"isAsync":true,"name":"initialData","type":"script","actionDef":"function(pageContext){if(typeof pageContext!=='undefined'){pageContext.initialName=pageContext.slaName;pageContext.initialDescription=pageContext.slaDescription;if(typeof pageContext.initialPriorityFinalListLength==='undefined'){pageContext.initialPriorityFinalListLength=pageContext.priorityFinalList.length;}else{pageContext.priorityFinalListLength=pageContext.priorityFinalList.length;}}}"},{"subTitle":"@lang.['aysywtdtstcbu','Are you sure you want to delete the SLA? This cannot be undone.']","name":"deleteModal","options":[{"buttonType":"secondary","name":"no","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.setSubActionDeleteSla","@actions.fireProcessEvent","@actions.closeModal","@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"type":"button","title":"@lang.['d1','Delete']"}],"type":"openModal","title":"@lang.['cd','Confirm Delete']"},{"endPoint":"event/start","name":"fireProcessEvent","outputVarMap":{"data":"@pageContext.data"},"type":"api","actionDef":{"data":[{"eventId":"settingsBusinessSlaProcessEvent","contextVar":{"slaTimeFrame":{"priorityPriority":"@pageContext.slaTimeFramePriorityPriority","slaId":"@pageContext.slaId","recver":"@pageContext.slaTimeFrameRecver"},"subAction":"@pageContext.subAction","sla":{"recver":"@pageContext.slaRecver","name":"@pageContext.slaName","description":"@pageContext.slaDescription","id":"@pageContext.slaId"}}}]}},{"name":"clearPageContext","type":"clearPageContext"},{"name":"closeModal","type":"closeModal"},{"name":"closePanel","type":"closePanel"},{"name":"clearSlaTimeFramePriorityPriority","type":"script","actionDef":"function(pageContext){ pageContext.slaTimeFramePriorityPriority='';}"},{"name":"SetActionEditSla","type":"script","actionDef":"function(pageContext){if(pageContext.slaAction='edit'){ pageContext.slaId=pageContext.data[0].data[0].slaId;}}"},{"name":"setActionDeleteSla","type":"script","actionDef":"function(pageContext){pageContext.subAction='deleteSla'; }"},{"name":"setSubActionUpsertSla","type":"script","actionDef":"function(pageContext){pageContext.subAction='upsertSla';}"},{"name":"setEnable","type":"script","actionDef":"function(pageContext){pageContext.enable=true;}"},{"name":"refreshDataGrid","type":"refreshDataGrid"},{"endPoint":"process/start","name":"fetchSlaData","outputVarMap":{"data":"@pageContext.queryData"},"type":"api","actionDef":{"data":[{"inputVar":{"slaId":"@pageContext.slaId"},"processId":"settingsBusinessSlaFetchDataWF","contextVar":{"slaAction":"@pageContext.slaAction","slaId":"@pageContext.slaId"}}]}}]}