{"fetchMoreTasks":{"connectors":[{"exitPortType":"TrueStep","nodeId":"fetchTechsTaskData"},{"exitPortType":"FalseStep","nodeId":"end"}],"data":"schedulingAndDispatchData","name":"fetchMoreTasks","description":"fetchMoreTasks","inputVarMap":{},"processRule":"contextVar.noOfBatches >= contextVar.newBatchNumber","id":"fetchMoreTasks","outputVarMap":{},"nodeType":"WHILELOOP"},"appendTasks":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchMoreTasks"}],"contextChangePermitted":true,"name":"appendTasks","description":"appendTasks","processRule":"if (Array.isArray(contextVar.taskDataToAppend)) { contextVar.taskDataToAppend.forEach(function(obj){contextVar.schedulingAndDispatchData.push(obj);}); } contextVar.newBatchNumber = contextVar.newBatchNumber + 1;","id":"appendTasks","nodeType":"PROCESS"},"findNumberOfBatches":{"connectors":[{"exitPortType":"NextStep","nodeId":"areMoreTasksPresent"}],"contextChangePermitted":true,"name":"findNumberOfBatches","description":"findNumberOfBatches","processRule":"contextVar.noOfBatches = Math.ceil(contextVar.count / contextVar.taskbatchSize);contextVar.newBatchNumber = contextVar.taskBatchNumber + 1;contextVar.taskBatchSize = contextVar.taskbatchSize;","id":"findNumberOfBatches","nodeType":"PROCESS"},"areMoreTasksPresent":{"connectors":[{"exitPortType":"TrueStep","nodeId":"fetchMoreTasks"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"areMoreTasksPresent","description":"areMoreTasksPresent","processRule":"contextVar.noOfBatches >= 2","id":"areMoreTasksPresent","nodeType":"DECISION"},"getDispatcherTechsTaskData":{"models":["site","region","customer","workforce","User","ZStatus","workOrder","workOrderTask","taskType"],"connectors":[{"exitPortType":"NextStep","nodeId":"findNumberOfBatches"}],"columns":{"actualStartTime":"workOrderTask.actualStartTime","statusColor":"ZStatus.colorCode","customerCompanyName":"customer.companyName","regionName":"region.name","siteName":"site.name","taskTypeName":"taskType.name","type":"IF({$workOrderTask.id} IS NULL,'','task')","instanceId":"workOrderTask.processInstanceId","scheduledStartTime":"workOrderTask.scheduledDate","workOrderTaskId":"workOrderTask.id","startTime":"IF({$workOrderTask.statusId} IN {@pendingAndCompletedStatus},{$workOrderTask.actualStartTime}, {$workOrderTask.scheduledDate})","workOrderTaskModifiedDate":"workOrderTask.modifiedDate","id":"workOrderTask.id","workOrderTaskCompletedDate":"workOrderTask.completedDate","workOrderDeadline":"workOrder.deadline","scheduledEndTime":"workOrderTask.dueDate","resultWebPageId":"taskType.resultWebPageId","userName":"User.name","userId":"workOrderTask.assignedToUserId","tId":"workOrderTask.id","statusNameColor":"ZStatus.colorCode","workOrderTaskTypeId":"workOrderTask.taskTypeId","statusId":"workOrderTask.statusId","name":"taskType.name","modifiedDate":"workOrderTask.modifiedDate","actualEndTime":"workOrderTask.completedDate","workOrderTaskScheduledDate":"workOrderTask.scheduledDate","endTime":"IF({$workOrderTask.statusId} IN {@pendingAndCompletedStatus},{$workOrderTask.completedDate}, {$workOrderTask.dueDate})","workOrderId":"workOrder.id","status":"ZStatus.name"},"description":"Fetch Task Details","distinct":true,"inputVarMap":{"statusFilter":"statusFilter","pendingAndCompletedStatus":"pendingAndCompletedStatus","dispatcherTechs":"dispatcherTechs","schedulingAndDispatchFilter":"filter"},"nodeType":"QUERY","filter":"filter","name":"getDispatcherTechsTaskData","links":{"workOrder":"workOrderTask","taskType":"workOrderTask","site":"workOrderTask","User":"workOrderTask","workforce":"workOrderTask","region":"site","ZStatus":"workOrderTask","customer":"site"},"id":"getDispatcherTechsTaskData","outputVarMap":{"data":"schedulingAndDispatchData","count":"count","batchSize":"taskbatchSize","batchNumber":"taskBatchNumber"},"getCount":true},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"getDispatcherTechsTaskData"}],"name":"start","description":"Start","id":"start","nodeType":"START"},"fetchTechsTaskData":{"models":["site","region","customer","workforce","User","ZStatus","workOrder","workOrderTask","taskType"],"connectors":[{"exitPortType":"NextStep","nodeId":"appendTasks"}],"columns":{"actualStartTime":"workOrderTask.actualStartTime","statusColor":"ZStatus.colorCode","customerCompanyName":"customer.companyName","regionName":"region.name","siteName":"site.name","taskTypeName":"taskType.name","type":"IF({$workOrderTask.id} IS NULL,'','task')","instanceId":"workOrderTask.processInstanceId","scheduledStartTime":"workOrderTask.scheduledDate","workOrderTaskId":"workOrderTask.id","startTime":"IF({$workOrderTask.statusId} IN {@pendingAndCompletedStatus},{$workOrderTask.actualStartTime}, {$workOrderTask.scheduledDate})","workOrderTaskModifiedDate":"workOrderTask.modifiedDate","id":"workOrderTask.id","workOrderTaskCompletedDate":"workOrderTask.completedDate","workOrderDeadline":"workOrder.deadline","scheduledEndTime":"workOrderTask.dueDate","resultWebPageId":"taskType.resultWebPageId","userName":"User.name","userId":"workOrderTask.assignedToUserId","tId":"workOrderTask.id","statusNameColor":"ZStatus.colorCode","workOrderTaskTypeId":"workOrderTask.taskTypeId","statusId":"workOrderTask.statusId","name":"taskType.name","modifiedDate":"workOrderTask.modifiedDate","actualEndTime":"workOrderTask.completedDate","workOrderTaskScheduledDate":"workOrderTask.scheduledDate","endTime":"IF({$workOrderTask.statusId} IN {@pendingAndCompletedStatus},{$workOrderTask.completedDate}, {$workOrderTask.dueDate})","workOrderId":"workOrder.id","status":"ZStatus.name"},"description":"Fetch Task Details","distinct":true,"inputVarMap":{"taskBatchSize":"batchSize","statusFilter":"statusFilter","pendingAndCompletedStatus":"pendingAndCompletedStatus","dispatcherTechs":"dispatcherTechs","newBatchNumber":"batchNumber","schedulingAndDispatchFilter":"filter"},"nodeType":"QUERY","filter":"filter","name":"fetchTechsTaskData","links":{"workOrder":"workOrderTask","taskType":"workOrderTask","site":"workOrderTask","User":"workOrderTask","workforce":"workOrderTask","region":"site","ZStatus":"workOrderTask","customer":"site"},"id":"fetchTechsTaskData","outputVarMap":{"data":"taskDataToAppend"},"batchSize":"batchSize","getCount":true,"batchNumber":"batchNumber"},"end":{"name":"End","description":"end","outputVarMap":{},"id":"end","nodeType":"END"},"workflowNodes":["start","getDispatcherTechsTaskData","findNumberOfBatches","areMoreTasksPresent","fetchMoreTasks","fetchTechsTaskData","appendTasks","end"]}