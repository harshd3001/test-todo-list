{"fetchAppraiserData":{"filter":"{$resourceType} = 'N1ZR2Q17ZF' && {$workforceWorkGroup.workGroupId}={$workGroup.id} && {$statusId} = 'workforceActive'","models":["User","workGroup","workforceWorkGroup","workforce"],"connectors":[{"exitPortType":"NextStep","nodeId":"fetchAppraiserSponserData"}],"columns":{"statusId":"workforce.statusId","id":"workGroup.id","analystId":"workforce.userId","userName":"User.name","region":"workGroup.name","resourceType":"workforce.acWfType"},"name":"fetchAppraiserData","orderBy":"userName ASC","description":"fetchAppraiserData","links":{"workforceWorkGroup":"workforce","User":"workforce"},"inputVarMap":{"workforceUserId":"workforceUserId"},"outputVarMap":{"data":"analystData"},"nodeType":"QUERY","getCount":true},"processData":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchAnalystData"}],"contextChangePermitted":true,"name":"processData","description":"processData","processRule":"{ contextVar.checkFilter = '{$acAppriaserSpoId} = {@workforceUserId} && {$acAppraiserSponsorship.analystId}={$workforce.userId} && {$workforce.userId} = {$User.id} && {$workforceWorkGroup.workGroupId}={$workGroup.id} && {$workforce.statusId}={@workforceActive}'; if (contextVar.filter !== '' && typeof contextVar.filter !== 'undefined') { contextVar.filter = contextVar.checkFilter + ' && ' + contextVar.filter; } else { contextVar.filter = contextVar.checkFilter; } }","nodeType":"PROCESS"},"isGetAnalyst":{"connectors":[{"exitPortType":"TrueStep","nodeId":"fetchAppraiserData"},{"exitPortType":"FalseStep","nodeId":"processData"}],"name":"isGetAnalyst","description":"isGetAnalyst","processRule":"( contextVar.getAnalyst == 'add')","nodeType":"DECISION"},"fetchAnalystData":{"filter":"filter","models":["acAppraiserSponsorship","workGroup","workforceWorkGroup","workforce","User"],"connectors":[{"exitPortType":"NextStep","nodeId":"processAnalystData"}],"columns":{"acAppriaserSpoId":"acAppraiserSponsorship.appraiserId","statusId":"workforce.statusId","id":"acAppraiserSponsorship.id","analystId":"workforce.userId","region":"workGroup.name","userName":"User.name"},"name":"fetchAnalystData","distinct":true,"description":"fetchAnalystData","inputVarMap":{"filter":"filter","workforceActive":"workforceActive","workforceUserId":"workforceUserId"},"links":{"workforceWorkGroup":"workforce","User":"workforce"},"outputVarMap":{"data":"analystData"},"nodeType":"QUERY","getCount":true},"processAppraiserData":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"contextChangePermitted":true,"name":"processAppraiserData","description":"processAppraiserData","processRule":"{ contextVar.output = []; contextVar.analystData.forEach(function(item) { var existing = contextVar.output.filter(function(v, i) { return v.analystId == item.analystId; }); if (existing.length) { var existingIndex = contextVar.output.indexOf(existing[0]); contextVar.output[existingIndex].region = contextVar.output[existingIndex].region.concat(' | ', item.region); } else { if (typeof item.region == 'string') { item.region = item.region; } contextVar.output.push(item); } }); contextVar.analystData = contextVar.output; if (contextVar.appraiserData.length > 0) { var outputtemp = []; contextVar.appraiserData.forEach(function(value) { outputtemp = []; contextVar.analystData.forEach(function(element) { if (element.analystId == value.analystId) {} else { outputtemp.push({ 'id': element.id, 'analystId': element.analystId, 'userName': element.userName, 'region': element.region, 'resourceType': element.resourceType }); } }); contextVar.analystData = outputtemp;contextVar.count = contextVar.analystData.length;  }) } }","nodeType":"PROCESS"},"processAnalystData":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"contextChangePermitted":true,"name":"processAnalystData","description":"processAnalystData","processRule":"{ contextVar.output = []; contextVar.analystData.forEach(function(item) { var existing = contextVar.output.filter(function(v, i) { return v.analystId == item.analystId; }); if (existing.length) { var existingIndex = contextVar.output.indexOf(existing[0]); contextVar.output[existingIndex].region = contextVar.output[existingIndex].region.concat(' | ', item.region); } else { if (typeof item.region == 'string') { item.region = item.region; } contextVar.output.push(item); } }); contextVar.analystData = contextVar.output;contextVar.count = contextVar.analystData.length; }","nodeType":"PROCESS"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"isGetAnalyst"}],"name":"start","description":"Start","nodeType":"START"},"end":{"name":"end","description":"End","inputVarMap":{"count":"count","analystData":"analystData"},"outputVarMap":{"count":"count","analystData":"analystData"},"nodeType":"END"},"workflowNodes":["start","isGetAnalyst","fetchAppraiserData","fetchAppraiserSponserData","processData","fetchAnalystData","processAppraiserData","processAnalystData","end"],"fetchAppraiserSponserData":{"filter":"{$appraiserId} = {@workforceUserId}","models":["acAppraiserSponsorship"],"connectors":[{"exitPortType":"NextStep","nodeId":"processAppraiserData"}],"columns":{"analystId":"acAppraiserSponsorship.analystId","id":"acAppraiserSponsorship.id","appraiserId":"acAppraiserSponsorship.appraiserId"},"name":"fetchAppraiserSponserData","description":"fetchAppraiserSponserData","inputVarMap":{"workforceUserId":"workforceUserId"},"outputVarMap":{"data":"appraiserData"},"nodeType":"QUERY","getCount":true}}