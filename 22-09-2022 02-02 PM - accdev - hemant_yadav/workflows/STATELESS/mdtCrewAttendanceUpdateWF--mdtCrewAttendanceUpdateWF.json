{"isUpdateParentPageContext":{"connectors":[{"exitPortType":"TrueStep","nodeId":"parentPageContextToContextVarConversion"},{"exitPortType":"FalseStep","nodeId":"isNoAccess"}],"name":"isUpdateParentPageContext","description":"isUpdateParentPageContext","processRule":"(contextVar.crewMobileAccess =='noAccess' && (typeof contextVar.checkOutCheckBoxForSubmit == 'undefined' ||contextVar.checkOutCheckBoxForSubmit == 'false' || contextVar.checkOutCheckBoxForSubmit == ''))","nodeType":"DECISION"},"isFetchCrewAttendanceData":{"connectors":[{"condition":"(typeof contextVar.fetchCrewAttendanceData != 'undefined' && contextVar.fetchCrewAttendanceData.length > 0 ) && typeof contextVar.submitType != 'undefined' && contextVar.submitType!='' && contextVar.submitType=='endTask'","exitPortType":"NextStep","nodeId":"upsertCrewAttendance"},{"condition":"(typeof contextVar.fetchCrewAttendanceData != 'undefined' && contextVar.fetchCrewAttendanceData.length > 0 ) && typeof contextVar.submitType != 'undefined' && contextVar.submitType!='' && contextVar.submitType!='endTask' && contextVar.crewMobileAccess!=''","exitPortType":"NextStep","nodeId":"processCrewAttendanceData"},{"condition":"(typeof contextVar.fetchCrewAttendanceData != 'undefined' && contextVar.fetchCrewAttendanceData.length > 0 ) && typeof contextVar.submitType != 'undefined' && contextVar.submitType!='' && contextVar.submitType!='endTask' && contextVar.crewMobileAccess==''","exitPortType":"NextStep","nodeId":"upsertCrewAttendance"}],"name":"isFetchCrewAttendanceData","description":"isFetchCrewAttendanceData","nodeType":"MULTIDECISION"},"logger":{"connectors":[{"exitPortType":"NextStep","nodeId":"isUpdateParentPageContext"}],"name":"logger","description":"Provide some description for your logger node","inputVarMap":{"logLevel":"logLevel","message":"message"},"id":"logger","nodeType":"LOGGER"},"processFilter":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchCrewAttendance"}],"contextChangePermitted":true,"name":"processFilter","description":"processFilter","processRule":" if (typeof contextVar.crewMobileAccess != 'undefined' && contextVar.crewMobileAccess == 'noAccess') { contextVar.workforceUserId = contextVar.assignedToUserId ; contextVar.filterToFetchCrewAttendanceData = '{$workOrderTaskId}={@workOrderTaskId} AND {$workforceUserId}={@workforceUserId}'; } else { contextVar.workforceUserId = (contextVar.crewMobileAccess == 'partialAccess') ? contextVar.assignedToUserId : contextVar.crewAttendanceDetailsDataGrid[0].workforceCrewWorkforceUserId; contextVar.filterToFetchCrewAttendanceData = '{$workOrderTaskId}={@workOrderTaskId} AND {$workforceUserId}={@workforceUserId}'; }","id":"processFilter","nodeType":"PROCESS"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"isUpdateParentPageContext"}],"name":"start","description":" Start","id":"start","nodeType":"START"},"fetchCrewAttendance":{"filter":"filter","models":["crewAttendance"],"connectors":[{"exitPortType":"NextStep","nodeId":"processCrewAttendance"}],"columns":{"workOrderTaskId":"crewAttendance.workOrderTaskId","workforceUserId":"crewAttendance.workforceUserId","attendance":"crewAttendance.attendance"},"name":"fetchCrewAttendance","description":"fetchCrewAttendance","inputVarMap":{"workOrderTaskId":"workOrderTaskId","workforceUserId":"workforceUserId","filterToFetchCrewAttendanceData":"filter"},"id":"fetchCrewAttendance","outputVarMap":{"data":"fetchCrewAttendanceData"},"nodeType":"QUERY","translate":true},"workflowNodes":["start","processData1","logger","isUpdateParentPageContext","parentPageContextToContextVarConversion","isNoAccess","processFilter","fetchCrewAttendance","processCrewAttendance","isFetchCrewAttendanceData","processCrewAttendanceData","upsertCrewAttendance","end"],"processCrewAttendance":{"connectors":[{"exitPortType":"NextStep","nodeId":"upsertCrewAttendance"}],"contextChangePermitted":true,"name":"processCrewAttendance","description":"Process services","processRule":"@20OY85G1X9","id":"processCrewAttendance","nodeType":"PROCESS","jsEngine":"es6"},"processCrewAttendanceData":{"connectors":[{"exitPortType":"NextStep","nodeId":"upsertCrewAttendance"}],"contextChangePermitted":true,"name":"processCrewAttendanceData","description":"Processing site data and task details","processRule":"var checkOutTimeVal='';var obj='';contextVar.fetchCrewAttendanceData.forEach(function(obj){if(obj.attendance[0].crewLead==false){obj.attendance[0].checkOutTime=checkOutTimeVal;}return contextVar.fetchCrewAttendanceData;});","id":"processCrewAttendanceData","nodeType":"PROCESS","jsEngine":"es6"},"processData1":{"connectors":[{"exitPortType":"NextStep","nodeId":"logger"}],"contextChangePermitted":true,"name":"processData1","description":"Processing site data and task details","processRule":"contextVar.logLevel = 'INFO'; contextVar.message='contextVar for crewAttenDanceUpdateWF = '+ JSON.stringify(contextVar);","id":"processData1","nodeType":"PROCESS"},"workflowContext":{"keyList":["crewAttendanceDetailsDataGrid"]},"parentPageContextToContextVarConversion":{"connectors":[{"exitPortType":"NextStep","nodeId":"isNoAccess"}],"processId":"parentPageContextToContextVarConversion","name":"parentPageContextToContextVarConversion","description":"","inputVarMap":{},"id":"parentPageContextToContextVarConversion","outputVarMap":{},"nodeType":"WORKFLOW"},"isNoAccess":{"connectors":[{"exitPortType":"TrueStep","nodeId":"upsertCrewAttendance"},{"exitPortType":"FalseStep","nodeId":"processFilter"}],"name":"isNoAccess","description":"isNoAccess","processRule":"(contextVar.crewMobileAccess =='noAccess' && (typeof contextVar.checkOutCheckBoxForSubmit != 'undefined' && contextVar.checkOutCheckBoxForSubmit != '' && contextVar.checkOutCheckBoxForSubmit == 'true'))","nodeType":"DECISION"},"upsertCrewAttendance":{"modelName":"crewAttendance","connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"multirecord":true,"name":"upsertCrewAttendance","description":"upsertCrewAttendance","inputVarMap":{"fetchCrewAttendanceData":"data"},"id":"upsertCrewAttendance","outputVarMap":{"data":"data"},"nodeType":"MODEL","operation":4},"end":{"name":"End","description":"end","inputVarMap":{},"outputVarMap":{},"id":"end","nodeType":"END"}}