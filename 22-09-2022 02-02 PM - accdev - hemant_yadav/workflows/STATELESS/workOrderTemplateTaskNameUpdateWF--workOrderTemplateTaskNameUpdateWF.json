{"upsertWorkOrderTemplateTask":{"modelName":"workOrderTemplateTask","connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"multirecord":true,"name":"upsertWorkOrderTemplateTask","description":"upsertWorkOrderTemplateTask","inputVarMap":{"workOrderTemplateTaskData":"data"},"outputVarMap":{"data":"data"},"nodeType":"MODEL","operation":4},"fetchWorkOrderTemplateTasks":{"filter":" {$name} is null ","models":["workOrderTemplateTask"],"connectors":[{"exitPortType":"NextStep","nodeId":"processTaskData"}],"columns":{"workOrderTemplateId":"workOrderTemplateTask.workOrderTemplateId","name":"workOrderTemplateTask.name","id":"workOrderTemplateTask.id"},"name":"fetchWorkOrderTemplateTasks","description":"fetchWorkOrderTemplateTasks","inputVarMap":{},"outputVarMap":{"data":"workOrderTemplateTaskData"},"nodeType":"QUERY"},"processTaskData":{"connectors":[{"exitPortType":"NextStep","nodeId":"upsertWorkOrderTemplateTask"}],"contextChangePermitted":true,"name":"processTaskData","description":"processTaskData","processRule":"{var allWorkOrderTemplateTaskId = []; var taskCounter = 0; var workOrderTemplateTaskIdCounter = {}; for (var i = 0; i < contextVar.workOrderTemplateTaskData.length; i++) { allWorkOrderTemplateTaskId.push(contextVar.workOrderTemplateTaskData[i].workOrderTemplateTaskId) } allWorkOrderTemplateTaskId.forEach(function (item) { if (!workOrderTemplateTaskIdCounter[item]) workOrderTemplateTaskIdCounter[item] = 0; workOrderTemplateTaskIdCounter[item] += 1; }); Object.keys(workOrderTemplateTaskIdCounter).forEach(function (prop) { if (workOrderTemplateTaskIdCounter[prop] > 0) { taskCounter = 0; for (var i = 0; i < contextVar.workOrderTemplateTaskData.length; i++) { if (contextVar.workOrderTemplateTaskData[i].workOrderTemplateTaskId === prop) { contextVar.workOrderTemplateTaskData[i].workOrderTemplateTaskId = prop; taskCounter++; if (taskCounter > 9) { contextVar.workOrderTemplateTaskData[i].taskName = 'Task' + taskCounter; } else { contextVar.workOrderTemplateTaskData[i].taskName = 'Task0' + taskCounter; } } } } }); }","id":"processZRule","nodeType":"PROCESS"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchWorkOrderTemplateTasks"}],"name":"start","description":"Start","nodeType":"START"},"end":{"name":"end","description":"end","nodeType":"END"},"workflowNodes":["start","fetchWorkOrderTemplateTasks","processTaskData","upsertWorkOrderTemplateTask","end"]}