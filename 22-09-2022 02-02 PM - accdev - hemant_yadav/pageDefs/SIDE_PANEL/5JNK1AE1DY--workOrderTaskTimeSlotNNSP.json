{"pageContext":{},"actionOnLoad":["@actions.initialData","@actions.calculateTotalDuration","@actions.refreshScheduleBreakdownGrid"],"localPageContext":true,"jslib":{"isTaskDurationHidden":"function (pageContext) {return !(Array.isArray(pageContext.taskScheduleMultipleBreakdown) && pageContext.taskScheduleMultipleBreakdown.length > 0)}","isScheduleMethodIndividual":"function (pageContext){ if (typeof pageContext.scheduleMethod !== 'undefined' && pageContext.scheduleMethod !== '') { return pageContext.scheduleMethod !== 'addTimeSlotsIndividually';  }else {return true;}}","showErrMsgForEstDuration":"function (pageContext) { if(typeof pageContext.workOrderTaskDuration !== 'undefined' && pageContext.workOrderTaskDuration !== ''){ if (pageContext.workOrderTaskDuration <= 0 || pageContext.workOrderTaskDuration > 24) { pageContext.errTxt = 'Estimated task duration must be between .25 and 24 hours'; return true; } else if (pageContext.workOrderTaskDuration % 0.25 > 0) { pageContext.errTxt = 'This field only accepts values ending in .25, .50, .75 or .00'; return true; } else { return false; } } }","showBanner":"function (pageContext) { if(pageContext.banner !== 'show'){return true;} else {return false;}}","isScheduleMethodBulkDisabled":"function (pageContext) {if(typeof pageContext.startDateBulk !== 'undefined' &&pageContext.startDateBulk !== ''){pageContext.minEndDate=pageContext.startDateBulk + 1;return false;} else {return true;}} ","isScheduleMethodBulk":"function (pageContext){if (typeof pageContext.scheduleMethod !== 'undefined' && pageContext.scheduleMethod !== '') { return pageContext.scheduleMethod !== 'addTimeSlotsBulk';  }else {return true;}}","isSaveTimeSlotDisabled":"function (pageContext) { return !((typeof pageContext.workOrderTaskScheduledIndividualDate !== 'undefined' && pageContext.workOrderTaskScheduledIndividualDate !== '') && (typeof pageContext.workOrderTaskDuration !== 'undefined' && pageContext.workOrderTaskDuration !== '') && pageContext.workOrderTaskDuration <= 24 && (pageContext.workOrderTaskDuration % 0.25 === 0) && (pageContext.workOrderTaskDuration > 0) );  }","showErrMsgForEstBulkDuration":"function (pageContext) { if (typeof pageContext.hoursPerDay !== 'undefined' && pageContext.hoursPerDay !== '') { if (pageContext.hoursPerDay <= 0 || pageContext.hoursPerDay > 24) { pageContext.errTxt = 'Estimated task duration must be between .25 and 24 hours'; return true; } else if (pageContext.hoursPerDay % 0.25 > 0) { pageContext.errTxt = 'This field only accepts values ending in .25, .50, .75 or .00'; return true; } else { return false; } } }","isSaveDisabled":"function (pageContext) { if (typeof pageContext.taskScheduleMultipleBreakdown !== 'undefined' && pageContext.taskScheduleMultipleBreakdown !== '') { return !((typeof pageContext.initialTaskScheduleMultipleBreakdown !== 'undefined' && pageContext.initialTaskScheduleMultipleBreakdown !== ''  && pageContext.initialTaskScheduleMultipleBreakdown.length !== pageContext.taskScheduleMultipleBreakdown.length) || !(_(pageContext.taskScheduleMultipleBreakdown).xorWith(pageContext.initialTaskScheduleMultipleBreakdown, _.isEqual).isEmpty())) } else return true; }","isCreateScheduleDisabled":"function (pageContext) { return !((typeof pageContext.startDateBulk !== 'undefined' && pageContext.startDateBulk !== '') && (typeof pageContext.endDate !== 'undefined' && pageContext.endDate !== '') && (typeof pageContext.startDailyAt !== 'undefined' && pageContext.startDailyAt !== '') && (typeof pageContext.hoursPerDay !== 'undefined' && pageContext.hoursPerDay !== '') && pageContext.hoursPerDay <= 24 && (pageContext.hoursPerDay % 0.25 === 0) && (pageContext.hoursPerDay > 0) ); }"},"header":{"leftData":{"children":[{"name":"back","icon":"@iconlib.NavigationArrowBackGrey","actionOnClick":["@actions.setToInitialTaskScheduleBreakdownData","@actions.calculateTotalDuration","@actions.openPreviousPanel"],"type":"buttonIcon"}]},"children":[{"buttonType":"primary","actionOnClick":["@actions.checkIfSingleTimeSlot","@actions.openPreviousPanel"],"disabled":"@jslib.isSaveDisabled","id":"submit","type":"button","title":"@lang.['s12','Save']"}],"title":"@lang.['ats1','Add Time Slots']"},"body":{"children":[{"alertMessage":"@pageContext.bannerText","actionOnChange":"@actions.hideBannerMsg","onClose":"@actions.hideBannerMsg","alertType":"warning","hidden":"@jslib.showBanner","id":"errTxt","type":"alert"},{"children":[{"actionOnChange":["@actions.clearIndividualForm","@actions.clearBulkForm"],"options":[{"label":"@lang.['atsi','Add time slots individually']","value":"addTimeSlotsIndividually"},{"label":"@lang.['atsb','Add time slots bulk']","value":"addTimeSlotsBulk"}],"id":"scheduleMethod","optTitleKey":"label","optValueKey":"value","title":"@lang.['sm1','Schedule Method']","type":"dropdown","value":"@pageContext.scheduleMethod"},{"minDate":"@pageContext.currentDate","hidden":"@jslib.isScheduleMethodIndividual","id":"workOrderTaskScheduledDate","title":"@lang.['sdt2','Scheduled Date & Time']","type":"datetime","value":"@pageContext.workOrderTaskScheduledIndividualDate","placeHolder":"@lang.['ssd','Select start date']"},{"isRequired":true,"errorText":"@pageContext.errTxt","actionOnChange":["@actions.processWorkOrderTaskEstimatedDurationIndividualMinutes"],"hidden":"@jslib.isScheduleMethodIndividual","validator":"@jslib.showErrMsgForEstDuration","inputType":"number","id":"workOrderTaskDuration","label":"@lang.['dh2','Duration (In Hours)']","placeholder":"@lang.['etd2','Enter task duration']","type":"input","value":"@pageContext.workOrderTaskDuration"},{"minDate":"@pageContext.currentDate","hidden":"@jslib.isScheduleMethodBulk","id":"workOrderTaskScheduledStartDate","title":"@lang.['sd','Start Date']","type":"absoluteDate","value":"@pageContext.startDateBulk","placeHolder":"@lang.['ssd','Select start date']"},{"minDate":"@pageContext.minEndDate","hidden":"@jslib.isScheduleMethodBulk","disabled":"@jslib.isScheduleMethodBulkDisabled","id":"workOrderTaskScheduledEndDate","title":"@lang.['ed','End Date']","type":"absoluteDate","value":"@pageContext.endDate","placeHolder":"@lang.['sed','Select end date']"},{"minDate":"@pageContext.currentDate","hidden":"@jslib.isScheduleMethodBulk","id":"workOrderTaskStartDailyAt","title":"@lang.['sda','Start Daily At']","type":"absoluteTime","value":"@pageContext.startDailyAt","placeHolder":"@lang.['st1','Select time']"},{"isRequired":true,"errorText":"@pageContext.errTxt","actionOnChange":["@actions.processWorkOrderTaskEstimatedDurationMinutes"],"hidden":"@jslib.isScheduleMethodBulk","validator":"@jslib.showErrMsgForEstBulkDuration","inputType":"number","id":"workOrderTaskHoursPerDay","label":"@lang.['hpd','Hours per day']","placeholder":"@lang.['0','0']","type":"input","value":"@pageContext.hoursPerDay"},{"data":"true","hidden":"@jslib.isScheduleMethodBulk","disabled":false,"id":"scheduleOnPublicHolidays","placeholder":"@lang.['soph','Schedule on Public Holidays']","type":"switchComponent","value":"@pageContext.scheduleOnPublicHolidays"},{"data":"true","hidden":"@jslib.isScheduleMethodBulk","disabled":false,"id":"scheduleOnDaysOff","placeholder":"@lang.['sodo','Schedule on days off']","type":"switchComponent","value":"@pageContext.scheduleOnDaysOff"},{"buttonType":"primary","hidden":"@jslib.isScheduleMethodIndividual","actionOnClick":["@actions.fetchTaskScheduleBreakdownData","@actions.processTaskScheduleBreakdownData","@actions.decisionActionPopupIndividual"],"disabled":"@jslib.isSaveTimeSlotDisabled","id":"saveTimeSlot","type":"button","title":"@lang.['sts','Save Time Slot']"},{"buttonType":"primary","hidden":"@jslib.isScheduleMethodBulk","actionOnClick":["@actions.decisionforClearBreakdownPopup"],"disabled":"@jslib.isCreateScheduleDisabled","id":"createSchedule","type":"button","title":"@lang.['cs3','Create Schedule']"}],"id":"genericSection","type":"section"},{"children":[{"id":"scheduleBreakdownGrid","type":"dataGrid","jsonDef":{"pageContextConfig":{"enable":true,"isPaginationReqd":false,"tableData":{"source":"@pageContext.taskScheduleMultipleBreakdown"}},"isScrollAble":false,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.ActionsBinPurple","icon":"@iconlib.ActionsBinGrey","name":"@lang.['d1','Delete']","tooltip":"@lang.['d1','Delete']","actionOnClick":["@actions.deleteTimeSlot","@actions.refreshScheduleBreakdownGrid","@actions.calculateTotalDuration"],"id":"deleteTimeSlot","type":"buttonIcon","title":"@lang.['d1','Delete']"}]},"gridRefreshId":"scheduleBreakdownGrid","emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"tableHeader":[{"name":"@lang.['sd4','Scheduled Date']","options":{"type":"date","showLabel":true},"key":"startDate"},{"name":"@lang.['st7','Start Time']","options":{"type":"time","showLabel":true},"key":"startDate"},{"name":"@lang.['et2','End Time']","options":{"type":"time","showLabel":true},"key":"endDate"},{"name":"@lang.['dh2','Duration (In Hours)']","options":{"showLabel":true},"key":"durationInHours"}],"actionOnLoad":[],"jslib":{"isClearAllHidden":"function (pageContext) {return !(Array.isArray(pageContext.taskScheduleMultipleBreakdown) && pageContext.taskScheduleMultipleBreakdown.length > 0)}"},"header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['taskSchedule','Task Schedule']","children":[{"buttonType":"secondary","hidden":"@jslib.isClearAllHidden","actionOnClick":["@actions.clearAll"],"id":"submit","type":"button","title":"@lang.['ca2','Clear All']"}]},"isSelectable":false,"actions":[{"name":"deleteTimeSlot","type":"script","actionDef":"function (pageContext) { if (pageContext.taskScheduleMultipleBreakdown.length === 1) { pageContext.workOrderTaskScheduledDate = pageContext.taskScheduleMultipleBreakdown[0].startDate; pageContext.workOrderTaskEstimatedDuration = pageContext.taskScheduleMultipleBreakdown[0].durationInHours; pageContext.banner = 'hide'; pageContext.bannerText = ''; pageContext.endDate = '';} _.remove(pageContext.taskScheduleMultipleBreakdown, function (breakdown) { if (breakdown.startDate === pageContext.startDate) { return true; } });  }"},{"name":"refreshScheduleBreakdownGrid","gridId":["scheduleBreakdownGrid"],"type":"RefreshGridOnSidePanel"},{"async":true,"name":"calculateTotalDuration","type":"script","actionDef":"function (pageContext) {pageContext.enable = true;let totalDuration = 0; if (Array.isArray(pageContext.taskScheduleMultipleBreakdown)) { totalDuration = ((pageContext.taskScheduleMultipleBreakdown.reduce((total, element) => { return total + element.duration; }, 0)) / 60); } pageContext.workOrderTaskTotalDuration = (totalDuration % 1 === 0) ? totalDuration.toFixed(0) : totalDuration.toFixed(2); }"},{"subTitle":"@lang.['aysywtctsastswbr','Are you sure you want to clear the schedule? All scheduled time slots will be removed.']","name":"clearAll","options":[{"buttonType":"secondary","name":"cancel","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"continue","actionOnClick":["@actions.clearBreakdown","@actions.openPreviousPanel","@actions.closeModal"],"type":"button","title":"@lang.['c13','Continue']"}],"type":"openModal","title":"@lang.['cs4','Clear Schedule']"},{"parentPanelRefreshRequired":false,"name":"openPreviousPanel","type":"backPanel","requiredPageContextKeys":"[\"taskScheduleMultipleBreakdown\",\"workOrderTaskTotalDuration\",\"workOrderTaskNNSP\",\"workOrderTaskScheduledDate\",\"workOrderTaskEstimatedDuration\",\"scheduledDateAbsolute\",\"scheduledTimeAbsolute\"]"}],"searchKeys":[]}}],"id":"taskScheduleMultipleBreakdown","type":"section","transparent":true},{"children":[{"hidden":"@jslib.isTaskDurationHidden","readOnly":true,"id":"scheduledEstimatedDuration","label":"@lang.['tdh1','Task Duration (In Hours)']","type":"input","value":"@pageContext.workOrderTaskTotalDuration"},{"minDate":"2000-01-01 12:00","readOnly":true,"id":"deadline","title":"@lang.['wod1','Work Order Deadline']","type":"datetime","value":"@pageContext.workOrderDeadline"},{"children":[{"children":[{"buttonType":"secondary","actionOnClick":["@actions.getWeeklyScheduleData","@actions.enableDataGridAndSetWeeklyScheduleData","@actions.serviceWindowOverlay"],"id":"serviceWindow","type":"button","title":"@lang.['vsw','View Service Window']"}],"flex":"2","type":"column"},{"flex":"3","id":"space","type":"column"}],"id":"serviceWindow","type":"row"}],"id":"workOrderDeadline","type":"section"}]},"actions":[{"name":"initialData","type":"script","actionDef":"function (pageContext) {pageContext.scheduleMethod='addTimeSlotsIndividually'; pageContext.currentDate = new Date().toISOString().replace('T', ' ').replace('Z', ''); pageContext.scheduleOnPublicHolidays = false; pageContext.scheduleOnDaysOff = false;  if(typeof pageContext.taskScheduleMultipleBreakdown !== 'undefined' && pageContext.taskScheduleMultipleBreakdown !== ''){ pageContext.initialTaskScheduleMultipleBreakdown=[...pageContext.taskScheduleMultipleBreakdown]; } else{ pageContext.initialTaskScheduleMultipleBreakdown=''; } }"},{"async":true,"name":"bannerShowOrHide","type":"script","actionDef":"function (pageContext) { if (typeof pageContext.taskScheduleMultipleBreakdown !== 'undefined' && pageContext.taskScheduleMultipleBreakdown !== '' && pageContext.taskScheduleMultipleBreakdown.length >= 1) { if (pageContext.bannerType === 'timeSlotsInPHandFallsOutsideSW') { bannerData('show', '@lang.[\"oomtsasoaphafootswftcs\",\"One or more time slots are scheduled on a public holiday and fall outside of the service window for this customer site.\"]'); } else if (pageContext.bannerType === 'timeSlotsInPH') { bannerData('show', '@lang.[\"oomtsasoaph\",\"One or more time slots are scheduled on a public holiday.\"]'); } else if (pageContext.bannerType === 'timeSlotsFallsOutsideSW') { bannerData('show', '@lang.[\"oomtsasotswftcs\",\"One or more time slots are scheduled outside the service window for this customer site.\"]'); } else { bannerData('hide', ''); } } function bannerData(banner, bannerText) { pageContext.banner = banner; pageContext.bannerText = bannerText; } }"},{"endPoint":"process/start","name":"fetchTaskScheduleBreakdownData","outputVarMap":{"data":"@pageContext.responseData"},"type":"api","actionDef":{"data":[{"processId":"workOrderTaskScheduleBreakdownWF","contextVar":{"scheduledEndDate":"@pageContext.endDate","workOrderscheduleMethodId":"@pageContext.scheduleMethod","taskScheduleBreakdown":"@pageContext.taskScheduleMultipleBreakdown","calendarId":"@pageContext.workOrderCalendarId","timezoneOffset":"@pageContext.timezoneOffset","workOrderTaskScheduledIndividualDate":"@pageContext.workOrderTaskScheduledIndividualDate","startDailyAt":"@pageContext.startDailyAt","scheduleOnPublicHolidays":"@pageContext.scheduleOnPublicHolidays","scheduleOnDaysOff":"@pageContext.scheduleOnDaysOff","timePerDay":"@pageContext.timePerDay","scheduledStartDate":"@pageContext.startDateBulk"}}]}},{"async":true,"name":"processTaskScheduleBreakdownData","type":"script","actionDef":"function (pageContext) {pageContext.enable = true;pageContext.taskScheduleMultipleBreakdown = pageContext.responseData[0].outputVar.taskScheduleBreakdown;pageContext.modalAction=pageContext.responseData[0].outputVar.modalAction;pageContext.bannerType = pageContext.responseData[0].outputVar.bannerType;if(pageContext.modalAction === 'timeSlotOverlap'){pageContext.popupBody = '@lang.[\"utcttssiowaets\",\"Unable to create this time slot since it overlaps with an existing time slot.\"]'; pageContext.popupHeader = '@lang.[\"utcts\",\"Unable to Create Time Slot\"]';} }"},{"async":true,"name":"calculateTotalDuration","type":"script","actionDef":"function (pageContext) {pageContext.enable = true;let totalDuration = 0; if (Array.isArray(pageContext.taskScheduleMultipleBreakdown)) { totalDuration = ((pageContext.taskScheduleMultipleBreakdown.reduce((total, element) => { return total + element.duration; }, 0)) / 60); } pageContext.workOrderTaskTotalDuration = (totalDuration % 1 === 0) ? totalDuration.toFixed(0) : totalDuration.toFixed(2); }"},{"async":true,"name":"clearBreakdown","type":"script","actionDef":"function (pageContext) { var addMinutes = function (date) { return (new Date(date.getTime() - 2 * (pageContext.timezoneOffset * 60000))).toISOString().replace('T', ' ').replace('Z', ''); }; pageContext.workOrderTaskScheduledDate = pageContext.taskScheduleMultipleBreakdown[0].startDate; var dateInAbsolute = addMinutes(new Date(pageContext.workOrderTaskScheduledDate)); pageContext.scheduledDateAbsolute = dateInAbsolute.split(' ')[0]; pageContext.scheduledTimeAbsolute = dateInAbsolute.split(' ')[1]; pageContext.workOrderTaskEstimatedDuration = pageContext.taskScheduleMultipleBreakdown[0].durationInHours; pageContext.taskScheduleMultipleBreakdown = ''; }"},{"async":true,"name":"setToInitialTaskScheduleBreakdownData","type":"script","actionDef":"function (pageContext) {pageContext.taskScheduleMultipleBreakdown=pageContext.initialTaskScheduleMultipleBreakdown;}"},{"async":true,"name":"clearBulkForm","type":"script","actionDef":"function (pageContext) {pageContext.startDateBulk='';pageContext.endDate='';pageContext.startDailyAt='';pageContext.hoursPerDay='';pageContext.scheduleOnPublicHolidays = false; pageContext.scheduleOnDaysOff = false;  }"},{"async":true,"name":"clearIndividualForm","type":"script","actionDef":"function (pageContext) {pageContext.workOrderTaskScheduledIndividualDate='';pageContext.workOrderTaskDuration=''; }"},{"name":"refreshScheduleBreakdownGrid","gridId":["scheduleBreakdownGrid"],"type":"RefreshGridOnSidePanel"},{"async":true,"name":"processWorkOrderTaskEstimatedDurationMinutes","type":"script","actionDef":"function (pageContext) { pageContext.timePerDay = (Number(pageContext.hoursPerDay) * 60); }"},{"async":true,"name":"processWorkOrderTaskEstimatedDurationIndividualMinutes","type":"script","actionDef":"function (pageContext) { pageContext.timePerDay = (Number(pageContext.workOrderTaskDuration) * 60); }"},{"name":"checkIfSingleTimeSlot","type":"script","actionDef":"function (pageContext) { var addMinutes = function (date) { return (new Date(date.getTime() - 2 * (pageContext.timezoneOffset * 60000))).toISOString().replace('T', ' ').replace('Z', ''); }; if (Array.isArray(pageContext.taskScheduleMultipleBreakdown) && pageContext.taskScheduleMultipleBreakdown.length >= 1) { pageContext.workOrderTaskScheduledDate = pageContext.taskScheduleMultipleBreakdown[0].startDate; pageContext.workOrderTaskEstimatedDuration = pageContext.workOrderTaskTotalDuration; var dateInAbsolute = addMinutes(new Date(pageContext.workOrderTaskScheduledDate)); pageContext.scheduledDateAbsolute = dateInAbsolute.split(' ')[0]; pageContext.scheduledTimeAbsolute = dateInAbsolute.split(' ')[1]; } }"},{"parentPanelRefreshRequired":false,"name":"openPreviousPanel","type":"backPanel","requiredPageContextKeys":"[\"taskScheduleMultipleBreakdown\",\"workOrderTaskTotalDuration\",\"workOrderTaskNNSP\",\"workOrderTaskScheduledDate\",\"workOrderTaskEstimatedDuration\",\"scheduledDateAbsolute\",\"scheduledTimeAbsolute\"]"},{"endPoint":"process/start","name":"getWeeklyScheduleData","outputVarMap":{"data":"@pageContext.weeklyScheduleData"},"type":"api","actionDef":{"data":[{"processId":"settingsGeneralCalendarWeeklyScheduleFetchDataWF","contextVar":{"timezoneOffset":"@pageContext.timezoneOffset","id":"@pageContext.workOrderCalendarId"}}]}},{"name":"enableDataGridAndSetWeeklyScheduleData","type":"script","actionDef":"function(pageContext){pageContext.enable=true;pageContext.calendarData=pageContext.weeklyScheduleData[0].outputVar.calendarData;}"},{"subTitle":"@lang.['r','Records']","name":"serviceWindowOverlay","type":"openOverlayView","title":"Service Window","pageDef":[{"id":"weeklyScheduleDatagrid","type":"dataGrid","jsonDef":{"pageContextConfig":{"enable":true,"isPaginationReqd":false,"tableData":{"source":"@pageContext.calendarData"}},"rowTextLength":8,"isSelectable":false,"tableHeader":[{"name":"@lang.['d12','Day']","options":{"sortable":true,"showLabel":true},"key":"weeklyScheduleDay"},{"name":"@lang.['s','Status']","options":{"showLabel":true},"key":"serviceWindowWeeklyScheduleIsOpen"},{"name":"@lang.['ot1','Opening Time']","options":{"sortable":true,"type":"time","showLabel":true},"key":"weeklyScheduleSchedule1StartTime"},{"name":"@lang.['ct2','Closing Time']","options":{"sortable":true,"type":"time","showLabel":true},"key":"weeklyScheduleSchedule1EndTime"},{"name":"@lang.['h','Hours']","options":{"sortable":true,"showLabel":true},"key":"weeklyScheduleTotalHours"}]}}]},{"subTitle":"@pageContext.popupBody","name":"breakdownExceptionPopup","options":[{"buttonType":"primary","name":"yes","actionOnClick":"@actions.closeModal","type":"button","title":"@lang.['o2','OK']"}],"type":"openModal","title":"@pageContext.popupHeader"},{"name":"hideBannerMsg","type":"script","actionDef":"function(pageContext) {pageContext.banner='hide';pageContext.bannerText='';}"},{"falseStep":["@actions.refreshScheduleBreakdownGrid","@actions.calculateTotalDuration","@actions.bannerShowOrHide","@actions.clearIndividualForm"],"trueStep":["@actions.breakdownExceptionPopup"],"name":"decisionActionPopupIndividual","type":"decision","actionDef":"function(pageContext){if(pageContext.modalAction === 'timeSlotOverlap'){return true;} else {return false;}}"},{"name":"popupMessage","type":"script","actionDef":"function (pageContext) { if (pageContext.modalAction === 'startDateUnderDOOrPH') { popupData('@lang.[\"tsdycioadooph\",\"The start date you chose is on a day off or public holiday. Please adjust the start date or switch off the toggle to proceed.\"]', '@lang.[\"utcs\",\"Unable to Create Schedule\"]'); } else if (pageContext.modalAction === 'startDailyAtLessThanStartTime') { popupData('@lang.[\"tstotftshappatsdottp\",\"The start time of the first time slot has already passed. Please adjust the start date or time to proceed.\"]', '@lang.[\"utcs\",\"Unable to Create Schedule\"]'); } else { popupData('', '', ''); } function popupData(popupBody, popupHeader) { pageContext.popupBody = popupBody; pageContext.popupHeader = popupHeader; } }"},{"falseStep":["@actions.calculateTotalDuration","@actions.refreshScheduleBreakdownGrid","@actions.bannerShowOrHide","@actions.clearBulkForm"],"trueStep":["@actions.popupMessage","@actions.breakdownExceptionPopup"],"name":"decisionActionPopupBulk","type":"decision","actionDef":"function (pageContext) { if (pageContext.modalAction === 'startDateUnderDOOrPH' || pageContext.modalAction === 'startDailyAtLessThanStartTime') { return true; } else {  return false; } }"},{"falseStep":["@actions.popupBeforeCreateSchedule"],"trueStep":["@actions.fetchTaskScheduleBreakdownData","@actions.processTaskScheduleBreakdownData","@actions.closeModal","@actions.decisionActionPopupBulk"],"name":"decisionforClearBreakdownPopup","type":"decision","actionDef":"function (pageContext) { if (pageContext.taskScheduleMultipleBreakdown === '' || typeof pageContext.taskScheduleMultipleBreakdown === 'undefined' || pageContext.taskScheduleMultipleBreakdown.length<=0 ) { return true; } else {  return false; } }"},{"subTitle":"@lang.['wntctesfttiotgtsibcctctetsap','We need to clear the existing schedule for this task in order to generate time slots in bulk. Click Continue to clear the existing time slots and proceed.']","name":"popupBeforeCreateSchedule","options":[{"buttonType":"secondary","name":"cancel","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"continue","actionOnClick":["@actions.fetchTaskScheduleBreakdownData","@actions.processTaskScheduleBreakdownData","@actions.closeModal","@actions.decisionActionPopupBulk"],"type":"button","title":"@lang.['c13','Continue']"}],"type":"openModal","title":"@lang.['cs4','Clear Schedule']"},{"name":"closeModal","type":"closeModal"}]}