{"pageContext":{},"actionOnLoad":["@actions.initialData"],"localPageContext":true,"jslib":{"isSkillDisabled":"function(pageContext){if (pageContext.workforceSkillLevelAction === 'edit'){return true}} ","isAddSkillDisable":"function(pageContext){if (pageContext.workforceSkillLevelAction === 'add') {return (pageContext.skillId === '' || pageContext.skillLevelId === '')} else if (pageContext.workforceSkillLevelAction === 'edit') {return ((pageContext.initialSkillId === pageContext.skillId ) && (pageContext.initialSkillLevelId === pageContext.skillLevelId) || pageContext.skillId === '' || pageContext.skillLevelId === '');}}","dynamicHeaderText":"function(pageContext){ if(pageContext.workforceSkillLevelAction === 'add'){return '@lang.[\"ans\",\"Add New Skill\"]'}else if(pageContext.workforceSkillLevelAction === 'edit'){return '@lang.[\"es6\",\"Edit Skill\"]'}}"},"header":{"leftData":{"children":[{"name":"back","icon":"@iconlib.NavigationArrowBackGrey","actionOnClick":["@actions.openPreviousSidePanel","@actions.emptyWorkforceSkillLevelAction"],"type":"buttonIcon"}]},"children":[{"buttonType":"primary","actionOnClick":["@actions.setSubActionUpsertWorkforceSkill","@actions.fireProcessEvent","@actions.openPreviousSidePanel","@actions.emptyWorkforceSkillLevelAction"],"disabled":"@jslib.isAddSkillDisable","id":"submit","type":"button","title":"@lang.['s12','Save']"}],"title":"@jslib.dynamicHeaderText"},"body":{"children":[{"children":[{"actionOnChange":["@actions.setSkillId","@actions.skillLevelQuery"],"isMultiSelect":false,"searchByOptions":{"dataSourceId":"query/read","sourceType":"query","dataToBeSent":{"filter":"{$skillName} like {@filter}","models":["skill","skillLevel"],"columns":{"skillName":"skill.name","skillId":"skill.id","skillLevelSkillId":"skillLevel.skillId","skillLevelId":"skillLevel.id","skillLevelName":"skillLevel.name"},"inputs":{},"groupBy":"skillId"}},"optLabelMap":"skillName","optValueMap":"skillId","disabled":"@jslib.isSkillDisabled","id":"skillId","label":"@lang.['ss1','Select skill']","type":"selectDropdown","value":"@pageContext.selectedSkillList","placeHolder":"@lang.['ss1','Select skill']"},{"isRequired":true,"options":"@pageContext.skillLevelList","id":"skillLevel","optTitleKey":"skillLevelName","optValueKey":"skillLevelId","type":"dropdown","title":"@lang.['sl2','Skill Level']","value":"@pageContext.skillLevelId","placeHolder":"@lang.['ssl','Select skill level']"}],"label":"@lang.['s17','Skill']","id":"skill","type":"section"}]},"actions":[{"name":"skillLevelQuery","outputVarMap":{"data":"@pageContext.skillLevelList"},"type":"query","actionDef":{"filter":" {$skillLevelSkillId}={$skillId} AND {$skillId}={@selectedSkill}","models":["skill","skillLevel"],"columns":{"skillName":"skill.name","skillId":"skill.id","skillLevelSkillId":"skillLevel.skillId","skillLevelId":"skillLevel.id","skillLevelName":"skillLevel.name"},"inputs":{"selectedSkill":"@pageContext.skillId"}}},{"name":"setSkillId","type":"script","actionDef":"function (pageContext) { if(typeof pageContext.selectedSkillList !== 'undefined' &&  pageContext.selectedSkillList.length >0  &&  pageContext.selectedSkillList[0].value!==''){ pageContext.skillId = pageContext.selectedSkillList[0].value } }"},{"name":"openPreviousSidePanel","type":"backPanel"},{"name":"refreshDataGrid","type":"refreshDataGrid"},{"name":"emptyWorkforceSkillLevelAction","type":"script","actionDef":"function(pageContext){pageContext.workforceSkillLevelAction='';}"},{"name":"initialData","type":"script","actionDef":"function (pageContext) { if (pageContext.workforceSkillLevelAction === 'add') { pageContext.skillId = ''; pageContext.skillLevelId = ''; } else if (pageContext.workforceSkillLevelAction === 'edit' && typeof pageContext.skillName !=='undefined'  && pageContext.skillName !=='' && typeof pageContext.skillId !=='undefined'  && pageContext.skillId !=='' && typeof pageContext.skillLevelId !=='undefined'  && pageContext.skillLevelId !=='') { pageContext.initialSkillId = pageContext.skillId; pageContext.initialSkillLevelId = pageContext.skillLevelId; pageContext.selectedSkillList = []; pageContext.selectedSkillList.push({ label: pageContext.skillName, value: pageContext.skillId }) } }"},{"name":"setSubActionUpsertWorkforceSkill","type":"script","actionDef":"function(pageContext){pageContext.subAction='upsertTechnicianSkill';}"},{"endPoint":"event/start","name":"fireProcessEvent","type":"api","actionDef":{"data":[{"eventId":"workforceTechnicianProcessEvent","contextVar":{"workforceSkill":{"skillId":"@pageContext.skillId","skillLevelId":"@pageContext.skillLevelId","userId":"@pageContext.workforceUserId"},"subAction":"@pageContext.subAction"}}]}}]}