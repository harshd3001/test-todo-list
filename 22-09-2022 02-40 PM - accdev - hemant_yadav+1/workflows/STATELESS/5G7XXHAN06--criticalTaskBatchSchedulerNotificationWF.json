{"callBumpedOutTasksNotificationWF":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"processId":"3JD7RAQUWK","name":"callBumpedOutTasksNotificationWF","description":"callBumpedOutTasksNotificationWF","inputVarMap":{"schedulerLogData":"schedulerLogDats","openJobs":"openJobs"},"outputVarMap":{},"nodeType":"WORKFLOW"},"callCriticalTaskWithNoAvailabilityNotificationWF":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"processId":"9S6GB4K9KT","name":"callCriticalTaskWithNoAvailabilityNotificationWF","description":"callCriticalTaskWithNoAvailabilityNotificationWF","inputVarMap":{"openJobs":"openJobs"},"outputVarMap":{},"nodeType":"WORKFLOW"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"logContextVar"}],"name":"start","description":"Start","nodeType":"START"},"logContextVar":{"connectors":[{"exitPortType":"NextStep","nodeId":"flattenDataReceived"}],"processId":"featureLoggerWF","name":"logContextVar","description":"logContextVar","inputVarMap":{"featureName":"featureName","extraMsg":"extraMsg"},"id":"logContextVar","outputVarMap":{},"nodeType":"WORKFLOW"},"upsertIntoSchedulerLog":{"connectors":[{"exitPortType":"NextStep","nodeId":"callNotificationWFAccordingToSchedulerType"}],"processId":"schedulerLogModelWF","name":"upsertIntoSchedulerLog","description":"upsertIntoSchedulerLog","inputVarMap":{"schedulerLogData":"schedulerLog"},"outputVarMap":{},"nodeType":"WORKFLOW"},"callCriticalTaskWithNoSSTNotificationWF":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"processId":"YH1GILEZI2","name":"callCriticalTaskWithNoSSTNotificationWF","description":"callCriticalTaskWithNoSSTNotificationWF","inputVarMap":{"schedulerLogData":"schedulerLogDats","openJobs":"openJobs"},"outputVarMap":{},"nodeType":"WORKFLOW"},"fetchInProgressScheduler":{"filter":"{$schedulerLog.id} = {@currentSchedulerLogId}","models":["schedulerLog"],"connectors":[{"exitPortType":"NextStep","nodeId":"isSchedulerCurrentStatusFailed"}],"columns":{"result":"IF({$schedulerLog.result} IS NOT NULL,{$schedulerLog.result},'[]')","actualStatus":"schedulerLog.status","context":"schedulerLog.context","id":"schedulerLog.id","schedulerType":"schedulerLog.schedulerType","status":"IF({@currentStatus} = {@successStatus},'schedulerLogCompleted', 'schedulerLogFailed')"},"name":"fetchInProgressScheduler","description":"fetchInProgressScheduler","inputVarMap":{"currentSchedulerLogId":"currentSchedulerLogId","successStatus":"successStatus","status":"currentStatus"},"outputVarMap":{"data":"schedulerLogData"},"nodeType":"QUERY"},"workflowNodes":["start","logContextVar","flattenDataReceived","fetchInProgressScheduler","isSchedulerCurrentStatusFailed","callNotificationWFAccordingToSchedulerType","callCriticalTaskWithNoSSTNotificationWF","callCriticalTaskWithNoAvailabilityNotificationWF","callBumpedOutTasksNotificationWF","processDataForSchedulerLog","upsertIntoSchedulerLog","end"],"isSchedulerCurrentStatusFailed":{"connectors":[{"exitPortType":"TrueStep","nodeId":"end"},{"exitPortType":"FalseStep","nodeId":"processDataForSchedulerLog"}],"name":"isSchedulerCurrentStatusFailed","description":"isSchedulerCurrentStatusFailed","processRule":"{ !Array.isArray(contextVar.schedulerLogData) || contextVar.schedulerLogData[0].actualStatus === 'schedulerLogFailed'}","nodeType":"DECISION"},"workflowContext":{"featureName":"batchScheduler","extraMsg":"NOTIFICATION: criticalTaskBatchSchedulerNotificationWF call","successStatus":true},"end":{"name":"end","description":"End","inputVarMap":{},"outputVarMap":{},"nodeType":"END"},"processDataForSchedulerLog":{"connectors":[{"exitPortType":"NextStep","nodeId":"upsertIntoSchedulerLog"}],"contextChangePermitted":true,"name":"processDataForSchedulerLog ","description":"processDataForSchedulerLog","processRule":"{ contextVar.schedulerLogData[0].endTime = new Date().toISOString().replace('T', ' ').replace('Z', ''); contextVar.schedulerLogData[0].message = contextVar.message; if (typeof contextVar.data !== 'undefined' && contextVar.schedulerLogData[0] ?.context) { contextVar.schedulerLogData[0].context['notificationData'] = {}; contextVar.schedulerLogData[0].context.notificationData = contextVar.data; } }","nodeType":"PROCESS","jsEngine":"es6"},"callNotificationWFAccordingToSchedulerType":{"connectors":[{"condition":"typeof contextVar.openJobs === 'undefined' || contextVar.openJobs.length === 0","exitPortType":"NextStep","nodeId":"end"},{"condition":"contextVar.schedulerLogData[0].schedulerType==='criticalTask'","exitPortType":"NextStep","nodeId":"callCriticalTaskWithNoSSTNotificationWF"},{"condition":"contextVar.schedulerLogData[0].schedulerType==='criticalTaskNoAvailability'","exitPortType":"NextStep","nodeId":"callCriticalTaskWithNoAvailabilityNotificationWF"},{"condition":"contextVar.schedulerLogData[0].schedulerType==='criticalTasksBumpedOutTasks'","exitPortType":"NextStep","nodeId":"callBumpedOutTasksNotificationWF"},{"DefaultStep":true,"condition":"typeof contextVar.openJobs==='undefined' || contextVar.openJobs.length===0","exitPortType":"NextStep","nodeId":"end"}],"name":"callNotificationWFAccordingToSchedulerType","description":"callNotificationWFAccordingToSchedulerType","nodeType":"MULTIDECISION"},"flattenDataReceived":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchInProgressScheduler"}],"contextChangePermitted":true,"name":"flattenDataReceived","description":"flattenDataReceived","processRule":"{ if (typeof contextVar.data !== 'undefined') { for (const key in contextVar.data) { contextVar[key] = contextVar.data[key]; } } if (typeof contextVar.defaultInputContext !== 'undefined') { for (const key in contextVar.defaultInputContext) { contextVar[key] = contextVar.defaultInputContext[key]; } } }","nodeType":"PROCESS","jsEngine":"es6"}}