{"createSiteChangeTask":{"modelName":"workOrderTask","connectors":[{"exitPortType":"NextStep","nodeId":"insertToSiteLog"}],"name":"createSiteChangeTask","description":"Site change task","inputVarMap":{"siteChangeStatus":"statusId","assignedToUserId":"assignedToUserId","statusTargetModel":"statusTargetModel","checkInTime":"scheduledDate","estimatedTaskDuration":"estimatedDuration","siteId":"siteId","siteChangeRequest":"taskTypeId","workOrderId":"workOrderId"},"id":"createSiteChangeTask","outputVarMap":{"data":"siteChangeTask","id":"siteChangeId"},"nodeType":"MODEL","operation":1},"processData":{"connectors":[{"exitPortType":"NextStep","nodeId":"isSiteChangeNeeded"}],"contextChangePermitted":true,"name":"processData","description":"Processing site data and task details","processRule":"{contextVar.newSiteLat = contextVar.newSiteAddress.latitude; contextVar.newSiteLng = contextVar.newSiteAddress.longitude; contextVar.newSiteAddressText = contextVar.newSiteAddress.address;}","id":"processData","nodeType":"PROCESS"},"workflowContext":{"siteChangeStatus":"workOrderTaskSiteChangeRequest","pendingReviewStatus":"workOrderTaskPendingReview","inProgress":"workOrderTaskInProgress","statusTargetModel":"workOrderTask","siteChangeRequest":"siteChangeRequest"},"querySiteRequestId":{"filter":"{$name}='Site Change Request'","models":["taskType"],"connectors":[{"exitPortType":"NextStep","nodeId":"processData"}],"columns":{"name":"name","id":"id"},"name":"querySiteRequestId","description":"Provide some description for your query","id":"querySiteRequestId","outputVarMap":{"data":"siteChangeIdData"},"nodeType":"QUERY"},"updateTaskStatus":{"modelName":"workOrderTask","connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"name":"updateTaskStatus","description":"Update Task status","inputVarMap":{"inProgress":"statusId","checkInTime":"actualStartTime","taskId":"id"},"id":"updateTaskStatus","outputVarMap":{"data":"statusUpdated"},"nodeType":"MODEL","operation":2},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"querySiteRequestId"}],"name":"start","description":"Start","id":"start","nodeType":"START"},"end":{"name":"End","description":"end","inputVarMap":{"unassignedTask":"data"},"outputVarMap":{"unassignedTask":"data"},"id":"end","nodeType":"END"},"workflowNodes":["start","isSiteChangeNeeded","insertToSiteLog","processData","createSiteChangeTask","updateTaskStatus","querySiteRequestId","end"],"isSiteChangeNeeded":{"connectors":[{"exitPortType":"TrueStep","nodeId":"createSiteChangeTask"},{"exitPortType":"FalseStep","nodeId":"updateTaskStatus"}],"name":"isSiteChangeNeeded","description":"Is site change needed","processRule":"(typeof contextVar.incorrectAddress!=='undefined' && contextVar.incorrectAddress=='true')","id":"isSiteChangeNeeded","nodeType":"DECISION"},"insertToSiteLog":{"modelName":"siteChangeLog","connectors":[{"exitPortType":"NextStep","nodeId":"updateTaskStatus"}],"name":"insertToSiteLog","description":"Insert data to site log","inputVarMap":{"newSiteLng":"longitude","newSiteLat":"latitude","workOrderTaskId":"workOrderTaskId","incorrectSiteComments":"notes","newLocationPhoto":"photoUrl","reasonOfwrongSite":"reason","newSiteAddressText":"address","siteChangeId":"workOrderTaskId"},"id":"insertToSiteLog","outputVarMap":{"data":"siteChangeLogData"},"multiRecord":false,"nodeType":"MODEL","operation":1}}