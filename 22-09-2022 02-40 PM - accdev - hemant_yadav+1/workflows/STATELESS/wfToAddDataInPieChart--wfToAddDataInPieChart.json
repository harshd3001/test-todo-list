{"workflowContext":{"taskTypeId":"L3N2KDC1IA","status":"workOrderTaskCompleted"},"processWorkOrderTaskData":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"contextChangePermitted":true,"name":"processWorkOrderTaskData","description":"Processing data","processRule":"{ contextVar.resultArray = []; contextVar.resultArray = contextVar.catalogData; for (var i = 0; i < contextVar.workOrderTaskData.length; i++) { for (var j = 0; j < contextVar.workOrderTaskData[i].result[0].activitiesGrid.length; j++) { for (k = 0; k < contextVar.resultArray.length; k++) { var activityName1 = contextVar.workOrderTaskData[i].result[0].activitiesGrid[j].activities[0].name; var effort1 = contextVar.workOrderTaskData[i].result[0].activitiesGrid[j].effort; if (contextVar.resultArray[k]['activityName'] === activityName1 ) { if(typeof contextVar.resultArray[k].effort == 'undefined') { contextVar.resultArray[k].effort = parseFloat(effort1) ; } else { contextVar.resultArray[k].effort = parseFloat(effort1) +  parseFloat(contextVar.resultArray[k].effort) ; } } } } } }","id":"processWorkOrderTaskDataId","nodeType":"PROCESS"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"queryCatalog"}],"name":"start","description":"Start","id":"start","nodeType":"START"},"queryCatalog":{"filter":"{$catalogTypeId} = 'projectActivity'","models":["catalog"],"connectors":[{"exitPortType":"NextStep","nodeId":"queryWorkOrderTask"}],"columns":{"activityName":"catalog.name"},"name":"queryCatalog","description":"queryCatalog","inputVarMap":{},"id":"queryCatalogId","outputVarMap":{"data":"catalogData"},"nodeType":"QUERY","getCount":true},"queryWorkOrderTask":{"filter":"{$taskId} IS NOT NULL AND {$taskId} != ''AND DATE({$completedDate}) BETWEEN (CURRENT_DATE() - INTERVAL 7 Day) AND CURRENT_DATE() AND {$taskTypeId} = {@taskTypeId} AND {$status} = {@status}","models":["workOrderTask"],"connectors":[{"exitPortType":"NextStep","nodeId":"processWorkOrderTaskData"}],"columns":{"result":"workOrderTask.result","taskTypeId":"workOrderTask.taskTypeId","createdDate":"workOrderTask.createdDate","taskId":"workOrderTask.id","completedDate":"workOrderTask.completedDate","status":"workOrderTask.statusId"},"name":"queryWorkOrderTask","description":"Fetch workordertask data","inputVarMap":{"taskTypeId":"taskTypeId","status":"status"},"id":"queryWorkOrderTaskId","outputVarMap":{"data":"workOrderTaskData"},"nodeType":"QUERY","getCount":true},"end":{"name":"end","description":"End","inputVarMap":{"resultArray":"resultArray"},"outputVarMap":{"resultArray":"resultArray"},"id":"end","nodeType":"END"},"workflowNodes":["start","queryCatalog","queryWorkOrderTask","processWorkOrderTaskData","end"]}