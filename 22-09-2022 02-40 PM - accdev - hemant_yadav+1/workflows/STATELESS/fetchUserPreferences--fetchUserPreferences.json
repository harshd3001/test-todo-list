{"processData":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"contextChangePermitted":true,"name":"processData","description":"Use this for processing data in workflow","processRule":"contextVar.preferenceData = {}; contextVar.listOfLocales = []; if (Array.isArray(contextVar.fetchUserPreferences)) { contextVar.fetchUserPreferences.forEach((obj) => { if (obj.preferences) { for (let key in obj.preferences) { if (typeof contextVar.preferenceData[obj.userId] === 'undefined' || contextVar.preferenceData[obj.userId] === '') { contextVar.preferenceData[obj.userId] = {}; } contextVar.preferenceData[obj.userId][key] = obj.preferences[key]; if (obj.preferences.userLocale) { contextVar.listOfLocales.push(obj.preferences.userLocale.toLocaleLowerCase()); } } } }); }","id":"processData","nodeType":"PROCESS","jsEngine":"es6"},"workflowContext":{},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"usersAvailable"}],"name":"start","description":"Start","id":"start","nodeType":"START"},"usersAvailable":{"connectors":[{"exitPortType":"TrueStep","nodeId":"fetchUserPreferences"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"usersAvailable","description":"Use this for decision in workflow","processRule":"contextVar.userList && Array.isArray(contextVar.userList) && contextVar.userList.length > 0","id":"usersAvailable","nodeType":"DECISION"},"end":{"name":"end","description":"End","inputVarMap":{},"outputVarMap":{},"id":"end","nodeType":"END"},"fetchUserPreferences":{"filter":"{$userId} in {@userList}","models":["User","UserPref"],"connectors":[{"exitPortType":"NextStep","nodeId":"processData"}],"columns":{"preferences":"UserPref.preferences","userId":"User.id"},"name":"fetchUserPreferences","distinct":true,"description":"Provide some description for your query","outerJoinOnModel":"User","inputVarMap":{"userList":"userList"},"id":"fetchUserPreferences","outputVarMap":{"data":"fetchUserPreferences"},"nodeType":"QUERY"},"workflowNodes":["start","usersAvailable","fetchUserPreferences","processData","end"]}