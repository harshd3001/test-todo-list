{"queryTasks":{"models":["workOrder","taskType","workOrderTask"],"connectors":[{"exitPortType":"NextStep","nodeId":"loopThroughTasksList"}],"columns":{"workOrderTaskStatusId":"workOrderTask.statusId","taskTypeWebTask":"taskType.webTask","workOrderId":"workOrder.id","workOrderTaskResult":"workOrderTask.result","taskId":"workOrderTask.id"},"inputs":{"wId":"WKORD000054"},"description":"Query Tasks","nodeType":"QUERY","filter":"{$workOrderId} = {@wId} AND {$workOrderTaskStatusId} != 'workOrderTaskCancelled' AND {$taskTypeWebTask} = false","distict":true,"name":"queryTasks","links":{"workOrder":"workOrderTask","taskType":"workOrderTask"},"id":"queryTasks","outputVarMap":{"data":"workOrderData"},"getCount":true},"loopThroughTasksList":{"connectors":[{"exitPortType":"TrueStep","nodeId":"closeoutPackageProcessCount"},{"exitPortType":"FalseStep","nodeId":"processDynamicGridData"}],"data":"workOrderData","name":"loopThroughTasksList","description":"loopThroughTasksList","inputVarMap":{},"outputVarMap":{},"nodeType":"FOREACHLOOP"},"workflowContext":{"serviceTotalCount":0,"finalTotalCount":0,"initialTotalCount":0,"dynamicGridData":[],"progressTotalCount":0},"closeoutPackageProcessCount":{"connectors":[{"exitPortType":"NextStep","nodeId":"loopThroughTasksList"}],"contextChangePermitted":true,"name":"closeoutPackageZrule","description":"closeoutPackageZrule","processRule":"if (contextVar.loopThroughTasksList_currentElement.workOrderTaskResult && Array.isArray(contextVar.loopThroughTasksList_currentElement.workOrderTaskResult)) { contextVar.loopThroughTasksList_currentElement.workOrderTaskResult.forEach(function (element) { if (element.initialEvidenceDataGrid && Array.isArray(element.initialEvidenceDataGrid)) { contextVar.initialTotalCount += element.initialEvidenceDataGrid.length; } if (element.servicesDataGrid && Array.isArray(element.servicesDataGrid)) { contextVar.serviceTotalCount += element.servicesDataGrid.length; } if (element.finalEvidenceDataGrid && Array.isArray(element.finalEvidenceDataGrid)) { contextVar.finalTotalCount += element.finalEvidenceDataGrid.length; } if (element.submitProgressEvidenceDataGrid && Array.isArray(element.submitProgressEvidenceDataGrid)) { contextVar.progressTotalCount += element.submitProgressEvidenceDataGrid.length; } }); }","nodeType":"PROCESS","jsEngine":"es6"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"queryTasks"}],"name":"start","description":"Start","id":"start","nodeType":"START"},"processDynamicGridData":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"contextChangePermitted":true,"name":"processDynamicGridData","description":"processDynamicGridData","processRule":"if(contextVar.initialTotalCount > 0) { var dynamicGridobj = {}; dynamicGridobj['Name'] = '@lang.['initialEvidence','Initial Evidence']'; contextVar.dynamicGridData.push(dynamicGridobj); } if(contextVar.serviceTotalCount > 0) { var dynamicGridobj = {}; dynamicGridobj['Name'] = '@lang.['sd12','Services Delivered']'; contextVar.dynamicGridData.push(dynamicGridobj); } if(contextVar.progressTotalCount > 0) { var dynamicGridobj = {}; dynamicGridobj['Name'] = '@lang.['tpr','Task Progress Reports']'; contextVar.dynamicGridData.push(dynamicGridobj); } if(contextVar.finalTotalCount > 0) { var dynamicGridobj = {}; dynamicGridobj['Name'] = '@lang.['fe','Final Evidence']'; contextVar.dynamicGridData.push(dynamicGridobj); } contextVar.count = contextVar.dynamicGridData.length;","nodeType":"PROCESS","jsEngine":"es6"},"end":{"name":"end","description":"end","inputVarMap":{"count":"count","dynamicGridData":"dynamicGridData"},"outputVarMap":{"count":"count","dynamicGridData":"dynamicGridData"},"id":"end","nodeType":"END"},"workflowNodes":["start","queryTasks","loopThroughTasksList","closeoutPackageProcessCount","processDynamicGridData","end"]}