{"pageContext":{},"actionOnLoad":["@actions.initialData"],"localPageContext":true,"jslib":{"validateMaxTasks":"function(pageContext) { return ((Number(pageContext.appointmentWindowMaxTasks) < 0) || (Number(pageContext.appointmentWindowMaxTasks) % 1 !== 0));}","dynamicHeaderText":"function(pageContext){if (pageContext.appointmentWindowAction === 'add'){return '@lang.[\"aaw\",\"Add Appointment Window\"]';} else if(pageContext.appointmentWindowAction !== 'add'){return '@lang.[\"eaw\",\"Edit Appointment Window\"]';} }","isSaveDisabled":"function(pageContext) { if (pageContext.appointmentWindowAction === 'edit') { if ((pageContext.initialAppointmentWindowName != pageContext.appointmentWindowName && typeof pageContext.appointmentWindowName !== 'undefined' && pageContext.appointmentWindowName !== '') || (pageContext.initialAppointmentWindowDescription != pageContext.appointmentWindowDescription) || (pageContext.initialAppointmentWindowStartTime != pageContext.appointmentWindowStartTime && typeof pageContext.appointmentWindowStartTime !== 'undefined' && pageContext.appointmentWindowStartTime !== '') || (pageContext.initialAppointmentWindowEndTime != pageContext.appointmentWindowEndTime && typeof pageContext.appointmentWindowEndTime !== 'undefined' && pageContext.appointmentWindowEndTime !== '') || (Number(pageContext.initialAppointmentWindowMaxTasks) != Number(pageContext.appointmentWindowMaxTasks) && typeof pageContext.appointmentWindowMaxTasks !== 'undefined' && Number(pageContext.appointmentWindowMaxTasks) > 0 && Number(pageContext.appointmentWindowMaxTasks) % 1 === 0 && pageContext.appointmentWindowMaxTasks !== '')) { return false; } else { return true; } } else if (pageContext.appointmentWindowAction === 'add') { if ((pageContext.initialAppointmentWindowName != pageContext.appointmentWindowName && typeof pageContext.appointmentWindowName !== 'undefined' && pageContext.appointmentWindowName !== '') && (pageContext.initialAppointmentWindowDescription != pageContext.appointmentWindowDescription) && (pageContext.initialAppointmentWindowStartTime != pageContext.appointmentWindowStartTime && typeof pageContext.appointmentWindowStartTime !== 'undefined' && pageContext.appointmentWindowStartTime !== '') && (pageContext.initialAppointmentWindowEndTime != pageContext.appointmentWindowEndTime && typeof pageContext.appointmentWindowEndTime !== 'undefined' && pageContext.appointmentWindowEndTime !== '') && (Number(pageContext.initialAppointmentWindowMaxTasks) != Number(pageContext.appointmentWindowMaxTasks) && typeof pageContext.appointmentWindowMaxTasks !== 'undefined' && Number(pageContext.appointmentWindowMaxTasks) > 0 && Number(pageContext.appointmentWindowMaxTasks) % 1 === 0 && pageContext.appointmentWindowMaxTasks !== '')) { return false; } else { return true; } } else { return true; } }"},"header":{"children":[{"buttonType":"primary","actionOnClick":["@actions.setSubActionUpsertAppointmentWindow","@actions.fireProcessEventForAppointmentWindow","@actions.setWindowOverlappingFlag","@actions.decisionOverlappingWindow"],"disabled":"@jslib.isSaveDisabled","id":"submit","type":"button","title":"@lang.['s12','Save']"},{"icon":"@iconlib.NavigationCloseGrey","actionOnClick":["@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"id":"Close","type":"buttonIcon"}],"title":"@jslib.dynamicHeaderText"},"body":{"children":[{"children":[{"isRequired":true,"id":"appointmentWindowName","label":"@lang.['n','Name']","placeholder":"@lang.['en1','Enter name']","type":"input","value":"@pageContext.appointmentWindowName"},{"id":"appointmentWindowDescription","label":"@lang.['d7','Description (Optional)']","type":"textarea","value":"@pageContext.appointmentWindowDescription","placeHolder":"@lang.['ed1','Enter description']"},{"children":[{"children":[{"isRequired":true,"id":"startTime","label":"@lang.['startTime','Start Time']","title":"@lang.['startTime','Start Time']","type":"absoluteTime","value":"@pageContext.appointmentWindowStartTime","placeHolder":"@lang.['selectStartTime','Select start time']"}],"flex":"3","type":"column"},{"children":[{"isRequired":true,"id":"appointmentWindowEndTime","label":"@lang.['endTime','End Time']","title":"@lang.['endTime','End Time']","type":"absoluteTime","value":"@pageContext.appointmentWindowEndTime","placeHolder":"@lang.['selectEndTime','Select end time']"}],"flex":"3","type":"column"}],"id":"startEndTimeRow","type":"row"},{"isRequired":true,"errorText":"@lang.['mtpdmbaigt0','Maximum Tasks per Day must be an integer greater than 0']","validator":"@jslib.validateMaxTasks","disabled":true,"inputType":"number","id":"appointmentWindowMaxTasks","label":"@lang.['mtpd','Maximum Tasks per Day']","placeholder":"@lang.['emtpd','Enter maximum tasks per day']","type":"input","value":"@pageContext.appointmentWindowMaxTasks"}],"id":"appointmentWindowSection","type":"section"}]},"actions":[{"name":"clearPageContext","type":"clearPageContext"},{"name":"closeModal","type":"closeModal"},{"name":"closePanel","type":"closePanel"},{"name":"initialData","type":"script","actionDef":"function(pageContext) { if (pageContext.appointmentWindowAction === 'add') { pageContext.selectedRowIds = ''; pageContext.appointmentWindowName = ''; pageContext.appointmentWindowDescription = ''; pageContext.appointmentWindowStartTime = ''; pageContext.appointmentWindowEndTime = ''; pageContext.appointmentWindowMaxTasks = '999'; } else if (pageContext.appointmentWindowAction === 'edit') { pageContext.initialAppointmentWindowId = pageContext.appointmentWindowId; pageContext.initialAppointmentWindowName = pageContext.appointmentWindowName; pageContext.initialAppointmentWindowDescription = pageContext.appointmentWindowDescription; pageContext.initialAppointmentWindowStartTime = pageContext.appointmentWindowStartTime; pageContext.initialAppointmentWindowEndTime = pageContext.appointmentWindowEndTime; pageContext.initialAppointmentWindowMaxTasks = pageContext.appointmentWindowMaxTasks; } }"},{"endPoint":"event/start","name":"fireProcessEventForAppointmentWindow","outputVarMap":{"data":"@pageContext.data"},"type":"api","actionDef":{"data":[{"eventId":"settingsWorkOrderAppointmentWindowProcessEvent","contextVar":{"subAction":"@pageContext.subAction","appointmentWindow":[{"recver":"@pageContext.appointmentWindowRecver","maxTasks":"@pageContext.appointmentWindowMaxTasks","name":"@pageContext.appointmentWindowName","description":"@pageContext.appointmentWindowDescription","startTime":"@pageContext.appointmentWindowStartTime","id":"@pageContext.appointmentWindowId","endTime":"@pageContext.appointmentWindowEndTime"}]}}]}},{"name":"setWindowOverlappingFlag","type":"script","actionDef":"function(pageContext) { if (typeof pageContext.data !== 'undefined' && pageContext.data !== '' && Array.isArray(pageContext.data)) { pageContext.isWindowNonOverlapping = pageContext.data[0].data[0].isWindowNonOverlapping; pageContext.appointmentWindowId = pageContext.data[0].data[0].appointmentWindowId; } if (pageContext.appointmentWindowAction === 'edit') { pageContext.appointmentWindowId = pageContext.initialAppointmentWindowId; } }"},{"subTitle":"@lang.['tstaetowaeawpatttrtctp','The start time and end time overlap with an existing appointment window. Please adjust the timings to remove the conflict to proceed.']","name":"openModalOverlappingWindow","options":[{"buttonType":"primary","name":"no","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['c23','Close']"}],"type":"openModal","title":"@lang.['oaw','Overlapping Appointment Window']"},{"falseStep":["@actions.openModalOverlappingWindow"],"trueStep":["@actions.closePanel","@actions.clearPageContext","@actions.refreshDataGrid"],"name":"decisionOverlappingWindow","type":"decision","actionDef":"function(pageContext){return pageContext.isWindowNonOverlapping}"},{"name":"refreshDataGrid","type":"refreshDataGrid"},{"name":"setSubActionUpsertAppointmentWindow","type":"script","actionDef":"function(pageContext){pageContext.subAction='upsertAppointmentWindow';}"},{"name":"goToPreviousPanel","type":"backPanel"}]}