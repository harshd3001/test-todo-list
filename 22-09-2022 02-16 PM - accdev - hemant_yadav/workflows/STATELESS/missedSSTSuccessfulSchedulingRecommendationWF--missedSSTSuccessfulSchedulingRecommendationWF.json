{"insertIntoAimlRecs":{"modelName":"AimlRecs","connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"multirecord":true,"name":"insertIntoAimlRecs","description":"insertIntoAimlRecs","inputVarMap":{"payload":"data"},"id":"insertIntoAimlRecs","outputVarMap":{"data":"retAimlId"},"nodeType":"MODEL","operation":1},"workflowContext":{"payload":[{"priorityModel":"AimlRecs","expired":false,"addDecisionToTraining":false,"rejected":false,"notified":false,"recommendContext":{},"accepted":false,"superseded":false,"done":false,"status":"recommended"}],"criticalTaskSuccessRecommendation":{"aimlRecTypeId":"criticalPriorityTaskAssignmentSuccess","text":"Critical task {@taskIdToBeReplaced} is now scheduled for {@scheduledDateToBeReplaced} and is assigned to {@assigneeNameToBeReplaced}.","priority":10},"missedSSTSuccessRecommendation":{"aimlRecTypeId":"missedSSTRescheduleSuccess","text":"{@taskIdToBeReplaced} has been rescheduled and assigned to {@assigneeNameToBeReplaced} since it had not started 1 hour past the scheduled start time.","priority":30}},"fetchAssigneeName":{"filter":"{$workOrderTask.id} = {@taskId}","models":["workOrderTask","User"],"connectors":[{"exitPortType":"NextStep","nodeId":"processRecommendationData"}],"columns":{"userName":"User.name"},"name":"fetchAssigneeName","description":"fetchAssigneeName","inputVarMap":{"taskId":"taskId"},"outputVarMap":{"data":"assigneeName"},"nodeType":"QUERY"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchAssigneeName"}],"name":"start","description":"start","nodeType":"START"},"end":{"name":"end","description":"end","inputVarMap":{},"outputVarMap":{},"nodeType":"END"},"workflowNodes":["start","fetchAssigneeName","processRecommendationData","insertIntoAimlRecs","end"],"processRecommendationData":{"connectors":[{"exitPortType":"NextStep","nodeId":"insertIntoAimlRecs"}],"contextChangePermitted":true,"name":"processRecommendationData","description":"processRecommendationData","processRule":"{ if (contextVar.schedulerType === 'missedSST') { contextVar.payload[0].recommendation = contextVar.missedSSTSuccessRecommendation.text.replace('{@taskIdToBeReplaced}', contextVar.taskId).replace('{@assigneeNameToBeReplaced}', contextVar.assigneeName[0].userName); contextVar.payload[0].aimlRecTypeId = contextVar.missedSSTSuccessRecommendation.aimlRecTypeId; contextVar.payload[0].priority = contextVar.missedSSTSuccessRecommendation.priority; } else { contextVar.payload[0].recommendation = contextVar.criticalTaskSuccessRecommendation.text.replace('{@taskIdToBeReplaced}', contextVar.taskId).replace('{@assigneeNameToBeReplaced}', contextVar.assigneeName[0].userName).replace('{@scheduledDateToBeReplaced}', contextVar.scheduledDate); contextVar.payload[0].aimlRecTypeId = contextVar.criticalTaskSuccessRecommendation.aimlRecTypeId; contextVar.payload[0].priority = contextVar.criticalTaskSuccessRecommendation.priority; } }","nodeType":"PROCESS","jsEngine":"es6"}}