{"workflowContext":{"taskTypeId":"L3N2KDC1IA","batchSize":1000,"status":"workOrderTaskCompleted"},"processTaskData":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"contextChangePermitted":true,"name":"processTaskData","description":"Use this for processing data in workflow","processRule":"{contextVar.finalArray=[];contextVar.finalArray=contextVar.techData;contextVar.test=contextVar.taskData[0].result[0].activitiesGrid.length;contextVar.testId=contextVar.taskData[0].taskId;for(var i=0;i<contextVar.taskData.length;i++){for(var j=0;j<contextVar.finalArray.length;j++){if(contextVar.taskData[i].assignedToUserId===contextVar.finalArray[j].userId){for(k=0;k<contextVar.taskData[i].result[0].activitiesGrid.length;k++){var activity1=contextVar.taskData[i].result[0].activitiesGrid[k].activities[0].name;var effort1=contextVar.taskData[i].result[0].activitiesGrid[k].effort;if(typeof(contextVar.finalArray[j][activity1])==='undefined'){contextVar.finalArray[j][activity1]=parseFloat(effort1);}else{contextVar.finalArray[j][activity1]=parseFloat(contextVar.finalArray[j][activity1])+parseFloat(effort1);}}}}}}","id":"processTaskData","nodeType":"PROCESS"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchTechnicianName"}],"name":"start","description":"Start","id":"start","nodeType":"START"},"end":{"name":"end","description":"End","inputVarMap":{"finalArray":"finalArray"},"outputVarMap":{"finalArray":"finalArray"},"id":"end","nodeType":"END"},"fetchTasksData":{"models":["workOrderTask"],"connectors":[{"exitPortType":"NextStep","nodeId":"processTaskData"}],"columns":{"result":"workOrderTask.result","assignedToUserId":"workOrderTask.assignedToUserId","taskTypeId":"workOrderTask.taskTypeId","taskId":"workOrderTask.id","completedDate":"workOrderTask.completedDate","status":"workOrderTask.statusId"},"description":"query to fetch tasks","inputVarMap":{"taskTypeId":"taskTypeId","batchSize":"batchSize","status":"status"},"nodeType":"QUERY","filter":"{$taskId} IS NOT NULL AND {$taskId} != ''AND DATE({$completedDate}) BETWEEN (CURRENT_DATE() - INTERVAL 7 Day) AND CURRENT_DATE() AND {$taskTypeId} = {@taskTypeId} AND {$status} = {@status}","name":"fetchTasksData","id":"fetchTasksData","outputVarMap":{"data":"taskData"},"batchSize":"batchSize","getCount":true,"batchNumber":"batchNumber"},"fetchTechnicianName":{"filter":"","models":["workforce","User"],"connectors":[{"exitPortType":"NextStep","nodeId":"fetchTasksData"}],"columns":{"userName":"User.name","userId":"workforce.userId"},"name":"fetchTechnicianName","description":"query to fetch technician data","inputVarMap":{},"id":"fetchTechnicianName","outputVarMap":{"data":"techData"},"nodeType":"QUERY"},"workflowNodes":["start","fetchTechnicianName","fetchTasksData","processTaskData","end"]}