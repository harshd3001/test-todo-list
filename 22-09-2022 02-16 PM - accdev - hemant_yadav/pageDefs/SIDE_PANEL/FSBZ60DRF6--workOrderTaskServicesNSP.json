{"pageContext":{},"actionOnLoad":["@actions.fetchSelectedServices","@actions.setInitialData"],"localPageContext":true,"jslib":{"isAddServicesDisabled":"function(pageContext) { if (typeof pageContext.initialSelectedRowIdsArray !== 'undefined' && pageContext.initialSelectedRowIdsArray !== '' && pageContext.initialSelectedRowIdsArray.length > 0 && typeof pageContext.selectedRowIds !== 'undefined' && pageContext.selectedRowIds !== '' && pageContext.selectedRowIds.length > 0 && pageContext.selectedRowIds.length !== pageContext.initialSelectedRowIdsArray.length) { return false; } else { if (typeof pageContext.selectedRowIds !== 'undefined' && pageContext.selectedRowIds !== '' && pageContext.selectedRowIds.length > 0 && typeof pageContext.initialSelectedRowIdsArray !== 'undefined' && pageContext.initialSelectedRowIdsArray !== '' && pageContext.initialSelectedRowIdsArray.length > 0) { for (var i in pageContext.selectedRowIds) { if (pageContext.initialSelectedRowIdsArray.indexOf(pageContext.selectedRowIds[i].catalogId) == -1) { return false; } } return true; } } return true; }"},"header":{"leftData":{"children":[{"name":"back","icon":"@iconlib.NavigationArrowBackGrey","actionOnClick":["@actions.openPreviousPanel"],"type":"buttonIcon"}]},"children":[{"buttonType":"primary","actionOnClick":["@actions.setSelectedServices","@actions.showWarning","@actions.openPreviousPanel"],"disabled":"@jslib.isAddServicesDisabled","id":"submit","type":"button","title":"@lang.['d21','Done']"}],"title":"@lang.['es8','Edit Services']"},"body":{"children":[{"name":"@lang.['s18','servicesGrid']","label":"","id":"servicesGrid","type":"dataGrid","jsonDef":{"isScrollAble":true,"searchAllowed":false,"searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSync":true,"tableHeader":[{"name":"@lang.['c3','catalogId']","options":{"hidden":true,"showLabel":false},"key":"catalogId","primaryKey":true},{"name":"@lang.['n','Name']","options":{"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"catalogName"},{"name":"@lang.['d','Description']","options":{"showLabel":true},"key":"catalogDescription"}],"dataToBeSent":{"filter":"{$catalog.catalogTypeId}='service'","models":["catalog"],"columns":{"catalogName":"catalog.name","catalogRecver":"catalog.recver","catalogId":"catalog.id","catalogDescription":"catalog.description"},"orderBy":"catalogName ASC","outerJoinOnModel":"catalog","distinct":true,"outputVarMap":{"data":"@pageContext.servicelist"}},"rowsToSelect":{"filter":"{$catalogId} in {@selectedServices}","models":["catalog"],"inputs":{"selectedServices":"@pageContext.selectedServices"},"columns":{"catalogName":"catalog.name","catalogRecver":"catalog.recver","catalogId":"catalog.id"}},"dataSourceId":"query/read","header":{"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['navS3','Services']"},"isSelectable":true,"actions":[],"searchKeys":["catalogId"]}}],"label":"Services","id":"datagridServices","type":"section","transparent":true},"updateAllowed":true,"isSelectable":true,"actions":[{"parentPanelRefreshRequired":false,"name":"openPreviousPanel","type":"backPanel","requiredPageContextKeys":"[\"selectedServices\",\"workOrderTaskServices\",\"bannerType\"]"},{"name":"fetchSelectedServices","outputVarMap":{"data":"@pageContext.selectedServiceList"},"type":"query","actionDef":{"filter":"{$catalogId} in {@selectedServices}","models":["catalog"],"inputs":{"selectedServices":"@pageContext.selectedServices"},"columns":{"catalogName":"catalog.name","catalogRecver":"catalog.recver","catalogId":"catalog.id"}}},{"name":"setInitialData","type":"script","actionDef":"function(pageContext){pageContext.initialSelectedRowIdsArray=[];if(typeof pageContext.selectedServiceList !== 'undefined' && pageContext.selectedServiceList !== '' && pageContext.selectedServiceList.length>0){for(var i=0;i<pageContext.selectedServiceList.length;i++){pageContext.initialSelectedRowIdsArray.push(pageContext.selectedServiceList[i].catalogId);}}}"},{"name":"setSelectedServices","type":"script","actionDef":"function(pageContext) { if (typeof pageContext.selectedRowIds !== 'undefined' && pageContext.selectedRowIds !== '' && pageContext.selectedRowIds.length > 0) { pageContext.selectedServices = []; pageContext.workOrderTaskServices = []; for (var i = 0; i < pageContext.selectedRowIds.length; i++) { pageContext.selectedServices.push(pageContext.selectedRowIds[i].catalogId); pageContext.workOrderTaskServices.push({ 'catalogId': pageContext.selectedRowIds[i].catalogId}); } } }"},{"name":"showWarning","type":"script","actionDef":"function(pageContext){pageContext.bannerType = 'warning'}"},{"name":"closePanel","type":"closePanel"},{"name":"refreshDataGrid","type":"refreshDataGrid"},{"name":"refreshGridOnSidePanel","gridId":["servicesGrid"],"type":"RefreshGridOnSidePanel"}]}