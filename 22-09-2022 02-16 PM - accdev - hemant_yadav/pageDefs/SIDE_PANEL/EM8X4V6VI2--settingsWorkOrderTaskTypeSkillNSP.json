{"pageContext":{},"actionOnLoad":["@actions.initialData","@actions.getSkillLevelData"],"localPageContext":true,"jslib":{"dynamicHeaderText":"function(pageContext){if (pageContext.taskTypeSkillAction === 'add'){return '@lang.[\"ans\",\"Add New Skill\"]';} else if(pageContext.taskTypeSkillAction === 'edit'){return '@lang.[\"es6\",\"Edit Skill\"]';}}","isSaveDisabled":"function(pageContext) { if (pageContext.taskTypeSkillAction === 'add') { if ( (typeof pageContext.taskTypeSkillMinSkillLevelId !== 'undefined' && pageContext.taskTypeSkillMinSkillLevelId !== '') && (typeof pageContext.taskTypeSkillSkillId !== 'undefined' && pageContext.taskTypeSkillSkillId !== '')) { return false; } else { return true; } } else if (pageContext.taskTypeSkillAction === 'edit') { if (((pageContext.initialTaskTypeSkillMinSkillLevelId === pageContext.taskTypeSkillMinSkillLevelId) && (pageContext.initialTaskTypeSkillSkillId === pageContext.taskTypeSkillSkillId)) ||  (typeof pageContext.taskTypeSkillMinSkillLevelId !== 'undefined' && pageContext.taskTypeSkillMinSkillLevelId == '') || (typeof pageContext.taskTypeSkillSkillId !== 'undefined' && pageContext.taskTypeSkillSkillId == '')) { return true; } else { return false; } } }","isTaskTypeSkillActionEdit":"function(pageContext){return pageContext.taskTypeSkillAction === 'edit'}"},"header":{"leftData":{"children":[{"name":"Back","icon":"@iconlib.NavigationArrowBackGrey","actionOnClick":["@actions.openPreviousPanel","@actions.refreshDataGrid"],"type":"buttonIcon"}]},"children":[{"buttonType":"primary","actionOnClick":["@actions.setSubActionUpsertSkill","@actions.fireProcessEvent","@actions.openPreviousPanel","@actions.refreshDataGrid"],"disabled":"@jslib.isSaveDisabled","id":"submit","type":"button","title":"@lang.['s12','Save']"}],"title":"@jslib.dynamicHeaderText"},"body":{"children":[{"children":[{"isRequired":true,"actionOnChange":["@actions.getSkillLevelData"],"options":"@pageContext.skillList","disabled":"@jslib.isTaskTypeSkillActionEdit","optTitleKey":"name","optValueKey":"id","id":"skill","title":"@lang.['s17','Skill']","type":"select","value":"@pageContext.taskTypeSkillSkillId","placeHolder":"@lang.['ss1','Select skill']"},{"isRequired":true,"options":"@pageContext.skillLevelList","id":"minSkillLevel","optTitleKey":"name","optValueKey":"id","title":"@lang.['mrsl','Minimum Required Skill Level']","type":"select","value":"@pageContext.taskTypeSkillMinSkillLevelId","placeHolder":"@lang.['ssl','Select skill level']"}],"label":"@lang.['s17',' Skill']","id":"taskTypeSkillDetails","type":"section"}]},"actions":[{"name":"initialData","type":"script","actionDef":"function(pageContext){if(pageContext.taskTypeSkillAction=='add'){pageContext.taskTypeSkillSkillId='';pageContext.taskTypeSkillMinSkillLevelId='';}else if(pageContext.taskTypeSkillAction=='edit'){pageContext.initialTaskTypeSkillSkillId=pageContext.taskTypeSkillSkillId;pageContext.initialTaskTypeSkillMinSkillLevelId=pageContext.taskTypeSkillMinSkillLevelId;}}"},{"name":"openPreviousPanel","type":"backPanel"},{"name":"setSubActionUpsertSkill","type":"script","actionDef":"function(pageContext){pageContext.subAction='upsertSkill';}"},{"endPoint":"event/start","name":"fireProcessEvent","type":"api","actionDef":{"data":[{"eventId":"settingsWorkOrderTaskTypeProcessEvent","contextVar":{"taskTypeSkill":{"skillId":"@pageContext.taskTypeSkillSkillId","taskTypeId":"@pageContext.taskTypeId","minSkillLevelId":"@pageContext.taskTypeSkillMinSkillLevelId"},"subAction":"@pageContext.subAction"}}]}},{"name":"refreshDataGrid","type":"refreshDataGrid"},{"name":"getSkillLevelData","outputVarMap":{"data":"@pageContext.skillLevelList"},"type":"query","actionDef":{"filter":"{$skillId} = {@skillId}","models":["skillLevel"],"columns":{"skillId":"skillLevel.skillId","name":"skillLevel.name","id":"skillLevel.id"},"inputs":{"skillId":"@pageContext.taskTypeSkillSkillId"}}}]}