{"processWorkforceSkillData":{"connectors":[{"exitPortType":"NextStep","nodeId":"getUnselectedSkillData"}],"contextChangePermitted":true,"name":"processWorkforceSkillData","description":"processWorkforceSkillData","processRule":"{contextVar.selectedSkills=[];for(var i in contextVar.skillDataGrid){contextVar.selectedSkills.push(contextVar.skillDataGrid[i].workforceSkillSkillId);}if(contextVar.selectedSkills.length===0){contextVar.filter=''}else{contextVar.filter='{$id} not in {@selectedSkills}'}}","nodeType":"PROCESS"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"multiDecisionNode"}],"name":"start","description":"start","nodeType":"START"},"getUnselectedSkillData":{"filter":"filter","models":["skill"],"connectors":[{"exitPortType":"NextStep","nodeId":"getWorkforceContractorData"}],"columns":{"skillName":"skill.name","skillId":"skill.id"},"name":"getUnselectedSkillData","description":"getUnselectedSkillData","inputVarMap":{"filter":"filter","selectedSkills":"selectedSkills"},"outputVarMap":{"data":"skillSet"},"nodeType":"QUERY"},"getWorkforceCrewData":{"filter":"{$workforceCrewWorkforceUserId} = {@workforceUserId}","models":["workforceCrew","workforce","ZStatus","crew"],"connectors":[{"exitPortType":"NextStep","nodeId":"processCrewData"}],"columns":{"workforceCrewWorkforceUserId":"workforceCrew.workforceUserId","workforceCrewCrewId":"workforceCrew.crewId","workforceCrewStatusName":"ZStatus.name","workforceCrewStatusNameColor":"ZStatus.colorCode"},"name":"getWorkforceCrewData","distinct":true,"description":"getWorkforceCrewData","inputVarMap":{"workforceUserId":"workforceUserId"},"links":{"workforce":"workforceCrew","ZStatus":"workforceCrew","workforceCrew":"crew"},"outputVarMap":{"data":"workforceCrewData"},"nodeType":"QUERY","getCount":true},"processCrewData":{"connectors":[{"exitPortType":"NextStep","nodeId":"getShiftData"}],"contextChangePermitted":true,"name":"processCrewData","description":"processCrewData","processRule":"if (typeof contextVar.crewData != 'undefined' && contextVar.crewData != '' && contextVar.crewData.length > 0 && typeof contextVar.workforceCrewData != 'undefined' && contextVar.workforceCrewData != '' && contextVar.workforceCrewData.length > 0) { contextVar.crewData.forEach(function (crewDataElement) { contextVar.workforceCrewData.forEach(function (workforceCrewDataElement) { if (crewDataElement.crewId===workforceCrewDataElement.workforceCrewCrewId) { crewDataElement['workforceCrewStatusName'] = workforceCrewDataElement.workforceCrewStatusName; crewDataElement['workforceCrewStatusNameColor'] = workforceCrewDataElement.workforceCrewStatusNameColor; } }); }); }","nodeType":"PROCESS"},"workflowNodes":["start","multiDecisionNode","getTechnicianData","processTechnicianData","getWorkGroupData","getWorkforceSkillData","processWorkforceSkillData","getUnselectedSkillData","getWorkforceContractorData","checkWorkforceContractorData","fetchWeeklyScheduleData","getCrewData","getWorkforceCrewData","processCrewData","getShiftData","end"],"checkWorkforceContractorData":{"models":["region","subRegion","contractorRegion","contractorWorkforce","contractor"],"connectors":[{"exitPortType":"NextStep","nodeId":"fetchWeeklyScheduleData"}],"columns":{"contractorRegionSubRegionId":"contractorRegion.subRegionId","regionId":"region.id","regionName":"region.name","contractorRegionRegionId":"contractorRegion.regionId","contractorName":"contractor.name","contractorRegionId":"contractorRegion.id","subRegionId":"subRegion.id","subRegionName":"subRegion.name","contractorRegionContractorId":"contractorRegion.contractorId"},"inputs":{"contractorWorkforceContractorRegionId":{"filter":"{$contractorWorkforce.workforceId} = {@workforceUserId}","models":["contractorWorkforce"],"columns":{"contractorWorkforceContractorRegionId":"contractorWorkforce.contractorRegionId"}}},"outerJoinOnModel":"contractorRegion","description":"checkWorkforceContractorData","distinct":true,"inputVarMap":{"workforceUserId":"workforceUserId"},"nodeType":"QUERY","filter":"{$contractorRegionId} not in ({@contractorWorkforceContractorRegionId})","name":"checkWorkforceContractorData","links":{"contractorRegion":"contractorWorkforce","contractor":"contractorRegion","subRegion":"contractorRegion","region":"contractorRegion"},"outputVarMap":{"data":"contractorData"},"getCount":true},"processTechnicianData":{"connectors":[{"exitPortType":"NextStep","nodeId":"getWorkGroupData"}],"contextChangePermitted":true,"name":"processTechnicianData","description":"processTechnicianData","processRule":"{if(typeof contextVar.workforceData !== 'undefined' && contextVar.workforceData.length > 0){contextVar.calendarId=contextVar.workforceData[0].workforceCalendarId;}}","nodeType":"PROCESS"},"getShiftData":{"filter":"{$calendarCalendarType} ='shift'","models":["calendar"],"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"columns":{"calendarName":"calendar.name","calendarId":"calendar.id","calendarCalendarType":"calendar.calendarType"},"name":"getShiftData","description":"getShiftData","distinct":true,"orderBy":"calendarName ASC","outputVarMap":{"data":"calendarList"},"nodeType":"QUERY","getCount":true},"multiDecisionNode":{"connectors":[{"condition":"contextVar.workforceAction ==='addInitial' || contextVar.workforceAction ==='add' ","exitPortType":"NextStep","nodeId":"getShiftData"},{"condition":"contextVar.workforceAction === 'edit' || contextVar.workforceAction === 'view' ","exitPortType":"NextStep","nodeId":"getTechnicianData"},{"DefaultStep":true,"condition":"contextVar.subAction=== ''","exitPortType":"NextStep","nodeId":"end"}],"name":"multiDecisionNode","description":"multiDecisionNode","nodeType":"MULTIDECISION"},"getWorkforceContractorData":{"filter":"{$contractorWorkforceId}={@workforceUserId} ","models":["contractorWorkforce","contractorRegion","contractor","region","subRegion"],"connectors":[{"exitPortType":"NextStep","nodeId":"checkWorkforceContractorData"}],"columns":{"contractorRegionSubRegionId":"contractorRegion.subRegionId","contractorWorkforceId":"contractorWorkforce.workforceId","regionId":"region.id","contractorId":"contractor.id","regionName":"region.name","contractorContractorRegionId":"contractorWorkforce.contractorRegionId","contractorRegionRegionId":"contractorRegion.regionId","contractorName":"contractor.name","subRegionId":"subRegion.id","subRegionName":"subRegion.name","contractorWorkforceRecver":"contractorWorkforce.recver","contractorRegionContractorId":"contractorRegion.contractorId"},"name":"getWorkforceContractorData","outerJoinOnModel":"contractorRegion","description":"getWorkforceContractorData","inputVarMap":{"workforceUserId":"workforceUserId"},"outputVarMap":{"data":"contractorDataGrid"},"nodeType":"QUERY","getCount":true},"fetchWeeklyScheduleData":{"connectors":[{"exitPortType":"NextStep","nodeId":"getCrewData"}],"contextChangePermitted":true,"processId":"settingsGeneralCalendarWeeklyScheduleFetchDataWF","name":"fetchWeeklyScheduleData","description":"fetchWeeklyScheduleData","inputVarMap":{"calendarId":"id"},"outputVarMap":{"calendarData":"calendarData"},"nodeType":"WORKFLOW"},"getCrewData":{"filter":"{$workforceCrewWorkforceUserId}={@workforceUserId}","models":["workforce","workforceCrew","crew","ZStatus","User"],"connectors":[{"exitPortType":"NextStep","nodeId":"getWorkforceCrewData"}],"columns":{"workforceCrewWorkforceUserId":"workforceCrew.workforceUserId","crewStatusName":"ZStatus.name","crewLeadName":"User.name","crewId":"crew.id","crewStatusId":"crew.statusId","crewName":"crew.name","crewStartDate":"crew.startDate","crewStatusNameColor":"ZStatus.colorCode","crewEndDate":"crew.endDate"},"name":"getCrewData","distinct":true,"description":"getCrewData","inputVarMap":{"workforceUserId":"workforceUserId"},"links":{"workforce":"User","workforceCrew":"crew","ZStatus":"crew","crew":"workforce"},"outputVarMap":{"data":"crewData"},"nodeType":"QUERY","getCount":true},"end":{"name":"End","description":"end","inputVarMap":{"workforceData":"workforceData","skillSet":"skillSet","workGroup":"workGroup","isSkillSaveDisable":"isSkillSaveDisable","contractorDataGrid":"contractorDataGrid","skillDataGrid":"skillDataGrid","contractorData":"contractorData","crewData":"crewData","calendarList":"calendarList","calendarData":"calendarData"},"outputVarMap":{"workforceData":"workforceData","skillSet":"skillSet","workGroup":"workGroup","isSkillSaveDisable":"isSkillSaveDisable","contractorDataGrid":"contractorDataGrid","skillDataGrid":"skillDataGrid","contractorData":"contractorData","crewData":"crewData","calendarList":"calendarList","calendarData":"calendarData"},"nodeType":"END"},"getWorkforceSkillData":{"filter":"{$workforceSkillUserId}={@workforceUserId}","models":["skill","skillLevel","workforceSkill"],"connectors":[{"exitPortType":"NextStep","nodeId":"processWorkforceSkillData"}],"columns":{"skillName":"skill.name","workforceSkillModifiedDate":"workforceSkill.modifiedDate","skillId":"skill.id","workforceSkillSkillLevelId":"workforceSkill.skillLevelId","workforceSkillRecver":"workforceSkill.recver","skillLevelId":"skillLevel.id","workforceSkillSkillId":"workforceSkill.skillId","skillLevelName":"skillLevel.name","workforceSkillUserId":"workforceSkill.userId"},"name":"getWorkforceSkillData","description":"getWorkforceSkillData","orderBy":"skillName ASC","links":{"workforceSkill":"skill","skillLevel":"workforceSkill"},"inputVarMap":{"workforceUserId":"workforceUserId"},"outputVarMap":{"data":"skillDataGrid"},"nodeType":"QUERY"},"getWorkGroupData":{"filter":"{$workforceUserId}={@workforceUserId}","models":["workGroup","workforceWorkGroup"],"connectors":[{"exitPortType":"NextStep","nodeId":"getWorkforceSkillData"}],"columns":{"workGroupName":"workGroup.name","workforceUserId":"workforceWorkGroup.workforceUserId","workGroupId":"workforceWorkGroup.workGroupId"},"name":"getWorkGroupData","description":"getWorkGroupData","distinct":true,"links":{"workGroup":"workforceWorkGroup"},"inputVarMap":{"workforceUserId":"workforceUserId"},"outputVarMap":{"data":"workGroup"},"nodeType":"QUERY","getCount":true},"getTechnicianData":{"filter":"{$workforceUserId} = {@workforceUserId}","models":["User","workforce","calendar","ZStatus"],"connectors":[{"exitPortType":"NextStep","nodeId":"processTechnicianData"}],"columns":{"workforceCountry":"workforce.country","workforceCity":"workforce.city","workforceModifiedDate":"workforce.modifiedDate","userStatus":"User.status","workforceAddress":"workforce.address","userPhoneNumber":"User.phoneNumber","workforceRecver":"workforce.recver","workforceUserId":"workforce.userId","userName":"User.name","workforcePostalCode":"workforce.postalCode","workforceState":"workforce.state","statusNameColor":"ZStatus.colorCode","calendarName":"Calendar.name","statusName":"ZStatus.name","userEmail":"User.emailId","workforceCalendarId":"workforce.calendarId"},"name":"getTechnicianData","outerJoinOnModel":"workforce","description":"getTechnicianData","inputVarMap":{"workforceUserId":"workforceUserId"},"links":{"calendar":"workforce","User":"workforce","ZStatus":"workforce"},"outputVarMap":{"data":"workforceData"},"nodeType":"QUERY","getCount":true}}