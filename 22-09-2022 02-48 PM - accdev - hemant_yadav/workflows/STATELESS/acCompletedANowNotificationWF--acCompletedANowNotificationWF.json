{"processData":{"connectors":[{"exitPortType":"NextStep","nodeId":"decisionForBanner"}],"contextChangePermitted":true,"name":"processData","description":"processUserDataBeforePageStarts","processRule":"{ contextVar.notificationData = []; for (i = 0; i < contextVar.fetchdatas.length; i++) { if (contextVar.fetchdatas[i].email != '' && contextVar.fetchdatas[i].email != undefined) { contextVar.email = {}; contextVar.email.emailId = contextVar.fetchdatas[i].email; contextVar.email.propertyContactPerson = contextVar.fetchdatas[i].propertyContactPerson; contextVar.email.siteAddress = contextVar.fetchdatas[i].siteAddress; contextVar.email.notificationType = 'EMAIL'; contextVar.email.templateId = 'acCompletedAnowNotification'; contextVar.email.targetType = 'USER'; contextVar.notificationData.push(contextVar.email); } else { contextVar.showBanner = 'true' } if (contextVar.fetchdatas[i].phoneNumber != '' && contextVar.fetchdatas[i].phoneNumber != undefined) { contextVar.phno = {}; contextVar.phno.phoneNumber = contextVar.fetchdatas[i].phoneNumber; contextVar.phno.preferredNotification = 'sms'; contextVar.phno.notificationType = 'sms'; contextVar.phno.templateId = 'acCompletedAnowSMS'; contextVar.phno.targetType = 'USER'; contextVar.phno.siteAddress = contextVar.fetchdatas[i].siteAddress; contextVar.notificationData.push(contextVar.phno); } else { contextVar.showBanner = 'true' } } }","id":"processData","nodeType":"PROCESS"},"fetchdatas":{"models":{"s":"site","wot":"workOrderTask","wf":"workforce"},"connectors":[{"exitPortType":"NextStep","nodeId":"processData"}],"columns":{"assignedToUserId":"wot.assignedToUserId","phoneNumber":"s.contactPhone","propertyContactPerson":"s.contactPerson","siteId":"wot.siteId","siteAddress":"s.address","workOrderId":"wot.workOrderId","userId":"wf.userId","taskId":"wot.id","email":"s.contactEmail","techType":"wf.acWfType"},"description":"Fetch LoggedIn User Details","outerJoinOnModel":"workOrderTask","inputVarMap":{"workOrderId":"workOrderId","techType":"techType"},"nodeType":"QUERY","joinCondition":[{"wf":" wot.z2assigned_to_user_id = wf.z2user_id"},{"s":" s.z2id = wot.z2site_id"}],"filter":"{$workOrderId} = {@workOrderId} && {$techType} = {@techType}","name":"fetchdatas","id":"fetchdatas","outputVarMap":{"data":"fetchdatas"},"getCount":true},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchdatas"}],"name":"start","description":"Start","nodeType":"START"},"decisionForBanner":{"connectors":[{"exitPortType":"TrueStep","nodeId":"notify"},{"exitPortType":"FalseStep","nodeId":"end"}],"name":"decisionForBanner","description":"Use this for decision in workflow","processRule":"if(contextVar.showBanner == 'true'){ false;} else{true;}","id":"decisionForBanner","nodeType":"DECISION"},"end":{"name":"end","description":"End","inputVarMap":{"showBanner":"showBanner"},"outputVarMap":{"showBanner":"showBanner"},"nodeType":"END"},"workflowNodes":["start","fetchdatas","processData","decisionForBanner","notify","end"],"notify":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"name":"notify","description":"notify","inputVarMap":{"notificationData":"notificationData"},"outputVarMap":{},"nodeType":"NOTIFY"}}