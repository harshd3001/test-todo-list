{"getLeadDetails":{"filter":"{$leadUserId}={@leadUserId}","models":["User"],"connectors":[{"exitPortType":"NextStep","nodeId":"upsertTask"}],"columns":{"leadPhoneNumber":"User.phoneNumber","leadEmailId":"User.emailId","leadName":"User.name","leadUserId":"User.id"},"name":"getLeadDetails","description":"Provide some description for your query","inputVarMap":{"leadUserId":"leadUserId"},"id":"getLeadDetails","outputVarMap":{"data":"leadDetails"},"nodeType":"QUERY"},"checkForCrewTask":{"connectors":[{"exitPortType":"TrueStep","nodeId":"processLeadUserId"},{"exitPortType":"FalseStep","nodeId":"upsertTask"}],"name":"isTaskPresent","description":"check if the task is single task or crew","processRule":"(contextVar.isCrewTask)","id":"checkForTaskType","nodeType":"DECISION"},"processData":{"connectors":[{"exitPortType":"NextStep","nodeId":"checkForCrewTask"}],"contextChangePermitted":true,"name":"processData","description":"process inputs from page","processRule":"{contextVar.statusId='workOrderTaskDiscontinued';contextVar.submitType='submitTaskProgress';contextVar.incidentDetails = contextVar.incidentDetailsFetched[0].incidentDetails ? contextVar.incidentDetailsFetched[0].incidentDetails : [];contextVar.incidentDetails = Array.isArray(contextVar.incidentDetails) ? contextVar.incidentDetails : JSON.parse(contextVar.incidentDetails);contextVar.incidentDetailValues = {};contextVar.incidentDetailValues.reportIssueCapturedTime = contextVar.reportIssueCapturedTime;contextVar.incidentDetailValues.reportIssueLocationCoordinates = contextVar.reportIssueLocationCoordinates;contextVar.incidentDetailValues.incidentTypeValue = contextVar.incidentTypeValue;contextVar.incidentDetailValues.incidentReason = contextVar.incidentReason;contextVar.incidentDetailValues.reportIssueDescription = contextVar.reportIssueDescription;contextVar.incidentDetailValues.reportIssuePhotoFirst = contextVar.reportIssuePhotoFirst;contextVar.incidentDetailValues.reportIssuePhotoSecond = contextVar.reportIssuePhotoSecond;contextVar.incidentDetailValues.reportIssueType = contextVar.reportIssueType;contextVar.incidentDetailValues.reportIssueTechnician = contextVar.userId;contextVar.incidentDetails.push(contextVar.incidentDetailValues);}","id":"processData","nodeType":"PROCESS"},"upsertTask":{"connectors":[{"exitPortType":"NextStep","nodeId":"end"}],"contextChangePermitted":true,"processId":"mdtStatusUpdateForSubmitPage","name":"upsertTask","description":"upsertTask","inputVarMap":{},"outputVarMap":{},"nodeType":"WORKFLOW"},"workflowContext":{"statusTargetModel":"workOrderTask","incidentDetails":[],"statusId":"workOrderTaskDiscontinued","eventType":"incident","reportIssueType":"unableToContinue","incidentDetailValues":{}},"processLeadUserId":{"connectors":[{"exitPortType":"NextStep","nodeId":"getLeadDetails"}],"contextChangePermitted":true,"name":"processData","description":"process inputs from page","processRule":"contextVar.leadUserId=contextVar.crewAttendanceDetailsList[0].leadUserId","id":"processLeadUserId","nodeType":"PROCESS"},"setReason":{"connectors":[{"exitPortType":"NextStep","nodeId":"processData"}],"contextChangePermitted":true,"name":"setReason","description":"process inputs from page","processRule":"{ if(typeof contextVar.incidentTypeValue!='undefined' && contextVar.incidentTypeValue!='' && contextVar.incidentTypeValue=='travelIncident'){contextVar.incidentReason=contextVar.travelIncidentReason}  else if (typeof contextVar.incidentTypeValue!='undefined' && contextVar.incidentTypeValue!='' && contextVar.incidentTypeValue=='checkInIncident'){contextVar.incidentReason=contextVar.checkInIncidentReason}  else if (typeof contextVar.incidentTypeValue!='undefined' && contextVar.incidentTypeValue!='' && contextVar.incidentTypeValue=='activityIncident'){contextVar.incidentReason=contextVar.activityIncidentReason}}","id":"setReason","nodeType":"PROCESS"},"start":{"connectors":[{"exitPortType":"NextStep","nodeId":"fetchCurrentUser"}],"name":"start","description":"Start","id":"start","nodeType":"START"},"end":{"name":"end","description":"End","inputVarMap":{"unassignedTask":"data"},"outputVarMap":{"unassignedTask":"data"},"id":"end","nodeType":"END"},"workflowNodes":["start","fetchCurrentUser","fetchIncidentDetails","setReason","processData","checkForCrewTask","processLeadUserId","getLeadDetails","upsertTask","end"],"fetchIncidentDetails":{"filter":"{$id} = {@taskId}","models":["workOrderTask"],"connectors":[{"exitPortType":"NextStep","nodeId":"setReason"}],"columns":{"incidentDetails":"workOrderTask.incidentDetails","id":"workOrderTask.id"},"name":"fetchIncidentDetails","description":"fetch incidentDetails","inputVarMap":{"taskId":"taskId"},"id":"fetchIncidentDetails","outputVarMap":{"data":"incidentDetailsFetched"},"nodeType":"QUERY"},"fetchCurrentUser":{"filter":"{$userId}={@userId}","models":["User"],"connectors":[{"exitPortType":"NextStep","nodeId":"fetchIncidentDetails"}],"columns":{"userName":"User.name","userId":"User.id"},"name":"fetchCurrentUser","description":"fetchCurrentUser","inputVarMap":{"{@userId}":"userId"},"outputVarMap":{"data":"currentUserDetail"},"nodeType":"QUERY"}}