{"dynamicFilter":{"workOrderTaskDueDate":"Date","workOrderDeadline":"Date","customerCompanyName":"string","regionName":"string","statusName":"string","workOrderTaskId":"string","siteName":"string","crewName":"string","workOrderId":"string","taskTypeName":"string","userName":"string"},"isScrollAble":true,"deleteAllowed":false,"searchAllowed":true,"tableWidth":"135rem","searchEmptyScreen":{"image":"@iconlib.ActionsSearchError","contentValue":"@lang.['sysrcue','SORRY! YOUR SEARCH RESULTS CAME UP EMPTY ']","type":"noData"},"rowActions":{"children":[{"activeIcon":"@iconlib.MenuWorkOrdersSolidPurple","name":"@lang.['v','viewWorkOrder']","tooltip":"@lang.['vwo','View Work Order']","icon":"@iconlib.MenuWorkOrdersSolidGrey","actionOnClick":["@actions.setWorkOrderActionView","@actions.openViewWorkOrderSidePanel"],"type":"buttonIcon"},{"activeIcon":"@iconlib.ActionsScheduleAssignPurple","hidden":{"status":["workOrderTaskAutoScheduling"]},"name":"@lang.['s8','schedulingAssign']","icon":"@iconlib.ActionsScheduleAssignGrey","tooltip":"@lang.['sa','Schedule & Assign']","actionOnClick":["@actions.setInitialLoad","@actions.setActionSchedule","@actions.openEditScheduleSidePanel"],"type":"buttonIcon"},{"activeIcon":"https://d122pusslfmuhu.cloudfront.net/field-service-elements/icons/dispatch-truck-purple.svg","hidden":{"status":["workOrderTaskOpen","workOrderTaskReopened","workOrderTaskAutoScheduling"]},"name":"@lang.['d26','Dispatch']","icon":"https://d122pusslfmuhu.cloudfront.net/field-service-elements/icons/dispatch-truck-grey.svg","tooltip":"@lang.['d26','Dispatch']","actionOnClick":["@actions.setTaskStatusToDispatch","@actions.decisionActionCheckCrewTask","@actions.fetchValidationCheckData","@actions.processValidationCheckData","@actions.decisionActionForScheduledStartDate"],"type":"buttonIcon"},{"activeIcon":"@iconlib.ActionsVisiblePurple","hidden":{"status":["workOrderTaskOpen","workOrderTaskReopened","workOrderTaskScheduled"]},"name":"@lang.['vt','View Task']","icon":"@iconlib.ActionsVisibleGrey","tooltip":"@lang.['vt','View Task']","actionOnClick":["@actions.setInitialLoad","@actions.setActionView","@actions.openEditScheduleSidePanel"],"type":"buttonIcon"}]},"modifyRowActions":[],"gridRefreshId":"taskSchedulingOpenTaskDataGrid","emptyScreen":{"image":"@iconlib.ActionsSearchEmpty","contentValue":"@lang.['ylieatm','YOUR LIST IS EMPTY AT THE MOMENT']","type":"noData"},"isSync":true,"tableHeader":[{"name":"@lang.['s','Status']","options":{"flex":1.2,"sortOrder":"ASC","currentSorted":false,"colorCode":"statusNameColor","sortable":true,"showLabel":true},"key":"statusName"},{"name":"@lang.['priority','Priority']","options":{"isSlaPauseDisplayed":"false","flex":1,"slaTextColor":"slaTextColor","slaColor":"priorityColor","sortable":false,"zTimer":true,"iconUrl":"iconUrl","showLabel":true},"key":"priorityName"},{"name":"@lang.['taskId','Task ID']","options":{"flex":1.2,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"workOrderTaskId"},{"name":"@lang.['WorkOrderId','Work Order ID']","options":{"flex":1.6,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"workOrderId"},{"name":"@lang.['d4','Deadline']","options":{"flex":1.8,"sortOrder":"ASC","sortable":true,"type":"dateTime","showLabel":true},"key":"workOrderDeadline"},{"name":"@lang.['navAW','Appointment Window']","options":{"flex":1.6,"sortOrder":"ASC","dateRangeType":"datetime","type":"dateRange","showLabel":true},"key":"workOrderTaskAppointmentWindow"},{"name":"@lang.['st16','Scheduled Time']","options":{"flex":1.6,"sortOrder":"ASC","dateRangeType":"datetime","type":"dateRange","showLabel":true},"key":"workOrderTaskScheduledTime"},{"name":"@lang.['taskType','Task Type']","options":{"flex":2.2,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"taskTypeName"},{"name":"@lang.['a4','Assignee']","options":{"flex":1.7,"showLabel":true},"key":"assignee"},{"name":"@lang.['customer','Customer']","options":{"flex":1.8,"showLabel":true},"key":"customerCompanyName"},{"name":"@lang.['cs','Customer Site']","options":{"flex":1.8,"sortOrder":"ASC","sortable":true,"showLabel":true},"key":"siteName"},{"name":"@lang.['r1','Region']","options":{"flex":1,"showLabel":true},"key":"regionName"},{"name":"@lang.['tn1','Technician Name']","options":{"hidden":true,"showLabel":false},"key":"userName"},{"name":"@lang.['cn4','Crew Name']","options":{"hidden":true,"showLabel":false},"key":"crewName"}],"dataToBeSent":{"apiResponseParams":["count"],"processId":"NI7F9488VO","apiResponseFormat":true,"contextVar":{"statusFilter":["workOrderTaskOpen","workOrderTaskScheduled","workOrderTaskReopened","workOrderTaskAutoScheduling"]},"apiResponseObject":"schedulingAndDispatchData"},"dataSourceId":"process/start","sourceType":"api","rowTextLength":50,"jslib":{"popUpText":"function (pageContext) { if (pageContext.timeFrameFilter === 'today') { return( 'Are you sure you want to dispatch all tasks scheduled for today? The assigned technician will be notified immediately.'); } else if (pageContext.timeFrameFilter === 'tomorrow') { return( 'Are you sure you want to dispatch all tasks scheduled for tomorrow? The assigned technician will be notified immediately.'); } else if (pageContext.timeFrameFilter === 'next3Days') { return( 'Are you sure you want to dispatch all tasks scheduled for next 3 days? The assigned technician will be notified immediately.'); } else if (pageContext.timeFrameFilter === 'next7Days') { return( 'Are you sure you want to dispatch all tasks scheduled for next 7 days? The assigned technician will be notified immediately.'); } }"},"header":{"filterAllowed":true,"subHeaderText":"@lang.['r','Records']","headerText":"@lang.['navOT','Open Tasks']","children":[{"data":[{"buttonType":"secondary","actionOnClick":["@actions.setTodayTimeFilter","@actions.openModalForDispatchTasks"],"id":"today","type":"button","title":"@lang.['t15','Today']"},{"buttonType":"secondary","actionOnClick":["@actions.setTomorrowTimeFilter","@actions.openModalForDispatchTasks"],"id":"tomorrow","type":"button","title":"@lang.['t16','Tomorrow']"},{"buttonType":"secondary","actionOnClick":["@actions.setNext3DaysTimeFilter","@actions.openModalForDispatchTasks"],"id":"next3days","type":"button","title":"@lang.['n3d','Next 3 Days']"},{"buttonType":"secondary","actionOnClick":["@actions.setNext7DaysTimeFilter","@actions.openModalForDispatchTasks"],"id":"next7days","type":"button","title":"@lang.['n7d','Next 7 Days']"}],"type":"actionDropdown","title":"@lang.['dt7','Dispatch Tasks']"},{"buttonType":"primary","actionOnClick":["@actions.openAutoScheduleSidePanel"],"id":"autoSchedule","type":"button","title":"@lang.['as2','Auto Schedule']"}]},"enableSidePanelFilter":true,"isSelectable":false,"dataSource":[],"actions":[{"name":"openAutoScheduleSidePanel","type":"openPanel","pageId":"F9Y5EC974I"},{"name":"setActionSchedule","type":"script","actionDef":"function(pageContext){pageContext.action='openTask';}"},{"name":"setInitialLoad","type":"script","actionDef":"function(pageContext){pageContext.initialLoad=true;}"},{"name":"openViewWorkOrderSidePanel","type":"openPanel","pageId":"SKFTPK7JHU"},{"name":"openEditScheduleSidePanel","type":"openPanel","pageId":"NTX9P88A3P"},{"name":"refreshDataGrid","type":"refreshDataGrid"},{"name":"setWorkOrderActionView","type":"script","actionDef":"function(pageContext){pageContext.workOrderAction='showWorkOrder'; pageContext.subAction='viewWorkOrder';}"},{"falseStep":["@actions.decisionActionForTechnicianOnCrew"],"trueStep":["@actions.openModalUnableToDispatchTechnician"],"name":"decisionActionForScheduledStartDate","type":"decision","actionDef":"function(pageContext){return pageContext.scheduledDateIssue}"},{"falseStep":[],"trueStep":["@actions.fetchCrewLeadUserId","@actions.setCrewLeadId"],"name":"decisionActionCheckCrewTask","type":"decision","actionDef":"function(pageContext){return pageContext.taskTypeCrewTask}"},{"subTitle":"@lang.['ssdotthepeandtc','Scheduled start date of the task has expired. Please enter a new date to continue']","name":"openModalUnableToDispatchTechnician","options":[{"buttonType":"secondary","name":"no","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.closeModal","@actions.openTaskSP"],"type":"button","title":"@lang.['vd','View Details']"}],"type":"openModal","title":"@lang.['utd1','Unable to dispatch']"},{"falseStep":["@actions.taskDependencyDecision"],"trueStep":["@actions.openModalOverrideTechnicianOnCrew"],"name":"decisionActionForTechnicianOnCrew","type":"decision","actionDef":"function(pageContext){return pageContext.crewIssue}"},{"subTitle":"@lang.['tatabtacambatotaysywtatttt','The assigned technician already belongs to a crew and may be assigned to other tasks. Are you sure you want to assign this task to them?']","name":"openModalOverrideTechnicianOnCrew","options":[{"buttonType":"secondary","name":"no","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.closeModal","@actions.taskDependencyDecision"],"type":"button","title":"@lang.['c13','Continue']"}],"type":"openModal","title":"@lang.['toc','Technician on Crew']"},{"falseStep":["@actions.openModalDispatchToTechnician"],"trueStep":["@actions.openModalOverrideDependency"],"name":"taskDependencyDecision","type":"decision","actionDef":"function(pageContext){return pageContext.dependencyIssue}"},{"subTitle":"@lang.['tthapddywtotdadtt','This task has a pending dependency. Do you want to override the dependency and dispatch this task?']","name":"openModalOverrideDependency","options":[{"buttonType":"secondary","name":"no","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.closeModal","@actions.setDependencyOverrideSourceDispatch","@actions.openOverrideNSP"],"type":"button","title":"@lang.['c13','Continue']"}],"type":"openModal","title":"@lang.['dt3','Dispatch Task']"},{"subTitle":"@lang.['aysywtdtt','Are you sure you want to dispatch this task?']","name":"openModalDispatchToTechnician","options":[{"buttonType":"secondary","name":"no","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes ","actionOnClick":["@actions.fireProcessEventForWorkOrderTask","@actions.closeModal","@actions.refreshDataGrid"],"type":"button","title":"@lang.['yp1','Yes Proceed']"}],"type":"openModal","title":"@lang.['dt3','Dispatch Task']"},{"name":"openOverrideNSP","type":"openPanel","pageId":"7EXQWZDPS8"},{"name":"refreshDataGrid","type":"refreshDataGrid"},{"name":"openTaskSP","type":"openPanel","pageId":"NTX9P88A3P"},{"name":"setTaskStatusToDispatch","type":"script","actionDef":"function(pageContext) { pageContext.directDispatch = true; pageContext.workOrderTaskStatusId = 'workOrderTaskDispatched'; pageContext.eventType = 'workOrderTaskDispatched'; pageContext.subAction = 'upsertWorkOrderTask'; }"},{"endPoint":"event/start","name":"fireProcessEventForWorkOrderTask","type":"api","actionDef":{"data":[{"eventId":"BM58GU7UNT","contextVar":{"workOrderTask":{"assignedToUserId":"@pageContext.workOrderTaskAssignedToUserId","statusId":"@pageContext.workOrderTaskStatusId","statusTargetModel":"workOrderTask","eventType":"@pageContext.eventType","id":"@pageContext.workOrderTaskId","assignedToCrewId":"@pageContext.workOrderTaskAssignedToCrewId"},"subAction":"upsertWorkOrderTask"}}]}},{"name":"closeModal","type":"closeModal"},{"endPoint":"event/start","name":"fetchValidationCheckData","outputVarMap":{"data":"@pageContext.validationCheckData"},"type":"api","actionDef":{"data":[{"eventId":"taskSchedulingDispatchValidationCheckProcessEvent","inputVar":{},"apiResponseFormat":true,"contextVar":{"dependentTaskStatusId":"@pageContext.workOrderTaskStatusId","workOrderTaskId":"@pageContext.workOrderTaskId","workOrderId":"@pageContext.workOrderId"}}]}},{"async":true,"name":"processValidationCheckData","type":"script","actionDef":"function (pageContext) {pageContext.enable = true; if (Array.isArray(pageContext.validationCheckData) && pageContext.validationCheckData.length > 0) { pageContext.crewIssue = pageContext.validationCheckData[0].data[0].crewIssue; pageContext.dependencyIssue = pageContext.validationCheckData[0].data[0].dependencyIssue; pageContext.scheduledDateIssue = pageContext.validationCheckData[0].data[0].scheduledDateIssue; } }"},{"name":"setDependencyOverrideSourceDispatch","type":"script","actionDef":"function(pageContext){pageContext.dependencyOverrideSource = 'dispatch';pageContext.directDispatch = true;}"},{"name":"fetchCrewLeadUserId","outputVarMap":{"data":"@pageContext.crewData"},"type":"query","actionDef":{"filter":"{$crew.id} = {@crewId}","models":["crew"],"inputs":{"crewId":"@pageContext.workOrderTaskAssignedToCrewId"},"columns":{"crewLeadUserId":"crew.leadUserId","crewStatusId":"crew.statusId"}}},{"name":"setCrewLeadId","type":"script","actionDef":"function (pageContext) { if(Array.isArray(pageContext.crewData) && pageContext.crewData.length > 0){ pageContext.workOrderTaskAssignedToUserId = pageContext.crewData[0].crewLeadUserId; pageContext.crewStatusId  = pageContext.crewData[0].crewStatusId;} }"},{"endPoint":"process/start","name":"fetchTasksAndDispatch","outputVarMap":{"data":"@pageContext.queryData"},"type":"api","actionDef":{"data":[{"inputVar":{},"processId":"taskSchedulingBulkDispatchTasksFilterWF","contextVar":{"timezoneOffset":"@pageContext.timezoneOffset","timeFrameFilter":"@pageContext.timeFrameFilter"}}]}},{"subTitle":"@jslib.popUpText","name":"openModalForDispatchTasks","options":[{"buttonType":"secondary","name":"no","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['c2','Cancel']"},{"buttonType":"primary","name":"yes","actionOnClick":["@actions.closeModal","@actions.fetchTasksAndDispatch","@actions.ifTasksNotAvailableForDispatch"],"type":"button","title":"@lang.['yp','Yes, Proceed']"}],"type":"openModal","title":"@lang.['dt7','Dispatch Tasks']"},{"falseStep":["@actions.refreshDataGrid"],"trueStep":["@actions.openModalNoTasksAvailable"],"name":"ifTasksNotAvailableForDispatch","type":"decision","actionDef":"function (pageContext) {return(typeof pageContext.queryData[0].outputVar.tasksData === 'undefined' || pageContext.queryData[0].outputVar.tasksData.length === 0)}"},{"subTitle":"@lang.['nstrtbd','No scheduled tasks remained to be dispatched.']","name":"openModalNoTasksAvailable","options":[{"buttonType":"primary","name":"ok","actionOnClick":["@actions.closeModal"],"type":"button","title":"@lang.['o2','OK']"}],"type":"openModal","title":"@lang.['dt7','Dispatch Tasks']"},{"name":"setTodayTimeFilter","type":"script","actionDef":"function(pageContext){pageContext.timeFrameFilter='today'; pageContext.timezoneOffset=new Date().getTimezoneOffset();}"},{"name":"setTomorrowTimeFilter","type":"script","actionDef":"function(pageContext){pageContext.timeFrameFilter='tomorrow'; pageContext.timezoneOffset=new Date().getTimezoneOffset();}"},{"name":"setNext3DaysTimeFilter","type":"script","actionDef":"function(pageContext){pageContext.timeFrameFilter='next3Days'; pageContext.timezoneOffset=new Date().getTimezoneOffset();}"},{"name":"setNext7DaysTimeFilter","type":"script","actionDef":"function(pageContext){pageContext.timeFrameFilter='next7Days'; pageContext.timezoneOffset=new Date().getTimezoneOffset();}"},{"name":"setActionView","type":"script","actionDef":"function(pageContext){pageContext.action='view';}"}],"searchKeys":["statusName","workOrderId","workOrderTaskId","taskTypeName","siteName","crewName","userName","regionName","customerCompanyName"]}